{"version":3,"file":"jsoneditor-react.min.js","sources":["../node_modules/jsoneditor/dist/jsoneditor-minimalist.js","../src/Editor.jsx"],"sourcesContent":["/*!\n * jsoneditor.js\n *\n * @brief\n * JSONEditor is a web-based tool to view, edit, format, and validate JSON.\n * It has various modes such as a tree editor, a code editor, and a plain text\n * editor.\n *\n * Supported browsers: Chrome, Firefox, Safari, Opera, Internet Explorer 8+\n *\n * @license\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy\n * of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n *\n * Copyright (c) 2011-2017 Jos de Jong, http://jsoneditoronline.org\n *\n * @author  Jos de Jong, <wjosdejong@gmail.com>\n * @version 5.24.3\n * @date    2018-08-29\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JSONEditor\"] = factory();\n\telse\n\t\troot[\"JSONEditor\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar Ajv;\n\ttry {\n\t  Ajv = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"ajv\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t}\n\tcatch (err) {\n\t  // no problem... when we need Ajv we will throw a neat exception\n\t}\n\n\tvar ace = __webpack_require__(1); // may be undefined in case of minimalist bundle\n\tvar VanillaPicker = __webpack_require__(5); // may be undefined in case of minimalist bundle\n\n\tvar treemode = __webpack_require__(6);\n\tvar textmode = __webpack_require__(28);\n\tvar util = __webpack_require__(12);\n\n\t/**\n\t * @constructor JSONEditor\n\t * @param {Element} container    Container element\n\t * @param {Object}  [options]    Object with options. available options:\n\t *                               {String} mode        Editor mode. Available values:\n\t *                                                    'tree' (default), 'view',\n\t *                                                    'form', 'text', and 'code'.\n\t *                               {function} onChange  Callback method, triggered\n\t *                                                    on change of contents.\n\t *                                                    Does not pass the contents itself.\n\t *                                                    See also `onChangeJSON` and\n\t *                                                    `onChangeText`.\n\t *                               {function} onChangeJSON  Callback method, triggered\n\t *                                                        in modes on change of contents,\n\t *                                                        passing the changed contents\n\t *                                                        as JSON.\n\t *                                                        Only applicable for modes\n\t *                                                        'tree', 'view', and 'form'.\n\t *                               {function} onChangeText  Callback method, triggered\n\t *                                                        in modes on change of contents,\n\t *                                                        passing the changed contents\n\t *                                                        as stringified JSON.\n\t *                               {function} onError   Callback method, triggered\n\t *                                                    when an error occurs\n\t *                               {Boolean} search     Enable search box.\n\t *                                                    True by default\n\t *                                                    Only applicable for modes\n\t *                                                    'tree', 'view', and 'form'\n\t *                               {Boolean} history    Enable history (undo/redo).\n\t *                                                    True by default\n\t *                                                    Only applicable for modes\n\t *                                                    'tree', 'view', and 'form'\n\t *                               {String} name        Field name for the root node.\n\t *                                                    Only applicable for modes\n\t *                                                    'tree', 'view', and 'form'\n\t *                               {Number} indentation     Number of indentation\n\t *                                                        spaces. 4 by default.\n\t *                                                        Only applicable for\n\t *                                                        modes 'text' and 'code'\n\t *                               {boolean} escapeUnicode  If true, unicode\n\t *                                                        characters are escaped.\n\t *                                                        false by default.\n\t *                               {boolean} sortObjectKeys If true, object keys are\n\t *                                                        sorted before display.\n\t *                                                        false by default.\n\t *                               {function} onSelectionChange Callback method, \n\t *                                                            triggered on node selection change\n\t *                                                            Only applicable for modes\n\t *                                                            'tree', 'view', and 'form'\n\t *                               {function} onTextSelectionChange Callback method, \n\t *                                                                triggered on text selection change\n\t *                                                                Only applicable for modes\n\t *                               {HTMLElement} modalAnchor        The anchor element to apply an\n\t *                                                                overlay and display the modals in a\n\t *                                                                centered location.\n\t *                                                                Defaults to document.body\n\t *                                                                'text' and 'code'\n\t *                               {function} onEvent Callback method, triggered\n\t *                                                  when an event occurs in\n\t *                                                  a JSON field or value.\n\t *                                                  Only applicable for\n\t *                                                  modes 'form', 'tree' and\n\t *                                                  'view'\n\t * @param {Object | undefined} json JSON object\n\t */\n\tfunction JSONEditor (container, options, json) {\n\t  if (!(this instanceof JSONEditor)) {\n\t    throw new Error('JSONEditor constructor called without \"new\".');\n\t  }\n\n\t  // check for unsupported browser (IE8 and older)\n\t  var ieVersion = util.getInternetExplorerVersion();\n\t  if (ieVersion != -1 && ieVersion < 9) {\n\t    throw new Error('Unsupported browser, IE9 or newer required. ' +\n\t        'Please install the newest version of your browser.');\n\t  }\n\n\t  if (options) {\n\t    // check for deprecated options\n\t    if (options.error) {\n\t      console.warn('Option \"error\" has been renamed to \"onError\"');\n\t      options.onError = options.error;\n\t      delete options.error;\n\t    }\n\t    if (options.change) {\n\t      console.warn('Option \"change\" has been renamed to \"onChange\"');\n\t      options.onChange = options.change;\n\t      delete options.change;\n\t    }\n\t    if (options.editable) {\n\t      console.warn('Option \"editable\" has been renamed to \"onEditable\"');\n\t      options.onEditable = options.editable;\n\t      delete options.editable;\n\t    }\n\n\t    // warn if onChangeJSON is used when mode can be `text` or `code`\n\t    if (options.onChangeJSON) {\n\t      if (options.mode === 'text' || options.mode === 'code' ||\n\t          (options.modes && (options.modes.indexOf('text') !== -1 || options.modes.indexOf('code') !== -1))) {\n\t        console.warn('Option \"onChangeJSON\" is not applicable to modes \"text\" and \"code\". ' +\n\t            'Use \"onChangeText\" or \"onChange\" instead.');\n\t      }\n\t    }\n\n\t    // validate options\n\t    if (options) {\n\t      Object.keys(options).forEach(function (option) {\n\t        if (JSONEditor.VALID_OPTIONS.indexOf(option) === -1) {\n\t          console.warn('Unknown option \"' + option + '\". This option will be ignored');\n\t        }\n\t      });\n\t    }\n\t  }\n\n\t  if (arguments.length) {\n\t    this._create(container, options, json);\n\t  }\n\t}\n\n\t/**\n\t * Configuration for all registered modes. Example:\n\t * {\n\t *     tree: {\n\t *         mixin: TreeEditor,\n\t *         data: 'json'\n\t *     },\n\t *     text: {\n\t *         mixin: TextEditor,\n\t *         data: 'text'\n\t *     }\n\t * }\n\t *\n\t * @type { Object.<String, {mixin: Object, data: String} > }\n\t */\n\tJSONEditor.modes = {};\n\n\t// debounce interval for JSON schema vaidation in milliseconds\n\tJSONEditor.prototype.DEBOUNCE_INTERVAL = 150;\n\n\tJSONEditor.VALID_OPTIONS = [\n\t  'ajv', 'schema', 'schemaRefs','templates',\n\t  'ace', 'theme', 'autocomplete',\n\t  'onChange', 'onChangeJSON', 'onChangeText',\n\t  'onEditable', 'onError', 'onEvent', 'onModeChange', 'onValidate',\n\t  'onSelectionChange', 'onTextSelectionChange',\n\t  'colorPicker', 'onColorPicker',\n\t  'timestampTag',\n\t  'escapeUnicode', 'history', 'search', 'mode', 'modes', 'name', 'indentation',\n\t  'sortObjectKeys', 'navigationBar', 'statusBar', 'languages', 'language'\n\t];\n\n\t/**\n\t * Create the JSONEditor\n\t * @param {Element} container    Container element\n\t * @param {Object}  [options]    See description in constructor\n\t * @param {Object | undefined} json JSON object\n\t * @private\n\t */\n\tJSONEditor.prototype._create = function (container, options, json) {\n\t  this.container = container;\n\t  this.options = options || {};\n\t  this.json = json || {};\n\n\t  var mode = this.options.mode || (this.options.modes && this.options.modes[0]) || 'tree';\n\t  this.setMode(mode);\n\t};\n\n\t/**\n\t * Destroy the editor. Clean up DOM, event listeners, and web workers.\n\t */\n\tJSONEditor.prototype.destroy = function () {};\n\n\t/**\n\t * Set JSON object in editor\n\t * @param {Object | undefined} json      JSON data\n\t */\n\tJSONEditor.prototype.set = function (json) {\n\t  this.json = json;\n\t};\n\n\t/**\n\t * Get JSON from the editor\n\t * @returns {Object} json\n\t */\n\tJSONEditor.prototype.get = function () {\n\t  return this.json;\n\t};\n\n\t/**\n\t * Set string containing JSON for the editor\n\t * @param {String | undefined} jsonText\n\t */\n\tJSONEditor.prototype.setText = function (jsonText) {\n\t  this.json = util.parse(jsonText);\n\t};\n\n\t/**\n\t * Get stringified JSON contents from the editor\n\t * @returns {String} jsonText\n\t */\n\tJSONEditor.prototype.getText = function () {\n\t  return JSON.stringify(this.json);\n\t};\n\n\t/**\n\t * Set a field name for the root node.\n\t * @param {String | undefined} name\n\t */\n\tJSONEditor.prototype.setName = function (name) {\n\t  if (!this.options) {\n\t    this.options = {};\n\t  }\n\t  this.options.name = name;\n\t};\n\n\t/**\n\t * Get the field name for the root node.\n\t * @return {String | undefined} name\n\t */\n\tJSONEditor.prototype.getName = function () {\n\t  return this.options && this.options.name;\n\t};\n\n\t/**\n\t * Change the mode of the editor.\n\t * JSONEditor will be extended with all methods needed for the chosen mode.\n\t * @param {String} mode     Available modes: 'tree' (default), 'view', 'form',\n\t *                          'text', and 'code'.\n\t */\n\tJSONEditor.prototype.setMode = function (mode) {\n\t  // if the mode is the same as current mode (and it's not the first time), do nothing.\n\t  if (mode === this.options.mode && this.create) {\n\t    return;\n\t  }\n\n\t  var container = this.container;\n\t  var options = util.extend({}, this.options);\n\t  var oldMode = options.mode;\n\t  var data;\n\t  var name;\n\n\t  options.mode = mode;\n\t  var config = JSONEditor.modes[mode];\n\t  if (config) {\n\t    try {\n\t      var asText = (config.data == 'text');\n\t      name = this.getName();\n\t      data = this[asText ? 'getText' : 'get'](); // get text or json\n\n\t      this.destroy();\n\t      util.clear(this);\n\t      util.extend(this, config.mixin);\n\t      this.create(container, options);\n\n\t      this.setName(name);\n\t      this[asText ? 'setText' : 'set'](data); // set text or json\n\n\t      if (typeof config.load === 'function') {\n\t        try {\n\t          config.load.call(this);\n\t        }\n\t        catch (err) {\n\t          console.error(err);\n\t        }\n\t      }\n\n\t      if (typeof options.onModeChange === 'function' && mode !== oldMode) {\n\t        try {\n\t          options.onModeChange(mode, oldMode);\n\t        }\n\t        catch (err) {\n\t          console.error(err);\n\t        }\n\t      }\n\t    }\n\t    catch (err) {\n\t      this._onError(err);\n\t    }\n\t  }\n\t  else {\n\t    throw new Error('Unknown mode \"' + options.mode + '\"');\n\t  }\n\t};\n\n\t/**\n\t * Get the current mode\n\t * @return {string}\n\t */\n\tJSONEditor.prototype.getMode = function () {\n\t  return this.options.mode;\n\t};\n\n\t/**\n\t * Throw an error. If an error callback is configured in options.error, this\n\t * callback will be invoked. Else, a regular error is thrown.\n\t * @param {Error} err\n\t * @private\n\t */\n\tJSONEditor.prototype._onError = function(err) {\n\t  if (this.options && typeof this.options.onError === 'function') {\n\t    this.options.onError(err);\n\t  }\n\t  else {\n\t    throw err;\n\t  }\n\t};\n\n\t/**\n\t * Set a JSON schema for validation of the JSON object.\n\t * To remove the schema, call JSONEditor.setSchema(null)\n\t * @param {Object | null} schema\n\t * @param {Object.<string, Object>=} schemaRefs Schemas that are referenced using the `$ref` property from the JSON schema that are set in the `schema` option,\n\t +  the object structure in the form of `{reference_key: schemaObject}`\n\t */\n\tJSONEditor.prototype.setSchema = function (schema, schemaRefs) {\n\t  // compile a JSON schema validator if a JSON schema is provided\n\t  if (schema) {\n\t    var ajv;\n\t    try {\n\t      // grab ajv from options if provided, else create a new instance\n\t      ajv = this.options.ajv || Ajv({ allErrors: true, verbose: true });\n\n\t    }\n\t    catch (err) {\n\t      console.warn('Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.');\n\t    }\n\n\t    if (ajv) {\n\t      if(schemaRefs) {\n\t        for (var ref in schemaRefs) {\n\t          ajv.removeSchema(ref);  // When updating a schema - old refs has to be removed first\n\t          if(schemaRefs[ref]) {\n\t            ajv.addSchema(schemaRefs[ref], ref);\n\t          }\n\t        }\n\t        this.options.schemaRefs = schemaRefs;\n\t      }\n\t      this.validateSchema = ajv.compile(schema);\n\n\t      // add schema to the options, so that when switching to an other mode,\n\t      // the set schema is not lost\n\t      this.options.schema = schema;\n\n\t      // validate now\n\t      this.validate();\n\t    }\n\n\t    this.refresh(); // update DOM\n\t  }\n\t  else {\n\t    // remove current schema\n\t    this.validateSchema = null;\n\t    this.options.schema = null;\n\t    this.options.schemaRefs = null;\n\t    this.validate(); // to clear current error messages\n\t    this.refresh();  // update DOM\n\t  }\n\t};\n\n\t/**\n\t * Validate current JSON object against the configured JSON schema\n\t * Throws an exception when no JSON schema is configured\n\t */\n\tJSONEditor.prototype.validate = function () {\n\t  // must be implemented by treemode and textmode\n\t};\n\n\t/**\n\t * Refresh the rendered contents\n\t */\n\tJSONEditor.prototype.refresh = function () {\n\t  // can be implemented by treemode and textmode\n\t};\n\n\t/**\n\t * Register a plugin with one ore multiple modes for the JSON Editor.\n\t *\n\t * A mode is described as an object with properties:\n\t *\n\t * - `mode: String`           The name of the mode.\n\t * - `mixin: Object`          An object containing the mixin functions which\n\t *                            will be added to the JSONEditor. Must contain functions\n\t *                            create, get, getText, set, and setText. May have\n\t *                            additional functions.\n\t *                            When the JSONEditor switches to a mixin, all mixin\n\t *                            functions are added to the JSONEditor, and then\n\t *                            the function `create(container, options)` is executed.\n\t * - `data: 'text' | 'json'`  The type of data that will be used to load the mixin.\n\t * - `[load: function]`       An optional function called after the mixin\n\t *                            has been loaded.\n\t *\n\t * @param {Object | Array} mode  A mode object or an array with multiple mode objects.\n\t */\n\tJSONEditor.registerMode = function (mode) {\n\t  var i, prop;\n\n\t  if (util.isArray(mode)) {\n\t    // multiple modes\n\t    for (i = 0; i < mode.length; i++) {\n\t      JSONEditor.registerMode(mode[i]);\n\t    }\n\t  }\n\t  else {\n\t    // validate the new mode\n\t    if (!('mode' in mode)) throw new Error('Property \"mode\" missing');\n\t    if (!('mixin' in mode)) throw new Error('Property \"mixin\" missing');\n\t    if (!('data' in mode)) throw new Error('Property \"data\" missing');\n\t    var name = mode.mode;\n\t    if (name in JSONEditor.modes) {\n\t      throw new Error('Mode \"' + name + '\" already registered');\n\t    }\n\n\t    // validate the mixin\n\t    if (typeof mode.mixin.create !== 'function') {\n\t      throw new Error('Required function \"create\" missing on mixin');\n\t    }\n\t    var reserved = ['setMode', 'registerMode', 'modes'];\n\t    for (i = 0; i < reserved.length; i++) {\n\t      prop = reserved[i];\n\t      if (prop in mode.mixin) {\n\t        throw new Error('Reserved property \"' + prop + '\" not allowed in mixin');\n\t      }\n\t    }\n\n\t    JSONEditor.modes[name] = mode;\n\t  }\n\t};\n\n\t// register tree and text modes\n\tJSONEditor.registerMode(treemode);\n\tJSONEditor.registerMode(textmode);\n\n\t// expose some of the libraries that can be used customized\n\tJSONEditor.ace = ace;\n\tJSONEditor.Ajv = Ajv;\n\tJSONEditor.VanillaPicker = VanillaPicker;\n\n\tmodule.exports = JSONEditor;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ace\n\tif (window.ace) {\n\t  // use the already loaded instance of Ace\n\t  ace = window.ace\n\t}\n\telse {\n\t  try {\n\t    // load brace\n\t    ace = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"brace\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\n\t    // load required Ace plugins\n\t    __webpack_require__(2);\n\t    __webpack_require__(4);\n\t  }\n\t  catch (err) {\n\t    // failed to load brace (can be minimalist bundle).\n\t    // No worries, the editor will fall back to plain text if needed.\n\t  }\n\t}\n\n\tmodule.exports = ace;\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tace.define(\"ace/mode/json_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(acequire, exports, module) {\n\t\"use strict\";\n\n\tvar oop = acequire(\"../lib/oop\");\n\tvar TextHighlightRules = acequire(\"./text_highlight_rules\").TextHighlightRules;\n\n\tvar JsonHighlightRules = function() {\n\t    this.$rules = {\n\t        \"start\" : [\n\t            {\n\t                token : \"variable\", // single line\n\t                regex : '[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]\\\\s*(?=:)'\n\t            }, {\n\t                token : \"string\", // single line\n\t                regex : '\"',\n\t                next  : \"string\"\n\t            }, {\n\t                token : \"constant.numeric\", // hex\n\t                regex : \"0[xX][0-9a-fA-F]+\\\\b\"\n\t            }, {\n\t                token : \"constant.numeric\", // float\n\t                regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n\t            }, {\n\t                token : \"constant.language.boolean\",\n\t                regex : \"(?:true|false)\\\\b\"\n\t            }, {\n\t                token : \"text\", // single quoted strings are not allowed\n\t                regex : \"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"\n\t            }, {\n\t                token : \"comment\", // comments are not allowed, but who cares?\n\t                regex : \"\\\\/\\\\/.*$\"\n\t            }, {\n\t                token : \"comment.start\", // comments are not allowed, but who cares?\n\t                regex : \"\\\\/\\\\*\",\n\t                next  : \"comment\"\n\t            }, {\n\t                token : \"paren.lparen\",\n\t                regex : \"[[({]\"\n\t            }, {\n\t                token : \"paren.rparen\",\n\t                regex : \"[\\\\])}]\"\n\t            }, {\n\t                token : \"text\",\n\t                regex : \"\\\\s+\"\n\t            }\n\t        ],\n\t        \"string\" : [\n\t            {\n\t                token : \"constant.language.escape\",\n\t                regex : /\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[\"\\\\\\/bfnrt])/\n\t            }, {\n\t                token : \"string\",\n\t                regex : '\"|$',\n\t                next  : \"start\"\n\t            }, {\n\t                defaultToken : \"string\"\n\t            }\n\t        ],\n\t        \"comment\" : [\n\t            {\n\t                token : \"comment.end\", // comments are not allowed, but who cares?\n\t                regex : \"\\\\*\\\\/\",\n\t                next  : \"start\"\n\t            }, {\n\t                defaultToken: \"comment\"\n\t            }\n\t        ]\n\t    };\n\t    \n\t};\n\n\toop.inherits(JsonHighlightRules, TextHighlightRules);\n\n\texports.JsonHighlightRules = JsonHighlightRules;\n\t});\n\n\tace.define(\"ace/mode/matching_brace_outdent\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(acequire, exports, module) {\n\t\"use strict\";\n\n\tvar Range = acequire(\"../range\").Range;\n\n\tvar MatchingBraceOutdent = function() {};\n\n\t(function() {\n\n\t    this.checkOutdent = function(line, input) {\n\t        if (! /^\\s+$/.test(line))\n\t            return false;\n\n\t        return /^\\s*\\}/.test(input);\n\t    };\n\n\t    this.autoOutdent = function(doc, row) {\n\t        var line = doc.getLine(row);\n\t        var match = line.match(/^(\\s*\\})/);\n\n\t        if (!match) return 0;\n\n\t        var column = match[1].length;\n\t        var openBracePos = doc.findMatchingBracket({row: row, column: column});\n\n\t        if (!openBracePos || openBracePos.row == row) return 0;\n\n\t        var indent = this.$getIndent(doc.getLine(openBracePos.row));\n\t        doc.replace(new Range(row, 0, row, column-1), indent);\n\t    };\n\n\t    this.$getIndent = function(line) {\n\t        return line.match(/^\\s*/)[0];\n\t    };\n\n\t}).call(MatchingBraceOutdent.prototype);\n\n\texports.MatchingBraceOutdent = MatchingBraceOutdent;\n\t});\n\n\tace.define(\"ace/mode/folding/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/mode/folding/fold_mode\"], function(acequire, exports, module) {\n\t\"use strict\";\n\n\tvar oop = acequire(\"../../lib/oop\");\n\tvar Range = acequire(\"../../range\").Range;\n\tvar BaseFoldMode = acequire(\"./fold_mode\").FoldMode;\n\n\tvar FoldMode = exports.FoldMode = function(commentRegex) {\n\t    if (commentRegex) {\n\t        this.foldingStartMarker = new RegExp(\n\t            this.foldingStartMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.start)\n\t        );\n\t        this.foldingStopMarker = new RegExp(\n\t            this.foldingStopMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.end)\n\t        );\n\t    }\n\t};\n\toop.inherits(FoldMode, BaseFoldMode);\n\n\t(function() {\n\t    \n\t    this.foldingStartMarker = /([\\{\\[\\(])[^\\}\\]\\)]*$|^\\s*(\\/\\*)/;\n\t    this.foldingStopMarker = /^[^\\[\\{\\(]*([\\}\\]\\)])|^[\\s\\*]*(\\*\\/)/;\n\t    this.singleLineBlockCommentRe= /^\\s*(\\/\\*).*\\*\\/\\s*$/;\n\t    this.tripleStarBlockCommentRe = /^\\s*(\\/\\*\\*\\*).*\\*\\/\\s*$/;\n\t    this.startRegionRe = /^\\s*(\\/\\*|\\/\\/)#?region\\b/;\n\t    this._getFoldWidgetBase = this.getFoldWidget;\n\t    this.getFoldWidget = function(session, foldStyle, row) {\n\t        var line = session.getLine(row);\n\t    \n\t        if (this.singleLineBlockCommentRe.test(line)) {\n\t            if (!this.startRegionRe.test(line) && !this.tripleStarBlockCommentRe.test(line))\n\t                return \"\";\n\t        }\n\t    \n\t        var fw = this._getFoldWidgetBase(session, foldStyle, row);\n\t    \n\t        if (!fw && this.startRegionRe.test(line))\n\t            return \"start\"; // lineCommentRegionStart\n\t    \n\t        return fw;\n\t    };\n\n\t    this.getFoldWidgetRange = function(session, foldStyle, row, forceMultiline) {\n\t        var line = session.getLine(row);\n\t        \n\t        if (this.startRegionRe.test(line))\n\t            return this.getCommentRegionBlock(session, line, row);\n\t        \n\t        var match = line.match(this.foldingStartMarker);\n\t        if (match) {\n\t            var i = match.index;\n\n\t            if (match[1])\n\t                return this.openingBracketBlock(session, match[1], row, i);\n\t                \n\t            var range = session.getCommentFoldRange(row, i + match[0].length, 1);\n\t            \n\t            if (range && !range.isMultiLine()) {\n\t                if (forceMultiline) {\n\t                    range = this.getSectionRange(session, row);\n\t                } else if (foldStyle != \"all\")\n\t                    range = null;\n\t            }\n\t            \n\t            return range;\n\t        }\n\n\t        if (foldStyle === \"markbegin\")\n\t            return;\n\n\t        var match = line.match(this.foldingStopMarker);\n\t        if (match) {\n\t            var i = match.index + match[0].length;\n\n\t            if (match[1])\n\t                return this.closingBracketBlock(session, match[1], row, i);\n\n\t            return session.getCommentFoldRange(row, i, -1);\n\t        }\n\t    };\n\t    \n\t    this.getSectionRange = function(session, row) {\n\t        var line = session.getLine(row);\n\t        var startIndent = line.search(/\\S/);\n\t        var startRow = row;\n\t        var startColumn = line.length;\n\t        row = row + 1;\n\t        var endRow = row;\n\t        var maxRow = session.getLength();\n\t        while (++row < maxRow) {\n\t            line = session.getLine(row);\n\t            var indent = line.search(/\\S/);\n\t            if (indent === -1)\n\t                continue;\n\t            if  (startIndent > indent)\n\t                break;\n\t            var subRange = this.getFoldWidgetRange(session, \"all\", row);\n\t            \n\t            if (subRange) {\n\t                if (subRange.start.row <= startRow) {\n\t                    break;\n\t                } else if (subRange.isMultiLine()) {\n\t                    row = subRange.end.row;\n\t                } else if (startIndent == indent) {\n\t                    break;\n\t                }\n\t            }\n\t            endRow = row;\n\t        }\n\t        \n\t        return new Range(startRow, startColumn, endRow, session.getLine(endRow).length);\n\t    };\n\t    this.getCommentRegionBlock = function(session, line, row) {\n\t        var startColumn = line.search(/\\s*$/);\n\t        var maxRow = session.getLength();\n\t        var startRow = row;\n\t        \n\t        var re = /^\\s*(?:\\/\\*|\\/\\/|--)#?(end)?region\\b/;\n\t        var depth = 1;\n\t        while (++row < maxRow) {\n\t            line = session.getLine(row);\n\t            var m = re.exec(line);\n\t            if (!m) continue;\n\t            if (m[1]) depth--;\n\t            else depth++;\n\n\t            if (!depth) break;\n\t        }\n\n\t        var endRow = row;\n\t        if (endRow > startRow) {\n\t            return new Range(startRow, startColumn, endRow, line.length);\n\t        }\n\t    };\n\n\t}).call(FoldMode.prototype);\n\n\t});\n\n\tace.define(\"ace/mode/json\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/json_highlight_rules\",\"ace/mode/matching_brace_outdent\",\"ace/mode/behaviour/cstyle\",\"ace/mode/folding/cstyle\",\"ace/worker/worker_client\"], function(acequire, exports, module) {\n\t\"use strict\";\n\n\tvar oop = acequire(\"../lib/oop\");\n\tvar TextMode = acequire(\"./text\").Mode;\n\tvar HighlightRules = acequire(\"./json_highlight_rules\").JsonHighlightRules;\n\tvar MatchingBraceOutdent = acequire(\"./matching_brace_outdent\").MatchingBraceOutdent;\n\tvar CstyleBehaviour = acequire(\"./behaviour/cstyle\").CstyleBehaviour;\n\tvar CStyleFoldMode = acequire(\"./folding/cstyle\").FoldMode;\n\tvar WorkerClient = acequire(\"../worker/worker_client\").WorkerClient;\n\n\tvar Mode = function() {\n\t    this.HighlightRules = HighlightRules;\n\t    this.$outdent = new MatchingBraceOutdent();\n\t    this.$behaviour = new CstyleBehaviour();\n\t    this.foldingRules = new CStyleFoldMode();\n\t};\n\toop.inherits(Mode, TextMode);\n\n\t(function() {\n\n\t    this.getNextLineIndent = function(state, line, tab) {\n\t        var indent = this.$getIndent(line);\n\n\t        if (state == \"start\") {\n\t            var match = line.match(/^.*[\\{\\(\\[]\\s*$/);\n\t            if (match) {\n\t                indent += tab;\n\t            }\n\t        }\n\n\t        return indent;\n\t    };\n\n\t    this.checkOutdent = function(state, line, input) {\n\t        return this.$outdent.checkOutdent(line, input);\n\t    };\n\n\t    this.autoOutdent = function(state, doc, row) {\n\t        this.$outdent.autoOutdent(doc, row);\n\t    };\n\n\t    this.createWorker = function(session) {\n\t        var worker = new WorkerClient([\"ace\"], __webpack_require__(3), \"JsonWorker\");\n\t        worker.attachToDocument(session.getDocument());\n\n\t        worker.on(\"annotate\", function(e) {\n\t            session.setAnnotations(e.data);\n\t        });\n\n\t        worker.on(\"terminate\", function() {\n\t            session.clearAnnotations();\n\t        });\n\n\t        return worker;\n\t    };\n\n\n\t    this.$id = \"ace/mode/json\";\n\t}).call(Mode.prototype);\n\n\texports.Mode = Mode;\n\t});\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports.id = 'ace/mode/json_worker';\n\tmodule.exports.src = \"\\\"no use strict\\\";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail=\\\"\\\";testPath;){var alias=paths[testPath];if(\\\"string\\\"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\\\/*$/,\\\"/\\\")+(tail||alias.main||alias.name);if(alias===!1)return\\\"\\\";var i=testPath.lastIndexOf(\\\"/\\\");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:\\\"log\\\",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:\\\"error\\\",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf(\\\"!\\\")){var chunks=moduleName.split(\\\"!\\\");return window.normalizeModule(parentId,chunks[0])+\\\"!\\\"+window.normalizeModule(parentId,chunks[1])}if(\\\".\\\"==moduleName.charAt(0)){var base=parentId.split(\\\"/\\\").slice(0,-1).join(\\\"/\\\");for(moduleName=(base?base+\\\"/\\\":\\\"\\\")+moduleName;-1!==moduleName.indexOf(\\\".\\\")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\\\.\\\\//,\\\"\\\").replace(/\\\\/\\\\.\\\\//,\\\"/\\\").replace(/[^\\\\/]+\\\\/\\\\.\\\\.\\\\//,\\\"\\\")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error(\\\"worker.js acequire() accepts only (parentId, id) as arguments\\\");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log(\\\"unable to load \\\"+id);var path=resolveModuleId(id,window.acequire.tlns);return\\\".js\\\"!=path.slice(-3)&&(path+=\\\".js\\\"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,\\\"string\\\"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),\\\"function\\\"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=[\\\"require\\\",\\\"exports\\\",\\\"module\\\"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case\\\"require\\\":return req;case\\\"exports\\\":return module.exports;case\\\"module\\\":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire(\\\"ace/lib/event_emitter\\\").EventEmitter,oop=window.acequire(\\\"ace/lib/oop\\\"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:\\\"call\\\",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:\\\"event\\\",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error(\\\"Unknown command:\\\"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire(\\\"ace/lib/es5-shim\\\"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define(\\\"ace/lib/oop\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define(\\\"ace/range\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return\\\"Range: [\\\"+this.start.row+\\\"/\\\"+this.start.column+\\\"] -> [\\\"+this.end.row+\\\"/\\\"+this.end.column+\\\"]\\\"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){\\\"object\\\"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){\\\"object\\\"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define(\\\"ace/apply_delta\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||\\\"\\\";switch(delta.action){case\\\"insert\\\":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case\\\"remove\\\":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define(\\\"ace/lib/event_emitter\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){\\\"object\\\"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?\\\"unshift\\\":\\\"push\\\"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define(\\\"ace/anchor\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/lib/event_emitter\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"./lib/oop\\\"),EventEmitter=acequire(\\\"./lib/event_emitter\\\").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert=\\\"insert\\\"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal(\\\"change\\\",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener(\\\"change\\\",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on(\\\"change\\\",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define(\\\"ace/document\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/apply_delta\\\",\\\"ace/lib/event_emitter\\\",\\\"ace/range\\\",\\\"ace/anchor\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"./lib/oop\\\"),applyDelta=acequire(\\\"./apply_delta\\\").applyDelta,EventEmitter=acequire(\\\"./lib/event_emitter\\\").EventEmitter,Range=acequire(\\\"./range\\\").Range,Anchor=acequire(\\\"./anchor\\\").Anchor,Document=function(textOrLines){this.$lines=[\\\"\\\"],0===textOrLines.length?this.$lines=[\\\"\\\"]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0===\\\"aaa\\\".split(/a/).length?function(text){return text.replace(/\\\\r\\\\n|\\\\r/g,\\\"\\\\n\\\").split(\\\"\\\\n\\\")}:function(text){return text.split(/\\\\r\\\\n|\\\\r|\\\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\\\r\\\\n|\\\\r|\\\\n)/m);this.$autoNewLine=match?match[1]:\\\"\\\\n\\\",this._signal(\\\"changeNewLineMode\\\")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case\\\"windows\\\":return\\\"\\\\r\\\\n\\\";case\\\"unix\\\":return\\\"\\\\n\\\";default:return this.$autoNewLine||\\\"\\\\n\\\"}},this.$autoNewLine=\\\"\\\",this.$newLineMode=\\\"auto\\\",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal(\\\"changeNewLineMode\\\"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return\\\"\\\\r\\\\n\\\"==text||\\\"\\\\r\\\"==text||\\\"\\\\n\\\"==text},this.getLine=function(row){return this.$lines[row]||\\\"\\\"},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||\\\"\\\").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn(\\\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\\\"),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn(\\\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\\\"),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn(\\\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\\\"),this.insertMergedLines(position,[\\\"\\\",\\\"\\\"])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:\\\"insert\\\",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([\\\"\\\"]),column=0):(lines=[\\\"\\\"].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:\\\"insert\\\",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:\\\"remove\\\",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:\\\"remove\\\",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:\\\"remove\\\",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:\\\"remove\\\",lines:[\\\"\\\",\\\"\\\"]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert=\\\"insert\\\"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal(\\\"change\\\",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(\\\"\\\"),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:\\\"insert\\\"==delta.action?\\\"remove\\\":\\\"insert\\\",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define(\\\"ace/lib/lang\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split(\\\"\\\").reverse().join(\\\"\\\")},exports.stringRepeat=function(string,count){for(var result=\\\"\\\";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\\\s\\\\s*/,trimEndRegexp=/\\\\s\\\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,\\\"\\\")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,\\\"\\\")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&\\\"object\\\"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if(\\\"object\\\"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if(\\\"[object Object]\\\"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\\\]\\\\/\\\\\\\\])/g,\\\"\\\\\\\\$1\\\")},exports.escapeHTML=function(str){return str.replace(/&/g,\\\"&#38;\\\").replace(/\\\"/g,\\\"&#34;\\\").replace(/'/g,\\\"&#39;\\\").replace(/</g,\\\"&#60;\\\")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define(\\\"ace/worker/mirror\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/range\\\",\\\"ace/document\\\",\\\"ace/lib/lang\\\"],function(acequire,exports){\\\"use strict\\\";acequire(\\\"../range\\\").Range;var Document=acequire(\\\"../document\\\").Document,lang=acequire(\\\"../lib/lang\\\"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(\\\"\\\"),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on(\\\"change\\\",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:\\\"insert\\\",start:data[i],lines:data[i+1]};else var d={action:\\\"remove\\\",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define(\\\"ace/mode/json/json_parse\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(){\\\"use strict\\\";var at,ch,text,value,escapee={'\\\"':'\\\"',\\\"\\\\\\\\\\\":\\\"\\\\\\\\\\\",\\\"/\\\":\\\"/\\\",b:\\\"\\\\b\\\",f:\\\"\\\\f\\\",n:\\\"\\\\n\\\",r:\\\"\\\\r\\\",t:\\\"\\t\\\"},error=function(m){throw{name:\\\"SyntaxError\\\",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error(\\\"Expected '\\\"+c+\\\"' instead of '\\\"+ch+\\\"'\\\"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string=\\\"\\\";for(\\\"-\\\"===ch&&(string=\\\"-\\\",next(\\\"-\\\"));ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch,next();if(\\\".\\\"===ch)for(string+=\\\".\\\";next()&&ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch;if(\\\"e\\\"===ch||\\\"E\\\"===ch)for(string+=ch,next(),(\\\"-\\\"===ch||\\\"+\\\"===ch)&&(string+=ch,next());ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error(\\\"Bad number\\\"),void 0):number},string=function(){var hex,i,uffff,string=\\\"\\\";if('\\\"'===ch)for(;next();){if('\\\"'===ch)return next(),string;if(\\\"\\\\\\\\\\\"===ch)if(next(),\\\"u\\\"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if(\\\"string\\\"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error(\\\"Bad string\\\")},white=function(){for(;ch&&\\\" \\\">=ch;)next()},word=function(){switch(ch){case\\\"t\\\":return next(\\\"t\\\"),next(\\\"r\\\"),next(\\\"u\\\"),next(\\\"e\\\"),!0;case\\\"f\\\":return next(\\\"f\\\"),next(\\\"a\\\"),next(\\\"l\\\"),next(\\\"s\\\"),next(\\\"e\\\"),!1;case\\\"n\\\":return next(\\\"n\\\"),next(\\\"u\\\"),next(\\\"l\\\"),next(\\\"l\\\"),null}error(\\\"Unexpected '\\\"+ch+\\\"'\\\")},array=function(){var array=[];if(\\\"[\\\"===ch){if(next(\\\"[\\\"),white(),\\\"]\\\"===ch)return next(\\\"]\\\"),array;for(;ch;){if(array.push(value()),white(),\\\"]\\\"===ch)return next(\\\"]\\\"),array;next(\\\",\\\"),white()}}error(\\\"Bad array\\\")},object=function(){var key,object={};if(\\\"{\\\"===ch){if(next(\\\"{\\\"),white(),\\\"}\\\"===ch)return next(\\\"}\\\"),object;for(;ch;){if(key=string(),white(),next(\\\":\\\"),Object.hasOwnProperty.call(object,key)&&error('Duplicate key \\\"'+key+'\\\"'),object[key]=value(),white(),\\\"}\\\"===ch)return next(\\\"}\\\"),object;next(\\\",\\\"),white()}}error(\\\"Bad object\\\")};return value=function(){switch(white(),ch){case\\\"{\\\":return object();case\\\"[\\\":return array();case'\\\"':return string();case\\\"-\\\":return number();default:return ch>=\\\"0\\\"&&\\\"9\\\">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=\\\" \\\",result=value(),white(),ch&&error(\\\"Syntax error\\\"),\\\"function\\\"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&\\\"object\\\"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({\\\"\\\":result},\\\"\\\"):result}}),ace.define(\\\"ace/mode/json_worker\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/worker/mirror\\\",\\\"ace/mode/json/json_parse\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"../lib/oop\\\"),Mirror=acequire(\\\"../worker/mirror\\\").Mirror,parse=acequire(\\\"./json/json_parse\\\"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:\\\"error\\\"})}this.sender.emit(\\\"annotate\\\",errors)}}.call(JsonWorker.prototype)}),ace.define(\\\"ace/lib/es5-shim\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,\\\"sentinel\\\",{}),\\\"sentinel\\\"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if(\\\"function\\\"!=typeof target)throw new TypeError(\\\"Function.prototype.bind called on incompatible \\\"+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,\\\"__defineGetter__\\\"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,\\\"XXX\\\"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return\\\"[object Array]\\\"==_toString(obj)});var boxedString=Object(\\\"a\\\"),splitString=\\\"a\\\"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,result=[],thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");if(!length&&1==arguments.length)throw new TypeError(\\\"reduce of empty array with no initial value\\\");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError(\\\"reduce of empty array with no initial value\\\")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");if(!length&&1==arguments.length)throw new TypeError(\\\"reduceRight of empty array with no initial value\\\");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError(\\\"reduceRight of empty array with no initial value\\\")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT=\\\"Object.getOwnPropertyDescriptor called on a non-object: \\\";Object.getOwnPropertyDescriptor=function(object,property){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if(\\\"object\\\"!=typeof prototype)throw new TypeError(\\\"typeof prototype[\\\"+typeof prototype+\\\"] != 'object'\\\");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom=\\\"undefined\\\"==typeof document||doesDefinePropertyWork(document.createElement(\\\"div\\\"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR=\\\"Property description must be an object: \\\",ERR_NON_OBJECT_TARGET=\\\"Object.defineProperty called on non-object: \\\",ERR_ACCESSORS_NOT_SUPPORTED=\\\"getters & setters can not be defined on this javascript engine\\\";Object.defineProperty=function(object,property,descriptor){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(\\\"object\\\"!=typeof descriptor&&\\\"function\\\"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,\\\"value\\\"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,\\\"get\\\")&&defineGetter(object,property,descriptor.get),owns(descriptor,\\\"set\\\")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return\\\"function\\\"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name=\\\"\\\";owns(object,name);)name+=\\\"?\\\";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=[\\\"toString\\\",\\\"toLocaleString\\\",\\\"valueOf\\\",\\\"hasOwnProperty\\\",\\\"isPrototypeOf\\\",\\\"propertyIsEnumerable\\\",\\\"constructor\\\"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(\\\"Object.keys called on a non-object\\\");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws=\\\"\\t\\\\n\\u000b\\\\f\\\\r \\\\u2028\\\\u2029\\\";if(!String.prototype.trim||ws.trim()){ws=\\\"[\\\"+ws+\\\"]\\\";var trimBeginRegexp=RegExp(\\\"^\\\"+ws+ws+\\\"*\\\"),trimEndRegexp=RegExp(ws+ws+\\\"*$\\\");String.prototype.trim=function(){return(this+\\\"\\\").replace(trimBeginRegexp,\\\"\\\").replace(trimEndRegexp,\\\"\\\")}}var toObject=function(o){if(null==o)throw new TypeError(\\\"can't convert \\\"+o+\\\" to object\\\");return Object(o)}});\";\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tace.define(\"ace/ext/searchbox\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/keyboard/hash_handler\",\"ace/lib/keys\"], function(acequire, exports, module) {\n\t\"use strict\";\n\n\tvar dom = acequire(\"../lib/dom\");\n\tvar lang = acequire(\"../lib/lang\");\n\tvar event = acequire(\"../lib/event\");\n\tvar searchboxCss = \"\\\n\t.ace_search {\\\n\tbackground-color: #ddd;\\\n\tcolor: #666;\\\n\tborder: 1px solid #cbcbcb;\\\n\tborder-top: 0 none;\\\n\toverflow: hidden;\\\n\tmargin: 0;\\\n\tpadding: 4px 6px 0 4px;\\\n\tposition: absolute;\\\n\ttop: 0;\\\n\tz-index: 99;\\\n\twhite-space: normal;\\\n\t}\\\n\t.ace_search.left {\\\n\tborder-left: 0 none;\\\n\tborder-radius: 0px 0px 5px 0px;\\\n\tleft: 0;\\\n\t}\\\n\t.ace_search.right {\\\n\tborder-radius: 0px 0px 0px 5px;\\\n\tborder-right: 0 none;\\\n\tright: 0;\\\n\t}\\\n\t.ace_search_form, .ace_replace_form {\\\n\tmargin: 0 20px 4px 0;\\\n\toverflow: hidden;\\\n\tline-height: 1.9;\\\n\t}\\\n\t.ace_replace_form {\\\n\tmargin-right: 0;\\\n\t}\\\n\t.ace_search_form.ace_nomatch {\\\n\toutline: 1px solid red;\\\n\t}\\\n\t.ace_search_field {\\\n\tborder-radius: 3px 0 0 3px;\\\n\tbackground-color: white;\\\n\tcolor: black;\\\n\tborder: 1px solid #cbcbcb;\\\n\tborder-right: 0 none;\\\n\tbox-sizing: border-box!important;\\\n\toutline: 0;\\\n\tpadding: 0;\\\n\tfont-size: inherit;\\\n\tmargin: 0;\\\n\tline-height: inherit;\\\n\tpadding: 0 6px;\\\n\tmin-width: 17em;\\\n\tvertical-align: top;\\\n\t}\\\n\t.ace_searchbtn {\\\n\tborder: 1px solid #cbcbcb;\\\n\tline-height: inherit;\\\n\tdisplay: inline-block;\\\n\tpadding: 0 6px;\\\n\tbackground: #fff;\\\n\tborder-right: 0 none;\\\n\tborder-left: 1px solid #dcdcdc;\\\n\tcursor: pointer;\\\n\tmargin: 0;\\\n\tposition: relative;\\\n\tbox-sizing: content-box!important;\\\n\tcolor: #666;\\\n\t}\\\n\t.ace_searchbtn:last-child {\\\n\tborder-radius: 0 3px 3px 0;\\\n\tborder-right: 1px solid #cbcbcb;\\\n\t}\\\n\t.ace_searchbtn:disabled {\\\n\tbackground: none;\\\n\tcursor: default;\\\n\t}\\\n\t.ace_searchbtn:hover {\\\n\tbackground-color: #eef1f6;\\\n\t}\\\n\t.ace_searchbtn.prev, .ace_searchbtn.next {\\\n\tpadding: 0px 0.7em\\\n\t}\\\n\t.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\\\n\tcontent: \\\"\\\";\\\n\tborder: solid 2px #888;\\\n\twidth: 0.5em;\\\n\theight: 0.5em;\\\n\tborder-width:  2px 0 0 2px;\\\n\tdisplay:inline-block;\\\n\ttransform: rotate(-45deg);\\\n\t}\\\n\t.ace_searchbtn.next:after {\\\n\tborder-width: 0 2px 2px 0 ;\\\n\t}\\\n\t.ace_searchbtn_close {\\\n\tbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\\\n\tborder-radius: 50%;\\\n\tborder: 0 none;\\\n\tcolor: #656565;\\\n\tcursor: pointer;\\\n\tfont: 16px/16px Arial;\\\n\tpadding: 0;\\\n\theight: 14px;\\\n\twidth: 14px;\\\n\ttop: 9px;\\\n\tright: 7px;\\\n\tposition: absolute;\\\n\t}\\\n\t.ace_searchbtn_close:hover {\\\n\tbackground-color: #656565;\\\n\tbackground-position: 50% 100%;\\\n\tcolor: white;\\\n\t}\\\n\t.ace_button {\\\n\tmargin-left: 2px;\\\n\tcursor: pointer;\\\n\t-webkit-user-select: none;\\\n\t-moz-user-select: none;\\\n\t-o-user-select: none;\\\n\t-ms-user-select: none;\\\n\tuser-select: none;\\\n\toverflow: hidden;\\\n\topacity: 0.7;\\\n\tborder: 1px solid rgba(100,100,100,0.23);\\\n\tpadding: 1px;\\\n\tbox-sizing:    border-box!important;\\\n\tcolor: black;\\\n\t}\\\n\t.ace_button:hover {\\\n\tbackground-color: #eee;\\\n\topacity:1;\\\n\t}\\\n\t.ace_button:active {\\\n\tbackground-color: #ddd;\\\n\t}\\\n\t.ace_button.checked {\\\n\tborder-color: #3399ff;\\\n\topacity:1;\\\n\t}\\\n\t.ace_search_options{\\\n\tmargin-bottom: 3px;\\\n\ttext-align: right;\\\n\t-webkit-user-select: none;\\\n\t-moz-user-select: none;\\\n\t-o-user-select: none;\\\n\t-ms-user-select: none;\\\n\tuser-select: none;\\\n\tclear: both;\\\n\t}\\\n\t.ace_search_counter {\\\n\tfloat: left;\\\n\tfont-family: arial;\\\n\tpadding: 0 8px;\\\n\t}\";\n\tvar HashHandler = acequire(\"../keyboard/hash_handler\").HashHandler;\n\tvar keyUtil = acequire(\"../lib/keys\");\n\n\tvar MAX_COUNT = 999;\n\n\tdom.importCssString(searchboxCss, \"ace_searchbox\");\n\n\tvar html = '<div class=\"ace_search right\">\\\n\t    <span action=\"hide\" class=\"ace_searchbtn_close\"></span>\\\n\t    <div class=\"ace_search_form\">\\\n\t        <input class=\"ace_search_field\" placeholder=\"Search for\" spellcheck=\"false\"></input>\\\n\t        <span action=\"findPrev\" class=\"ace_searchbtn prev\"></span>\\\n\t        <span action=\"findNext\" class=\"ace_searchbtn next\"></span>\\\n\t        <span action=\"findAll\" class=\"ace_searchbtn\" title=\"Alt-Enter\">All</span>\\\n\t    </div>\\\n\t    <div class=\"ace_replace_form\">\\\n\t        <input class=\"ace_search_field\" placeholder=\"Replace with\" spellcheck=\"false\"></input>\\\n\t        <span action=\"replaceAndFindNext\" class=\"ace_searchbtn\">Replace</span>\\\n\t        <span action=\"replaceAll\" class=\"ace_searchbtn\">All</span>\\\n\t    </div>\\\n\t    <div class=\"ace_search_options\">\\\n\t        <span action=\"toggleReplace\" class=\"ace_button\" title=\"Toggel Replace mode\"\\\n\t            style=\"float:left;margin-top:-2px;padding:0 5px;\">+</span>\\\n\t        <span class=\"ace_search_counter\"></span>\\\n\t        <span action=\"toggleRegexpMode\" class=\"ace_button\" title=\"RegExp Search\">.*</span>\\\n\t        <span action=\"toggleCaseSensitive\" class=\"ace_button\" title=\"CaseSensitive Search\">Aa</span>\\\n\t        <span action=\"toggleWholeWords\" class=\"ace_button\" title=\"Whole Word Search\">\\\\b</span>\\\n\t        <span action=\"searchInSelection\" class=\"ace_button\" title=\"Search In Selection\">S</span>\\\n\t    </div>\\\n\t</div>'.replace(/> +/g, \">\");\n\n\tvar SearchBox = function(editor, range, showReplaceForm) {\n\t    var div = dom.createElement(\"div\");\n\t    div.innerHTML = html;\n\t    this.element = div.firstChild;\n\n\t    this.setSession = this.setSession.bind(this);\n\n\t    this.$init();\n\t    this.setEditor(editor);\n\t};\n\n\t(function() {\n\t    this.setEditor = function(editor) {\n\t        editor.searchBox = this;\n\t        editor.renderer.scroller.appendChild(this.element);\n\t        this.editor = editor;\n\t    };\n\n\t    this.setSession = function(e) {\n\t        this.searchRange = null;\n\t        this.$syncOptions(true);\n\t    };\n\n\t    this.$initElements = function(sb) {\n\t        this.searchBox = sb.querySelector(\".ace_search_form\");\n\t        this.replaceBox = sb.querySelector(\".ace_replace_form\");\n\t        this.searchOption = sb.querySelector(\"[action=searchInSelection]\");\n\t        this.replaceOption = sb.querySelector(\"[action=toggleReplace]\");\n\t        this.regExpOption = sb.querySelector(\"[action=toggleRegexpMode]\");\n\t        this.caseSensitiveOption = sb.querySelector(\"[action=toggleCaseSensitive]\");\n\t        this.wholeWordOption = sb.querySelector(\"[action=toggleWholeWords]\");\n\t        this.searchInput = this.searchBox.querySelector(\".ace_search_field\");\n\t        this.replaceInput = this.replaceBox.querySelector(\".ace_search_field\");\n\t        this.searchCounter = sb.querySelector(\".ace_search_counter\");\n\t    };\n\t    \n\t    this.$init = function() {\n\t        var sb = this.element;\n\t        \n\t        this.$initElements(sb);\n\t        \n\t        var _this = this;\n\t        event.addListener(sb, \"mousedown\", function(e) {\n\t            setTimeout(function(){\n\t                _this.activeInput.focus();\n\t            }, 0);\n\t            event.stopPropagation(e);\n\t        });\n\t        event.addListener(sb, \"click\", function(e) {\n\t            var t = e.target || e.srcElement;\n\t            var action = t.getAttribute(\"action\");\n\t            if (action && _this[action])\n\t                _this[action]();\n\t            else if (_this.$searchBarKb.commands[action])\n\t                _this.$searchBarKb.commands[action].exec(_this);\n\t            event.stopPropagation(e);\n\t        });\n\n\t        event.addCommandKeyListener(sb, function(e, hashId, keyCode) {\n\t            var keyString = keyUtil.keyCodeToString(keyCode);\n\t            var command = _this.$searchBarKb.findKeyCommand(hashId, keyString);\n\t            if (command && command.exec) {\n\t                command.exec(_this);\n\t                event.stopEvent(e);\n\t            }\n\t        });\n\n\t        this.$onChange = lang.delayedCall(function() {\n\t            _this.find(false, false);\n\t        });\n\n\t        event.addListener(this.searchInput, \"input\", function() {\n\t            _this.$onChange.schedule(20);\n\t        });\n\t        event.addListener(this.searchInput, \"focus\", function() {\n\t            _this.activeInput = _this.searchInput;\n\t            _this.searchInput.value && _this.highlight();\n\t        });\n\t        event.addListener(this.replaceInput, \"focus\", function() {\n\t            _this.activeInput = _this.replaceInput;\n\t            _this.searchInput.value && _this.highlight();\n\t        });\n\t    };\n\t    this.$closeSearchBarKb = new HashHandler([{\n\t        bindKey: \"Esc\",\n\t        name: \"closeSearchBar\",\n\t        exec: function(editor) {\n\t            editor.searchBox.hide();\n\t        }\n\t    }]);\n\t    this.$searchBarKb = new HashHandler();\n\t    this.$searchBarKb.bindKeys({\n\t        \"Ctrl-f|Command-f\": function(sb) {\n\t            var isReplace = sb.isReplace = !sb.isReplace;\n\t            sb.replaceBox.style.display = isReplace ? \"\" : \"none\";\n\t            sb.replaceOption.checked = false;\n\t            sb.$syncOptions();\n\t            sb.searchInput.focus();\n\t        },\n\t        \"Ctrl-H|Command-Option-F\": function(sb) {\n\t            sb.replaceOption.checked = true;\n\t            sb.$syncOptions();\n\t            sb.replaceInput.focus();\n\t        },\n\t        \"Ctrl-G|Command-G\": function(sb) {\n\t            sb.findNext();\n\t        },\n\t        \"Ctrl-Shift-G|Command-Shift-G\": function(sb) {\n\t            sb.findPrev();\n\t        },\n\t        \"esc\": function(sb) {\n\t            setTimeout(function() { sb.hide();});\n\t        },\n\t        \"Return\": function(sb) {\n\t            if (sb.activeInput == sb.replaceInput)\n\t                sb.replace();\n\t            sb.findNext();\n\t        },\n\t        \"Shift-Return\": function(sb) {\n\t            if (sb.activeInput == sb.replaceInput)\n\t                sb.replace();\n\t            sb.findPrev();\n\t        },\n\t        \"Alt-Return\": function(sb) {\n\t            if (sb.activeInput == sb.replaceInput)\n\t                sb.replaceAll();\n\t            sb.findAll();\n\t        },\n\t        \"Tab\": function(sb) {\n\t            (sb.activeInput == sb.replaceInput ? sb.searchInput : sb.replaceInput).focus();\n\t        }\n\t    });\n\n\t    this.$searchBarKb.addCommands([{\n\t        name: \"toggleRegexpMode\",\n\t        bindKey: {win: \"Alt-R|Alt-/\", mac: \"Ctrl-Alt-R|Ctrl-Alt-/\"},\n\t        exec: function(sb) {\n\t            sb.regExpOption.checked = !sb.regExpOption.checked;\n\t            sb.$syncOptions();\n\t        }\n\t    }, {\n\t        name: \"toggleCaseSensitive\",\n\t        bindKey: {win: \"Alt-C|Alt-I\", mac: \"Ctrl-Alt-R|Ctrl-Alt-I\"},\n\t        exec: function(sb) {\n\t            sb.caseSensitiveOption.checked = !sb.caseSensitiveOption.checked;\n\t            sb.$syncOptions();\n\t        }\n\t    }, {\n\t        name: \"toggleWholeWords\",\n\t        bindKey: {win: \"Alt-B|Alt-W\", mac: \"Ctrl-Alt-B|Ctrl-Alt-W\"},\n\t        exec: function(sb) {\n\t            sb.wholeWordOption.checked = !sb.wholeWordOption.checked;\n\t            sb.$syncOptions();\n\t        }\n\t    }, {\n\t        name: \"toggleReplace\",\n\t        exec: function(sb) {\n\t            sb.replaceOption.checked = !sb.replaceOption.checked;\n\t            sb.$syncOptions();\n\t        }\n\t    }, {\n\t        name: \"searchInSelection\",\n\t        exec: function(sb) {\n\t            sb.searchOption.checked = !sb.searchRange;\n\t            sb.setSearchRange(sb.searchOption.checked && sb.editor.getSelectionRange());\n\t            sb.$syncOptions();\n\t        }\n\t    }]);\n\n\t    this.setSearchRange = function(range) {\n\t        this.searchRange = range;\n\t        if (range) {\n\t            this.searchRangeMarker = this.editor.session.addMarker(range, \"ace_active-line\");\n\t        } else if (this.searchRangeMarker) {\n\t            this.editor.session.removeMarker(this.searchRangeMarker);\n\t            this.searchRangeMarker = null;\n\t        }\n\t    };\n\n\t    this.$syncOptions = function(preventScroll) {\n\t        dom.setCssClass(this.replaceOption, \"checked\", this.searchRange);\n\t        dom.setCssClass(this.searchOption, \"checked\", this.searchOption.checked);\n\t        this.replaceOption.textContent = this.replaceOption.checked ? \"-\" : \"+\";\n\t        dom.setCssClass(this.regExpOption, \"checked\", this.regExpOption.checked);\n\t        dom.setCssClass(this.wholeWordOption, \"checked\", this.wholeWordOption.checked);\n\t        dom.setCssClass(this.caseSensitiveOption, \"checked\", this.caseSensitiveOption.checked);\n\t        this.replaceBox.style.display = this.replaceOption.checked ? \"\" : \"none\";\n\t        this.find(false, false, preventScroll);\n\t    };\n\n\t    this.highlight = function(re) {\n\t        this.editor.session.highlight(re || this.editor.$search.$options.re);\n\t        this.editor.renderer.updateBackMarkers();\n\t    };\n\t    this.find = function(skipCurrent, backwards, preventScroll) {\n\t        var range = this.editor.find(this.searchInput.value, {\n\t            skipCurrent: skipCurrent,\n\t            backwards: backwards,\n\t            wrap: true,\n\t            regExp: this.regExpOption.checked,\n\t            caseSensitive: this.caseSensitiveOption.checked,\n\t            wholeWord: this.wholeWordOption.checked,\n\t            preventScroll: preventScroll,\n\t            range: this.searchRange\n\t        });\n\t        var noMatch = !range && this.searchInput.value;\n\t        dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n\t        this.editor._emit(\"findSearchBox\", { match: !noMatch });\n\t        this.highlight();\n\t        this.updateCounter();\n\t    };\n\t    this.updateCounter = function() {\n\t        var editor = this.editor;\n\t        var regex = editor.$search.$options.re;\n\t        var all = 0;\n\t        var before = 0;\n\t        if (regex) {\n\t            var value = this.searchRange\n\t                ? editor.session.getTextRange(this.searchRange)\n\t                : editor.getValue();\n\n\t            var offset = editor.session.doc.positionToIndex(editor.selection.anchor);\n\t            if (this.searchRange)\n\t                offset -= editor.session.doc.positionToIndex(this.searchRange.start);\n\n\t            var last = regex.lastIndex = 0;\n\t            var m;\n\t            while ((m = regex.exec(value))) {\n\t                all++;\n\t                last = m.index;\n\t                if (last <= offset)\n\t                    before++;\n\t                if (all > MAX_COUNT)\n\t                    break;\n\t                if (!m[0]) {\n\t                    regex.lastIndex = last += 1;\n\t                    if (last >= value.length)\n\t                        break;\n\t                }\n\t            }\n\t        }\n\t        this.searchCounter.textContent = before + \" of \" + (all > MAX_COUNT ? MAX_COUNT + \"+\" : all);\n\t    };\n\t    this.findNext = function() {\n\t        this.find(true, false);\n\t    };\n\t    this.findPrev = function() {\n\t        this.find(true, true);\n\t    };\n\t    this.findAll = function(){\n\t        var range = this.editor.findAll(this.searchInput.value, {            \n\t            regExp: this.regExpOption.checked,\n\t            caseSensitive: this.caseSensitiveOption.checked,\n\t            wholeWord: this.wholeWordOption.checked\n\t        });\n\t        var noMatch = !range && this.searchInput.value;\n\t        dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n\t        this.editor._emit(\"findSearchBox\", { match: !noMatch });\n\t        this.highlight();\n\t        this.hide();\n\t    };\n\t    this.replace = function() {\n\t        if (!this.editor.getReadOnly())\n\t            this.editor.replace(this.replaceInput.value);\n\t    };    \n\t    this.replaceAndFindNext = function() {\n\t        if (!this.editor.getReadOnly()) {\n\t            this.editor.replace(this.replaceInput.value);\n\t            this.findNext();\n\t        }\n\t    };\n\t    this.replaceAll = function() {\n\t        if (!this.editor.getReadOnly())\n\t            this.editor.replaceAll(this.replaceInput.value);\n\t    };\n\n\t    this.hide = function() {\n\t        this.active = false;\n\t        this.setSearchRange(null);\n\t        this.editor.off(\"changeSession\", this.setSession);\n\n\t        this.element.style.display = \"none\";\n\t        this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb);\n\t        this.editor.focus();\n\t    };\n\t    this.show = function(value, isReplace) {\n\t        this.active = true;\n\t        this.editor.on(\"changeSession\", this.setSession);\n\t        this.element.style.display = \"\";\n\t        this.replaceOption.checked = isReplace;\n\n\t        if (value)\n\t            this.searchInput.value = value;\n\t        \n\t        this.searchInput.focus();\n\t        this.searchInput.select();\n\n\t        this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb);\n\n\t        this.$syncOptions(true);\n\t    };\n\n\t    this.isFocused = function() {\n\t        var el = document.activeElement;\n\t        return el == this.searchInput || el == this.replaceInput;\n\t    };\n\t}).call(SearchBox.prototype);\n\n\texports.SearchBox = SearchBox;\n\n\texports.Search = function(editor, isReplace) {\n\t    var sb = editor.searchBox || new SearchBox(editor);\n\t    sb.show(editor.session.getTextRange(), isReplace);\n\t};\n\n\t});\n\t                (function() {\n\t                    ace.acequire([\"ace/ext/searchbox\"], function() {});\n\t                })();\n\t            \n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar VanillaPicker;\n\n\tif (window.Picker) {\n\t  // use the already loaded instance of VanillaPicker\n\t  VanillaPicker = window.Picker;\n\t}\n\telse {\n\t  try {\n\t    // load color picker\n\t    // Note that we load the ES5 distribution bundle\n\t    // instead of the \"default\" as the default currently\n\t    // points to `src/picker.js` which is ES6 code (v2.3.0).\n\t    VanillaPicker = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"vanilla-picker/dist/vanilla-picker\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t  }\n\t  catch (err) {\n\t    // probably running the minimalist bundle\n\t  }\n\t}\n\n\tmodule.exports = VanillaPicker;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar VanillaPicker = __webpack_require__(5);\n\tvar Highlighter = __webpack_require__(7);\n\tvar History = __webpack_require__(8);\n\tvar SearchBox = __webpack_require__(9);\n\tvar ContextMenu = __webpack_require__(10);\n\tvar TreePath = __webpack_require__(16);\n\tvar Node = __webpack_require__(17);\n\tvar ModeSwitcher = __webpack_require__(26);\n\tvar util = __webpack_require__(12);\n\tvar autocomplete = __webpack_require__(27);\n\tvar showSortModal = __webpack_require__(22);\n\tvar showTransformModal = __webpack_require__(24);\n\tvar translate = __webpack_require__(15).translate;\n\tvar setLanguages = __webpack_require__(15).setLanguages;\n\tvar setLanguage = __webpack_require__(15).setLanguage;\n\n\tvar DEFAULT_MODAL_ANCHOR = document.body; // TODO: this constant is defined twice\n\n\t// create a mixin with the functions for tree mode\n\tvar treemode = {};\n\n\t/**\n\t * Create a tree editor\n\t * @param {Element} container    Container element\n\t * @param {Object}  [options]    Object with options. available options:\n\t *                               {String} mode            Editor mode. Available values:\n\t *                                                        'tree' (default), 'view',\n\t *                                                        and 'form'.\n\t *                               {Boolean} search         Enable search box.\n\t *                                                        True by default\n\t *                               {Boolean} history        Enable history (undo/redo).\n\t *                                                        True by default\n\t *                               {function} onChange      Callback method, triggered\n\t *                                                        on change of contents.\n\t *                                                        Does not pass the changed contents.\n\t *                               {function} onChangeJSON  Callback method, triggered\n\t *                                                        in modes on change of contents,\n\t *                                                        passing the changed contents\n\t *                                                        as JSON.\n\t *                                                        Only applicable for modes\n\t *                                                        'tree', 'view', and 'form'.\n\t *                               {function} onChangeText  Callback method, triggered\n\t *                                                        in modes on change of contents,\n\t *                                                        passing the changed contents\n\t *                                                        as stringified JSON.\n\t *                               {String} name            Field name for the root node.\n\t *                               {boolean} escapeUnicode  If true, unicode\n\t *                                                        characters are escaped.\n\t *                                                        false by default.\n\t *                               {Object} schema          A JSON Schema for validation\n\t *                               {function} onEvent       Function triggered\n\t *                                                        when an event occurs\n\t *                                                        in a field or value.\n\t * @private\n\t */\n\ttreemode.create = function (container, options) {\n\t  if (!container) {\n\t    throw new Error('No container element provided.');\n\t  }\n\t  this.container = container;\n\t  this.dom = {};\n\t  this.highlighter = new Highlighter();\n\t  this.selection = undefined; // will hold the last input selection\n\t  this.multiselection = {\n\t    nodes: []\n\t  };\n\t  this.validateSchema = null; // will be set in .setSchema(schema)\n\t  this.validationSequence = 0;\n\t  this.errorNodes = [];\n\n\t  this.node = null;\n\t  this.focusTarget = null;\n\n\t  this._setOptions(options);\n\n\t  if (options.autocomplete)\n\t      this.autocomplete = new autocomplete(options.autocomplete);\n\n\t  if (this.options.history && this.options.mode !== 'view') {\n\t    this.history = new History(this);\n\t  }\n\n\t  this._createFrame();\n\t  this._createTable();\n\t};\n\n\t/**\n\t * Destroy the editor. Clean up DOM, event listeners, and web workers.\n\t */\n\ttreemode.destroy = function () {\n\t  if (this.frame && this.container && this.frame.parentNode == this.container) {\n\t    this.container.removeChild(this.frame);\n\t    this.frame = null;\n\t  }\n\t  this.container = null;\n\n\t  this.dom = null;\n\n\t  this.clear();\n\t  this.node = null;\n\t  this.focusTarget = null;\n\t  this.selection = null;\n\t  this.multiselection = null;\n\t  this.errorNodes = null;\n\t  this.validateSchema = null;\n\t  this._debouncedValidate = null;\n\n\t  if (this.history) {\n\t    this.history.destroy();\n\t    this.history = null;\n\t  }\n\n\t  if (this.searchBox) {\n\t    this.searchBox.destroy();\n\t    this.searchBox = null;\n\t  }\n\n\t  if (this.modeSwitcher) {\n\t    this.modeSwitcher.destroy();\n\t    this.modeSwitcher = null;\n\t  }\n\t};\n\n\t/**\n\t * Initialize and set default options\n\t * @param {Object}  [options]    See description in constructor\n\t * @private\n\t */\n\ttreemode._setOptions = function (options) {\n\t  var editor = this;\n\n\t  this.options = {\n\t    search: true,\n\t    history: true,\n\t    mode: 'tree',\n\t    name: undefined,   // field name of root node\n\t    schema: null,\n\t    schemaRefs: null,\n\t    autocomplete: null,\n\t    navigationBar : true,\n\t    onSelectionChange: null,\n\t    colorPicker: true,\n\t    onColorPicker: function (parent, color, onChange) {\n\t      if (VanillaPicker) {\n\t        new VanillaPicker({\n\t          parent: parent,\n\t          color: color,\n\t          popup: 'bottom',\n\t          onDone: function (color) {\n\t            var alpha = color.rgba[3]\n\t            var hex = (alpha === 1)\n\t                ? color.hex.substr(0, 7)  // return #RRGGBB\n\t                : color.hex               // return #RRGGBBAA\n\t            onChange(hex)\n\t          }\n\t        }).show();\n\t      }\n\t      else {\n\t        console.warn('Cannot open color picker: the `vanilla-picker` library is not included in the bundle. ' +\n\t            'Either use the full bundle or implement your own color picker using `onColorPicker`.')\n\t      }\n\t    },\n\t    timestampTag: true,\n\t    onEvent: null\n\t  };\n\n\t  // copy all options\n\t  if (options) {\n\t    for (var prop in options) {\n\t      if (options.hasOwnProperty(prop)) {\n\t        this.options[prop] = options[prop];\n\t      }\n\t    }\n\t  }\n\n\t  // compile a JSON schema validator if a JSON schema is provided\n\t  this.setSchema(this.options.schema, this.options.schemaRefs);\n\n\t  // create a debounced validate function\n\t  this._debouncedValidate = util.debounce(this.validate.bind(this), this.DEBOUNCE_INTERVAL);\n\n\t  if (options.onSelectionChange) {\n\t    this.onSelectionChange(options.onSelectionChange);\n\t  }\n\n\t  setLanguages(this.options.languages);\n\t  setLanguage(this.options.language)\n\t};\n\n\t/**\n\t * Set new JSON object in editor.\n\t * Resets the state of the editor (expanded nodes, search, selection).\n\t *\n\t * @param {*} json\n\t */\n\ttreemode.set = function (json) {\n\t  // verify if json is valid JSON, ignore when a function\n\t  if (json instanceof Function || (json === undefined)) {\n\t    this.clear();\n\t  }\n\t  else {\n\t    this.content.removeChild(this.table);  // Take the table offline\n\n\t    // replace the root node\n\t    var params = {\n\t      field: this.options.name,\n\t      value: json\n\t    };\n\t    var node = new Node(this, params);\n\t    this._setRoot(node);\n\n\t    // validate JSON schema (if configured)\n\t    this.validate();\n\n\t    // expand\n\t    var recurse = false;\n\t    this.node.expand(recurse);\n\n\t    this.content.appendChild(this.table);  // Put the table online again\n\t  }\n\n\t  // TODO: maintain history, store last state and previous document\n\t  if (this.history) {\n\t    this.history.clear();\n\t  }\n\n\t  // clear search\n\t  if (this.searchBox) {\n\t    this.searchBox.clear();\n\t  }\n\t};\n\n\t/**\n\t * Update JSON object in editor.\n\t * Maintains the state of the editor (expanded nodes, search, selection).\n\t *\n\t * @param {*} json\n\t */\n\ttreemode.update = function (json) {\n\t  // don't update if there are no changes\n\t  if (this.node.deepEqual(json)) {\n\t    return;\n\t  }\n\n\t  var selection = this.getSelection();\n\n\t  // apply the changed json\n\t  this.onChangeDisabled = true; // don't fire an onChange event\n\t  this.node.update(json);\n\t  this.onChangeDisabled = false;\n\n\t  // validate JSON schema\n\t  this.validate();\n\n\t  // update search result if any\n\t  if (this.searchBox && !this.searchBox.isEmpty()) {\n\t    this.searchBox.forceSearch();\n\t  }\n\n\t  // update selection if any\n\t  if (selection && selection.start && selection.end) {\n\t    // only keep/update the selection if both start and end node still exists,\n\t    // else we clear the selection\n\t    var startNode = this.node.findNodeByPath(selection.start.path);\n\t    var endNode = this.node.findNodeByPath(selection.end.path);\n\t    if (startNode && endNode) {\n\t      this.setSelection(selection.start, selection.end);\n\t    }\n\t    else {\n\t      this.setSelection({}, {}); // clear selection\n\t    }\n\t  }\n\t  else {\n\t    this.setSelection({}, {}); // clear selection\n\t  }\n\t};\n\n\t/**\n\t * Get JSON object from editor\n\t * @return {Object | undefined} json\n\t */\n\ttreemode.get = function () {\n\t  // remove focus from currently edited node\n\t  if (this.focusTarget) {\n\t    var node = Node.getNodeFromTarget(this.focusTarget);\n\t    if (node) {\n\t      node.blur();\n\t    }\n\t  }\n\n\t  if (this.node) {\n\t    return this.node.getValue();\n\t  }\n\t  else {\n\t    return undefined;\n\t  }\n\t};\n\n\t/**\n\t * Get the text contents of the editor\n\t * @return {String} jsonText\n\t */\n\ttreemode.getText = function() {\n\t  return JSON.stringify(this.get());\n\t};\n\n\t/**\n\t * Set the text contents of the editor.\n\t * Resets the state of the editor (expanded nodes, search, selection).\n\t * @param {String} jsonText\n\t */\n\ttreemode.setText = function(jsonText) {\n\t  try {\n\t    this.set(util.parse(jsonText)); // this can throw an error\n\t  }\n\t  catch (err) {\n\t    // try to sanitize json, replace JavaScript notation with JSON notation\n\t    var sanitizedJsonText = util.sanitize(jsonText);\n\n\t    // try to parse again\n\t    this.set(util.parse(sanitizedJsonText)); // this can throw an error\n\t  }\n\t};\n\n\t/**\n\t * Update the text contents of the editor.\n\t * Maintains the state of the editor (expanded nodes, search, selection).\n\t * @param {String} jsonText\n\t */\n\ttreemode.updateText = function(jsonText) {\n\t  try {\n\t    this.update(util.parse(jsonText)); // this can throw an error\n\t  }\n\t  catch (err) {\n\t    // try to sanitize json, replace JavaScript notation with JSON notation\n\t    var sanitizedJsonText = util.sanitize(jsonText);\n\n\t    // try to parse again\n\t    this.update(util.parse(sanitizedJsonText)); // this can throw an error\n\t  }\n\t};\n\n\t/**\n\t * Set a field name for the root node.\n\t * @param {String | undefined} name\n\t */\n\ttreemode.setName = function (name) {\n\t  this.options.name = name;\n\t  if (this.node) {\n\t    this.node.updateField(this.options.name);\n\t  }\n\t};\n\n\t/**\n\t * Get the field name for the root node.\n\t * @return {String | undefined} name\n\t */\n\ttreemode.getName = function () {\n\t  return this.options.name;\n\t};\n\n\t/**\n\t * Set focus to the editor. Focus will be set to:\n\t * - the first editable field or value, or else\n\t * - to the expand button of the root node, or else\n\t * - to the context menu button of the root node, or else\n\t * - to the first button in the top menu\n\t */\n\ttreemode.focus = function () {\n\t  var input = this.scrollableContent.querySelector('[contenteditable=true]');\n\t  if (input) {\n\t    input.focus();\n\t  }\n\t  else if (this.node.dom.expand) {\n\t    this.node.dom.expand.focus();\n\t  }\n\t  else if (this.node.dom.menu) {\n\t    this.node.dom.menu.focus();\n\t  }\n\t  else {\n\t    // focus to the first button in the menu\n\t    input = this.frame.querySelector('button');\n\t    if (input) {\n\t      input.focus();\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Remove the root node from the editor\n\t */\n\ttreemode.clear = function () {\n\t  if (this.node) {\n\t    this.node.hide();\n\t    delete this.node;\n\t  }\n\n\t  if (this.treePath) {\n\t    this.treePath.reset();\n\t  }\n\t};\n\n\t/**\n\t * Set the root node for the json editor\n\t * @param {Node} node\n\t * @private\n\t */\n\ttreemode._setRoot = function (node) {\n\t  this.clear();\n\n\t  this.node = node;\n\n\t  // append to the dom\n\t  this.tbody.appendChild(node.getDom());\n\t};\n\n\t/**\n\t * Search text in all nodes\n\t * The nodes will be expanded when the text is found one of its childs,\n\t * else it will be collapsed. Searches are case insensitive.\n\t * @param {String} text\n\t * @return {Object[]} results  Array with nodes containing the search results\n\t *                             The result objects contains fields:\n\t *                             - {Node} node,\n\t *                             - {String} elem  the dom element name where\n\t *                                              the result is found ('field' or\n\t *                                              'value')\n\t */\n\ttreemode.search = function (text) {\n\t  var results;\n\t  if (this.node) {\n\t    this.content.removeChild(this.table);  // Take the table offline\n\t    results = this.node.search(text);\n\t    this.content.appendChild(this.table);  // Put the table online again\n\t  }\n\t  else {\n\t    results = [];\n\t  }\n\n\t  return results;\n\t};\n\n\t/**\n\t * Expand all nodes\n\t */\n\ttreemode.expandAll = function () {\n\t  if (this.node) {\n\t    this.content.removeChild(this.table);  // Take the table offline\n\t    this.node.expand();\n\t    this.content.appendChild(this.table);  // Put the table online again\n\t  }\n\t};\n\n\t/**\n\t * Collapse all nodes\n\t */\n\ttreemode.collapseAll = function () {\n\t  if (this.node) {\n\t    this.content.removeChild(this.table);  // Take the table offline\n\t    this.node.collapse();\n\t    this.content.appendChild(this.table);  // Put the table online again\n\t  }\n\t};\n\n\t/**\n\t * The method onChange is called whenever a field or value is changed, created,\n\t * deleted, duplicated, etc.\n\t * @param {String} action  Change action. Available values: \"editField\",\n\t *                         \"editValue\", \"changeType\", \"appendNode\",\n\t *                         \"removeNode\", \"duplicateNode\", \"moveNode\", \"expand\",\n\t *                         \"collapse\".\n\t * @param {Object} params  Object containing parameters describing the change.\n\t *                         The parameters in params depend on the action (for\n\t *                         example for \"editValue\" the Node, old value, and new\n\t *                         value are provided). params contains all information\n\t *                         needed to undo or redo the action.\n\t * @private\n\t */\n\ttreemode._onAction = function (action, params) {\n\t  // add an action to the history\n\t  if (this.history) {\n\t    this.history.add(action, params);\n\t  }\n\n\t  this._onChange();\n\t};\n\n\t/**\n\t * Handle a change:\n\t * - Validate JSON schema\n\t * - Send a callback to the onChange listener if provided\n\t * @private\n\t */\n\ttreemode._onChange = function () {\n\t  if (this.onChangeDisabled) {\n\t    return;\n\t  }\n\n\t  // validate JSON schema (if configured)\n\t  this._debouncedValidate();\n\n\t  // trigger the onChange callback\n\t  if (this.options.onChange) {\n\t    try {\n\t      this.options.onChange();\n\t    }\n\t    catch (err) {\n\t      console.error('Error in onChange callback: ', err);\n\t    }\n\t  }\n\n\t  // trigger the onChangeJSON callback\n\t  if (this.options.onChangeJSON) {\n\t    try {\n\t      this.options.onChangeJSON(this.get());\n\t    }\n\t    catch (err) {\n\t      console.error('Error in onChangeJSON callback: ', err);\n\t    }\n\t  }\n\n\t  // trigger the onChangeText callback\n\t  if (this.options.onChangeText) {\n\t    try {\n\t      this.options.onChangeText(this.getText());\n\t    }\n\t    catch (err) {\n\t      console.error('Error in onChangeText callback: ', err);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Validate current JSON object against the configured JSON schema\n\t * Throws an exception when no JSON schema is configured\n\t */\n\ttreemode.validate = function () {\n\t  var root = this.node;\n\t  if (!root) { // TODO: this should be redundant but is needed on mode switch\n\t    return;\n\t  }\n\n\t  var json = root.getValue();\n\n\t  // check for duplicate keys\n\t  var duplicateErrors = root.validate();\n\n\t  // execute JSON schema validation\n\t  var schemaErrors = [];\n\t  if (this.validateSchema) {\n\t    var valid = this.validateSchema(json);\n\t    if (!valid) {\n\t      // apply all new errors\n\t      schemaErrors = this.validateSchema.errors\n\t          .map(function (error) {\n\t            return util.improveSchemaError(error);\n\t          })\n\t          .map(function findNode (error) {\n\t            return {\n\t              node: root.findNode(error.dataPath),\n\t              error: error\n\t            }\n\t          })\n\t          .filter(function hasNode (entry) {\n\t            return entry.node != null\n\t          });\n\t    }\n\t  }\n\n\t  // execute custom validation and after than merge and render all errors\n\t  this.validationSequence++;\n\t  var me = this;\n\t  var seq = this.validationSequence;\n\t  this._validateCustom(json)\n\t      .then(function (customValidationErrors) {\n\t        // only apply when there was no other validation started whilst resolving async results\n\t        if (seq === me.validationSequence) {\n\t          var errorNodes = [].concat(duplicateErrors, schemaErrors, customValidationErrors || []);\n\t          me._renderValidationErrors(errorNodes);\n\t        }\n\t      })\n\t      .catch(function (err) {\n\t        console.error(err);\n\t      });\n\t};\n\n\ttreemode._renderValidationErrors = function (errorNodes) {\n\t  // clear all current errors\n\t  if (this.errorNodes) {\n\t    this.errorNodes.forEach(function (node) {\n\t      node.setError(null);\n\t    });\n\t  }\n\n\t  // render the new errors\n\t  var parentPairs = errorNodes\n\t      .reduce(function (all, entry) {\n\t        return entry.node\n\t            .findParents()\n\t            .filter(function (parent) {\n\t              return !all.some(function (pair) {\n\t                return pair[0] === parent;\n\t              });\n\t            })\n\t            .map(function (parent) {\n\t              return [parent, entry.node];\n\t            })\n\t            .concat(all);\n\t      }, []);\n\n\t  this.errorNodes = parentPairs\n\t      .map(function (pair) {\n\t        return {\n\t          node: pair[0],\n\t          child: pair[1],\n\t          error: {\n\t            message: pair[0].type === 'object'\n\t                ? 'Contains invalid properties' // object\n\t                : 'Contains invalid items'      // array\n\t          }\n\t        };\n\t      })\n\t      .concat(errorNodes)\n\t      .map(function setError (entry) {\n\t        entry.node.setError(entry.error, entry.child);\n\t        return entry.node;\n\t      });\n\t};\n\n\t/**\n\t * Execute custom validation if configured.\n\t *\n\t * Returns a promise resolving with the custom errors (or nothing).\n\t */\n\ttreemode._validateCustom = function (json) {\n\t  try {\n\t    if (this.options.onValidate) {\n\t      var root = this.node;\n\t      var customValidateResults = this.options.onValidate(json);\n\n\t      var resultPromise = util.isPromise(customValidateResults)\n\t          ? customValidateResults\n\t          : Promise.resolve(customValidateResults);\n\n\t      return resultPromise.then(function (customValidationPathErrors) {\n\t        if (Array.isArray(customValidationPathErrors)) {\n\t          return customValidationPathErrors\n\t              .filter(function (error) {\n\t                var valid = util.isValidValidationError(error);\n\n\t                if (!valid) {\n\t                  console.warn('Ignoring a custom validation error with invalid structure. ' +\n\t                      'Expected structure: {path: [...], message: \"...\"}. ' +\n\t                      'Actual error:', error);\n\t                }\n\n\t                return valid;\n\t              })\n\t              .map(function (error) {\n\t                var node;\n\t                try {\n\t                  node = (error && error.path) ? root.findNodeByPath(error.path) : null\n\t                }\n\t                catch (err) {\n\t                  // stay silent here, we throw a generic warning if no node is found\n\t                }\n\t                if (!node) {\n\t                  console.warn('Ignoring validation error: node not found. Path:', error.path, 'Error:', error);\n\t                }\n\n\t                return {\n\t                  node: node,\n\t                  error: error\n\t                }\n\t              })\n\t              .filter(function (entry) {\n\t                return entry && entry.node && entry.error && entry.error.message\n\t              });\n\t        }\n\t        else {\n\t          return null;\n\t        }\n\t      });\n\t    }\n\t  }\n\t  catch (err) {\n\t    return Promise.reject(err);\n\t  }\n\n\t  return Promise.resolve(null);\n\t};\n\n\t/**\n\t * Refresh the rendered contents\n\t */\n\ttreemode.refresh = function () {\n\t  if (this.node) {\n\t    this.node.updateDom({recurse: true});\n\t  }\n\t};\n\n\t/**\n\t * Start autoscrolling when given mouse position is above the top of the\n\t * editor contents, or below the bottom.\n\t * @param {Number} mouseY  Absolute mouse position in pixels\n\t */\n\ttreemode.startAutoScroll = function (mouseY) {\n\t  var me = this;\n\t  var content = this.scrollableContent;\n\t  var top = util.getAbsoluteTop(content);\n\t  var height = content.clientHeight;\n\t  var bottom = top + height;\n\t  var margin = 24;\n\t  var interval = 50; // ms\n\n\t  if ((mouseY < top + margin) && content.scrollTop > 0) {\n\t    this.autoScrollStep = ((top + margin) - mouseY) / 3;\n\t  }\n\t  else if (mouseY > bottom - margin &&\n\t      height + content.scrollTop < content.scrollHeight) {\n\t    this.autoScrollStep = ((bottom - margin) - mouseY) / 3;\n\t  }\n\t  else {\n\t    this.autoScrollStep = undefined;\n\t  }\n\n\t  if (this.autoScrollStep) {\n\t    if (!this.autoScrollTimer) {\n\t      this.autoScrollTimer = setInterval(function () {\n\t        if (me.autoScrollStep) {\n\t          content.scrollTop -= me.autoScrollStep;\n\t        }\n\t        else {\n\t          me.stopAutoScroll();\n\t        }\n\t      }, interval);\n\t    }\n\t  }\n\t  else {\n\t    this.stopAutoScroll();\n\t  }\n\t};\n\n\t/**\n\t * Stop auto scrolling. Only applicable when scrolling\n\t */\n\ttreemode.stopAutoScroll = function () {\n\t  if (this.autoScrollTimer) {\n\t    clearTimeout(this.autoScrollTimer);\n\t    delete this.autoScrollTimer;\n\t  }\n\t  if (this.autoScrollStep) {\n\t    delete this.autoScrollStep;\n\t  }\n\t};\n\n\n\t/**\n\t * Set the focus to an element in the editor, set text selection, and\n\t * set scroll position.\n\t * @param {Object} selection  An object containing fields:\n\t *                            {Element | undefined} dom     The dom element\n\t *                                                          which has focus\n\t *                            {Range | TextRange} range     A text selection\n\t *                            {Node[]} nodes                Nodes in case of multi selection\n\t *                            {Number} scrollTop            Scroll position\n\t */\n\ttreemode.setDomSelection = function (selection) {\n\t  if (!selection) {\n\t    return;\n\t  }\n\n\t  if ('scrollTop' in selection && this.scrollableContent) {\n\t    // TODO: animated scroll\n\t    this.scrollableContent.scrollTop = selection.scrollTop;\n\t  }\n\t  if (selection.paths) {\n\t    // multi-select\n\t    var me = this;\n\t    var nodes = selection.paths.map(function (path) {\n\t      return me.node.findNodeByInternalPath(path);\n\t    });\n\n\t    this.select(nodes);\n\t  }\n\t  else {\n\t    // find the actual DOM element where to apply the focus\n\t    var node = selection.path\n\t        ? this.node.findNodeByInternalPath(selection.path)\n\t        : null;\n\t    var container = (node && selection.domName)\n\t        ? node.dom[selection.domName]\n\t        : null;\n\t    if (selection.range && container) {\n\t      var range = Object.assign({}, selection.range, { container: container });\n\t      util.setSelectionOffset(range);\n\t    }\n\t    else if (node) { // just a fallback\n\t      node.focus();\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Get the current focus\n\t * @return {Object} selection An object containing fields:\n\t *                            {Element | undefined} dom     The dom element\n\t *                                                          which has focus\n\t *                            {Range | TextRange} range     A text selection\n\t *                            {Node[]} nodes                Nodes in case of multi selection\n\t *                            {Number} scrollTop            Scroll position\n\t */\n\ttreemode.getDomSelection = function () {\n\t  // find the node and field name of the current target,\n\t  // so we can store the current selection in a serializable\n\t  // way (internal node path and domName)\n\t  var node = Node.getNodeFromTarget(this.focusTarget);\n\t  var focusTarget = this.focusTarget;\n\t  var domName = node\n\t      ? Object.keys(node.dom).find(function (domName) {\n\t        return node.dom[domName] === focusTarget;\n\t      })\n\t      : null;\n\n\t  var range = util.getSelectionOffset();\n\t  if (range && range.container.nodeName !== 'DIV') { // filter on (editable) divs)\n\t    range = null;\n\t  }\n\t  if (range && range.container !== focusTarget) {\n\t    range = null;\n\t  }\n\t  if (range) {\n\t    // we cannot rely on the current instance of the container,\n\t    // we need to store the internal node path and field and\n\t    // find the actual DOM field when applying the selection\n\t    delete range.container;\n\t  }\n\n\t  return {\n\t    path: node ? node.getInternalPath() : null,\n\t    domName: domName,\n\t    range: range,\n\t    paths: this.multiselection.length > 0\n\t        ? this.multiselection.nodes.map(function (node) {\n\t            return node.getInternalPath();\n\t          })\n\t        : null,\n\t    scrollTop: this.scrollableContent ? this.scrollableContent.scrollTop : 0\n\t  };\n\t};\n\n\t/**\n\t * Adjust the scroll position such that given top position is shown at 1/4\n\t * of the window height.\n\t * @param {Number} top\n\t * @param {function(boolean)} [callback]   Callback, executed when animation is\n\t *                                         finished. The callback returns true\n\t *                                         when animation is finished, or false\n\t *                                         when not.\n\t */\n\ttreemode.scrollTo = function (top, callback) {\n\t  var content = this.scrollableContent;\n\t  if (content) {\n\t    var editor = this;\n\t    // cancel any running animation\n\t    if (editor.animateTimeout) {\n\t      clearTimeout(editor.animateTimeout);\n\t      delete editor.animateTimeout;\n\t    }\n\t    if (editor.animateCallback) {\n\t      editor.animateCallback(false);\n\t      delete editor.animateCallback;\n\t    }\n\n\t    // calculate final scroll position\n\t    var height = content.clientHeight;\n\t    var bottom = content.scrollHeight - height;\n\t    var finalScrollTop = Math.min(Math.max(top - height / 4, 0), bottom);\n\n\t    // animate towards the new scroll position\n\t    var animate = function () {\n\t      var scrollTop = content.scrollTop;\n\t      var diff = (finalScrollTop - scrollTop);\n\t      if (Math.abs(diff) > 3) {\n\t        content.scrollTop += diff / 3;\n\t        editor.animateCallback = callback;\n\t        editor.animateTimeout = setTimeout(animate, 50);\n\t      }\n\t      else {\n\t        // finished\n\t        if (callback) {\n\t          callback(true);\n\t        }\n\t        content.scrollTop = finalScrollTop;\n\t        delete editor.animateTimeout;\n\t        delete editor.animateCallback;\n\t      }\n\t    };\n\t    animate();\n\t  }\n\t  else {\n\t    if (callback) {\n\t      callback(false);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Create main frame\n\t * @private\n\t */\n\ttreemode._createFrame = function () {\n\t  // create the frame\n\t  this.frame = document.createElement('div');\n\t  this.frame.className = 'jsoneditor jsoneditor-mode-' + this.options.mode;\n\t  this.container.appendChild(this.frame);\n\n\t  // create one global event listener to handle all events from all nodes\n\t  var editor = this;\n\t  function onEvent(event) {\n\t    // when switching to mode \"code\" or \"text\" via the menu, some events\n\t    // are still fired whilst the _onEvent methods is already removed.\n\t    if (editor._onEvent) {\n\t      editor._onEvent(event);\n\t    }\n\t  }\n\t  this.frame.onclick = function (event) {\n\t    var target = event.target;// || event.srcElement;\n\n\t    onEvent(event);\n\n\t    // prevent default submit action of buttons when editor is located\n\t    // inside a form\n\t    if (target.nodeName == 'BUTTON') {\n\t      event.preventDefault();\n\t    }\n\t  };\n\t  this.frame.oninput = onEvent;\n\t  this.frame.onchange = onEvent;\n\t  this.frame.onkeydown = onEvent;\n\t  this.frame.onkeyup = onEvent;\n\t  this.frame.oncut = onEvent;\n\t  this.frame.onpaste = onEvent;\n\t  this.frame.onmousedown = onEvent;\n\t  this.frame.onmouseup = onEvent;\n\t  this.frame.onmouseover = onEvent;\n\t  this.frame.onmouseout = onEvent;\n\t  // Note: focus and blur events do not propagate, therefore they defined\n\t  // using an eventListener with useCapture=true\n\t  // see http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html\n\t  util.addEventListener(this.frame, 'focus', onEvent, true);\n\t  util.addEventListener(this.frame, 'blur', onEvent, true);\n\t  this.frame.onfocusin = onEvent;  // for IE\n\t  this.frame.onfocusout = onEvent; // for IE\n\n\t  // create menu\n\t  this.menu = document.createElement('div');\n\t  this.menu.className = 'jsoneditor-menu';\n\t  this.frame.appendChild(this.menu);\n\n\t  // create expand all button\n\t  var expandAll = document.createElement('button');\n\t  expandAll.type = 'button';\n\t  expandAll.className = 'jsoneditor-expand-all';\n\t  expandAll.title = translate('expandAll');\n\t  expandAll.onclick = function () {\n\t    editor.expandAll();\n\t  };\n\t  this.menu.appendChild(expandAll);\n\n\t  // create collapse all button\n\t  var collapseAll = document.createElement('button');\n\t  collapseAll.type = 'button';\n\t  collapseAll.title = translate('collapseAll');\n\t  collapseAll.className = 'jsoneditor-collapse-all';\n\t  collapseAll.onclick = function () {\n\t    editor.collapseAll();\n\t  };\n\t  this.menu.appendChild(collapseAll);\n\n\t  // create sort button\n\t  var sort = document.createElement('button');\n\t  sort.type = 'button';\n\t  sort.className = 'jsoneditor-sort';\n\t  sort.title = translate('sortTitleShort');\n\t  sort.onclick = function () {\n\t    var anchor = editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n\t    showSortModal(editor.node, anchor)\n\t  };\n\t  this.menu.appendChild(sort);\n\n\t  // create transform button\n\t  var transform = document.createElement('button');\n\t  transform.type = 'button';\n\t  transform.title = translate('transformTitleShort');\n\t  transform.className = 'jsoneditor-transform';\n\t  transform.onclick = function () {\n\t    var anchor = editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n\t    showTransformModal(editor.node, anchor)\n\t  };\n\t  this.menu.appendChild(transform);\n\n\t  // create undo/redo buttons\n\t  if (this.history) {\n\t    // create undo button\n\t    var undo = document.createElement('button');\n\t    undo.type = 'button';\n\t    undo.className = 'jsoneditor-undo jsoneditor-separator';\n\t    undo.title = translate('undo');\n\t    undo.onclick = function () {\n\t      editor._onUndo();\n\t    };\n\t    this.menu.appendChild(undo);\n\t    this.dom.undo = undo;\n\n\t    // create redo button\n\t    var redo = document.createElement('button');\n\t    redo.type = 'button';\n\t    redo.className = 'jsoneditor-redo';\n\t    redo.title = translate('redo');\n\t    redo.onclick = function () {\n\t      editor._onRedo();\n\t    };\n\t    this.menu.appendChild(redo);\n\t    this.dom.redo = redo;\n\n\t    // register handler for onchange of history\n\t    this.history.onChange = function () {\n\t      undo.disabled = !editor.history.canUndo();\n\t      redo.disabled = !editor.history.canRedo();\n\t    };\n\t    this.history.onChange();\n\t  }\n\n\t  // create mode box\n\t  if (this.options && this.options.modes && this.options.modes.length) {\n\t    var me = this;\n\t    this.modeSwitcher = new ModeSwitcher(this.menu, this.options.modes, this.options.mode, function onSwitch(mode) {\n\t      // switch mode and restore focus\n\t      me.setMode(mode);\n\t      me.modeSwitcher.focus();\n\t    });\n\t  }\n\n\t  // create search box\n\t  if (this.options.search) {\n\t    this.searchBox = new SearchBox(this, this.menu);\n\t  }\n\n\t  if(this.options.navigationBar) {\n\t    // create second menu row for treepath\n\t    this.navBar = document.createElement('div');\n\t    this.navBar.className = 'jsoneditor-navigation-bar nav-bar-empty';\n\t    this.frame.appendChild(this.navBar);\n\n\t    this.treePath = new TreePath(this.navBar);\n\t    this.treePath.onSectionSelected(this._onTreePathSectionSelected.bind(this));\n\t    this.treePath.onContextMenuItemSelected(this._onTreePathMenuItemSelected.bind(this));\n\t  }\n\t};\n\n\t/**\n\t * Perform an undo action\n\t * @private\n\t */\n\ttreemode._onUndo = function () {\n\t  if (this.history) {\n\t    // undo last action\n\t    this.history.undo();\n\n\t    // fire change event\n\t    this._onChange();\n\t  }\n\t};\n\n\t/**\n\t * Perform a redo action\n\t * @private\n\t */\n\ttreemode._onRedo = function () {\n\t  if (this.history) {\n\t    // redo last action\n\t    this.history.redo();\n\n\t    // fire change event\n\t    this._onChange();\n\t  }\n\t};\n\n\t/**\n\t * Event handler\n\t * @param event\n\t * @private\n\t */\n\ttreemode._onEvent = function (event) {\n\t  // don't process events when coming from the color picker\n\t  if (Node.targetIsColorPicker(event.target)) {\n\t    return;\n\t  }\n\n\t  if (event.type === 'keydown') {\n\t    this._onKeyDown(event);\n\t  }\n\n\t  if (event.type === 'focus') {\n\t    this.focusTarget = event.target;\n\t  }\n\n\t  if (event.type === 'mousedown') {\n\t    this._startDragDistance(event);\n\t  }\n\t  if (event.type === 'mousemove' || event.type === 'mouseup' || event.type === 'click') {\n\t    this._updateDragDistance(event);\n\t  }\n\n\t  var node = Node.getNodeFromTarget(event.target);\n\n\t  if (node && this.options && this.options.navigationBar && node && (event.type === 'keydown' || event.type === 'mousedown')) {\n\t    // apply on next tick, right after the new key press is applied\n\t    var me = this;\n\t    setTimeout(function () {\n\t      me._updateTreePath(node.getNodePath());\n\t    })\n\t  }\n\n\t  if (node && node.selected) {\n\t    if (event.type === 'click') {\n\t      if (event.target === node.dom.menu) {\n\t        this.showContextMenu(event.target);\n\n\t        // stop propagation (else we will open the context menu of a single node)\n\t        return;\n\t      }\n\n\t      // deselect a multi selection\n\t      if (!event.hasMoved) {\n\t        this.deselect();\n\t      }\n\t    }\n\n\t    if (event.type === 'mousedown') {\n\t      // drag multiple nodes\n\t      Node.onDragStart(this.multiselection.nodes, event);\n\t    }\n\t  }\n\t  else {\n\t    if (event.type === 'mousedown') {\n\t      this.deselect();\n\n\t      if (node && event.target === node.dom.drag) {\n\t        // drag a singe node\n\t        Node.onDragStart(node, event);\n\t      }\n\t      else if (!node || (event.target !== node.dom.field && event.target !== node.dom.value && event.target !== node.dom.select)) {\n\t        // select multiple nodes\n\t        this._onMultiSelectStart(event);\n\t      }\n\t    }\n\t  }\n\n\t  if (node) {\n\t    node.onEvent(event);\n\t  }\n\t};\n\n\t/**\n\t * Update TreePath components\n\t * @param {Array<Node>} pathNodes list of nodes in path from root to selection\n\t * @private\n\t */\n\ttreemode._updateTreePath = function (pathNodes) {\n\t  if (pathNodes && pathNodes.length) {\n\t    util.removeClassName(this.navBar, 'nav-bar-empty');\n\n\t    var pathObjs = [];\n\t    pathNodes.forEach(function (node) {\n\t      var pathObj = {\n\t        name: getName(node),\n\t        node: node,\n\t        children: []\n\t      }\n\t      if (node.childs && node.childs.length) {\n\t        node.childs.forEach(function (childNode) {\n\t          pathObj.children.push({\n\t            name: getName(childNode),\n\t            node: childNode\n\t          });\n\t        });\n\t      }\n\t      pathObjs.push(pathObj);\n\t    });\n\t    this.treePath.setPath(pathObjs);\n\t  } else {\n\t    util.addClassName(this.navBar, 'nav-bar-empty');\n\t  }\n\n\t  function getName(node) {\n\t    return node.parent\n\t        ? ((node.parent.type === 'array') ? node.index : node.field)\n\t        : node.type;\n\t  }\n\t};\n\n\t/**\n\t * Callback for tree path section selection - focus the selected node in the tree\n\t * @param {Object} pathObj path object that was represents the selected section node\n\t * @private\n\t */\n\ttreemode._onTreePathSectionSelected = function (pathObj) {\n\t  if(pathObj && pathObj.node) {\n\t    pathObj.node.expandTo();\n\t    pathObj.node.focus();\n\t  }\n\t};\n\n\t/**\n\t * Callback for tree path menu item selection - rebuild the path accrding to the new selection and focus the selected node in the tree\n\t * @param {Object} pathObj path object that was represents the parent section node\n\t * @param {String} selection selected section child\n\t * @private\n\t */\n\ttreemode._onTreePathMenuItemSelected = function (pathObj, selection) {\n\t  if(pathObj && pathObj.children.length) {\n\t    var selectionObj = pathObj.children.find(function (obj) {\n\t      return obj.name === selection;\n\t    });\n\t    if(selectionObj && selectionObj.node) {\n\t      this._updateTreePath(selectionObj.node.getNodePath());\n\t      selectionObj.node.expandTo();\n\t      selectionObj.node.focus();\n\t    }\n\t  }\n\t};\n\n\ttreemode._startDragDistance = function (event) {\n\t  this.dragDistanceEvent = {\n\t    initialTarget: event.target,\n\t    initialPageX: event.pageX,\n\t    initialPageY: event.pageY,\n\t    dragDistance: 0,\n\t    hasMoved: false\n\t  };\n\t};\n\n\ttreemode._updateDragDistance = function (event) {\n\t  if (!this.dragDistanceEvent) {\n\t    this._startDragDistance(event);\n\t  }\n\n\t  var diffX = event.pageX - this.dragDistanceEvent.initialPageX;\n\t  var diffY = event.pageY - this.dragDistanceEvent.initialPageY;\n\n\t  this.dragDistanceEvent.dragDistance = Math.sqrt(diffX * diffX + diffY * diffY);\n\t  this.dragDistanceEvent.hasMoved =\n\t      this.dragDistanceEvent.hasMoved || this.dragDistanceEvent.dragDistance > 10;\n\n\t  event.dragDistance = this.dragDistanceEvent.dragDistance;\n\t  event.hasMoved = this.dragDistanceEvent.hasMoved;\n\n\t  return event.dragDistance;\n\t};\n\n\t/**\n\t * Start multi selection of nodes by dragging the mouse\n\t * @param event\n\t * @private\n\t */\n\ttreemode._onMultiSelectStart = function (event) {\n\t  var node = Node.getNodeFromTarget(event.target);\n\n\t  if (this.options.mode !== 'tree' || this.options.onEditable !== undefined) {\n\t    // dragging not allowed in modes 'view' and 'form'\n\t    // TODO: allow multiselection of items when option onEditable is specified\n\t    return;\n\t  }\n\n\t  this.multiselection = {\n\t    start: node || null,\n\t    end: null,\n\t    nodes: []\n\t  };\n\n\t  this._startDragDistance(event);\n\n\t  var editor = this;\n\t  if (!this.mousemove) {\n\t    this.mousemove = util.addEventListener(window, 'mousemove', function (event) {\n\t      editor._onMultiSelect(event);\n\t    });\n\t  }\n\t  if (!this.mouseup) {\n\t    this.mouseup = util.addEventListener(window, 'mouseup', function (event ) {\n\t      editor._onMultiSelectEnd(event);\n\t    });\n\t  }\n\n\t};\n\n\t/**\n\t * Multiselect nodes by dragging\n\t * @param event\n\t * @private\n\t */\n\ttreemode._onMultiSelect = function (event) {\n\t  event.preventDefault();\n\n\t  this._updateDragDistance(event);\n\t  if (!event.hasMoved) {\n\t    return;\n\t  }\n\n\t  var node = Node.getNodeFromTarget(event.target);\n\n\t  if (node) {\n\t    if (this.multiselection.start == null) {\n\t      this.multiselection.start = node;\n\t    }\n\t    this.multiselection.end = node;\n\t  }\n\n\t  // deselect previous selection\n\t  this.deselect();\n\n\t  // find the selected nodes in the range from first to last\n\t  var start = this.multiselection.start;\n\t  var end = this.multiselection.end || this.multiselection.start;\n\t  if (start && end) {\n\t    // find the top level childs, all having the same parent\n\t    this.multiselection.nodes = this._findTopLevelNodes(start, end);\n\t    if (this.multiselection.nodes && this.multiselection.nodes.length) {\n\t      var firstNode = this.multiselection.nodes[0];\n\t      if (this.multiselection.start === firstNode || this.multiselection.start.isDescendantOf(firstNode)) {\n\t        this.multiselection.direction = 'down';\n\t      } else {\n\t        this.multiselection.direction = 'up';\n\t      }\n\t    }\n\t    this.select(this.multiselection.nodes);\n\t  }\n\t};\n\n\t/**\n\t * End of multiselect nodes by dragging\n\t * @param event\n\t * @private\n\t */\n\ttreemode._onMultiSelectEnd = function (event) {\n\t  // set focus to the context menu button of the first node\n\t  if (this.multiselection.nodes[0]) {\n\t    this.multiselection.nodes[0].dom.menu.focus();\n\t  }\n\n\t  this.multiselection.start = null;\n\t  this.multiselection.end = null;\n\n\t  // cleanup global event listeners\n\t  if (this.mousemove) {\n\t    util.removeEventListener(window, 'mousemove', this.mousemove);\n\t    delete this.mousemove;\n\t  }\n\t  if (this.mouseup) {\n\t    util.removeEventListener(window, 'mouseup', this.mouseup);\n\t    delete this.mouseup;\n\t  }\n\t};\n\n\t/**\n\t * deselect currently selected nodes\n\t * @param {boolean} [clearStartAndEnd=false]  If true, the `start` and `end`\n\t *                                            state is cleared too.\n\t */\n\ttreemode.deselect = function (clearStartAndEnd) {\n\t  var selectionChanged = !!this.multiselection.nodes.length;\n\t  this.multiselection.nodes.forEach(function (node) {\n\t    node.setSelected(false);\n\t  });\n\t  this.multiselection.nodes = [];\n\n\t  if (clearStartAndEnd) {\n\t    this.multiselection.start = null;\n\t    this.multiselection.end = null;\n\t  }\n\n\t  if (selectionChanged) {\n\t    if (this._selectionChangedHandler) {\n\t      this._selectionChangedHandler();\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * select nodes\n\t * @param {Node[] | Node} nodes\n\t */\n\ttreemode.select = function (nodes) {\n\t  if (!Array.isArray(nodes)) {\n\t    return this.select([nodes]);\n\t  }\n\n\t  if (nodes) {\n\t    this.deselect();\n\n\t    this.multiselection.nodes = nodes.slice(0);\n\n\t    var first = nodes[0];\n\t    nodes.forEach(function (node) {\n\t      node.expandPathToNode();\n\t      node.setSelected(true, node === first);\n\t    });\n\n\t    if (this._selectionChangedHandler) {\n\t      var selection = this.getSelection();\n\t      this._selectionChangedHandler(selection.start, selection.end);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * From two arbitrary selected nodes, find their shared parent node.\n\t * From that parent node, select the two child nodes in the brances going to\n\t * nodes `start` and `end`, and select all childs in between.\n\t * @param {Node} start\n\t * @param {Node} end\n\t * @return {Array.<Node>} Returns an ordered list with child nodes\n\t * @private\n\t */\n\ttreemode._findTopLevelNodes = function (start, end) {\n\t  var startPath = start.getNodePath();\n\t  var endPath = end.getNodePath();\n\t  var i = 0;\n\t  while (i < startPath.length && startPath[i] === endPath[i]) {\n\t    i++;\n\t  }\n\t  var root = startPath[i - 1];\n\t  var startChild = startPath[i];\n\t  var endChild = endPath[i];\n\n\t  if (!startChild || !endChild) {\n\t    if (root.parent) {\n\t      // startChild is a parent of endChild or vice versa\n\t      startChild = root;\n\t      endChild = root;\n\t      root = root.parent\n\t    }\n\t    else {\n\t      // we have selected the root node (which doesn't have a parent)\n\t      startChild = root.childs[0];\n\t      endChild = root.childs[root.childs.length - 1];\n\t    }\n\t  }\n\n\t  if (root && startChild && endChild) {\n\t    var startIndex = root.childs.indexOf(startChild);\n\t    var endIndex = root.childs.indexOf(endChild);\n\t    var firstIndex = Math.min(startIndex, endIndex);\n\t    var lastIndex = Math.max(startIndex, endIndex);\n\n\t    return root.childs.slice(firstIndex, lastIndex + 1);\n\t  }\n\t  else {\n\t    return [];\n\t  }\n\t};\n\n\t/**\n\t * Event handler for keydown. Handles shortcut keys\n\t * @param {Event} event\n\t * @private\n\t */\n\ttreemode._onKeyDown = function (event) {\n\t  var keynum = event.which || event.keyCode;\n\t  var altKey = event.altKey;\n\t  var ctrlKey = event.ctrlKey;\n\t  var metaKey = event.metaKey;\n\t  var shiftKey = event.shiftKey;\n\t  var handled = false;\n\n\t  if (keynum == 9) { // Tab or Shift+Tab\n\t    var me = this;\n\t    setTimeout(function () {\n\t      // select all text when moving focus to an editable div\n\t      util.selectContentEditable(me.focusTarget);\n\t    }, 0);\n\t  }\n\n\t  if (this.searchBox) {\n\t    if (ctrlKey && keynum == 70) { // Ctrl+F\n\t      this.searchBox.dom.search.focus();\n\t      this.searchBox.dom.search.select();\n\t      handled = true;\n\t    }\n\t    else if (keynum == 114 || (ctrlKey && keynum == 71)) { // F3 or Ctrl+G\n\t      var focus = true;\n\t      if (!shiftKey) {\n\t        // select next search result (F3 or Ctrl+G)\n\t        this.searchBox.next(focus);\n\t      }\n\t      else {\n\t        // select previous search result (Shift+F3 or Ctrl+Shift+G)\n\t        this.searchBox.previous(focus);\n\t      }\n\n\t      handled = true;\n\t    }\n\t  }\n\n\t  if (this.history) {\n\t    if (ctrlKey && !shiftKey && keynum == 90) { // Ctrl+Z\n\t      // undo\n\t      this._onUndo();\n\t      handled = true;\n\t    }\n\t    else if (ctrlKey && shiftKey && keynum == 90) { // Ctrl+Shift+Z\n\t      // redo\n\t      this._onRedo();\n\t      handled = true;\n\t    }\n\t  }\n\n\t  if ((this.options.autocomplete) && (!handled)) {\n\t      if (!ctrlKey && !altKey && !metaKey && (event.key.length == 1 || keynum == 8 || keynum == 46)) {\n\t          handled = false;\n\t          var jsonElementType = \"\";\n\t          if (event.target.className.indexOf(\"jsoneditor-value\") >= 0) jsonElementType = \"value\";\n\t          if (event.target.className.indexOf(\"jsoneditor-field\") >= 0) jsonElementType = \"field\";\n\n\t          var node = Node.getNodeFromTarget(event.target);\n\t          // Activate autocomplete\n\t          setTimeout(function (hnode, element) {\n\t              if (element.innerText.length > 0) {\n\t                  var result = this.options.autocomplete.getOptions(element.innerText, hnode.getPath(), jsonElementType, hnode.editor);\n\t                  if (result === null) {\n\t                      this.autocomplete.hideDropDown();\n\t                  } else if (typeof result.then === 'function') {\n\t                      // probably a promise\n\t                      if (result.then(function (obj) {\n\t                          if (obj === null) {\n\t                              this.autocomplete.hideDropDown();\n\t                          } else if (obj.options) {\n\t                              this.autocomplete.show(element, obj.startFrom, obj.options);\n\t                          } else {\n\t                              this.autocomplete.show(element, 0, obj);\n\t                          }\n\t                      }.bind(this)));\n\t                  } else {\n\t                      // definitely not a promise\n\t                      if (result.options)\n\t                          this.autocomplete.show(element, result.startFrom, result.options);\n\t                      else\n\t                          this.autocomplete.show(element, 0, result);\n\t                  }\n\t              }\n\t              else\n\t                  this.autocomplete.hideDropDown();\n\n\t          }.bind(this, node, event.target), 50);\n\t      }\n\t  }\n\n\t  if (handled) {\n\t    event.preventDefault();\n\t    event.stopPropagation();\n\t  }\n\t};\n\n\t/**\n\t * Create main table\n\t * @private\n\t */\n\ttreemode._createTable = function () {\n\t  var contentOuter = document.createElement('div');\n\t  contentOuter.className = 'jsoneditor-outer';\n\t  if(this.options.navigationBar) {\n\t    util.addClassName(contentOuter, 'has-nav-bar');\n\t  }\n\t  this.contentOuter = contentOuter;\n\n\t  this.scrollableContent = document.createElement('div');\n\t  this.scrollableContent.className = 'jsoneditor-tree';\n\t  contentOuter.appendChild(this.scrollableContent);\n\n\t  // the jsoneditor-tree-inner div with bottom padding is here to\n\t  // keep space for the action menu dropdown. It's created as a\n\t  // separate div instead of using scrollableContent to work around\n\t  // and issue in the Chrome browser showing scrollable contents outside of the div\n\t  // see https://github.com/josdejong/jsoneditor/issues/557\n\t  this.content = document.createElement('div');\n\t  this.content.className = 'jsoneditor-tree-inner';\n\t  this.scrollableContent.appendChild(this.content);\n\n\t  this.table = document.createElement('table');\n\t  this.table.className = 'jsoneditor-tree';\n\t  this.content.appendChild(this.table);\n\n\t  // create colgroup where the first two columns don't have a fixed\n\t  // width, and the edit columns do have a fixed width\n\t  var col;\n\t  this.colgroupContent = document.createElement('colgroup');\n\t  if (this.options.mode === 'tree') {\n\t    col = document.createElement('col');\n\t    col.width = \"24px\";\n\t    this.colgroupContent.appendChild(col);\n\t  }\n\t  col = document.createElement('col');\n\t  col.width = \"24px\";\n\t  this.colgroupContent.appendChild(col);\n\t  col = document.createElement('col');\n\t  this.colgroupContent.appendChild(col);\n\t  this.table.appendChild(this.colgroupContent);\n\n\t  this.tbody = document.createElement('tbody');\n\t  this.table.appendChild(this.tbody);\n\n\t  this.frame.appendChild(contentOuter);\n\t};\n\n\t/**\n\t * Show a contextmenu for this node.\n\t * Used for multiselection\n\t * @param {HTMLElement} anchor   Anchor element to attach the context menu to.\n\t * @param {function} [onClose]   Callback method called when the context menu\n\t *                               is being closed.\n\t */\n\ttreemode.showContextMenu = function (anchor, onClose) {\n\t  var items = [];\n\t  var editor = this;\n\n\t  // create duplicate button\n\t  items.push({\n\t    text: translate('duplicateText'),\n\t    title: translate('duplicateTitle'),\n\t    className: 'jsoneditor-duplicate',\n\t    click: function () {\n\t      Node.onDuplicate(editor.multiselection.nodes);\n\t    }\n\t  });\n\n\t  // create remove button\n\t  items.push({\n\t    text: translate('remove'),\n\t    title: translate('removeTitle'),\n\t    className: 'jsoneditor-remove',\n\t    click: function () {\n\t      Node.onRemove(editor.multiselection.nodes);\n\t    }\n\t  });\n\n\t  var menu = new ContextMenu(items, {close: onClose});\n\t  menu.show(anchor, editor.frame);\n\t};\n\n\t/**\n\t * Get current selected nodes\n\t * @return {{start:SerializableNode, end: SerializableNode}}\n\t */\n\ttreemode.getSelection = function () {\n\t  var selection = {\n\t    start: null,\n\t    end: null\n\t  };\n\t  if (this.multiselection.nodes && this.multiselection.nodes.length) {\n\t    if (this.multiselection.nodes.length) {\n\t      var selection1 = this.multiselection.nodes[0];\n\t      var selection2 = this.multiselection.nodes[this.multiselection.nodes.length - 1];\n\t      if (this.multiselection.direction === 'down') {\n\t        selection.start = selection1.serialize();\n\t        selection.end = selection2.serialize();\n\t      } else {\n\t        selection.start = selection2.serialize();\n\t        selection.end = selection1.serialize();\n\t      }\n\t    }\n\t  }\n\t  return selection;\n\t};\n\n\t/**\n\t * Callback registraion for selection change\n\t * @param {selectionCallback} callback \n\t * \n\t * @callback selectionCallback\n\t * @param {SerializableNode=} start\n\t * @param {SerializableNode=} end\n\t */\n\ttreemode.onSelectionChange = function (callback) {\n\t  if (typeof callback === 'function') {\n\t    this._selectionChangedHandler = util.debounce(callback, this.DEBOUNCE_INTERVAL);\n\t  }\n\t};\n\n\t/**\n\t * Select range of nodes.\n\t * For selecting single node send only the start parameter\n\t * For clear the selection do not send any parameter\n\t * If the nodes are not from the same level the first common parent will be selected\n\t * @param {{path: Array.<String>}} start object contains the path for selection start \n\t * @param {{path: Array.<String>}} end object contains the path for selection end\n\t */\n\ttreemode.setSelection = function (start, end) {\n\t  // check for old usage\n\t  if (start && start.dom && start.range) {\n\t    console.warn('setSelection/getSelection usage for text selection is depracated and should not be used, see documantaion for supported selection options');\n\t    this.setDomSelection(start);\n\t  }\n\n\t  var nodes = this._getNodeInstancesByRange(start, end);\n\t  \n\t  nodes.forEach(function(node) {\n\t    node.expandTo();\n\t  });\n\t  this.select(nodes);\n\t};\n\n\t/**\n\t * Returns a set of Nodes according to a range of selection\n\t * @param {{path: Array.<String>}} start object contains the path for range start \n\t * @param {{path: Array.<String>}=} end object contains the path for range end\n\t * @return {Array.<Node>} Node intances on the given range\n\t * @private\n\t */\n\ttreemode._getNodeInstancesByRange = function (start, end) {\n\t  var startNode, endNode;\n\n\t  if (start && start.path) {\n\t    startNode = this.node.findNodeByPath(start.path);\n\t    if (end && end.path) {\n\t      endNode = this.node.findNodeByPath(end.path);\n\t    }\n\t  }\n\n\t  var nodes = [];\n\t  if (startNode instanceof Node) {\n\t    if (endNode instanceof Node && endNode !== startNode) {\n\t      if (startNode.parent === endNode.parent) {\n\t        var start, end;\n\t        if (startNode.getIndex() < endNode.getIndex()) {\n\t          start = startNode;\n\t          end = endNode;\n\t        } else {\n\t          start = endNode;\n\t          end = startNode;\n\t        }\n\t        var current = start;\n\t        nodes.push(current);\n\t        do {\n\t          current = current.nextSibling();\n\t          nodes.push(current);\n\t        } while (current && current !== end);\n\t      } else {\n\t        nodes = this._findTopLevelNodes(startNode, endNode);\n\t      }\n\t    } else {\n\t      nodes.push(startNode);\n\t    }\n\t  }\n\n\t  return nodes;\n\n\t};\n\n\ttreemode.getNodesByRange = function (start, end) {\n\t  var nodes = this._getNodeInstancesByRange(start, end);\n\t  var serializableNodes = [];\n\n\t  nodes.forEach(function (node){\n\t    serializableNodes.push(node.serialize());\n\t  });\n\n\t  return serializableNodes;\n\t};\n\n\t// define modes\n\tmodule.exports = [\n\t  {\n\t    mode: 'tree',\n\t    mixin: treemode,\n\t    data: 'json'\n\t  },\n\t  {\n\t    mode: 'view',\n\t    mixin: treemode,\n\t    data: 'json'\n\t  },\n\t  {\n\t    mode: 'form',\n\t    mixin: treemode,\n\t    data: 'json'\n\t  }\n\t];\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\t/**\n\t * The highlighter can highlight/unhighlight a node, and\n\t * animate the visibility of a context menu.\n\t * @constructor Highlighter\n\t */\n\tfunction Highlighter () {\n\t  this.locked = false;\n\t}\n\n\t/**\n\t * Hightlight given node and its childs\n\t * @param {Node} node\n\t */\n\tHighlighter.prototype.highlight = function (node) {\n\t  if (this.locked) {\n\t    return;\n\t  }\n\n\t  if (this.node != node) {\n\t    // unhighlight current node\n\t    if (this.node) {\n\t      this.node.setHighlight(false);\n\t    }\n\n\t    // highlight new node\n\t    this.node = node;\n\t    this.node.setHighlight(true);\n\t  }\n\n\t  // cancel any current timeout\n\t  this._cancelUnhighlight();\n\t};\n\n\t/**\n\t * Unhighlight currently highlighted node.\n\t * Will be done after a delay\n\t */\n\tHighlighter.prototype.unhighlight = function () {\n\t  if (this.locked) {\n\t    return;\n\t  }\n\n\t  var me = this;\n\t  if (this.node) {\n\t    this._cancelUnhighlight();\n\n\t    // do the unhighlighting after a small delay, to prevent re-highlighting\n\t    // the same node when moving from the drag-icon to the contextmenu-icon\n\t    // or vice versa.\n\t    this.unhighlightTimer = setTimeout(function () {\n\t      me.node.setHighlight(false);\n\t      me.node = undefined;\n\t      me.unhighlightTimer = undefined;\n\t    }, 0);\n\t  }\n\t};\n\n\t/**\n\t * Cancel an unhighlight action (if before the timeout of the unhighlight action)\n\t * @private\n\t */\n\tHighlighter.prototype._cancelUnhighlight = function () {\n\t  if (this.unhighlightTimer) {\n\t    clearTimeout(this.unhighlightTimer);\n\t    this.unhighlightTimer = undefined;\n\t  }\n\t};\n\n\t/**\n\t * Lock highlighting or unhighlighting nodes.\n\t * methods highlight and unhighlight do not work while locked.\n\t */\n\tHighlighter.prototype.lock = function () {\n\t  this.locked = true;\n\t};\n\n\t/**\n\t * Unlock highlighting or unhighlighting nodes\n\t */\n\tHighlighter.prototype.unlock = function () {\n\t  this.locked = false;\n\t};\n\n\tmodule.exports = Highlighter;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\t/**\n\t * @constructor History\n\t * Store action history, enables undo and redo\n\t * @param {JSONEditor} editor\n\t */\n\tfunction History (editor) {\n\t  this.editor = editor;\n\t  this.history = [];\n\t  this.index = -1;\n\n\t  this.clear();\n\n\t  // helper function to find a Node from a path\n\t  function findNode(path) {\n\t    return editor.node.findNodeByInternalPath(path)\n\t  }\n\n\t  // map with all supported actions\n\t  this.actions = {\n\t    'editField': {\n\t      'undo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        var node = parentNode.childs[params.index];\n\t        node.updateField(params.oldValue);\n\t      },\n\t      'redo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        var node = parentNode.childs[params.index];\n\t        node.updateField(params.newValue);\n\t      }\n\t    },\n\t    'editValue': {\n\t      'undo': function (params) {\n\t        findNode(params.path).updateValue(params.oldValue);\n\t      },\n\t      'redo': function (params) {\n\t        findNode(params.path).updateValue(params.newValue);\n\t      }\n\t    },\n\t    'changeType': {\n\t      'undo': function (params) {\n\t        findNode(params.path).changeType(params.oldType);\n\t      },\n\t      'redo': function (params) {\n\t        findNode(params.path).changeType(params.newType);\n\t      }\n\t    },\n\n\t    'appendNodes': {\n\t      'undo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        params.paths.map(findNode).forEach(function (node) {\n\t          parentNode.removeChild(node);\n\t        });\n\t       },\n\t      'redo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        params.nodes.forEach(function (node) {\n\t          parentNode.appendChild(node);\n\t        });\n\t      }\n\t    },\n\t    'insertBeforeNodes': {\n\t      'undo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        params.paths.map(findNode).forEach(function (node) {\n\t          parentNode.removeChild(node);\n\t        });\n\t      },\n\t      'redo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        var beforeNode = findNode(params.beforePath);\n\t        params.nodes.forEach(function (node) {\n\t          parentNode.insertBefore(node, beforeNode);\n\t        });\n\t      }\n\t    },\n\t    'insertAfterNodes': {\n\t      'undo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        params.paths.map(findNode).forEach(function (node) {\n\t          parentNode.removeChild(node);\n\t        });\n\t      },\n\t      'redo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        var afterNode = findNode(params.afterPath);\n\t        params.nodes.forEach(function (node) {\n\t          parentNode.insertAfter(node, afterNode);\n\t          afterNode = node;\n\t        });\n\t      }\n\t    },\n\t    'removeNodes': {\n\t      'undo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        var beforeNode = parentNode.childs[params.index] || parentNode.append;\n\t        params.nodes.forEach(function (node) {\n\t          parentNode.insertBefore(node, beforeNode);\n\t        });\n\t      },\n\t      'redo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        params.paths.map(findNode).forEach(function (node) {\n\t          parentNode.removeChild(node);\n\t        });\n\t      }\n\t    },\n\t    'duplicateNodes': {\n\t      'undo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        params.clonePaths.map(findNode).forEach(function (node) {\n\t          parentNode.removeChild(node);\n\t        });\n\t      },\n\t      'redo': function (params) {\n\t        var parentNode = findNode(params.parentPath);\n\t        var afterNode = findNode(params.afterPath);\n\t        var nodes = params.paths.map(findNode);\n\t        nodes.forEach(function (node) {\n\t          var clone = node.clone();\n\t          parentNode.insertAfter(clone, afterNode);\n\t          afterNode = clone;\n\t        });\n\t      }\n\t    },\n\t    'moveNodes': {\n\t      'undo': function (params) {\n\t        var oldParentNode = findNode(params.oldParentPath);\n\t        var newParentNode = findNode(params.newParentPath);\n\t        var oldBeforeNode = oldParentNode.childs[params.oldIndex] || oldParentNode.append;\n\n\t        // first copy the nodes, then move them\n\t        var nodes = newParentNode.childs.slice(params.newIndex, params.newIndex + params.count);\n\n\t        nodes.forEach(function (node, index) {\n\t          node.field = params.fieldNames[index];\n\t          oldParentNode.moveBefore(node, oldBeforeNode);\n\t        });\n\n\t        // This is a hack to work around an issue that we don't know tha original\n\t        // path of the new parent after dragging, as the node is already moved at that time.\n\t        if (params.newParentPathRedo === null) {\n\t          params.newParentPathRedo = newParentNode.getInternalPath();\n\t        }\n\t      },\n\t      'redo': function (params) {\n\t        var oldParentNode = findNode(params.oldParentPathRedo);\n\t        var newParentNode = findNode(params.newParentPathRedo);\n\t        var newBeforeNode = newParentNode.childs[params.newIndexRedo] || newParentNode.append;\n\n\t        // first copy the nodes, then move them\n\t        var nodes = oldParentNode.childs.slice(params.oldIndexRedo, params.oldIndexRedo + params.count);\n\n\t        nodes.forEach(function (node, index) {\n\t          node.field = params.fieldNames[index];\n\t          newParentNode.moveBefore(node, newBeforeNode);\n\t        });\n\t      }\n\t    },\n\n\t    'sort': {\n\t      'undo': function (params) {\n\t        var node = findNode(params.path);\n\t        node.hideChilds();\n\t        node.childs = params.oldChilds;\n\t        node.updateDom({updateIndexes: true});\n\t        node.showChilds();\n\t      },\n\t      'redo': function (params) {\n\t        var node = findNode(params.path);\n\t        node.hideChilds();\n\t        node.childs = params.newChilds;\n\t        node.updateDom({updateIndexes: true});\n\t        node.showChilds();\n\t      }\n\t    },\n\n\t    'transform': {\n\t      'undo': function (params) {\n\t        findNode(params.path).setInternalValue(params.oldValue);\n\n\t        // TODO: would be nice to restore the state of the node and childs\n\t      },\n\t      'redo': function (params) {\n\t        findNode(params.path).setInternalValue(params.newValue);\n\n\t        // TODO: would be nice to restore the state of the node and childs\n\t      }\n\t    }\n\n\t    // TODO: restore the original caret position and selection with each undo\n\t    // TODO: implement history for actions \"expand\", \"collapse\", \"scroll\", \"setDocument\"\n\t  };\n\t}\n\n\t/**\n\t * The method onChange is executed when the History is changed, and can\n\t * be overloaded.\n\t */\n\tHistory.prototype.onChange = function () {};\n\n\t/**\n\t * Add a new action to the history\n\t * @param {String} action  The executed action. Available actions: \"editField\",\n\t *                         \"editValue\", \"changeType\", \"appendNode\",\n\t *                         \"removeNode\", \"duplicateNode\", \"moveNode\"\n\t * @param {Object} params  Object containing parameters describing the change.\n\t *                         The parameters in params depend on the action (for\n\t *                         example for \"editValue\" the Node, old value, and new\n\t *                         value are provided). params contains all information\n\t *                         needed to undo or redo the action.\n\t */\n\tHistory.prototype.add = function (action, params) {\n\t  this.index++;\n\t  this.history[this.index] = {\n\t    'action': action,\n\t    'params': params,\n\t    'timestamp': new Date()\n\t  };\n\n\t  // remove redo actions which are invalid now\n\t  if (this.index < this.history.length - 1) {\n\t    this.history.splice(this.index + 1, this.history.length - this.index - 1);\n\t  }\n\n\t  // fire onchange event\n\t  this.onChange();\n\t};\n\n\t/**\n\t * Clear history\n\t */\n\tHistory.prototype.clear = function () {\n\t  this.history = [];\n\t  this.index = -1;\n\n\t  // fire onchange event\n\t  this.onChange();\n\t};\n\n\t/**\n\t * Check if there is an action available for undo\n\t * @return {Boolean} canUndo\n\t */\n\tHistory.prototype.canUndo = function () {\n\t  return (this.index >= 0);\n\t};\n\n\t/**\n\t * Check if there is an action available for redo\n\t * @return {Boolean} canRedo\n\t */\n\tHistory.prototype.canRedo = function () {\n\t  return (this.index < this.history.length - 1);\n\t};\n\n\t/**\n\t * Undo the last action\n\t */\n\tHistory.prototype.undo = function () {\n\t  if (this.canUndo()) {\n\t    var obj = this.history[this.index];\n\t    if (obj) {\n\t      var action = this.actions[obj.action];\n\t      if (action && action.undo) {\n\t        action.undo(obj.params);\n\t        if (obj.params.oldSelection) {\n\t          try {\n\t            this.editor.setDomSelection(obj.params.oldSelection);\n\t          }\n\t          catch (err) {\n\t            console.error(err);\n\t          }\n\t        }\n\t      }\n\t      else {\n\t        console.error(new Error('unknown action \"' + obj.action + '\"'));\n\t      }\n\t    }\n\t    this.index--;\n\n\t    // fire onchange event\n\t    this.onChange();\n\t  }\n\t};\n\n\t/**\n\t * Redo the last action\n\t */\n\tHistory.prototype.redo = function () {\n\t  if (this.canRedo()) {\n\t    this.index++;\n\n\t    var obj = this.history[this.index];\n\t    if (obj) {\n\t      var action = this.actions[obj.action];\n\t      if (action && action.redo) {\n\t        action.redo(obj.params);\n\t        if (obj.params.newSelection) {\n\t          try {\n\t            this.editor.setDomSelection(obj.params.newSelection);\n\t          }\n\t          catch (err) {\n\t            console.error(err);\n\t          }\n\t        }\n\t      }\n\t      else {\n\t        console.error(new Error('unknown action \"' + obj.action + '\"'));\n\t      }\n\t    }\n\n\t    // fire onchange event\n\t    this.onChange();\n\t  }\n\t};\n\n\t/**\n\t * Destroy history\n\t */\n\tHistory.prototype.destroy = function () {\n\t  this.editor = null;\n\n\t  this.history = [];\n\t  this.index = -1;\n\t};\n\n\tmodule.exports = History;\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\t/**\n\t * @constructor SearchBox\n\t * Create a search box in given HTML container\n\t * @param {JSONEditor} editor    The JSON Editor to attach to\n\t * @param {Element} container               HTML container element of where to\n\t *                                          create the search box\n\t */\n\tfunction SearchBox (editor, container) {\n\t  var searchBox = this;\n\n\t  this.editor = editor;\n\t  this.timeout = undefined;\n\t  this.delay = 200; // ms\n\t  this.lastText = undefined;\n\n\t  this.dom = {};\n\t  this.dom.container = container;\n\n\t  var table = document.createElement('table');\n\t  this.dom.table = table;\n\t  table.className = 'jsoneditor-search';\n\t  container.appendChild(table);\n\t  var tbody = document.createElement('tbody');\n\t  this.dom.tbody = tbody;\n\t  table.appendChild(tbody);\n\t  var tr = document.createElement('tr');\n\t  tbody.appendChild(tr);\n\n\t  var td = document.createElement('td');\n\t  tr.appendChild(td);\n\t  var results = document.createElement('div');\n\t  this.dom.results = results;\n\t  results.className = 'jsoneditor-results';\n\t  td.appendChild(results);\n\n\t  td = document.createElement('td');\n\t  tr.appendChild(td);\n\t  var divInput = document.createElement('div');\n\t  this.dom.input = divInput;\n\t  divInput.className = 'jsoneditor-frame';\n\t  divInput.title = 'Search fields and values';\n\t  td.appendChild(divInput);\n\n\t  // table to contain the text input and search button\n\t  var tableInput = document.createElement('table');\n\t  divInput.appendChild(tableInput);\n\t  var tbodySearch = document.createElement('tbody');\n\t  tableInput.appendChild(tbodySearch);\n\t  tr = document.createElement('tr');\n\t  tbodySearch.appendChild(tr);\n\n\t  var refreshSearch = document.createElement('button');\n\t  refreshSearch.type = 'button';\n\t  refreshSearch.className = 'jsoneditor-refresh';\n\t  td = document.createElement('td');\n\t  td.appendChild(refreshSearch);\n\t  tr.appendChild(td);\n\n\t  var search = document.createElement('input');\n\t  // search.type = 'button';\n\t  this.dom.search = search;\n\t  search.oninput = function (event) {\n\t    searchBox._onDelayedSearch(event);\n\t  };\n\t  search.onchange = function (event) { // For IE 9\n\t    searchBox._onSearch();\n\t  };\n\t  search.onkeydown = function (event) {\n\t    searchBox._onKeyDown(event);\n\t  };\n\t  search.onkeyup = function (event) {\n\t    searchBox._onKeyUp(event);\n\t  };\n\t  refreshSearch.onclick = function (event) {\n\t    search.select();\n\t  };\n\n\t  // TODO: ESC in FF restores the last input, is a FF bug, https://bugzilla.mozilla.org/show_bug.cgi?id=598819\n\t  td = document.createElement('td');\n\t  td.appendChild(search);\n\t  tr.appendChild(td);\n\n\t  var searchNext = document.createElement('button');\n\t  searchNext.type = 'button';\n\t  searchNext.title = 'Next result (Enter)';\n\t  searchNext.className = 'jsoneditor-next';\n\t  searchNext.onclick = function () {\n\t    searchBox.next();\n\t  };\n\t  td = document.createElement('td');\n\t  td.appendChild(searchNext);\n\t  tr.appendChild(td);\n\n\t  var searchPrevious = document.createElement('button');\n\t  searchPrevious.type = 'button';\n\t  searchPrevious.title = 'Previous result (Shift+Enter)';\n\t  searchPrevious.className = 'jsoneditor-previous';\n\t  searchPrevious.onclick = function () {\n\t    searchBox.previous();\n\t  };\n\t  td = document.createElement('td');\n\t  td.appendChild(searchPrevious);\n\t  tr.appendChild(td);\n\t}\n\n\t/**\n\t * Go to the next search result\n\t * @param {boolean} [focus]   If true, focus will be set to the next result\n\t *                            focus is false by default.\n\t */\n\tSearchBox.prototype.next = function(focus) {\n\t  if (this.results != undefined) {\n\t    var index = (this.resultIndex != undefined) ? this.resultIndex + 1 : 0;\n\t    if (index > this.results.length - 1) {\n\t      index = 0;\n\t    }\n\t    this._setActiveResult(index, focus);\n\t  }\n\t};\n\n\t/**\n\t * Go to the prevous search result\n\t * @param {boolean} [focus]   If true, focus will be set to the next result\n\t *                            focus is false by default.\n\t */\n\tSearchBox.prototype.previous = function(focus) {\n\t  if (this.results != undefined) {\n\t    var max = this.results.length - 1;\n\t    var index = (this.resultIndex != undefined) ? this.resultIndex - 1 : max;\n\t    if (index < 0) {\n\t      index = max;\n\t    }\n\t    this._setActiveResult(index, focus);\n\t  }\n\t};\n\n\t/**\n\t * Set new value for the current active result\n\t * @param {Number} index\n\t * @param {boolean} [focus]   If true, focus will be set to the next result.\n\t *                            focus is false by default.\n\t * @private\n\t */\n\tSearchBox.prototype._setActiveResult = function(index, focus) {\n\t  // de-activate current active result\n\t  if (this.activeResult) {\n\t    var prevNode = this.activeResult.node;\n\t    var prevElem = this.activeResult.elem;\n\t    if (prevElem == 'field') {\n\t      delete prevNode.searchFieldActive;\n\t    }\n\t    else {\n\t      delete prevNode.searchValueActive;\n\t    }\n\t    prevNode.updateDom();\n\t  }\n\n\t  if (!this.results || !this.results[index]) {\n\t    // out of range, set to undefined\n\t    this.resultIndex = undefined;\n\t    this.activeResult = undefined;\n\t    return;\n\t  }\n\n\t  this.resultIndex = index;\n\n\t  // set new node active\n\t  var node = this.results[this.resultIndex].node;\n\t  var elem = this.results[this.resultIndex].elem;\n\t  if (elem == 'field') {\n\t    node.searchFieldActive = true;\n\t  }\n\t  else {\n\t    node.searchValueActive = true;\n\t  }\n\t  this.activeResult = this.results[this.resultIndex];\n\t  node.updateDom();\n\n\t  // TODO: not so nice that the focus is only set after the animation is finished\n\t  node.scrollTo(function () {\n\t    if (focus) {\n\t      node.focus(elem);\n\t    }\n\t  });\n\t};\n\n\t/**\n\t * Cancel any running onDelayedSearch.\n\t * @private\n\t */\n\tSearchBox.prototype._clearDelay = function() {\n\t  if (this.timeout != undefined) {\n\t    clearTimeout(this.timeout);\n\t    delete this.timeout;\n\t  }\n\t};\n\n\t/**\n\t * Start a timer to execute a search after a short delay.\n\t * Used for reducing the number of searches while typing.\n\t * @param {Event} event\n\t * @private\n\t */\n\tSearchBox.prototype._onDelayedSearch = function (event) {\n\t  // execute the search after a short delay (reduces the number of\n\t  // search actions while typing in the search text box)\n\t  this._clearDelay();\n\t  var searchBox = this;\n\t  this.timeout = setTimeout(function (event) {\n\t    searchBox._onSearch();\n\t  },\n\t  this.delay);\n\t};\n\n\t/**\n\t * Handle onSearch event\n\t * @param {boolean} [forceSearch]  If true, search will be executed again even\n\t *                                 when the search text is not changed.\n\t *                                 Default is false.\n\t * @private\n\t */\n\tSearchBox.prototype._onSearch = function (forceSearch) {\n\t  this._clearDelay();\n\n\t  var value = this.dom.search.value;\n\t  var text = (value.length > 0) ? value : undefined;\n\t  if (text !== this.lastText || forceSearch) {\n\t    // only search again when changed\n\t    this.lastText = text;\n\t    this.results = this.editor.search(text);\n\t    var MAX_SEARCH_RESULTS = this.results[0]\n\t        ? this.results[0].node.MAX_SEARCH_RESULTS\n\t        : Infinity;\n\n\t    // try to maintain the current active result if this is still part of the new search results\n\t    var activeResultIndex = 0;\n\t    if (this.activeResult) {\n\t      for (var i = 0; i < this.results.length; i++) {\n\t        if (this.results[i].node === this.activeResult.node) {\n\t          activeResultIndex = i;\n\t          break;\n\t        }\n\t      }\n\t    }\n\n\t    this._setActiveResult(activeResultIndex, false);\n\n\t    // display search results\n\t    if (text !== undefined) {\n\t      var resultCount = this.results.length;\n\t      if (resultCount === 0) {\n\t        this.dom.results.innerHTML = 'no&nbsp;results';\n\t      }\n\t      else if (resultCount === 1) {\n\t        this.dom.results.innerHTML = '1&nbsp;result';\n\t      }\n\t      else if (resultCount > MAX_SEARCH_RESULTS) {\n\t        this.dom.results.innerHTML = MAX_SEARCH_RESULTS + '+&nbsp;results';\n\t      }\n\t      else {\n\t        this.dom.results.innerHTML = resultCount + '&nbsp;results';\n\t      }\n\t    }\n\t    else {\n\t      this.dom.results.innerHTML = '';\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Handle onKeyDown event in the input box\n\t * @param {Event} event\n\t * @private\n\t */\n\tSearchBox.prototype._onKeyDown = function (event) {\n\t  var keynum = event.which;\n\t  if (keynum == 27) { // ESC\n\t    this.dom.search.value = '';  // clear search\n\t    this._onSearch();\n\t    event.preventDefault();\n\t    event.stopPropagation();\n\t  }\n\t  else if (keynum == 13) { // Enter\n\t    if (event.ctrlKey) {\n\t      // force to search again\n\t      this._onSearch(true);\n\t    }\n\t    else if (event.shiftKey) {\n\t      // move to the previous search result\n\t      this.previous();\n\t    }\n\t    else {\n\t      // move to the next search result\n\t      this.next();\n\t    }\n\t    event.preventDefault();\n\t    event.stopPropagation();\n\t  }\n\t};\n\n\t/**\n\t * Handle onKeyUp event in the input box\n\t * @param {Event} event\n\t * @private\n\t */\n\tSearchBox.prototype._onKeyUp = function (event) {\n\t  var keynum = event.keyCode;\n\t  if (keynum != 27 && keynum != 13) { // !show and !Enter\n\t    this._onDelayedSearch(event);   // For IE 9\n\t  }\n\t};\n\n\t/**\n\t * Clear the search results\n\t */\n\tSearchBox.prototype.clear = function () {\n\t  this.dom.search.value = '';\n\t  this._onSearch();\n\t};\n\n\t/**\n\t * Refresh searchResults if there is a search value\n\t */\n\tSearchBox.prototype.forceSearch = function () {\n\t  this._onSearch(true);\n\t};\n\n\t/**\n\t * Test whether the search box value is empty\n\t * @returns {boolean} Returns true when empty.\n\t */\n\tSearchBox.prototype.isEmpty = function () {\n\t  return this.dom.search.value === '';\n\t};\n\n\t/**\n\t * Destroy the search box\n\t */\n\tSearchBox.prototype.destroy = function () {\n\t  this.editor = null;\n\t  this.dom.container.removeChild(this.dom.table);\n\t  this.dom = null;\n\n\t  this.results = null;\n\t  this.activeResult = null;\n\n\t  this._clearDelay();\n\n\t};\n\n\tmodule.exports = SearchBox;\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar createAbsoluteAnchor = __webpack_require__(11).createAbsoluteAnchor;\n\tvar util = __webpack_require__(12);\n\tvar translate = __webpack_require__(15).translate;\n\n\t/**\n\t * A context menu\n\t * @param {Object[]} items    Array containing the menu structure\n\t *                            TODO: describe structure\n\t * @param {Object} [options]  Object with options. Available options:\n\t *                            {function} close    Callback called when the\n\t *                                                context menu is being closed.\n\t * @constructor\n\t */\n\tfunction ContextMenu (items, options) {\n\t  this.dom = {};\n\n\t  var me = this;\n\t  var dom = this.dom;\n\t  this.anchor = undefined;\n\t  this.items = items;\n\t  this.eventListeners = {};\n\t  this.selection = undefined; // holds the selection before the menu was opened\n\t  this.onClose = options ? options.close : undefined;\n\n\t  // create root element\n\t  var root = document.createElement('div');\n\t  root.className = 'jsoneditor-contextmenu-root';\n\t  dom.root = root;\n\n\t  // create a container element\n\t  var menu = document.createElement('div');\n\t  menu.className = 'jsoneditor-contextmenu';\n\t  dom.menu = menu;\n\t  root.appendChild(menu);\n\n\t  // create a list to hold the menu items\n\t  var list = document.createElement('ul');\n\t  list.className = 'jsoneditor-menu';\n\t  menu.appendChild(list);\n\t  dom.list = list;\n\t  dom.items = []; // list with all buttons\n\n\t  // create a (non-visible) button to set the focus to the menu\n\t  var focusButton = document.createElement('button');\n\t  focusButton.type = 'button';\n\t  dom.focusButton = focusButton;\n\t  var li = document.createElement('li');\n\t  li.style.overflow = 'hidden';\n\t  li.style.height = '0';\n\t  li.appendChild(focusButton);\n\t  list.appendChild(li);\n\n\t  function createMenuItems (list, domItems, items) {\n\t    items.forEach(function (item) {\n\t      if (item.type == 'separator') {\n\t        // create a separator\n\t        var separator = document.createElement('div');\n\t        separator.className = 'jsoneditor-separator';\n\t        li = document.createElement('li');\n\t        li.appendChild(separator);\n\t        list.appendChild(li);\n\t      }\n\t      else {\n\t        var domItem = {};\n\n\t        // create a menu item\n\t        var li = document.createElement('li');\n\t        list.appendChild(li);\n\n\t        // create a button in the menu item\n\t        var button = document.createElement('button');\n\t        button.type = 'button';\n\t        button.className = item.className;\n\t        domItem.button = button;\n\t        if (item.title) {\n\t          button.title = item.title;\n\t        }\n\t        if (item.click) {\n\t          button.onclick = function (event) {\n\t            event.preventDefault();\n\t            me.hide();\n\t            item.click();\n\t          };\n\t        }\n\t        li.appendChild(button);\n\n\t        // create the contents of the button\n\t        if (item.submenu) {\n\t          // add the icon to the button\n\t          var divIcon = document.createElement('div');\n\t          divIcon.className = 'jsoneditor-icon';\n\t          button.appendChild(divIcon);\n\t          var divText = document.createElement('div');\n\t          divText.className = 'jsoneditor-text' +\n\t              (item.click ? '' : ' jsoneditor-right-margin');\n\t          divText.appendChild(document.createTextNode(item.text));\n\t          button.appendChild(divText);\n\n\t          var buttonSubmenu;\n\t          if (item.click) {\n\t            // submenu and a button with a click handler\n\t            button.className += ' jsoneditor-default';\n\n\t            var buttonExpand = document.createElement('button');\n\t            buttonExpand.type = 'button';\n\t            domItem.buttonExpand = buttonExpand;\n\t            buttonExpand.className = 'jsoneditor-expand';\n\t            buttonExpand.innerHTML = '<div class=\"jsoneditor-expand\"></div>';\n\t            li.appendChild(buttonExpand);\n\t            if (item.submenuTitle) {\n\t              buttonExpand.title = item.submenuTitle;\n\t            }\n\n\t            buttonSubmenu = buttonExpand;\n\t          }\n\t          else {\n\t            // submenu and a button without a click handler\n\t            var divExpand = document.createElement('div');\n\t            divExpand.className = 'jsoneditor-expand';\n\t            button.appendChild(divExpand);\n\n\t            buttonSubmenu = button;\n\t          }\n\n\t          // attach a handler to expand/collapse the submenu\n\t          buttonSubmenu.onclick = function (event) {\n\t            event.preventDefault();\n\t            me._onExpandItem(domItem);\n\t            buttonSubmenu.focus();\n\t          };\n\n\t          // create the submenu\n\t          var domSubItems = [];\n\t          domItem.subItems = domSubItems;\n\t          var ul = document.createElement('ul');\n\t          domItem.ul = ul;\n\t          ul.className = 'jsoneditor-menu';\n\t          ul.style.height = '0';\n\t          li.appendChild(ul);\n\t          createMenuItems(ul, domSubItems, item.submenu);\n\t        }\n\t        else {\n\t          // no submenu, just a button with clickhandler\n\t          button.innerHTML = '<div class=\"jsoneditor-icon\"></div>' +\n\t              '<div class=\"jsoneditor-text\">' + translate(item.text) + '</div>';\n\t        }\n\n\t        domItems.push(domItem);\n\t      }\n\t    });\n\t  }\n\t  createMenuItems(list, this.dom.items, items);\n\n\t  // TODO: when the editor is small, show the submenu on the right instead of inline?\n\n\t  // calculate the max height of the menu with one submenu expanded\n\t  this.maxHeight = 0; // height in pixels\n\t  items.forEach(function (item) {\n\t    var height = (items.length + (item.submenu ? item.submenu.length : 0)) * 24;\n\t    me.maxHeight = Math.max(me.maxHeight, height);\n\t  });\n\t}\n\n\t/**\n\t * Get the currently visible buttons\n\t * @return {Array.<HTMLElement>} buttons\n\t * @private\n\t */\n\tContextMenu.prototype._getVisibleButtons = function () {\n\t  var buttons = [];\n\t  var me = this;\n\t  this.dom.items.forEach(function (item) {\n\t    buttons.push(item.button);\n\t    if (item.buttonExpand) {\n\t      buttons.push(item.buttonExpand);\n\t    }\n\t    if (item.subItems && item == me.expandedItem) {\n\t      item.subItems.forEach(function (subItem) {\n\t        buttons.push(subItem.button);\n\t        if (subItem.buttonExpand) {\n\t          buttons.push(subItem.buttonExpand);\n\t        }\n\t        // TODO: change to fully recursive method\n\t      });\n\t    }\n\t  });\n\n\t  return buttons;\n\t};\n\n\t// currently displayed context menu, a singleton. We may only have one visible context menu\n\tContextMenu.visibleMenu = undefined;\n\n\t/**\n\t * Attach the menu to an anchor\n\t * @param {HTMLElement} anchor  Anchor where the menu will be attached as sibling.\n\t * @param {HTMLElement} frame   The root of the JSONEditor window\n\t */\n\tContextMenu.prototype.show = function (anchor, frame) {\n\t  this.hide();\n\n\t  // determine whether to display the menu below or above the anchor\n\t  var showBelow = true;\n\t  var parent = anchor.parentNode;\n\t  var anchorRect = anchor.getBoundingClientRect();\n\t  var parentRect = parent.getBoundingClientRect();\n\t  var frameRect = frame.getBoundingClientRect();\n\n\t  var me = this;\n\t  this.dom.absoluteAnchor = createAbsoluteAnchor(anchor, frame, function () {\n\t    me.hide()\n\t  });\n\n\t  if (anchorRect.bottom + this.maxHeight < frameRect.bottom) {\n\t    // fits below -> show below\n\t  }\n\t  else if (anchorRect.top - this.maxHeight > frameRect.top) {\n\t    // fits above -> show above\n\t    showBelow = false;\n\t  }\n\t  else {\n\t    // doesn't fit above nor below -> show below\n\t  }\n\n\t  var topGap = anchorRect.top - parentRect.top;\n\n\t  // position the menu\n\t  if (showBelow) {\n\t    // display the menu below the anchor\n\t    var anchorHeight = anchor.offsetHeight;\n\t    this.dom.menu.style.left = '0';\n\t    this.dom.menu.style.top = topGap + anchorHeight + 'px';\n\t    this.dom.menu.style.bottom = '';\n\t  }\n\t  else {\n\t    // display the menu above the anchor\n\t    this.dom.menu.style.left = '0';\n\t    this.dom.menu.style.top = '';\n\t    this.dom.menu.style.bottom = '0px';\n\t  }\n\n\t  // attach the menu to the temporary, absolute anchor\n\t  // parent.insertBefore(this.dom.root, anchor);\n\t  this.dom.absoluteAnchor.appendChild(this.dom.root);\n\n\t  // move focus to the first button in the context menu\n\t  this.selection = util.getSelection();\n\t  this.anchor = anchor;\n\t  setTimeout(function () {\n\t    me.dom.focusButton.focus();\n\t  }, 0);\n\n\t  if (ContextMenu.visibleMenu) {\n\t    ContextMenu.visibleMenu.hide();\n\t  }\n\t  ContextMenu.visibleMenu = this;\n\t};\n\n\t/**\n\t * Hide the context menu if visible\n\t */\n\tContextMenu.prototype.hide = function () {\n\t  // remove temporary absolutely positioned anchor\n\t  if (this.dom.absoluteAnchor) {\n\t    this.dom.absoluteAnchor.destroy();\n\t    delete this.dom.absoluteAnchor;\n\t  }\n\n\t  // remove the menu from the DOM\n\t  if (this.dom.root.parentNode) {\n\t    this.dom.root.parentNode.removeChild(this.dom.root);\n\t    if (this.onClose) {\n\t      this.onClose();\n\t    }\n\t  }\n\n\t  if (ContextMenu.visibleMenu == this) {\n\t    ContextMenu.visibleMenu = undefined;\n\t  }\n\t};\n\n\t/**\n\t * Expand a submenu\n\t * Any currently expanded submenu will be hided.\n\t * @param {Object} domItem\n\t * @private\n\t */\n\tContextMenu.prototype._onExpandItem = function (domItem) {\n\t  var me = this;\n\t  var alreadyVisible = (domItem == this.expandedItem);\n\n\t  // hide the currently visible submenu\n\t  var expandedItem = this.expandedItem;\n\t  if (expandedItem) {\n\t    //var ul = expandedItem.ul;\n\t    expandedItem.ul.style.height = '0';\n\t    expandedItem.ul.style.padding = '';\n\t    setTimeout(function () {\n\t      if (me.expandedItem != expandedItem) {\n\t        expandedItem.ul.style.display = '';\n\t        util.removeClassName(expandedItem.ul.parentNode, 'jsoneditor-selected');\n\t      }\n\t    }, 300); // timeout duration must match the css transition duration\n\t    this.expandedItem = undefined;\n\t  }\n\n\t  if (!alreadyVisible) {\n\t    var ul = domItem.ul;\n\t    ul.style.display = 'block';\n\t    var height = ul.clientHeight; // force a reflow in Firefox\n\t    setTimeout(function () {\n\t      if (me.expandedItem == domItem) {\n\t        var childsHeight = 0;\n\t        for (var i = 0; i < ul.childNodes.length; i++) {\n\t          childsHeight += ul.childNodes[i].clientHeight;\n\t        }\n\t        ul.style.height = childsHeight + 'px';\n\t        ul.style.padding = '5px 10px';\n\t      }\n\t    }, 0);\n\t    util.addClassName(ul.parentNode, 'jsoneditor-selected');\n\t    this.expandedItem = domItem;\n\t  }\n\t};\n\n\t/**\n\t * Handle onkeydown event\n\t * @param {Event} event\n\t * @private\n\t */\n\tContextMenu.prototype._onKeyDown = function (event) {\n\t  var target = event.target;\n\t  var keynum = event.which;\n\t  var handled = false;\n\t  var buttons, targetIndex, prevButton, nextButton;\n\n\t  if (keynum == 27) { // ESC\n\t    // hide the menu on ESC key\n\n\t    // restore previous selection and focus\n\t    if (this.selection) {\n\t      util.setSelection(this.selection);\n\t    }\n\t    if (this.anchor) {\n\t      this.anchor.focus();\n\t    }\n\n\t    this.hide();\n\n\t    handled = true;\n\t  }\n\t  else if (keynum == 9) { // Tab\n\t    if (!event.shiftKey) { // Tab\n\t      buttons = this._getVisibleButtons();\n\t      targetIndex = buttons.indexOf(target);\n\t      if (targetIndex == buttons.length - 1) {\n\t        // move to first button\n\t        buttons[0].focus();\n\t        handled = true;\n\t      }\n\t    }\n\t    else { // Shift+Tab\n\t      buttons = this._getVisibleButtons();\n\t      targetIndex = buttons.indexOf(target);\n\t      if (targetIndex == 0) {\n\t        // move to last button\n\t        buttons[buttons.length - 1].focus();\n\t        handled = true;\n\t      }\n\t    }\n\t  }\n\t  else if (keynum == 37) { // Arrow Left\n\t    if (target.className == 'jsoneditor-expand') {\n\t      buttons = this._getVisibleButtons();\n\t      targetIndex = buttons.indexOf(target);\n\t      prevButton = buttons[targetIndex - 1];\n\t      if (prevButton) {\n\t        prevButton.focus();\n\t      }\n\t    }\n\t    handled = true;\n\t  }\n\t  else if (keynum == 38) { // Arrow Up\n\t    buttons = this._getVisibleButtons();\n\t    targetIndex = buttons.indexOf(target);\n\t    prevButton = buttons[targetIndex - 1];\n\t    if (prevButton && prevButton.className == 'jsoneditor-expand') {\n\t      // skip expand button\n\t      prevButton = buttons[targetIndex - 2];\n\t    }\n\t    if (!prevButton) {\n\t      // move to last button\n\t      prevButton = buttons[buttons.length - 1];\n\t    }\n\t    if (prevButton) {\n\t      prevButton.focus();\n\t    }\n\t    handled = true;\n\t  }\n\t  else if (keynum == 39) { // Arrow Right\n\t    buttons = this._getVisibleButtons();\n\t    targetIndex = buttons.indexOf(target);\n\t    nextButton = buttons[targetIndex + 1];\n\t    if (nextButton && nextButton.className == 'jsoneditor-expand') {\n\t      nextButton.focus();\n\t    }\n\t    handled = true;\n\t  }\n\t  else if (keynum == 40) { // Arrow Down\n\t    buttons = this._getVisibleButtons();\n\t    targetIndex = buttons.indexOf(target);\n\t    nextButton = buttons[targetIndex + 1];\n\t    if (nextButton && nextButton.className == 'jsoneditor-expand') {\n\t      // skip expand button\n\t      nextButton = buttons[targetIndex + 2];\n\t    }\n\t    if (!nextButton) {\n\t      // move to first button\n\t      nextButton = buttons[0];\n\t    }\n\t    if (nextButton) {\n\t      nextButton.focus();\n\t      handled = true;\n\t    }\n\t    handled = true;\n\t  }\n\t  // TODO: arrow left and right\n\n\t  if (handled) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t  }\n\t};\n\n\tmodule.exports = ContextMenu;\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar util = __webpack_require__(12);\n\n\t/**\n\t * Create an anchor element absolutely positioned in the `parent`\n\t * element.\n\t * @param {HTMLElement} anchor\n\t * @param {HTMLElement} parent\n\t * @param [onDestroy(function(anchor)]  Callback when the anchor is destroyed\n\t * @returns {HTMLElement}\n\t */\n\texports.createAbsoluteAnchor = function (anchor, parent, onDestroy) {\n\t  var root = getRootNode(anchor);\n\t  var eventListeners = {};\n\n\t  var anchorRect = anchor.getBoundingClientRect();\n\t  var frameRect = parent.getBoundingClientRect();\n\n\t  var absoluteAnchor = document.createElement('div');\n\t  absoluteAnchor.className = 'jsoneditor-anchor';\n\t  absoluteAnchor.style.position = 'absolute';\n\t  absoluteAnchor.style.left = (anchorRect.left - frameRect.left) + 'px';\n\t  absoluteAnchor.style.top = (anchorRect.top - frameRect.top) + 'px';\n\t  absoluteAnchor.style.width = (anchorRect.width - 2) + 'px';\n\t  absoluteAnchor.style.height = (anchorRect.height - 2) + 'px';\n\t  absoluteAnchor.style.boxSizing = 'border-box';\n\t  parent.appendChild(absoluteAnchor);\n\n\t  function destroy () {\n\t    // remove temporary absolutely positioned anchor\n\t    if (absoluteAnchor && absoluteAnchor.parentNode) {\n\t      absoluteAnchor.parentNode.removeChild(absoluteAnchor);\n\n\t      // remove all event listeners\n\t      // all event listeners are supposed to be attached to document.\n\t      for (var name in eventListeners) {\n\t        if (eventListeners.hasOwnProperty(name)) {\n\t          var fn = eventListeners[name];\n\t          if (fn) {\n\t            util.removeEventListener(root, name, fn);\n\t          }\n\t          delete eventListeners[name];\n\t        }\n\t      }\n\n\t      if (typeof onDestroy === 'function') {\n\t        onDestroy(anchor);\n\t      }\n\t    }\n\t  }\n\n\t  // create and attach event listeners\n\t  var destroyIfOutside = function (event) {\n\t    var target = event.target;\n\t    if ((target !== absoluteAnchor) && !util.isChildOf(target, absoluteAnchor)) {\n\t      destroy();\n\t      event.stopPropagation();\n\t      event.preventDefault();\n\t    }\n\t  }\n\n\t  eventListeners.mousedown = util.addEventListener(root, 'mousedown', destroyIfOutside);\n\t  eventListeners.mousewheel = util.addEventListener(root, 'mousewheel', destroyIfOutside);\n\t  // eventListeners.scroll = util.addEventListener(root, 'scroll', destroyIfOutside);\n\n\t  absoluteAnchor.destroy = destroy;\n\n\t  return absoluteAnchor\n\t}\n\n\t/**\n\t * Node.getRootNode shim\n\t * @param  {HTMLElement} node node to check\n\t * @return {HTMLElement}      node's rootNode or `window` if there is ShadowDOM is not supported.\n\t */\n\tfunction getRootNode(node){\n\t  return (typeof node.getRootNode === 'function')\n\t      ? node.getRootNode()\n\t      : window;\n\t}\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar jsonlint = __webpack_require__(13);\n\tvar jsonMap = __webpack_require__(14);\n\n\t/**\n\t * Parse JSON using the parser built-in in the browser.\n\t * On exception, the jsonString is validated and a detailed error is thrown.\n\t * @param {String} jsonString\n\t * @return {JSON} json\n\t */\n\texports.parse = function parse(jsonString) {\n\t  try {\n\t    return JSON.parse(jsonString);\n\t  }\n\t  catch (err) {\n\t    // try to throw a more detailed error message using validate\n\t    exports.validate(jsonString);\n\n\t    // rethrow the original error\n\t    throw err;\n\t  }\n\t};\n\n\t/**\n\t * Sanitize a JSON-like string containing. For example changes JavaScript\n\t * notation into JSON notation.\n\t * This function for example changes a string like \"{a: 2, 'b': {c: 'd'}\"\n\t * into '{\"a\": 2, \"b\": {\"c\": \"d\"}'\n\t * @param {string} jsString\n\t * @returns {string} json\n\t */\n\texports.sanitize = function (jsString) {\n\t  // escape all single and double quotes inside strings\n\t  var chars = [];\n\t  var i = 0;\n\n\t  //If JSON starts with a function (characters/digits/\"_-\"), remove this function.\n\t  //This is useful for \"stripping\" JSONP objects to become JSON\n\t  //For example: /* some comment */ function_12321321 ( [{\"a\":\"b\"}] ); => [{\"a\":\"b\"}]\n\t  var match = jsString.match(/^\\s*(\\/\\*(.|[\\r\\n])*?\\*\\/)?\\s*[\\da-zA-Z_$]+\\s*\\(([\\s\\S]*)\\)\\s*;?\\s*$/);\n\t  if (match) {\n\t    jsString = match[3];\n\t  }\n\n\t  var controlChars = {\n\t    '\\b': '\\\\b',\n\t    '\\f': '\\\\f',\n\t    '\\n': '\\\\n',\n\t    '\\r': '\\\\r',\n\t    '\\t': '\\\\t'\n\t  };\n\n\t  var quote = '\\'';\n\t  var quoteDbl = '\"';\n\t  var quoteLeft = '\\u2018';\n\t  var quoteRight = '\\u2019';\n\t  var quoteDblLeft = '\\u201C';\n\t  var quoteDblRight = '\\u201D';\n\t  var graveAccent = '\\u0060';\n\t  var acuteAccent = '\\u00B4';\n\n\t  // helper functions to get the current/prev/next character\n\t  function curr () { return jsString.charAt(i);     }\n\t  function next()  { return jsString.charAt(i + 1); }\n\t  function prev()  { return jsString.charAt(i - 1); }\n\n\t  // get the last parsed non-whitespace character\n\t  function lastNonWhitespace () {\n\t    var p = chars.length - 1;\n\n\t    while (p >= 0) {\n\t      var pp = chars[p];\n\t      if (pp !== ' ' && pp !== '\\n' && pp !== '\\r' && pp !== '\\t') { // non whitespace\n\t        return pp;\n\t      }\n\t      p--;\n\t    }\n\n\t    return '';\n\t  }\n\n\t  // skip a block comment '/* ... */'\n\t  function skipBlockComment () {\n\t    i += 2;\n\t    while (i < jsString.length && (curr() !== '*' || next() !== '/')) {\n\t      i++;\n\t    }\n\t    i += 2;\n\t  }\n\n\t  // skip a comment '// ...'\n\t  function skipComment () {\n\t    i += 2;\n\t    while (i < jsString.length && (curr() !== '\\n')) {\n\t      i++;\n\t    }\n\t  }\n\n\t  // parse single or double quoted string\n\t  function parseString(endQuote) {\n\t    chars.push('\"');\n\t    i++;\n\t    var c = curr();\n\t    while (i < jsString.length && c !== endQuote) {\n\t      if (c === '\"' && prev() !== '\\\\') {\n\t        // unescaped double quote, escape it\n\t        chars.push('\\\\\"');\n\t      }\n\t      else if (controlChars.hasOwnProperty(c)) {\n\t        // replace unescaped control characters with escaped ones\n\t        chars.push(controlChars[c])\n\t      }\n\t      else if (c === '\\\\') {\n\t        // remove the escape character when followed by a single quote ', not needed\n\t        i++;\n\t        c = curr();\n\t        if (c !== '\\'') {\n\t          chars.push('\\\\');\n\t        }\n\t        chars.push(c);\n\t      }\n\t      else {\n\t        // regular character\n\t        chars.push(c);\n\t      }\n\n\t      i++;\n\t      c = curr();\n\t    }\n\t    if (c === endQuote) {\n\t      chars.push('\"');\n\t      i++;\n\t    }\n\t  }\n\n\t  // parse an unquoted key\n\t  function parseKey() {\n\t    var specialValues = ['null', 'true', 'false'];\n\t    var key = '';\n\t    var c = curr();\n\n\t    var regexp = /[a-zA-Z_$\\d]/; // letter, number, underscore, dollar character\n\t    while (regexp.test(c)) {\n\t      key += c;\n\t      i++;\n\t      c = curr();\n\t    }\n\n\t    if (specialValues.indexOf(key) === -1) {\n\t      chars.push('\"' + key + '\"');\n\t    }\n\t    else {\n\t      chars.push(key);\n\t    }\n\t  }\n\n\t  while(i < jsString.length) {\n\t    var c = curr();\n\n\t    if (c === '/' && next() === '*') {\n\t      skipBlockComment();\n\t    }\n\t    else if (c === '/' && next() === '/') {\n\t      skipComment();\n\t    }\n\t    else if (c === '\\u00A0' || (c >= '\\u2000' && c <= '\\u200A') || c === '\\u202F' || c === '\\u205F' || c === '\\u3000') {\n\t      // special white spaces (like non breaking space)\n\t      chars.push(' ')\n\t      i++\n\t    }\n\t    else if (c === quote) {\n\t      parseString(quote);\n\t    }\n\t    else if (c === quoteDbl) {\n\t      parseString(quoteDbl);\n\t    }\n\t    else if (c === graveAccent) {\n\t      parseString(acuteAccent);\n\t    }\n\t    else if (c === quoteLeft) {\n\t      parseString(quoteRight);\n\t    }\n\t    else if (c === quoteDblLeft) {\n\t      parseString(quoteDblRight);\n\t    }\n\t    else if (/[a-zA-Z_$]/.test(c) && ['{', ','].indexOf(lastNonWhitespace()) !== -1) {\n\t      // an unquoted object key (like a in '{a:2}')\n\t      parseKey();\n\t    }\n\t    else {\n\t      chars.push(c);\n\t      i++;\n\t    }\n\t  }\n\n\t  return chars.join('');\n\t};\n\n\t/**\n\t * Escape unicode characters.\n\t * For example input '\\u2661' (length 1) will output '\\\\u2661' (length 5).\n\t * @param {string} text\n\t * @return {string}\n\t */\n\texports.escapeUnicodeChars = function (text) {\n\t  // see https://www.wikiwand.com/en/UTF-16\n\t  // note: we leave surrogate pairs as two individual chars,\n\t  // as JSON doesn't interpret them as a single unicode char.\n\t  return text.replace(/[\\u007F-\\uFFFF]/g, function(c) {\n\t    return '\\\\u'+('0000' + c.charCodeAt(0).toString(16)).slice(-4);\n\t  })\n\t};\n\n\t/**\n\t * Validate a string containing a JSON object\n\t * This method uses JSONLint to validate the String. If JSONLint is not\n\t * available, the built-in JSON parser of the browser is used.\n\t * @param {String} jsonString   String with an (invalid) JSON object\n\t * @throws Error\n\t */\n\texports.validate = function validate(jsonString) {\n\t  if (typeof(jsonlint) != 'undefined') {\n\t    jsonlint.parse(jsonString);\n\t  }\n\t  else {\n\t    JSON.parse(jsonString);\n\t  }\n\t};\n\n\t/**\n\t * Extend object a with the properties of object b\n\t * @param {Object} a\n\t * @param {Object} b\n\t * @return {Object} a\n\t */\n\texports.extend = function extend(a, b) {\n\t  for (var prop in b) {\n\t    if (b.hasOwnProperty(prop)) {\n\t      a[prop] = b[prop];\n\t    }\n\t  }\n\t  return a;\n\t};\n\n\t/**\n\t * Remove all properties from object a\n\t * @param {Object} a\n\t * @return {Object} a\n\t */\n\texports.clear = function clear (a) {\n\t  for (var prop in a) {\n\t    if (a.hasOwnProperty(prop)) {\n\t      delete a[prop];\n\t    }\n\t  }\n\t  return a;\n\t};\n\n\t/**\n\t * Get the type of an object\n\t * @param {*} object\n\t * @return {String} type\n\t */\n\texports.type = function type (object) {\n\t  if (object === null) {\n\t    return 'null';\n\t  }\n\t  if (object === undefined) {\n\t    return 'undefined';\n\t  }\n\t  if ((object instanceof Number) || (typeof object === 'number')) {\n\t    return 'number';\n\t  }\n\t  if ((object instanceof String) || (typeof object === 'string')) {\n\t    return 'string';\n\t  }\n\t  if ((object instanceof Boolean) || (typeof object === 'boolean')) {\n\t    return 'boolean';\n\t  }\n\t  if ((object instanceof RegExp) || (typeof object === 'regexp')) {\n\t    return 'regexp';\n\t  }\n\t  if (exports.isArray(object)) {\n\t    return 'array';\n\t  }\n\n\t  return 'object';\n\t};\n\n\t/**\n\t * Test whether a text contains a url (matches when a string starts\n\t * with 'http://*' or 'https://*' and has no whitespace characters)\n\t * @param {String} text\n\t */\n\tvar isUrlRegex = /^https?:\\/\\/\\S+$/;\n\texports.isUrl = function isUrl (text) {\n\t  return (typeof text == 'string' || text instanceof String) &&\n\t      isUrlRegex.test(text);\n\t};\n\n\t/**\n\t * Tes whether given object is an Array\n\t * @param {*} obj\n\t * @returns {boolean} returns true when obj is an array\n\t */\n\texports.isArray = function (obj) {\n\t  return Object.prototype.toString.call(obj) === '[object Array]';\n\t};\n\n\t/**\n\t * Retrieve the absolute left value of a DOM element\n\t * @param {Element} elem    A dom element, for example a div\n\t * @return {Number} left    The absolute left position of this element\n\t *                          in the browser page.\n\t */\n\texports.getAbsoluteLeft = function getAbsoluteLeft(elem) {\n\t  var rect = elem.getBoundingClientRect();\n\t  return rect.left + window.pageXOffset || document.scrollLeft || 0;\n\t};\n\n\t/**\n\t * Retrieve the absolute top value of a DOM element\n\t * @param {Element} elem    A dom element, for example a div\n\t * @return {Number} top     The absolute top position of this element\n\t *                          in the browser page.\n\t */\n\texports.getAbsoluteTop = function getAbsoluteTop(elem) {\n\t  var rect = elem.getBoundingClientRect();\n\t  return rect.top + window.pageYOffset || document.scrollTop || 0;\n\t};\n\n\t/**\n\t * add a className to the given elements style\n\t * @param {Element} elem\n\t * @param {String} className\n\t */\n\texports.addClassName = function addClassName(elem, className) {\n\t  var classes = elem.className.split(' ');\n\t  if (classes.indexOf(className) == -1) {\n\t    classes.push(className); // add the class to the array\n\t    elem.className = classes.join(' ');\n\t  }\n\t};\n\n\t/**\n\t * add a className to the given elements style\n\t * @param {Element} elem\n\t * @param {String} className\n\t */\n\texports.removeClassName = function removeClassName(elem, className) {\n\t  var classes = elem.className.split(' ');\n\t  var index = classes.indexOf(className);\n\t  if (index != -1) {\n\t    classes.splice(index, 1); // remove the class from the array\n\t    elem.className = classes.join(' ');\n\t  }\n\t};\n\n\t/**\n\t * Strip the formatting from the contents of a div\n\t * the formatting from the div itself is not stripped, only from its childs.\n\t * @param {Element} divElement\n\t */\n\texports.stripFormatting = function stripFormatting(divElement) {\n\t  var childs = divElement.childNodes;\n\t  for (var i = 0, iMax = childs.length; i < iMax; i++) {\n\t    var child = childs[i];\n\n\t    // remove the style\n\t    if (child.style) {\n\t      // TODO: test if child.attributes does contain style\n\t      child.removeAttribute('style');\n\t    }\n\n\t    // remove all attributes\n\t    var attributes = child.attributes;\n\t    if (attributes) {\n\t      for (var j = attributes.length - 1; j >= 0; j--) {\n\t        var attribute = attributes[j];\n\t        if (attribute.specified === true) {\n\t          child.removeAttribute(attribute.name);\n\t        }\n\t      }\n\t    }\n\n\t    // recursively strip childs\n\t    exports.stripFormatting(child);\n\t  }\n\t};\n\n\t/**\n\t * Set focus to the end of an editable div\n\t * code from Nico Burns\n\t * http://stackoverflow.com/users/140293/nico-burns\n\t * http://stackoverflow.com/questions/1125292/how-to-move-cursor-to-end-of-contenteditable-entity\n\t * @param {Element} contentEditableElement   A content editable div\n\t */\n\texports.setEndOfContentEditable = function setEndOfContentEditable(contentEditableElement) {\n\t  var range, selection;\n\t  if(document.createRange) {\n\t    range = document.createRange();//Create a range (a range is a like the selection but invisible)\n\t    range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range\n\t    range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n\t    selection = window.getSelection();//get the selection object (allows you to change selection)\n\t    selection.removeAllRanges();//remove any selections already made\n\t    selection.addRange(range);//make the range you have just created the visible selection\n\t  }\n\t};\n\n\t/**\n\t * Select all text of a content editable div.\n\t * http://stackoverflow.com/a/3806004/1262753\n\t * @param {Element} contentEditableElement   A content editable div\n\t */\n\texports.selectContentEditable = function selectContentEditable(contentEditableElement) {\n\t  if (!contentEditableElement || contentEditableElement.nodeName != 'DIV') {\n\t    return;\n\t  }\n\n\t  var sel, range;\n\t  if (window.getSelection && document.createRange) {\n\t    range = document.createRange();\n\t    range.selectNodeContents(contentEditableElement);\n\t    sel = window.getSelection();\n\t    sel.removeAllRanges();\n\t    sel.addRange(range);\n\t  }\n\t};\n\n\t/**\n\t * Get text selection\n\t * http://stackoverflow.com/questions/4687808/contenteditable-selected-text-save-and-restore\n\t * @return {Range | TextRange | null} range\n\t */\n\texports.getSelection = function getSelection() {\n\t  if (window.getSelection) {\n\t    var sel = window.getSelection();\n\t    if (sel.getRangeAt && sel.rangeCount) {\n\t      return sel.getRangeAt(0);\n\t    }\n\t  }\n\t  return null;\n\t};\n\n\t/**\n\t * Set text selection\n\t * http://stackoverflow.com/questions/4687808/contenteditable-selected-text-save-and-restore\n\t * @param {Range | TextRange | null} range\n\t */\n\texports.setSelection = function setSelection(range) {\n\t  if (range) {\n\t    if (window.getSelection) {\n\t      var sel = window.getSelection();\n\t      sel.removeAllRanges();\n\t      sel.addRange(range);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Get selected text range\n\t * @return {Object} params  object containing parameters:\n\t *                              {Number}  startOffset\n\t *                              {Number}  endOffset\n\t *                              {Element} container  HTML element holding the\n\t *                                                   selected text element\n\t *                          Returns null if no text selection is found\n\t */\n\texports.getSelectionOffset = function getSelectionOffset() {\n\t  var range = exports.getSelection();\n\n\t  if (range && 'startOffset' in range && 'endOffset' in range &&\n\t      range.startContainer && (range.startContainer == range.endContainer)) {\n\t    return {\n\t      startOffset: range.startOffset,\n\t      endOffset: range.endOffset,\n\t      container: range.startContainer.parentNode\n\t    };\n\t  }\n\n\t  return null;\n\t};\n\n\t/**\n\t * Set selected text range in given element\n\t * @param {Object} params   An object containing:\n\t *                              {Element} container\n\t *                              {Number} startOffset\n\t *                              {Number} endOffset\n\t */\n\texports.setSelectionOffset = function setSelectionOffset(params) {\n\t  if (document.createRange && window.getSelection) {\n\t    var selection = window.getSelection();\n\t    if(selection) {\n\t      var range = document.createRange();\n\n\t      if (!params.container.firstChild) {\n\t        params.container.appendChild(document.createTextNode(''));\n\t      }\n\n\t      // TODO: do not suppose that the first child of the container is a textnode,\n\t      //       but recursively find the textnodes\n\t      range.setStart(params.container.firstChild, params.startOffset);\n\t      range.setEnd(params.container.firstChild, params.endOffset);\n\n\t      exports.setSelection(range);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Get the inner text of an HTML element (for example a div element)\n\t * @param {Element} element\n\t * @param {Object} [buffer]\n\t * @return {String} innerText\n\t */\n\texports.getInnerText = function getInnerText(element, buffer) {\n\t  var first = (buffer == undefined);\n\t  if (first) {\n\t    buffer = {\n\t      'text': '',\n\t      'flush': function () {\n\t        var text = this.text;\n\t        this.text = '';\n\t        return text;\n\t      },\n\t      'set': function (text) {\n\t        this.text = text;\n\t      }\n\t    };\n\t  }\n\n\t  // text node\n\t  if (element.nodeValue) {\n\t    return buffer.flush() + element.nodeValue;\n\t  }\n\n\t  // divs or other HTML elements\n\t  if (element.hasChildNodes()) {\n\t    var childNodes = element.childNodes;\n\t    var innerText = '';\n\n\t    for (var i = 0, iMax = childNodes.length; i < iMax; i++) {\n\t      var child = childNodes[i];\n\n\t      if (child.nodeName == 'DIV' || child.nodeName == 'P') {\n\t        var prevChild = childNodes[i - 1];\n\t        var prevName = prevChild ? prevChild.nodeName : undefined;\n\t        if (prevName && prevName != 'DIV' && prevName != 'P' && prevName != 'BR') {\n\t          innerText += '\\n';\n\t          buffer.flush();\n\t        }\n\t        innerText += exports.getInnerText(child, buffer);\n\t        buffer.set('\\n');\n\t      }\n\t      else if (child.nodeName == 'BR') {\n\t        innerText += buffer.flush();\n\t        buffer.set('\\n');\n\t      }\n\t      else {\n\t        innerText += exports.getInnerText(child, buffer);\n\t      }\n\t    }\n\n\t    return innerText;\n\t  }\n\t  else {\n\t    if (element.nodeName == 'P' && exports.getInternetExplorerVersion() != -1) {\n\t      // On Internet Explorer, a <p> with hasChildNodes()==false is\n\t      // rendered with a new line. Note that a <p> with\n\t      // hasChildNodes()==true is rendered without a new line\n\t      // Other browsers always ensure there is a <br> inside the <p>,\n\t      // and if not, the <p> does not render a new line\n\t      return buffer.flush();\n\t    }\n\t  }\n\n\t  // br or unknown\n\t  return '';\n\t};\n\n\t/**\n\t * Returns the version of Internet Explorer or a -1\n\t * (indicating the use of another browser).\n\t * Source: http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx\n\t * @return {Number} Internet Explorer version, or -1 in case of an other browser\n\t */\n\texports.getInternetExplorerVersion = function getInternetExplorerVersion() {\n\t  if (_ieVersion == -1) {\n\t    var rv = -1; // Return value assumes failure.\n\t    if (typeof navigator !== 'undefined' && navigator.appName == 'Microsoft Internet Explorer') {\n\t      var ua = navigator.userAgent;\n\t      var re  = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n\t      if (re.exec(ua) != null) {\n\t        rv = parseFloat( RegExp.$1 );\n\t      }\n\t    }\n\n\t    _ieVersion = rv;\n\t  }\n\n\t  return _ieVersion;\n\t};\n\n\t/**\n\t * Test whether the current browser is Firefox\n\t * @returns {boolean} isFirefox\n\t */\n\texports.isFirefox = function isFirefox () {\n\t  return (typeof navigator !== 'undefined' && navigator.userAgent.indexOf(\"Firefox\") !== -1);\n\t};\n\n\t/**\n\t * cached internet explorer version\n\t * @type {Number}\n\t * @private\n\t */\n\tvar _ieVersion = -1;\n\n\t/**\n\t * Add and event listener. Works for all browsers\n\t * @param {Element}     element    An html element\n\t * @param {string}      action     The action, for example \"click\",\n\t *                                 without the prefix \"on\"\n\t * @param {function}    listener   The callback function to be executed\n\t * @param {boolean}     [useCapture] false by default\n\t * @return {function}   the created event listener\n\t */\n\texports.addEventListener = function addEventListener(element, action, listener, useCapture) {\n\t  if (element.addEventListener) {\n\t    if (useCapture === undefined)\n\t      useCapture = false;\n\n\t    if (action === \"mousewheel\" && exports.isFirefox()) {\n\t      action = \"DOMMouseScroll\";  // For Firefox\n\t    }\n\n\t    element.addEventListener(action, listener, useCapture);\n\t    return listener;\n\t  } else if (element.attachEvent) {\n\t    // Old IE browsers\n\t    var f = function () {\n\t      return listener.call(element, window.event);\n\t    };\n\t    element.attachEvent(\"on\" + action, f);\n\t    return f;\n\t  }\n\t};\n\n\t/**\n\t * Remove an event listener from an element\n\t * @param {Element}  element   An html dom element\n\t * @param {string}   action    The name of the event, for example \"mousedown\"\n\t * @param {function} listener  The listener function\n\t * @param {boolean}  [useCapture]   false by default\n\t */\n\texports.removeEventListener = function removeEventListener(element, action, listener, useCapture) {\n\t  if (element.removeEventListener) {\n\t    if (useCapture === undefined)\n\t      useCapture = false;\n\n\t    if (action === \"mousewheel\" && exports.isFirefox()) {\n\t      action = \"DOMMouseScroll\";  // For Firefox\n\t    }\n\n\t    element.removeEventListener(action, listener, useCapture);\n\t  } else if (element.detachEvent) {\n\t    // Old IE browsers\n\t    element.detachEvent(\"on\" + action, listener);\n\t  }\n\t};\n\n\t/**\n\t * Test if an element is a child of a parent element.\n\t * @param {Element} elem\n\t * @param {Element} parent\n\t * @return {boolean} returns true if elem is a child of the parent\n\t */\n\texports.isChildOf = function (elem, parent) {\n\t  var e = elem.parentNode;\n\t  while (e) {\n\t    if (e === parent) {\n\t      return true;\n\t    }\n\t    e = e.parentNode;\n\t  }\n\n\t  return false;\n\t};\n\n\t/**\n\t * Parse a JSON path like '.items[3].name' into an array\n\t * @param {string} jsonPath\n\t * @return {Array}\n\t */\n\texports.parsePath = function parsePath(jsonPath) {\n\t  var prop, remainder;\n\n\t  if (jsonPath.length === 0) {\n\t    return [];\n\t  }\n\n\t  // find a match like '.prop'\n\t  var match = jsonPath.match(/^\\.([\\w$]+)/);\n\t  if (match) {\n\t    prop = match[1];\n\t    remainder = jsonPath.substr(prop.length + 1);\n\t  }\n\t  else if (jsonPath[0] === '[') {\n\t    // find a match like\n\t    var end = jsonPath.indexOf(']');\n\t    if (end === -1) {\n\t      throw new SyntaxError('Character ] expected in path');\n\t    }\n\t    if (end === 1) {\n\t      throw new SyntaxError('Index expected after [');\n\t    }\n\n\t    var value = jsonPath.substring(1, end);\n\t    if (value[0] === '\\'') {\n\t      // ajv produces string prop names with single quotes, so we need\n\t      // to reformat them into valid double-quoted JSON strings\n\t      value = '\\\"' + value.substring(1, value.length - 1) + '\\\"';\n\t    }\n\n\t    prop = value === '*' ? value : JSON.parse(value); // parse string and number\n\t    remainder = jsonPath.substr(end + 1);\n\t  }\n\t  else {\n\t    throw new SyntaxError('Failed to parse path');\n\t  }\n\n\t  return [prop].concat(parsePath(remainder))\n\t};\n\n\t/**\n\t * Stringify an array with a path in a JSON path like '.items[3].name'\n\t * @param {Array.<string | number>} path\n\t * @returns {string}\n\t */\n\texports.stringifyPath = function stringifyPath(path) {\n\t  return path\n\t      .map(function (p) {\n\t        return typeof p === 'number' ? ('[' + p + ']') : ('.' + p);\n\t      })\n\t      .join('');\n\t};\n\n\t/**\n\t * Improve the error message of a JSON schema error\n\t * @param {Object} error\n\t * @return {Object} The error\n\t */\n\texports.improveSchemaError = function (error) {\n\t  if (error.keyword === 'enum' && Array.isArray(error.schema)) {\n\t    var enums = error.schema;\n\t    if (enums) {\n\t      enums = enums.map(function (value) {\n\t        return JSON.stringify(value);\n\t      });\n\n\t      if (enums.length > 5) {\n\t        var more = ['(' + (enums.length - 5) + ' more...)'];\n\t        enums = enums.slice(0, 5);\n\t        enums.push(more);\n\t      }\n\t      error.message = 'should be equal to one of: ' + enums.join(', ');\n\t    }\n\t  }\n\n\t  if (error.keyword === 'additionalProperties') {\n\t    error.message = 'should NOT have additional property: ' + error.params.additionalProperty;\n\t  }\n\n\t  return error;\n\t};\n\n\t/**\n\t * Test whether something is a Promise\n\t * @param {*} object\n\t * @returns {boolean} Returns true when object is a promise, false otherwise\n\t */\n\texports.isPromise = function (object) {\n\t  return object && typeof object.then === 'function' && typeof object.catch === 'function';\n\t};\n\n\t/**\n\t * Test whether a custom validation error has the correct structure\n\t * @param {*} validationError The error to be checked.\n\t * @returns {boolean} Returns true if the structure is ok, false otherwise\n\t */\n\texports.isValidValidationError = function (validationError) {\n\t  return typeof validationError === 'object' &&\n\t      Array.isArray(validationError.path) &&\n\t      typeof validationError.message === 'string';\n\t};\n\n\t/**\n\t * Test whether the child rect fits completely inside the parent rect.\n\t * @param {ClientRect} parent\n\t * @param {ClientRect} child\n\t * @param {number} margin\n\t */\n\texports.insideRect = function (parent, child, margin) {\n\t  var _margin = margin !== undefined ? margin : 0;\n\t  return child.left   - _margin >= parent.left\n\t      && child.right  + _margin <= parent.right\n\t      && child.top    - _margin >= parent.top\n\t      && child.bottom + _margin <= parent.bottom;\n\t};\n\n\t/**\n\t * Returns a function, that, as long as it continues to be invoked, will not\n\t * be triggered. The function will be called after it stops being called for\n\t * N milliseconds.\n\t *\n\t * Source: https://davidwalsh.name/javascript-debounce-function\n\t *\n\t * @param {function} func\n\t * @param {number} wait                 Number in milliseconds\n\t * @param {boolean} [immediate=false]   If `immediate` is passed, trigger the\n\t *                                      function on the leading edge, instead\n\t *                                      of the trailing.\n\t * @return {function} Return the debounced function\n\t */\n\texports.debounce = function debounce(func, wait, immediate) {\n\t  var timeout;\n\t  return function() {\n\t    var context = this, args = arguments;\n\t    var later = function() {\n\t      timeout = null;\n\t      if (!immediate) func.apply(context, args);\n\t    };\n\t    var callNow = immediate && !timeout;\n\t    clearTimeout(timeout);\n\t    timeout = setTimeout(later, wait);\n\t    if (callNow) func.apply(context, args);\n\t  };\n\t};\n\n\t/**\n\t * Determines the difference between two texts.\n\t * Can only detect one removed or inserted block of characters.\n\t * @param {string} oldText\n\t * @param {string} newText\n\t * @return {{start: number, end: number}} Returns the start and end\n\t *                                        of the changed part in newText.\n\t */\n\texports.textDiff = function textDiff(oldText, newText) {\n\t  var len = newText.length;\n\t  var start = 0;\n\t  var oldEnd = oldText.length;\n\t  var newEnd = newText.length;\n\n\t  while (newText.charAt(start) === oldText.charAt(start)\n\t  && start < len) {\n\t    start++;\n\t  }\n\n\t  while (newText.charAt(newEnd - 1) === oldText.charAt(oldEnd - 1)\n\t  && newEnd > start && oldEnd > 0) {\n\t    newEnd--;\n\t    oldEnd--;\n\t  }\n\n\t  return {start: start, end: newEnd};\n\t};\n\n\n\t/**\n\t * Return an object with the selection range or cursor position (if both have the same value)\n\t * Support also old browsers (IE8-)\n\t * Source: http://ourcodeworld.com/articles/read/282/how-to-get-the-current-cursor-position-and-selection-within-a-text-input-or-textarea-in-javascript\n\t * @param {DOMElement} el A dom element of a textarea or input text.\n\t * @return {Object} reference Object with 2 properties (start and end) with the identifier of the location of the cursor and selected text.\n\t **/\n\texports.getInputSelection = function(el) {\n\t  var startIndex = 0, endIndex = 0, normalizedValue, range, textInputRange, len, endRange;\n\n\t  if (typeof el.selectionStart == \"number\" && typeof el.selectionEnd == \"number\") {\n\t      startIndex = el.selectionStart;\n\t      endIndex = el.selectionEnd;\n\t  } else {\n\t      range = document.selection.createRange();\n\n\t      if (range && range.parentElement() == el) {\n\t          len = el.value.length;\n\t          normalizedValue = el.value.replace(/\\r\\n/g, \"\\n\");\n\n\t          // Create a working TextRange that lives only in the input\n\t          textInputRange = el.createTextRange();\n\t          textInputRange.moveToBookmark(range.getBookmark());\n\n\t          // Check if the startIndex and endIndex of the selection are at the very end\n\t          // of the input, since moveStart/moveEnd doesn't return what we want\n\t          // in those cases\n\t          endRange = el.createTextRange();\n\t          endRange.collapse(false);\n\n\t          if (textInputRange.compareEndPoints(\"StartToEnd\", endRange) > -1) {\n\t              startIndex = endIndex = len;\n\t          } else {\n\t              startIndex = -textInputRange.moveStart(\"character\", -len);\n\t              startIndex += normalizedValue.slice(0, startIndex).split(\"\\n\").length - 1;\n\n\t              if (textInputRange.compareEndPoints(\"EndToEnd\", endRange) > -1) {\n\t                  endIndex = len;\n\t              } else {\n\t                  endIndex = -textInputRange.moveEnd(\"character\", -len);\n\t                  endIndex += normalizedValue.slice(0, endIndex).split(\"\\n\").length - 1;\n\t              }\n\t          }\n\t      }\n\t  }\n\n\t  return {\n\t      startIndex: startIndex,\n\t      endIndex: endIndex,\n\t      start: _positionForIndex(startIndex),\n\t      end: _positionForIndex(endIndex)\n\t  };\n\n\t  /**\n\t   * Returns textarea row and column position for certain index\n\t   * @param {Number} index text index\n\t   * @returns {{row: Number, col: Number}}\n\t   */\n\t  function _positionForIndex(index) {\n\t    var textTillIndex = el.value.substring(0,index);\n\t    var row = (textTillIndex.match(/\\n/g) || []).length + 1;\n\t    var col = textTillIndex.length - textTillIndex.lastIndexOf(\"\\n\");\n\n\t    return {\n\t      row: row,\n\t      column: col\n\t    }\n\t  }\n\t}\n\n\t/**\n\t * Returns the index for certaion position in text element\n\t * @param {DOMElement} el A dom element of a textarea or input text.\n\t * @param {Number} row row value, > 0, if exceeds rows number - last row will be returned\n\t * @param {Number} column column value, > 0, if exceeds column length - end of column will be returned\n\t * @returns {Number} index of position in text, -1 if not found\n\t */\n\texports.getIndexForPosition = function(el, row, column) {\n\t  var text = el.value || '';\n\t  if (row > 0 && column > 0) {\n\t    var rows = text.split('\\n', row);\n\t    row = Math.min(rows.length, row);\n\t    column = Math.min(rows[row - 1].length, column - 1);\n\t    var columnCount = (row == 1 ? column : column + 1); // count new line on multiple rows\n\t    return rows.slice(0, row - 1).join('\\n').length + columnCount;\n\t  }\n\t  return -1;\n\t}\n\n\t/**\n\t * Returns location of json paths in certain json string\n\t * @param {String} text json string\n\t * @param {Array<String>} paths array of json paths\n\t * @returns {Array<{path: String, line: Number, row: Number}>}\n\t */\n\texports.getPositionForPath = function(text, paths) {\n\t  var me = this;\n\t  var result = [];\n\t  var jsmap;\n\t  if (!paths || !paths.length) {\n\t    return result;\n\t  }\n\t  \n\t  try {\n\t    jsmap = jsonMap.parse(text);    \n\t  } catch (err) {\n\t    return result;\n\t  }\n\n\t  paths.forEach(function (path) {\n\t    var pathArr = me.parsePath(path);\n\t    var pointerName = pathArr.length ? \"/\" + pathArr.join(\"/\") : \"\";\n\t    var pointer = jsmap.pointers[pointerName];\n\t    if (pointer) {\n\t      result.push({\n\t        path: path,\n\t        line: pointer.key ? pointer.key.line : (pointer.value ? pointer.value.line : 0),\n\t        column: pointer.key ? pointer.key.column : (pointer.value ? pointer.value.column : 0)\n\t      });\n\t    }\n\t  });\n\n\t  return result;\n\t  \n\t}\n\n\t/**\n\t * Get the applied color given a color name or code\n\t * Source: https://stackoverflow.com/questions/6386090/validating-css-color-names/33184805\n\t * @param {string} color\n\t * @returns {string | null} returns the color if the input is a valid\n\t *                   color, and returns null otherwise. Example output:\n\t *                   'rgba(255,0,0,0.7)' or 'rgb(255,0,0)'\n\t */\n\texports.getColorCSS = function (color) {\n\t  var ele = document.createElement('div');\n\t  ele.style.color = color;\n\t  return ele.style.color.split(/\\s+/).join('').toLowerCase() || null;\n\t}\n\n\t/**\n\t * Test if a string contains a valid color name or code.\n\t * @param {string} color\n\t * @returns {boolean} returns true if a valid color, false otherwise\n\t */\n\texports.isValidColor = function (color) {\n\t  return !!exports.getColorCSS(color);\n\t}\n\n\tif (typeof Element !== 'undefined') {\n\t  // Polyfill for array remove\n\t  (function () {\n\t    function polyfill (item) {\n\t      if (item.hasOwnProperty('remove')) {\n\t        return;\n\t      }\n\t      Object.defineProperty(item, 'remove', {\n\t        configurable: true,\n\t        enumerable: true,\n\t        writable: true,\n\t        value: function remove() {\n\t          if (this.parentNode != null)\n\t            this.parentNode.removeChild(this);\n\t        }\n\t      });\n\t    }\n\n\t    if (typeof Element !== 'undefined')       { polyfill(Element.prototype); }\n\t    if (typeof CharacterData !== 'undefined') { polyfill(CharacterData.prototype); }\n\t    if (typeof DocumentType !== 'undefined')  { polyfill(DocumentType.prototype); }\n\t  })();\n\t}\n\n\n\t// Polyfill for startsWith\n\tif (!String.prototype.startsWith) {\n\t    String.prototype.startsWith = function (searchString, position) {\n\t        position = position || 0;\n\t        return this.substr(position, searchString.length) === searchString;\n\t    };\n\t}\n\n\t// Polyfill for Array.find\n\tif (!Array.prototype.find) {\n\t  Array.prototype.find = function(callback) {    \n\t    for (var i = 0; i < this.length; i++) {\n\t      var element = this[i];\n\t      if ( callback.call(this, element, i, this) ) {\n\t        return element;\n\t      }\n\t    }\n\t  }\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* Jison generated parser */\n\tvar jsonlint = (function(){\n\tvar parser = {trace: function trace() { },\n\tyy: {},\n\tsymbols_: {\"error\":2,\"JSONString\":3,\"STRING\":4,\"JSONNumber\":5,\"NUMBER\":6,\"JSONNullLiteral\":7,\"NULL\":8,\"JSONBooleanLiteral\":9,\"TRUE\":10,\"FALSE\":11,\"JSONText\":12,\"JSONValue\":13,\"EOF\":14,\"JSONObject\":15,\"JSONArray\":16,\"{\":17,\"}\":18,\"JSONMemberList\":19,\"JSONMember\":20,\":\":21,\",\":22,\"[\":23,\"]\":24,\"JSONElementList\":25,\"$accept\":0,\"$end\":1},\n\tterminals_: {2:\"error\",4:\"STRING\",6:\"NUMBER\",8:\"NULL\",10:\"TRUE\",11:\"FALSE\",14:\"EOF\",17:\"{\",18:\"}\",21:\":\",22:\",\",23:\"[\",24:\"]\"},\n\tproductions_: [0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],\n\tperformAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {\n\n\tvar $0 = $$.length - 1;\n\tswitch (yystate) {\n\tcase 1: // replace escaped characters with actual character\n\t          this.$ = yytext.replace(/\\\\(\\\\|\")/g, \"$\"+\"1\")\n\t                     .replace(/\\\\n/g,'\\n')\n\t                     .replace(/\\\\r/g,'\\r')\n\t                     .replace(/\\\\t/g,'\\t')\n\t                     .replace(/\\\\v/g,'\\v')\n\t                     .replace(/\\\\f/g,'\\f')\n\t                     .replace(/\\\\b/g,'\\b');\n\t        \n\tbreak;\n\tcase 2:this.$ = Number(yytext);\n\tbreak;\n\tcase 3:this.$ = null;\n\tbreak;\n\tcase 4:this.$ = true;\n\tbreak;\n\tcase 5:this.$ = false;\n\tbreak;\n\tcase 6:return this.$ = $$[$0-1];\n\tbreak;\n\tcase 13:this.$ = {};\n\tbreak;\n\tcase 14:this.$ = $$[$0-1];\n\tbreak;\n\tcase 15:this.$ = [$$[$0-2], $$[$0]];\n\tbreak;\n\tcase 16:this.$ = {}; this.$[$$[$0][0]] = $$[$0][1];\n\tbreak;\n\tcase 17:this.$ = $$[$0-2]; $$[$0-2][$$[$0][0]] = $$[$0][1];\n\tbreak;\n\tcase 18:this.$ = [];\n\tbreak;\n\tcase 19:this.$ = $$[$0-1];\n\tbreak;\n\tcase 20:this.$ = [$$[$0]];\n\tbreak;\n\tcase 21:this.$ = $$[$0-2]; $$[$0-2].push($$[$0]);\n\tbreak;\n\t}\n\t},\n\ttable: [{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],\n\tdefaultActions: {16:[2,6]},\n\tparseError: function parseError(str, hash) {\n\t    throw new Error(str);\n\t},\n\tparse: function parse(input) {\n\t    var self = this,\n\t        stack = [0],\n\t        vstack = [null], // semantic value stack\n\t        lstack = [], // location stack\n\t        table = this.table,\n\t        yytext = '',\n\t        yylineno = 0,\n\t        yyleng = 0,\n\t        recovering = 0,\n\t        TERROR = 2,\n\t        EOF = 1;\n\n\t    //this.reductionCount = this.shiftCount = 0;\n\n\t    this.lexer.setInput(input);\n\t    this.lexer.yy = this.yy;\n\t    this.yy.lexer = this.lexer;\n\t    if (typeof this.lexer.yylloc == 'undefined')\n\t        this.lexer.yylloc = {};\n\t    var yyloc = this.lexer.yylloc;\n\t    lstack.push(yyloc);\n\n\t    if (typeof this.yy.parseError === 'function')\n\t        this.parseError = this.yy.parseError;\n\n\t    function popStack (n) {\n\t        stack.length = stack.length - 2*n;\n\t        vstack.length = vstack.length - n;\n\t        lstack.length = lstack.length - n;\n\t    }\n\n\t    function lex() {\n\t        var token;\n\t        token = self.lexer.lex() || 1; // $end = 1\n\t        // if token isn't its numeric value, convert\n\t        if (typeof token !== 'number') {\n\t            token = self.symbols_[token] || token;\n\t        }\n\t        return token;\n\t    }\n\n\t    var symbol, preErrorSymbol, state, action, a, r, yyval={},p,len,newState, expected;\n\t    while (true) {\n\t        // retreive state number from top of stack\n\t        state = stack[stack.length-1];\n\n\t        // use default actions if available\n\t        if (this.defaultActions[state]) {\n\t            action = this.defaultActions[state];\n\t        } else {\n\t            if (symbol == null)\n\t                symbol = lex();\n\t            // read action for current state and first input\n\t            action = table[state] && table[state][symbol];\n\t        }\n\n\t        // handle parse error\n\t        _handle_error:\n\t        if (typeof action === 'undefined' || !action.length || !action[0]) {\n\n\t            if (!recovering) {\n\t                // Report error\n\t                expected = [];\n\t                for (p in table[state]) if (this.terminals_[p] && p > 2) {\n\t                    expected.push(\"'\"+this.terminals_[p]+\"'\");\n\t                }\n\t                var errStr = '';\n\t                if (this.lexer.showPosition) {\n\t                    errStr = 'Parse error on line '+(yylineno+1)+\":\\n\"+this.lexer.showPosition()+\"\\nExpecting \"+expected.join(', ') + \", got '\" + this.terminals_[symbol]+ \"'\";\n\t                } else {\n\t                    errStr = 'Parse error on line '+(yylineno+1)+\": Unexpected \" +\n\t                                  (symbol == 1 /*EOF*/ ? \"end of input\" :\n\t                                              (\"'\"+(this.terminals_[symbol] || symbol)+\"'\"));\n\t                }\n\t                this.parseError(errStr,\n\t                    {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});\n\t            }\n\n\t            // just recovered from another error\n\t            if (recovering == 3) {\n\t                if (symbol == EOF) {\n\t                    throw new Error(errStr || 'Parsing halted.');\n\t                }\n\n\t                // discard current lookahead and grab another\n\t                yyleng = this.lexer.yyleng;\n\t                yytext = this.lexer.yytext;\n\t                yylineno = this.lexer.yylineno;\n\t                yyloc = this.lexer.yylloc;\n\t                symbol = lex();\n\t            }\n\n\t            // try to recover from error\n\t            while (1) {\n\t                // check for error recovery rule in this state\n\t                if ((TERROR.toString()) in table[state]) {\n\t                    break;\n\t                }\n\t                if (state == 0) {\n\t                    throw new Error(errStr || 'Parsing halted.');\n\t                }\n\t                popStack(1);\n\t                state = stack[stack.length-1];\n\t            }\n\n\t            preErrorSymbol = symbol; // save the lookahead token\n\t            symbol = TERROR;         // insert generic error symbol as new lookahead\n\t            state = stack[stack.length-1];\n\t            action = table[state] && table[state][TERROR];\n\t            recovering = 3; // allow 3 real symbols to be shifted before reporting a new error\n\t        }\n\n\t        // this shouldn't happen, unless resolve defaults are off\n\t        if (action[0] instanceof Array && action.length > 1) {\n\t            throw new Error('Parse Error: multiple actions possible at state: '+state+', token: '+symbol);\n\t        }\n\n\t        switch (action[0]) {\n\n\t            case 1: // shift\n\t                //this.shiftCount++;\n\n\t                stack.push(symbol);\n\t                vstack.push(this.lexer.yytext);\n\t                lstack.push(this.lexer.yylloc);\n\t                stack.push(action[1]); // push state\n\t                symbol = null;\n\t                if (!preErrorSymbol) { // normal execution/no error\n\t                    yyleng = this.lexer.yyleng;\n\t                    yytext = this.lexer.yytext;\n\t                    yylineno = this.lexer.yylineno;\n\t                    yyloc = this.lexer.yylloc;\n\t                    if (recovering > 0)\n\t                        recovering--;\n\t                } else { // error just occurred, resume old lookahead f/ before error\n\t                    symbol = preErrorSymbol;\n\t                    preErrorSymbol = null;\n\t                }\n\t                break;\n\n\t            case 2: // reduce\n\t                //this.reductionCount++;\n\n\t                len = this.productions_[action[1]][1];\n\n\t                // perform semantic action\n\t                yyval.$ = vstack[vstack.length-len]; // default to $$ = $1\n\t                // default location, uses first token for firsts, last for lasts\n\t                yyval._$ = {\n\t                    first_line: lstack[lstack.length-(len||1)].first_line,\n\t                    last_line: lstack[lstack.length-1].last_line,\n\t                    first_column: lstack[lstack.length-(len||1)].first_column,\n\t                    last_column: lstack[lstack.length-1].last_column\n\t                };\n\t                r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);\n\n\t                if (typeof r !== 'undefined') {\n\t                    return r;\n\t                }\n\n\t                // pop off stack\n\t                if (len) {\n\t                    stack = stack.slice(0,-1*len*2);\n\t                    vstack = vstack.slice(0, -1*len);\n\t                    lstack = lstack.slice(0, -1*len);\n\t                }\n\n\t                stack.push(this.productions_[action[1]][0]);    // push nonterminal (reduce)\n\t                vstack.push(yyval.$);\n\t                lstack.push(yyval._$);\n\t                // goto new state = table[STATE][NONTERMINAL]\n\t                newState = table[stack[stack.length-2]][stack[stack.length-1]];\n\t                stack.push(newState);\n\t                break;\n\n\t            case 3: // accept\n\t                return true;\n\t        }\n\n\t    }\n\n\t    return true;\n\t}};\n\t/* Jison generated lexer */\n\tvar lexer = (function(){\n\tvar lexer = ({EOF:1,\n\tparseError:function parseError(str, hash) {\n\t        if (this.yy.parseError) {\n\t            this.yy.parseError(str, hash);\n\t        } else {\n\t            throw new Error(str);\n\t        }\n\t    },\n\tsetInput:function (input) {\n\t        this._input = input;\n\t        this._more = this._less = this.done = false;\n\t        this.yylineno = this.yyleng = 0;\n\t        this.yytext = this.matched = this.match = '';\n\t        this.conditionStack = ['INITIAL'];\n\t        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};\n\t        return this;\n\t    },\n\tinput:function () {\n\t        var ch = this._input[0];\n\t        this.yytext+=ch;\n\t        this.yyleng++;\n\t        this.match+=ch;\n\t        this.matched+=ch;\n\t        var lines = ch.match(/\\n/);\n\t        if (lines) this.yylineno++;\n\t        this._input = this._input.slice(1);\n\t        return ch;\n\t    },\n\tunput:function (ch) {\n\t        this._input = ch + this._input;\n\t        return this;\n\t    },\n\tmore:function () {\n\t        this._more = true;\n\t        return this;\n\t    },\n\tless:function (n) {\n\t        this._input = this.match.slice(n) + this._input;\n\t    },\n\tpastInput:function () {\n\t        var past = this.matched.substr(0, this.matched.length - this.match.length);\n\t        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n\t    },\n\tupcomingInput:function () {\n\t        var next = this.match;\n\t        if (next.length < 20) {\n\t            next += this._input.substr(0, 20-next.length);\n\t        }\n\t        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\\n/g, \"\");\n\t    },\n\tshowPosition:function () {\n\t        var pre = this.pastInput();\n\t        var c = new Array(pre.length + 1).join(\"-\");\n\t        return pre + this.upcomingInput() + \"\\n\" + c+\"^\";\n\t    },\n\tnext:function () {\n\t        if (this.done) {\n\t            return this.EOF;\n\t        }\n\t        if (!this._input) this.done = true;\n\n\t        var token,\n\t            match,\n\t            tempMatch,\n\t            index,\n\t            col,\n\t            lines;\n\t        if (!this._more) {\n\t            this.yytext = '';\n\t            this.match = '';\n\t        }\n\t        var rules = this._currentRules();\n\t        for (var i=0;i < rules.length; i++) {\n\t            tempMatch = this._input.match(this.rules[rules[i]]);\n\t            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n\t                match = tempMatch;\n\t                index = i;\n\t                if (!this.options.flex) break;\n\t            }\n\t        }\n\t        if (match) {\n\t            lines = match[0].match(/\\n.*/g);\n\t            if (lines) this.yylineno += lines.length;\n\t            this.yylloc = {first_line: this.yylloc.last_line,\n\t                           last_line: this.yylineno+1,\n\t                           first_column: this.yylloc.last_column,\n\t                           last_column: lines ? lines[lines.length-1].length-1 : this.yylloc.last_column + match[0].length}\n\t            this.yytext += match[0];\n\t            this.match += match[0];\n\t            this.yyleng = this.yytext.length;\n\t            this._more = false;\n\t            this._input = this._input.slice(match[0].length);\n\t            this.matched += match[0];\n\t            token = this.performAction.call(this, this.yy, this, rules[index],this.conditionStack[this.conditionStack.length-1]);\n\t            if (this.done && this._input) this.done = false;\n\t            if (token) return token;\n\t            else return;\n\t        }\n\t        if (this._input === \"\") {\n\t            return this.EOF;\n\t        } else {\n\t            this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\\n'+this.showPosition(), \n\t                    {text: \"\", token: null, line: this.yylineno});\n\t        }\n\t    },\n\tlex:function lex() {\n\t        var r = this.next();\n\t        if (typeof r !== 'undefined') {\n\t            return r;\n\t        } else {\n\t            return this.lex();\n\t        }\n\t    },\n\tbegin:function begin(condition) {\n\t        this.conditionStack.push(condition);\n\t    },\n\tpopState:function popState() {\n\t        return this.conditionStack.pop();\n\t    },\n\t_currentRules:function _currentRules() {\n\t        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;\n\t    },\n\ttopState:function () {\n\t        return this.conditionStack[this.conditionStack.length-2];\n\t    },\n\tpushState:function begin(condition) {\n\t        this.begin(condition);\n\t    }});\n\tlexer.options = {};\n\tlexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\n\n\tvar YYSTATE=YY_START\n\tswitch($avoiding_name_collisions) {\n\tcase 0:/* skip whitespace */\n\tbreak;\n\tcase 1:return 6\n\tbreak;\n\tcase 2:yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2); return 4\n\tbreak;\n\tcase 3:return 17\n\tbreak;\n\tcase 4:return 18\n\tbreak;\n\tcase 5:return 23\n\tbreak;\n\tcase 6:return 24\n\tbreak;\n\tcase 7:return 22\n\tbreak;\n\tcase 8:return 21\n\tbreak;\n\tcase 9:return 10\n\tbreak;\n\tcase 10:return 11\n\tbreak;\n\tcase 11:return 8\n\tbreak;\n\tcase 12:return 14\n\tbreak;\n\tcase 13:return 'INVALID'\n\tbreak;\n\t}\n\t};\n\tlexer.rules = [/^(?:\\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/,/^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/,/^(?:\\{)/,/^(?:\\})/,/^(?:\\[)/,/^(?:\\])/,/^(?:,)/,/^(?::)/,/^(?:true\\b)/,/^(?:false\\b)/,/^(?:null\\b)/,/^(?:$)/,/^(?:.)/];\n\tlexer.conditions = {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13],\"inclusive\":true}};\n\n\n\t;\n\treturn lexer;})()\n\tparser.lexer = lexer;\n\treturn parser;\n\t})();\n\tif (true) {\n\t  exports.parser = jsonlint;\n\t  exports.parse = jsonlint.parse.bind(jsonlint);\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tvar escapedChars = {\n\t  'b': '\\b',\n\t  'f': '\\f',\n\t  'n': '\\n',\n\t  'r': '\\r',\n\t  't': '\\t',\n\t  '\"': '\"',\n\t  '/': '/',\n\t  '\\\\': '\\\\'\n\t};\n\n\tvar A_CODE = 'a'.charCodeAt();\n\n\n\texports.parse = function (source) {\n\t  var pointers = {};\n\t  var line = 0;\n\t  var column = 0;\n\t  var pos = 0;\n\t  return {\n\t    data: _parse('', true),\n\t    pointers: pointers\n\t  };\n\n\t  function _parse(ptr, topLevel) {\n\t    whitespace();\n\t    var data;\n\t    map(ptr, 'value');\n\t    var char = getChar();\n\t    switch (char) {\n\t      case 't': read('rue'); data = true; break;\n\t      case 'f': read('alse'); data = false; break;\n\t      case 'n': read('ull'); data = null; break;\n\t      case '\"': data = parseString(); break;\n\t      case '[': data = parseArray(ptr); break;\n\t      case '{': data = parseObject(ptr); break;\n\t      default:\n\t        backChar();\n\t        if ('-0123456789'.indexOf(char) >= 0)\n\t          data = parseNumber();\n\t        else\n\t          unexpectedToken();\n\t    }\n\t    map(ptr, 'valueEnd');\n\t    whitespace();\n\t    if (topLevel && pos < source.length) unexpectedToken();\n\t    return data;\n\t  }\n\n\t  function whitespace() {\n\t    loop:\n\t      while (pos < source.length) {\n\t        switch (source[pos]) {\n\t          case ' ': column++; break;\n\t          case '\\t': column += 4; break;\n\t          case '\\r': column = 0; break;\n\t          case '\\n': column = 0; line++; break;\n\t          default: break loop;\n\t        }\n\t        pos++;\n\t      }\n\t  }\n\n\t  function parseString() {\n\t    var str = '';\n\t    var char;\n\t    while (true) {\n\t      char = getChar();\n\t      if (char == '\"') {\n\t        break;\n\t      } else if (char == '\\\\') {\n\t        char = getChar();\n\t        if (char in escapedChars)\n\t          str += escapedChars[char];\n\t        else if (char == 'u')\n\t          str += getCharCode();\n\t        else\n\t          wasUnexpectedToken();\n\t      } else {\n\t        str += char;\n\t      }\n\t    }\n\t    return str;\n\t  }\n\n\t  function parseNumber() {\n\t    var numStr = '';\n\t    if (source[pos] == '-') numStr += getChar();\n\n\t    numStr += source[pos] == '0'\n\t              ? getChar()\n\t              : getDigits();\n\n\t    if (source[pos] == '.')\n\t      numStr += getChar() + getDigits();\n\n\t    if (source[pos] == 'e' || source[pos] == 'E') {\n\t      numStr += getChar();\n\t      if (source[pos] == '+' || source[pos] == '-') numStr += getChar();\n\t      numStr += getDigits();\n\t    }\n\n\t    return +numStr;\n\t  }\n\n\t  function parseArray(ptr) {\n\t    whitespace();\n\t    var arr = [];\n\t    var i = 0;\n\t    if (getChar() == ']') return arr;\n\t    backChar();\n\n\t    while (true) {\n\t      var itemPtr = ptr + '/' + i;\n\t      arr.push(_parse(itemPtr));\n\t      whitespace();\n\t      var char = getChar();\n\t      if (char == ']') break;\n\t      if (char != ',') wasUnexpectedToken();\n\t      whitespace();\n\t      i++;\n\t    }\n\t    return arr;\n\t  }\n\n\t  function parseObject(ptr) {\n\t    whitespace();\n\t    var obj = {};\n\t    if (getChar() == '}') return obj;\n\t    backChar();\n\n\t    while (true) {\n\t      var loc = getLoc();\n\t      if (getChar() != '\"') wasUnexpectedToken();\n\t      var key = parseString();\n\t      var propPtr = ptr + '/' + escapeJsonPointer(key);\n\t      mapLoc(propPtr, 'key', loc);\n\t      map(propPtr, 'keyEnd');\n\t      whitespace();\n\t      if (getChar() != ':') wasUnexpectedToken();\n\t      whitespace();\n\t      obj[key] = _parse(propPtr);\n\t      whitespace();\n\t      var char = getChar();\n\t      if (char == '}') break;\n\t      if (char != ',') wasUnexpectedToken();\n\t      whitespace();\n\t    }\n\t    return obj;\n\t  }\n\n\t  function read(str) {\n\t    for (var i=0; i<str.length; i++)\n\t      if (getChar() !== str[i]) wasUnexpectedToken();\n\t  }\n\n\t  function getChar() {\n\t    checkUnexpectedEnd();\n\t    var char = source[pos];\n\t    pos++;\n\t    column++; // new line?\n\t    return char;\n\t  }\n\n\t  function backChar() {\n\t    pos--;\n\t    column--;\n\t  }\n\n\t  function getCharCode() {\n\t    var count = 4;\n\t    var code = 0;\n\t    while (count--) {\n\t      code <<= 4;\n\t      var char = getChar().toLowerCase();\n\t      if (char >= 'a' && char <= 'f')\n\t        code += char.charCodeAt() - A_CODE + 10;\n\t      else if (char >= '0' && char <= '9')\n\t        code += +char;\n\t      else\n\t        wasUnexpectedToken();\n\t    }\n\t    return String.fromCharCode(code);\n\t  }\n\n\t  function getDigits() {\n\t    var digits = '';\n\t    while (source[pos] >= '0' && source[pos] <= '9')\n\t      digits += getChar();\n\n\t    if (digits.length) return digits;\n\t    checkUnexpectedEnd();\n\t    unexpectedToken();\n\t  }\n\n\t  function map(ptr, prop) {\n\t    mapLoc(ptr, prop, getLoc());\n\t  }\n\n\t  function mapLoc(ptr, prop, loc) {\n\t    pointers[ptr] = pointers[ptr] || {};\n\t    pointers[ptr][prop] = loc;\n\t  }\n\n\t  function getLoc() {\n\t    return {\n\t      line: line,\n\t      column: column,\n\t      pos: pos\n\t    };\n\t  }\n\n\t  function unexpectedToken() {\n\t    throw new SyntaxError('Unexpected token ' + source[pos] + ' in JSON at position ' + pos);\n\t  }\n\n\t  function wasUnexpectedToken() {\n\t    backChar();\n\t    unexpectedToken();\n\t  }\n\n\t  function checkUnexpectedEnd() {\n\t    if (pos >= source.length)\n\t      throw new SyntaxError('Unexpected end of JSON input');\n\t  }\n\t};\n\n\n\texports.stringify = function (data, _, whitespace) {\n\t  if (!validType(data)) return;\n\t  var wsLine = 0;\n\t  var wsPos, wsColumn;\n\t  switch (typeof whitespace) {\n\t    case 'number':\n\t      var len = whitespace > 10\n\t                  ? 10\n\t                  : whitespace < 0\n\t                    ? 0\n\t                    : Math.floor(whitespace);\n\t      whitespace = len && repeat(len, ' ');\n\t      wsPos = len;\n\t      wsColumn = len;\n\t      break;\n\t    case 'string':\n\t      whitespace = whitespace.slice(0, 10);\n\t      wsPos = 0;\n\t      wsColumn = 0;\n\t      for (var j=0; j<whitespace.length; j++) {\n\t        var char = whitespace[j];\n\t        switch (char) {\n\t          case ' ': wsColumn++; break;\n\t          case '\\t': wsColumn += 4; break;\n\t          case '\\r': wsColumn = 0; break;\n\t          case '\\n': wsColumn = 0; wsLine++; break;\n\t          default: throw new Error('whitespace characters not allowed in JSON');\n\t        }\n\t        wsPos++;\n\t      }\n\t      break;\n\t    default:\n\t      whitespace = undefined;\n\t  }\n\n\t  var json = '';\n\t  var pointers = {};\n\t  var line = 0;\n\t  var column = 0;\n\t  var pos = 0;\n\t  _stringify(data, 0, '');\n\t  return {\n\t    json: json,\n\t    pointers: pointers\n\t  };\n\n\t  function _stringify(_data, lvl, ptr) {\n\t    map(ptr, 'value');\n\t    switch (typeof _data) {\n\t      case 'number':\n\t      case 'boolean':\n\t        out('' + _data); break;\n\t      case 'string':\n\t        out(quoted(_data)); break;\n\t      case 'object':\n\t        if (_data === null)\n\t          out('null');\n\t        else if (typeof _data.toJSON == 'function')\n\t          out(quoted(_data.toJSON()));\n\t        else if (Array.isArray(_data))\n\t          stringifyArray();\n\t        else\n\t          stringifyObject();\n\t    }\n\t    map(ptr, 'valueEnd');\n\n\t    function stringifyArray() {\n\t      if (_data.length) {\n\t        out('[');\n\t        var itemLvl = lvl + 1;\n\t        for (var i=0; i<_data.length; i++) {\n\t          if (i) out(',');\n\t          indent(itemLvl);\n\t          var item = validType(_data[i]) ? _data[i] : null;\n\t          var itemPtr = ptr + '/' + i;\n\t          _stringify(item, itemLvl, itemPtr);\n\t        }\n\t        indent(lvl);\n\t        out(']');\n\t      } else {\n\t        out('[]');\n\t      }\n\t    }\n\n\t    function stringifyObject() {\n\t      var keys = Object.keys(_data);\n\t      if (keys.length) {\n\t        out('{');\n\t        var propLvl = lvl + 1;\n\t        for (var i=0; i<keys.length; i++) {\n\t          var key = keys[i];\n\t          var value = _data[key];\n\t          if (validType(value)) {\n\t            if (i) out(',');\n\t            var propPtr = ptr + '/' + escapeJsonPointer(key);\n\t            indent(propLvl);\n\t            map(propPtr, 'key');\n\t            out(quoted(key));\n\t            map(propPtr, 'keyEnd');\n\t            out(':');\n\t            if (whitespace) out(' ');\n\t            _stringify(value, propLvl, propPtr);\n\t          }\n\t        }\n\t        indent(lvl);\n\t        out('}');\n\t      } else {\n\t        out('{}');\n\t      }\n\t    }\n\t  }\n\n\t  function out(str) {\n\t    column += str.length;\n\t    pos += str.length;\n\t    json += str;\n\t  }\n\n\t  function indent(lvl) {\n\t    if (whitespace) {\n\t      json += '\\n' + repeat(lvl, whitespace);\n\t      line++;\n\t      column = 0;\n\t      while (lvl--) {\n\t        if (wsLine) {\n\t          line += wsLine;\n\t          column = wsColumn;\n\t        } else {\n\t          column += wsColumn;\n\t        }\n\t        pos += wsPos;\n\t      }\n\t      pos += 1; // \\n character\n\t    }\n\t  }\n\n\t  function map(ptr, prop) {\n\t    pointers[ptr] = pointers[ptr] || {};\n\t    pointers[ptr][prop] = {\n\t      line: line,\n\t      column: column,\n\t      pos: pos\n\t    };\n\t  }\n\n\t  function repeat(n, str) {\n\t    return Array(n + 1).join(str);\n\t  }\n\t};\n\n\n\tvar VALID_TYPES = ['number', 'boolean', 'string', 'object'];\n\tfunction validType(data) {\n\t  return VALID_TYPES.indexOf(typeof data) >= 0;\n\t}\n\n\n\tvar ESC_QUOTE = /\"|\\\\/g;\n\tvar ESC_B = /[\\b]/g;\n\tvar ESC_F = /\\f/g;\n\tvar ESC_N = /\\n/g;\n\tvar ESC_R = /\\r/g;\n\tvar ESC_T = /\\t/g;\n\tfunction quoted(str) {\n\t  str = str.replace(ESC_QUOTE, '\\\\$&')\n\t           .replace(ESC_F, '\\\\f')\n\t           .replace(ESC_B, '\\\\b')\n\t           .replace(ESC_N, '\\\\n')\n\t           .replace(ESC_R, '\\\\r')\n\t           .replace(ESC_T, '\\\\t');\n\t  return '\"' + str + '\"';\n\t}\n\n\n\tvar ESC_0 = /~/g;\n\tvar ESC_1 = /\\//g;\n\tfunction escapeJsonPointer(str) {\n\t  return str.replace(ESC_0, '~0')\n\t            .replace(ESC_1, '~1');\n\t}\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tvar _locales = ['en', 'pt-BR'];\n\tvar _defs = {\n\t  en: {\n\t    'array': 'Array',\n\t    'auto': 'Auto',\n\t    'appendText': 'Append',\n\t    'appendTitle': 'Append a new field with type \\'auto\\' after this field (Ctrl+Shift+Ins)',\n\t    'appendSubmenuTitle': 'Select the type of the field to be appended',\n\t    'appendTitleAuto': 'Append a new field with type \\'auto\\' (Ctrl+Shift+Ins)',\n\t    'ascending': 'Ascending',\n\t    'ascendingTitle': 'Sort the childs of this ${type} in ascending order',\n\t    'actionsMenu': 'Click to open the actions menu (Ctrl+M)',\n\t    'collapseAll': 'Collapse all fields',\n\t    'descending': 'Descending',\n\t    'descendingTitle': 'Sort the childs of this ${type} in descending order',\n\t    'drag': 'Drag to move this field (Alt+Shift+Arrows)',\n\t    'duplicateKey': 'duplicate key',\n\t    'duplicateText': 'Duplicate',\n\t    'duplicateTitle': 'Duplicate selected fields (Ctrl+D)',\n\t    'duplicateField': 'Duplicate this field (Ctrl+D)',\n\t    'empty': 'empty',\n\t    'expandAll': 'Expand all fields',\n\t    'expandTitle': 'Click to expand/collapse this field (Ctrl+E). \\n' +\n\t    'Ctrl+Click to expand/collapse including all childs.',\n\t    'insert': 'Insert',\n\t    'insertTitle': 'Insert a new field with type \\'auto\\' before this field (Ctrl+Ins)',\n\t    'insertSub': 'Select the type of the field to be inserted',\n\t    'object': 'Object',\n\t    'ok': 'Ok',\n\t    'redo': 'Redo (Ctrl+Shift+Z)',\n\t    'removeText': 'Remove',\n\t    'removeTitle': 'Remove selected fields (Ctrl+Del)',\n\t    'removeField': 'Remove this field (Ctrl+Del)',\n\t    'selectNode': 'Select a node...',\n\t    'showAll': 'show all',\n\t    'showMore': 'show more',\n\t    'showMoreStatus': 'displaying ${visibleChilds} of ${totalChilds} items.',\n\t    'sort': 'Sort',\n\t    'sortTitle': 'Sort the childs of this ${type}',\n\t    'sortTitleShort': 'Sort contents',\n\t    'sortFieldLabel': 'Field:',\n\t    'sortDirectionLabel': 'Direction:',\n\t    'sortFieldTitle': 'Select the nested field by which to sort the array or object',\n\t    'sortAscending': 'Ascending',\n\t    'sortAscendingTitle': 'Sort the selected field in ascending order',\n\t    'sortDescending': 'Descending',\n\t    'sortDescendingTitle': 'Sort the selected field in descending order',\n\t    'string': 'String',\n\t    'transform': 'Transform',\n\t    'transformTitle': 'Filter, sort, or transform the childs of this ${type}',\n\t    'transformTitleShort': 'Filter, sort, or transform contents',\n\t    'transformQueryTitle': 'Enter a JMESPath query',\n\t    'transformWizardLabel': 'Wizard',\n\t    'transformWizardFilter': 'Filter',\n\t    'transformWizardSortBy': 'Sort by',\n\t    'transformWizardSelectFields': 'Select fields',\n\t    'transformQueryLabel': 'Query',\n\t    'transformPreviewLabel': 'Preview',\n\t    'type': 'Type',\n\t    'typeTitle': 'Change the type of this field',\n\t    'openUrl': 'Ctrl+Click or Ctrl+Enter to open url in new window',\n\t    'undo': 'Undo last action (Ctrl+Z)',\n\t    'validationCannotMove': 'Cannot move a field into a child of itself',\n\t    'autoType': 'Field type \"auto\". ' +\n\t    'The field type is automatically determined from the value ' +\n\t    'and can be a string, number, boolean, or null.',\n\t    'objectType': 'Field type \"object\". ' +\n\t    'An object contains an unordered set of key/value pairs.',\n\t    'arrayType': 'Field type \"array\". ' +\n\t    'An array contains an ordered collection of values.',\n\t    'stringType': 'Field type \"string\". ' +\n\t    'Field type is not determined from the value, ' +\n\t    'but always returned as string.'\n\t  },\n\t  'pt-BR': {\n\t    'array': 'Lista',\n\t    'auto': 'Automatico',\n\t    'appendText': 'Adicionar',\n\t    'appendTitle': 'Adicionar novo campo com tipo \\'auto\\' depois deste campo (Ctrl+Shift+Ins)',\n\t    'appendSubmenuTitle': 'Selecione o tipo do campo a ser adicionado',\n\t    'appendTitleAuto': 'Adicionar novo campo com tipo \\'auto\\' (Ctrl+Shift+Ins)',\n\t    'ascending': 'Ascendente',\n\t    'ascendingTitle': 'Organizar filhor do tipo ${type} em crescente',\n\t    'actionsMenu': 'Clique para abrir o menu de aes (Ctrl+M)',\n\t    'collapseAll': 'Fechar todos campos',\n\t    'descending': 'Descendente',\n\t    'descendingTitle': 'Organizar o filhos do tipo ${type} em decrescente',\n\t    'duplicateKey': 'chave duplicada',\n\t    'drag': 'Arraste para mover este campo (Alt+Shift+Arrows)',\n\t    'duplicateText': 'Duplicar',\n\t    'duplicateTitle': 'Duplicar campos selecionados (Ctrl+D)',\n\t    'duplicateField': 'Duplicar este campo (Ctrl+D)',\n\t    'empty': 'vazio',\n\t    'expandAll': 'Expandir todos campos',\n\t    'expandTitle': 'Clique para expandir/encolher este campo (Ctrl+E). \\n' +\n\t    'Ctrl+Click para expandir/encolher incluindo todos os filhos.',\n\t    'insert': 'Inserir',\n\t    'insertTitle': 'Inserir um novo campo do tipo \\'auto\\' antes deste campo (Ctrl+Ins)',\n\t    'insertSub': 'Selecionar o tipo de campo a ser inserido',\n\t    'object': 'Objeto',\n\t    'ok': 'Ok',\n\t    'redo': 'Refazer (Ctrl+Shift+Z)',\n\t    'removeText': 'Remover',\n\t    'removeTitle': 'Remover campos selecionados (Ctrl+Del)',\n\t    'removeField': 'Remover este campo (Ctrl+Del)',\n\t    // TODO: correctly translate\n\t    'selectNode': 'Select a node...',\n\t    // TODO: correctly translate\n\t    'showAll': 'mostre tudo',\n\t    // TODO: correctly translate\n\t    'showMore': 'mostre mais',\n\t    // TODO: correctly translate\n\t    'showMoreStatus': 'exibindo ${visibleChilds} de ${totalChilds} itens.',\n\t    'sort': 'Organizar',\n\t    'sortTitle': 'Organizar os filhos deste ${type}',\n\t    // TODO: correctly translate\n\t    'sortTitleShort': 'Organizar os filhos',\n\t    // TODO: correctly translate\n\t    'sortFieldLabel': 'Field:',\n\t    // TODO: correctly translate\n\t    'sortDirectionLabel': 'Direction:',\n\t    // TODO: correctly translate\n\t    'sortFieldTitle': 'Select the nested field by which to sort the array or object',\n\t    // TODO: correctly translate\n\t    'sortAscending': 'Ascending',\n\t    // TODO: correctly translate\n\t    'sortAscendingTitle': 'Sort the selected field in ascending order',\n\t    // TODO: correctly translate\n\t    'sortDescending': 'Descending',\n\t    // TODO: correctly translate\n\t    'sortDescendingTitle': 'Sort the selected field in descending order',\n\t    'string': 'Texto',\n\t    // TODO: correctly translate\n\t    'transform': 'Transform',\n\t    // TODO: correctly translate\n\t    'transformTitle': 'Filter, sort, or transform the childs of this ${type}',\n\t    // TODO: correctly translate\n\t    'transformTitleShort': 'Filter, sort, or transform contents',\n\t    // TODO: correctly translate\n\t    'transformQueryTitle': 'Enter a JMESPath query',\n\t    // TODO: correctly translate\n\t    'transformWizardLabel': 'Wizard',\n\t    // TODO: correctly translate\n\t    'transformWizardFilter': 'Filter',\n\t    // TODO: correctly translate\n\t    'transformWizardSortBy': 'Sort by',\n\t    // TODO: correctly translate\n\t    'transformWizardSelectFields': 'Select fields',\n\t    // TODO: correctly translate\n\t    'transformQueryLabel': 'Query',\n\t    // TODO: correctly translate\n\t    'transformPreviewLabel': 'Preview',\n\t    'type': 'Tipo',\n\t    'typeTitle': 'Mudar o tipo deste campo',\n\t    'openUrl': 'Ctrl+Click ou Ctrl+Enter para abrir link em nova janela',\n\t    'undo': 'Desfazer ltimo ao (Ctrl+Z)',\n\t    'validationCannotMove': 'No pode mover um campo como filho dele mesmo',\n\t    'autoType': 'Campo do tipo \"auto\". ' +\n\t    'O tipo do campo  determinao automaticamente a partir do seu valor ' +\n\t    'e pode ser texto, nmero, verdade/falso ou nulo.',\n\t    'objectType': 'Campo do tipo \"objeto\". ' +\n\t    'Um objeto contm uma lista de pares com chave e valor.',\n\t    'arrayType': 'Campo do tipo \"lista\". ' +\n\t    'Uma lista contem uma coleo de valores ordenados.',\n\t    'stringType': 'Campo do tipo \"string\". ' +\n\t    'Campo do tipo nao  determinado atravs do seu valor, ' +\n\t    'mas sempre retornara um texto.'\n\t  }\n\t};\n\n\tvar _defaultLang = 'en';\n\tvar _lang;\n\tvar userLang = typeof navigator !== 'undefined'\n\t    ? navigator.language || navigator.userLanguage\n\t    : undefined;\n\t_lang = _locales.find(function (l) {\n\t  return l === userLang;\n\t});\n\tif (!_lang) {\n\t  _lang = _defaultLang;\n\t}\n\n\tmodule.exports = {\n\t  // supported locales\n\t  _locales: _locales,\n\t  _defs: _defs,\n\t  _lang: _lang,\n\t  setLanguage: function (lang) {\n\t    if (!lang) {\n\t      return;\n\t    }\n\t    var langFound = _locales.find(function (l) {\n\t      return l === lang;\n\t    });\n\t    if (langFound) {\n\t      _lang = langFound;\n\t    } else {\n\t      console.error('Language not found');\n\t    }\n\t  },\n\t  setLanguages: function (languages) {\n\t    if (!languages) {\n\t      return;\n\t    }\n\t    for (var key in languages) {\n\t      var langFound = _locales.find(function (l) {\n\t        return l === key;\n\t      });\n\t      if (!langFound) {\n\t        _locales.push(key);\n\t      }\n\t      _defs[key] = Object.assign({}, _defs[_defaultLang], _defs[key], languages[key]);\n\t    }\n\t  },\n\t  translate: function (key, data, lang) {\n\t    if (!lang) {\n\t      lang = _lang;\n\t    }\n\t    var text = _defs[lang][key];\n\t    if (data) {\n\t      for (key in data) {\n\t        text = text.replace('${' + key + '}', data[key]);\n\t      }\n\t    }\n\t    return text || key;\n\t  }\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar ContextMenu = __webpack_require__(10);\n\tvar translate = __webpack_require__(15).translate;\n\n\t/**\n\t * Creates a component that visualize path selection in tree based editors\n\t * @param {HTMLElement} container \n\t * @constructor\n\t */\n\tfunction TreePath(container) {\n\t  if (container) {\n\t    this.path = document.createElement('div');\n\t    this.path.className = 'jsoneditor-treepath';\n\t    container.appendChild(this.path);\n\t    this.reset();\n\t  }\n\t}\n\n\t/**\n\t * Reset component to initial status\n\t */\n\tTreePath.prototype.reset = function () {\n\t  this.path.innerHTML = translate('selectNode');\n\t};\n\n\t/**\n\t * Renders the component UI according to a given path objects\n\t * @param {Array<{name: String, childs: Array}>} pathObjs a list of path objects\n\t * \n\t */\n\tTreePath.prototype.setPath = function (pathObjs) {\n\t  var me = this;\n\n\t  this.path.innerHTML = '';\n\n\t  if (pathObjs && pathObjs.length) {\n\t    pathObjs.forEach(function (pathObj, idx) {\n\t      var pathEl = document.createElement('span');\n\t      var sepEl;\n\t      pathEl.className = 'jsoneditor-treepath-element';\n\t      pathEl.innerText = pathObj.name;\n\t      pathEl.onclick = _onSegmentClick.bind(me, pathObj);\n\t  \n\t      me.path.appendChild(pathEl);\n\n\t      if (pathObj.children.length) {\n\t        sepEl = document.createElement('span');\n\t        sepEl.className = 'jsoneditor-treepath-seperator';\n\t        sepEl.innerHTML = '&#9658;';\n\n\t        sepEl.onclick = function () {\n\t          var items = [];\n\t          pathObj.children.forEach(function (child) {\n\t            items.push({\n\t              'text': child.name,\n\t              'className': 'jsoneditor-type-modes' + (pathObjs[idx + 1] + 1 && pathObjs[idx + 1].name === child.name ? ' jsoneditor-selected' : ''),\n\t              'click': _onContextMenuItemClick.bind(me, pathObj, child.name)\n\t            });\n\t          });\n\t          var menu = new ContextMenu(items);\n\t          menu.show(sepEl);\n\t        };\n\n\t        me.path.appendChild(sepEl, me.container);\n\t      }\n\n\t      if(idx === pathObjs.length - 1) {\n\t        var leftRectPos = (sepEl || pathEl).getBoundingClientRect().left;\n\t        if(me.path.offsetWidth < leftRectPos) {\n\t          me.path.scrollLeft = leftRectPos;\n\t        }\n\t      }\n\t    });\n\t  }\n\n\t  function _onSegmentClick(pathObj) {\n\t    if (this.selectionCallback) {\n\t      this.selectionCallback(pathObj);\n\t    }\n\t  }\n\n\t  function _onContextMenuItemClick(pathObj, selection) {\n\t    if (this.contextMenuCallback) {\n\t      this.contextMenuCallback(pathObj, selection);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * set a callback function for selection of path section\n\t * @param {Function} callback function to invoke when section is selected\n\t */\n\tTreePath.prototype.onSectionSelected = function (callback) {\n\t  if (typeof callback === 'function') {\n\t    this.selectionCallback = callback;      \n\t  }\n\t};\n\n\t/**\n\t * set a callback function for selection of path section\n\t * @param {Function} callback function to invoke when section is selected\n\t */\n\tTreePath.prototype.onContextMenuItemSelected = function (callback) {\n\t  if (typeof callback === 'function') {\n\t    this.contextMenuCallback = callback;\n\t  }\n\t};\n\n\tmodule.exports = TreePath;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar jmespath = __webpack_require__(18);\n\tvar naturalSort = __webpack_require__(19);\n\tvar createAbsoluteAnchor = __webpack_require__(11).createAbsoluteAnchor;\n\tvar ContextMenu = __webpack_require__(10);\n\tvar appendNodeFactory = __webpack_require__(20);\n\tvar showMoreNodeFactory = __webpack_require__(21);\n\tvar showSortModal = __webpack_require__(22);\n\tvar showTransformModal = __webpack_require__(24);\n\tvar util = __webpack_require__(12);\n\tvar translate = __webpack_require__(15).translate;\n\n\tvar DEFAULT_MODAL_ANCHOR = document.body; // TODO: this constant is defined twice\n\n\tvar YEAR_2000 = 946684800000;\n\n\t/**\n\t * @constructor Node\n\t * Create a new Node\n\t * @param {./treemode} editor\n\t * @param {Object} [params] Can contain parameters:\n\t *                          {string}  field\n\t *                          {boolean} fieldEditable\n\t *                          {*}       value\n\t *                          {String}  type  Can have values 'auto', 'array',\n\t *                                          'object', or 'string'.\n\t */\n\tfunction Node (editor, params) {\n\t  /** @type {./treemode} */\n\t  this.editor = editor;\n\t  this.dom = {};\n\t  this.expanded = false;\n\n\t  if(params && (params instanceof Object)) {\n\t    this.setField(params.field, params.fieldEditable);\n\t    if ('value' in params) {\n\t      this.setValue(params.value, params.type);\n\t    }\n\t    if ('internalValue' in params) {\n\t      this.setInternalValue(params.internalValue);\n\t    }\n\t  }\n\t  else {\n\t    this.setField('');\n\t    this.setValue(null);\n\t  }\n\n\t  this._debouncedOnChangeValue = util.debounce(this._onChangeValue.bind(this), Node.prototype.DEBOUNCE_INTERVAL);\n\t  this._debouncedOnChangeField = util.debounce(this._onChangeField.bind(this), Node.prototype.DEBOUNCE_INTERVAL);\n\t}\n\n\t// debounce interval for keyboard input in milliseconds\n\tNode.prototype.DEBOUNCE_INTERVAL = 150;\n\n\t// search will stop iterating as soon as the max is reached\n\tNode.prototype.MAX_SEARCH_RESULTS = 999;\n\n\t// number of visible childs rendered initially in large arrays/objects (with a \"show more\" button to show more)\n\tNode.prototype.MAX_VISIBLE_CHILDS = 100;\n\n\t// default value for the max visible childs of large arrays\n\tNode.prototype.visibleChilds = Node.prototype.MAX_VISIBLE_CHILDS;\n\n\t/**\n\t * Determine whether the field and/or value of this node are editable\n\t * @private\n\t */\n\tNode.prototype._updateEditability = function () {\n\t  this.editable = {\n\t    field: true,\n\t    value: true\n\t  };\n\n\t  if (this.editor) {\n\t    this.editable.field = this.editor.options.mode === 'tree';\n\t    this.editable.value = this.editor.options.mode !== 'view';\n\n\t    if ((this.editor.options.mode === 'tree' || this.editor.options.mode === 'form') &&\n\t        (typeof this.editor.options.onEditable === 'function')) {\n\t      var editable = this.editor.options.onEditable({\n\t        field: this.field,\n\t        value: this.value,\n\t        path: this.getPath()\n\t      });\n\n\t      if (typeof editable === 'boolean') {\n\t        this.editable.field = editable;\n\t        this.editable.value = editable;\n\t      }\n\t      else {\n\t        if (typeof editable.field === 'boolean') this.editable.field = editable.field;\n\t        if (typeof editable.value === 'boolean') this.editable.value = editable.value;\n\t      }\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Get the path of this node\n\t * @return {{string|number}[]} Array containing the path to this node.\n\t * Element is a number if is the index of an array, a string otherwise.\n\t */\n\tNode.prototype.getPath = function () {\n\t  var node = this;\n\t  var path = [];\n\t  while (node) {\n\t    var field = node.getName();\n\t    if (field !== undefined) {\n\t      path.unshift(field);\n\t    }\n\t    node = node.parent;\n\t  }\n\t  return path;\n\t};\n\n\t/**\n\t * Get the internal path of this node, a list with the child indexes.\n\t * @return {String[]} Array containing the internal path to this node\n\t */\n\tNode.prototype.getInternalPath = function () {\n\t  var node = this;\n\t  var internalPath = [];\n\t  while (node) {\n\t    if (node.parent) {\n\t      internalPath.unshift(node.getIndex());\n\t    }\n\t    node = node.parent;\n\t  }\n\t  return internalPath;\n\t};\n\n\t/**\n\t * Get node serializable name\n\t * @returns {String|Number}\n\t */\n\tNode.prototype.getName = function () {\n\t return !this.parent\n\t ? undefined  // do not add an (optional) field name of the root node\n\t :  (this.parent.type != 'array')\n\t     ? this.field\n\t     : this.index;\n\t};\n\n\t/**\n\t * Find child node by serializable path\n\t * @param {Array<String>} path \n\t */\n\tNode.prototype.findNodeByPath = function (path) {\n\t  if (!path) {\n\t    return;\n\t  }\n\n\t  if (path.length == 0) {\n\t    return this;\n\t  }\n\n\t  if (path.length && this.childs && this.childs.length) {\n\t    for (var i=0; i < this.childs.length; ++i) {\n\t      if (('' + path[0]) === ('' + this.childs[i].getName())) {\n\t        return this.childs[i].findNodeByPath(path.slice(1));\n\t      }\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Find child node by an internal path: the indexes of the childs nodes\n\t * @param {Array<String>} internalPath\n\t * @return {Node | undefined} Returns the node if the path exists.\n\t *                            Returns undefined otherwise.\n\t */\n\tNode.prototype.findNodeByInternalPath = function (internalPath) {\n\t  if (!internalPath) {\n\t    return undefined;\n\t  }\n\n\t  var node = this;\n\t  for (var i = 0; i < internalPath.length && node; i++) {\n\t    var childIndex = internalPath[i];\n\t    node = node.childs[childIndex];\n\t  }\n\n\t  return node;\n\t};\n\n\t/**\n\t * @typedef {{value: String|Object|Number|Boolean, path: Array.<String|Number>}} SerializableNode\n\t * \n\t * Returns serializable representation for the node\n\t * @return {SerializableNode}\n\t */\n\tNode.prototype.serialize = function () {\n\t  return {\n\t    value: this.getValue(),\n\t    path: this.getPath()\n\t  };\n\t};\n\n\t/**\n\t * Find a Node from a JSON path like '.items[3].name'\n\t * @param {string} jsonPath\n\t * @return {Node | null} Returns the Node when found, returns null if not found\n\t */\n\tNode.prototype.findNode = function (jsonPath) {\n\t  var path = util.parsePath(jsonPath);\n\t  var node = this;\n\t  while (node && path.length > 0) {\n\t    var prop = path.shift();\n\t    if (typeof prop === 'number') {\n\t      if (node.type !== 'array') {\n\t        throw new Error('Cannot get child node at index ' + prop + ': node is no array');\n\t      }\n\t      node = node.childs[prop];\n\t    }\n\t    else { // string\n\t      if (node.type !== 'object') {\n\t        throw new Error('Cannot get child node ' + prop + ': node is no object');\n\t      }\n\t      node = node.childs.filter(function (child) {\n\t        return child.field === prop;\n\t      })[0];\n\t    }\n\t  }\n\n\t  return node;\n\t};\n\n\t/**\n\t * Find all parents of this node. The parents are ordered from root node towards\n\t * the original node.\n\t * @return {Array.<Node>}\n\t */\n\tNode.prototype.findParents = function () {\n\t  var parents = [];\n\t  var parent = this.parent;\n\t  while (parent) {\n\t    parents.unshift(parent);\n\t    parent = parent.parent;\n\t  }\n\t  return parents;\n\t};\n\n\t/**\n\t *\n\t * @param {{dataPath: string, keyword: string, message: string, params: Object, schemaPath: string} | null} error\n\t * @param {Node} [child]  When this is the error of a parent node, pointing\n\t *                        to an invalid child node, the child node itself\n\t *                        can be provided. If provided, clicking the error\n\t *                        icon will set focus to the invalid child node.\n\t */\n\tNode.prototype.setError = function (error, child) {\n\t  this.error = error;\n\t  this.errorChild = child;\n\n\t  if (this.dom && this.dom.tr) {\n\t    this.updateError();\n\t  }\n\t};\n\n\t/**\n\t * Render the error\n\t */\n\tNode.prototype.updateError = function() {\n\t  var error = this.error;\n\t  var tdError = this.dom.tdError;\n\t  if (error && this.dom && this.dom.tr) {\n\t    util.addClassName(this.dom.tr, 'jsoneditor-validation-error');\n\n\t    if (!tdError) {\n\t      tdError = document.createElement('td');\n\t      this.dom.tdError = tdError;\n\t      this.dom.tdValue.parentNode.appendChild(tdError);\n\t    }\n\n\t    var popover = document.createElement('div');\n\t    popover.className = 'jsoneditor-popover jsoneditor-right';\n\t    popover.appendChild(document.createTextNode(error.message));\n\n\t    var button = document.createElement('button');\n\t    button.type = 'button';\n\t    button.className = 'jsoneditor-button jsoneditor-schema-error';\n\t    button.appendChild(popover);\n\n\t    // update the direction of the popover\n\t    button.onmouseover = button.onfocus = function updateDirection() {\n\t      var directions = ['right', 'above', 'below', 'left'];\n\t      for (var i = 0; i < directions.length; i++) {\n\t        var direction = directions[i];\n\t        popover.className = 'jsoneditor-popover jsoneditor-' + direction;\n\n\t        var contentRect = this.editor.content.getBoundingClientRect();\n\t        var popoverRect = popover.getBoundingClientRect();\n\t        var margin = 20; // account for a scroll bar\n\t        var fit = util.insideRect(contentRect, popoverRect, margin);\n\n\t        if (fit) {\n\t          break;\n\t        }\n\t      }\n\t    }.bind(this);\n\n\t    // when clicking the error icon, expand all nodes towards the invalid\n\t    // child node, and set focus to the child node\n\t    var child = this.errorChild;\n\t    if (child) {\n\t      button.onclick = function showInvalidNode() {\n\t        child.findParents().forEach(function (parent) {\n\t          parent.expand(false);\n\t        });\n\n\t        child.scrollTo(function () {\n\t          child.focus();\n\t        });\n\t      };\n\t    }\n\n\t    // apply the error message to the node\n\t    while (tdError.firstChild) {\n\t      tdError.removeChild(tdError.firstChild);\n\t    }\n\t    tdError.appendChild(button);\n\t  }\n\t  else {\n\t    util.removeClassName(this.dom.tr, 'jsoneditor-validation-error');\n\n\t    if (tdError) {\n\t      this.dom.tdError.parentNode.removeChild(this.dom.tdError);\n\t      delete this.dom.tdError;\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Get the index of this node: the index in the list of childs where this\n\t * node is part of\n\t * @return {number | null} Returns the index, or null if this is the root node\n\t */\n\tNode.prototype.getIndex = function () {\n\t  if (this.parent) {\n\t    var index = this.parent.childs.indexOf(this);\n\t    return index !== -1 ? index : null;\n\t  }\n\t  else {\n\t    return -1;\n\t  }\n\t};\n\n\t/**\n\t * Set parent node\n\t * @param {Node} parent\n\t */\n\tNode.prototype.setParent = function(parent) {\n\t  this.parent = parent;\n\t};\n\n\t/**\n\t * Set field\n\t * @param {String}  field\n\t * @param {boolean} [fieldEditable]\n\t */\n\tNode.prototype.setField = function(field, fieldEditable) {\n\t  this.field = field;\n\t  this.previousField = field;\n\t  this.fieldEditable = (fieldEditable === true);\n\t};\n\n\t/**\n\t * Get field\n\t * @return {String}\n\t */\n\tNode.prototype.getField = function() {\n\t  if (this.field === undefined) {\n\t    this._getDomField();\n\t  }\n\n\t  return this.field;\n\t};\n\n\t/**\n\t * Set value. Value is a JSON structure or an element String, Boolean, etc.\n\t * @param {*} value\n\t * @param {String} [type]  Specify the type of the value. Can be 'auto',\n\t *                         'array', 'object', or 'string'\n\t */\n\tNode.prototype.setValue = function(value, type) {\n\t  var childValue, child, visible;\n\t  var i, j;\n\t  var notUpdateDom = false;\n\t  var previousChilds = this.childs;\n\n\t  this.type = this._getType(value);\n\n\t  // check if type corresponds with the provided type\n\t  if (type && type !== this.type) {\n\t    if (type === 'string' && this.type === 'auto') {\n\t      this.type = type;\n\t    }\n\t    else {\n\t      throw new Error('Type mismatch: ' +\n\t          'cannot cast value of type \"' + this.type +\n\t          ' to the specified type \"' + type + '\"');\n\t    }\n\t  }\n\n\t  if (this.type === 'array') {\n\t    // array\n\t    if (!this.childs) {\n\t      this.childs = [];\n\t    }\n\n\t    for (i = 0; i < value.length; i++) {\n\t      childValue = value[i];\n\t      if (childValue !== undefined && !(childValue instanceof Function)) {\n\t        if (i < this.childs.length) {\n\t          // reuse existing child, keep its state\n\t          child = this.childs[i];\n\n\t          child.fieldEditable = false;\n\t          child.index = i;\n\t          child.setValue(childValue);\n\t        }\n\t        else {\n\t          // create a new child\n\t          child = new Node(this.editor, {\n\t            value: childValue\n\t          });\n\t          visible = i < this.MAX_VISIBLE_CHILDS;\n\t          this.appendChild(child, visible, notUpdateDom);\n\t        }\n\t      }\n\t    }\n\n\t    // cleanup redundant childs\n\t    // we loop backward to prevent issues with shifting index numbers\n\t    for (j = this.childs.length; j >= value.length; j--) {\n\t      this.removeChild(this.childs[j], notUpdateDom);\n\t    }\n\t  }\n\t  else if (this.type === 'object') {\n\t    // object\n\t    if (!this.childs) {\n\t      this.childs = [];\n\t    }\n\n\t    // cleanup redundant childs\n\t    // we loop backward to prevent issues with shifting index numbers\n\t    for (j = this.childs.length - 1; j >= 0; j--) {\n\t      if (!value.hasOwnProperty(this.childs[j].field)) {\n\t        this.removeChild(this.childs[j], notUpdateDom);\n\t      }\n\t    }\n\n\t    i = 0;\n\t    for (var childField in value) {\n\t      if (value.hasOwnProperty(childField)) {\n\t        childValue = value[childField];\n\t        if (childValue !== undefined && !(childValue instanceof Function)) {\n\t          child = this.findChildByProperty(childField);\n\n\t          if (child) {\n\t            // reuse existing child, keep its state\n\t            child.setField(childField, true);\n\t            child.setValue(childValue);\n\t          }\n\t          else {\n\t            // create a new child\n\t            child = new Node(this.editor, {\n\t              field: childField,\n\t              value: childValue\n\t            });\n\t            visible = i < this.MAX_VISIBLE_CHILDS;\n\t            this.appendChild(child, visible, notUpdateDom);\n\t          }\n\t        }\n\t        i++;\n\t      }\n\n\t    }\n\t    this.value = '';\n\n\t    // sort object keys\n\t    if (this.editor.options.sortObjectKeys === true) {\n\t      this.sort([], 'asc');\n\t    }\n\t  }\n\t  else {\n\t    // value\n\t    this.hideChilds();\n\n\t    delete this.append;\n\t    delete this.showMore;\n\t    delete this.expanded;\n\t    delete this.childs;\n\n\t    this.value = value;\n\t  }\n\n\t  // recreate the DOM if switching from an object/array to auto/string or vice versa\n\t  // needed to recreated the expand button for example\n\t  if (Array.isArray(previousChilds) !== Array.isArray(this.childs)) {\n\t    this.recreateDom();\n\t  }\n\n\t  this.updateDom({'updateIndexes': true});\n\n\t  this.previousValue = this.value; // used only to check for changes in DOM vs JS model\n\t};\n\n\t/**\n\t * Set internal value\n\t * @param {*} internalValue  Internal value structure keeping type,\n\t *                           order and duplicates in objects\n\t */\n\tNode.prototype.setInternalValue = function(internalValue) {\n\t  var childValue, child, visible;\n\t  var i, j;\n\t  var notUpdateDom = false;\n\t  var previousChilds = this.childs;\n\n\t  this.type = internalValue.type;\n\n\t  if (internalValue.type === 'array') {\n\t    // array\n\t    if (!this.childs) {\n\t      this.childs = [];\n\t    }\n\n\t    for (i = 0; i < internalValue.childs.length; i++) {\n\t      childValue = internalValue.childs[i];\n\t      if (childValue !== undefined && !(childValue instanceof Function)) {\n\t        if (i < this.childs.length) {\n\t          // reuse existing child, keep its state\n\t          child = this.childs[i];\n\n\t          child.fieldEditable = false;\n\t          child.index = i;\n\t          child.setInternalValue(childValue);\n\t        }\n\t        else {\n\t          // create a new child\n\t          child = new Node(this.editor, {\n\t            internalValue: childValue\n\t          });\n\t          visible = i < this.MAX_VISIBLE_CHILDS;\n\t          this.appendChild(child, visible, notUpdateDom);\n\t        }\n\t      }\n\t    }\n\n\t    // cleanup redundant childs\n\t    // we loop backward to prevent issues with shifting index numbers\n\t    for (j = this.childs.length; j >= internalValue.childs.length; j--) {\n\t      this.removeChild(this.childs[j], notUpdateDom);\n\t    }\n\t  }\n\t  else if (internalValue.type === 'object') {\n\t    // object\n\t    if (!this.childs) {\n\t      this.childs = [];\n\t    }\n\n\t    for (i = 0; i < internalValue.childs.length; i++) {\n\t      childValue = internalValue.childs[i];\n\t      if (childValue !== undefined && !(childValue instanceof Function)) {\n\t        if (i < this.childs.length) {\n\t          // reuse existing child, keep its state\n\t          child = this.childs[i];\n\n\t          delete child.index;\n\t          child.setField(childValue.field, true);\n\t          child.setInternalValue(childValue.value);\n\t        }\n\t        else {\n\t          // create a new child\n\t          child = new Node(this.editor, {\n\t            field: childValue.field,\n\t            internalValue: childValue.value\n\t          });\n\t          visible = i < this.MAX_VISIBLE_CHILDS;\n\t          this.appendChild(child, visible, notUpdateDom);\n\t        }\n\t      }\n\t    }\n\n\t    // cleanup redundant childs\n\t    // we loop backward to prevent issues with shifting index numbers\n\t    for (j = this.childs.length; j >= internalValue.childs.length; j--) {\n\t      this.removeChild(this.childs[j], notUpdateDom);\n\t    }\n\t  }\n\t  else {\n\t    // value\n\t    this.hideChilds();\n\n\t    delete this.append;\n\t    delete this.showMore;\n\t    delete this.expanded;\n\t    delete this.childs;\n\n\t    this.value = internalValue.value;\n\t  }\n\n\t  // recreate the DOM if switching from an object/array to auto/string or vice versa\n\t  // needed to recreated the expand button for example\n\t  if (Array.isArray(previousChilds) !== Array.isArray(this.childs)) {\n\t    this.recreateDom();\n\t  }\n\n\t  this.updateDom({'updateIndexes': true});\n\n\t  this.previousValue = this.value; // used only to check for changes in DOM vs JS model\n\t};\n\n\t/**\n\t * Remove the DOM of this node and it's childs and recreate it again\n\t */\n\tNode.prototype.recreateDom = function() {\n\t  if (this.dom && this.dom.tr && this.dom.tr.parentNode) {\n\t    var domAnchor = this._detachFromDom();\n\n\t    this.clearDom();\n\n\t    this._attachToDom(domAnchor);\n\t  }\n\t  else {\n\t    this.clearDom();\n\t  }\n\t};\n\n\t/**\n\t * Get value. Value is a JSON structure\n\t * @return {*} value\n\t */\n\tNode.prototype.getValue = function() {\n\t  if (this.type == 'array') {\n\t    var arr = [];\n\t    this.childs.forEach (function (child) {\n\t      arr.push(child.getValue());\n\t    });\n\t    return arr;\n\t  }\n\t  else if (this.type == 'object') {\n\t    var obj = {};\n\t    this.childs.forEach (function (child) {\n\t      obj[child.getField()] = child.getValue();\n\t    });\n\t    return obj;\n\t  }\n\t  else {\n\t    if (this.value === undefined) {\n\t      this._getDomValue();\n\t    }\n\n\t    return this.value;\n\t  }\n\t};\n\n\t/**\n\t * Get internal value, a structure which maintains ordering and duplicates in objects\n\t * @return {*} value\n\t */\n\tNode.prototype.getInternalValue = function() {\n\t  if (this.type === 'array') {\n\t    return {\n\t      type: this.type,\n\t      childs: this.childs.map (function (child) {\n\t        return child.getInternalValue();\n\t      })\n\t    };\n\t  }\n\t  else if (this.type === 'object') {\n\t    return {\n\t      type: this.type,\n\t      childs: this.childs.map(function (child) {\n\t        return {\n\t          field: child.getField(),\n\t          value: child.getInternalValue()\n\t        }\n\t      })\n\t    };\n\t  }\n\t  else {\n\t    if (this.value === undefined) {\n\t      this._getDomValue();\n\t    }\n\n\t    return {\n\t      type: this.type,\n\t      value: this.value\n\t    };\n\t  }\n\t};\n\n\t/**\n\t * Get the nesting level of this node\n\t * @return {Number} level\n\t */\n\tNode.prototype.getLevel = function() {\n\t  return (this.parent ? this.parent.getLevel() + 1 : 0);\n\t};\n\n\t/**\n\t * Get jsonpath of the current node\n\t * @return {Node[]} Returns an array with nodes\n\t */\n\tNode.prototype.getNodePath = function () {\n\t  var path = this.parent ? this.parent.getNodePath() : [];\n\t  path.push(this);\n\t  return path;\n\t};\n\n\t/**\n\t * Create a clone of a node\n\t * The complete state of a clone is copied, including whether it is expanded or\n\t * not. The DOM elements are not cloned.\n\t * @return {Node} clone\n\t */\n\tNode.prototype.clone = function() {\n\t  var clone = new Node(this.editor);\n\t  clone.type = this.type;\n\t  clone.field = this.field;\n\t  clone.fieldInnerText = this.fieldInnerText;\n\t  clone.fieldEditable = this.fieldEditable;\n\t  clone.previousField = this.previousField;\n\t  clone.value = this.value;\n\t  clone.valueInnerText = this.valueInnerText;\n\t  clone.previousValue = this.previousValue;\n\t  clone.expanded = this.expanded;\n\t  clone.visibleChilds = this.visibleChilds;\n\n\t  if (this.childs) {\n\t    // an object or array\n\t    var cloneChilds = [];\n\t    this.childs.forEach(function (child) {\n\t      var childClone = child.clone();\n\t      childClone.setParent(clone);\n\t      cloneChilds.push(childClone);\n\t    });\n\t    clone.childs = cloneChilds;\n\t  }\n\t  else {\n\t    // a value\n\t    clone.childs = undefined;\n\t  }\n\n\t  return clone;\n\t};\n\n\t/**\n\t * Expand this node and optionally its childs.\n\t * @param {boolean} [recurse] Optional recursion, true by default. When\n\t *                            true, all childs will be expanded recursively\n\t */\n\tNode.prototype.expand = function(recurse) {\n\t  if (!this.childs) {\n\t    return;\n\t  }\n\n\t  // set this node expanded\n\t  this.expanded = true;\n\t  if (this.dom.expand) {\n\t    this.dom.expand.className = 'jsoneditor-button jsoneditor-expanded';\n\t  }\n\n\t  this.showChilds();\n\n\t  if (recurse !== false) {\n\t    this.childs.forEach(function (child) {\n\t      child.expand(recurse);\n\t    });\n\t  }\n\t};\n\n\t/**\n\t * Collapse this node and optionally its childs.\n\t * @param {boolean} [recurse] Optional recursion, true by default. When\n\t *                            true, all childs will be collapsed recursively\n\t */\n\tNode.prototype.collapse = function(recurse) {\n\t  if (!this.childs) {\n\t    return;\n\t  }\n\n\t  this.hideChilds();\n\n\t  // collapse childs in case of recurse\n\t  if (recurse !== false) {\n\t    this.childs.forEach(function (child) {\n\t      child.collapse(recurse);\n\t    });\n\n\t  }\n\n\t  // make this node collapsed\n\t  if (this.dom.expand) {\n\t    this.dom.expand.className = 'jsoneditor-button jsoneditor-collapsed';\n\t  }\n\t  this.expanded = false;\n\t};\n\n\t/**\n\t * Recursively show all childs when they are expanded\n\t */\n\tNode.prototype.showChilds = function() {\n\t  var childs = this.childs;\n\t  if (!childs) {\n\t    return;\n\t  }\n\t  if (!this.expanded) {\n\t    return;\n\t  }\n\n\t  var tr = this.dom.tr;\n\t  var table = tr ? tr.parentNode : undefined;\n\t  if (table) {\n\t    // show row with append button\n\t    var append = this.getAppendDom();\n\t    if (!append.parentNode) {\n\t      var nextTr = tr.nextSibling;\n\t      if (nextTr) {\n\t        table.insertBefore(append, nextTr);\n\t      }\n\t      else {\n\t        table.appendChild(append);\n\t      }\n\t    }\n\n\t    // show childs\n\t    var iMax = Math.min(this.childs.length, this.visibleChilds);\n\t    var nextTr = this._getNextTr();\n\t    for (var i = 0; i < iMax; i++) {\n\t      var child = this.childs[i];\n\t      if (!child.getDom().parentNode) {\n\t        table.insertBefore(child.getDom(), nextTr);\n\t      }\n\t      child.showChilds();\n\t    }\n\n\t    // show \"show more childs\" if limited\n\t    var showMore = this.getShowMoreDom();\n\t    var nextTr = this._getNextTr();\n\t    if (!showMore.parentNode) {\n\t      table.insertBefore(showMore, nextTr);\n\t    }\n\t    this.showMore.updateDom(); // to update the counter\n\t  }\n\t};\n\n\tNode.prototype._getNextTr = function() {\n\t  if (this.showMore && this.showMore.getDom().parentNode) {\n\t    return this.showMore.getDom();\n\t  }\n\n\t  if (this.append && this.append.getDom().parentNode) {\n\t    return this.append.getDom();\n\t  }\n\t};\n\n\t/**\n\t * Hide the node with all its childs\n\t * @param {{resetVisibleChilds: boolean}} [options]\n\t */\n\tNode.prototype.hide = function(options) {\n\t  var tr = this.dom.tr;\n\t  var table = tr ? tr.parentNode : undefined;\n\t  if (table) {\n\t    table.removeChild(tr);\n\t  }\n\t  this.hideChilds(options);\n\t};\n\n\n\t/**\n\t * Recursively hide all childs\n\t * @param {{resetVisibleChilds: boolean}} [options]\n\t */\n\tNode.prototype.hideChilds = function(options) {\n\t  var childs = this.childs;\n\t  if (!childs) {\n\t    return;\n\t  }\n\t  if (!this.expanded) {\n\t    return;\n\t  }\n\n\t  // hide append row\n\t  var append = this.getAppendDom();\n\t  if (append.parentNode) {\n\t    append.parentNode.removeChild(append);\n\t  }\n\n\t  // hide childs\n\t  this.childs.forEach(function (child) {\n\t    child.hide();\n\t  });\n\n\t  // hide \"show more\" row\n\t  var showMore = this.getShowMoreDom();\n\t  if (showMore.parentNode) {\n\t    showMore.parentNode.removeChild(showMore);\n\t  }\n\n\t  // reset max visible childs\n\t  if (!options || options.resetVisibleChilds) {\n\t    delete this.visibleChilds;\n\t  }\n\t};\n\n\n\t/**\n\t * Goes through the path from the node to the root and ensures that it is expanded\n\t */\n\tNode.prototype.expandTo = function() {\n\t  var currentNode = this.parent;\n\t  while (currentNode) {\n\t    if (!currentNode.expanded) {\n\t      currentNode.expand();\n\t    }\n\t    currentNode = currentNode.parent;\n\t  }\n\t};\n\n\n\t/**\n\t * Add a new child to the node.\n\t * Only applicable when Node value is of type array or object\n\t * @param {Node} node\n\t * @param {boolean} [visible] If true (default), the child will be rendered\n\t * @param {boolean} [updateDom]  If true (default), the DOM of both parent\n\t *                               node and appended node will be updated\n\t *                               (child count, indexes)\n\t */\n\tNode.prototype.appendChild = function(node, visible, updateDom) {\n\t  if (this._hasChilds()) {\n\t    // adjust the link to the parent\n\t    node.setParent(this);\n\t    node.fieldEditable = (this.type == 'object');\n\t    if (this.type == 'array') {\n\t      node.index = this.childs.length;\n\t    }\n\t    if (this.type === 'object' && node.field == undefined) {\n\t      // initialize field value if needed\n\t      node.setField('');\n\t    }\n\t    this.childs.push(node);\n\n\t    if (this.expanded && visible !== false) {\n\t      // insert into the DOM, before the appendRow\n\t      var newTr = node.getDom();\n\t      var nextTr = this._getNextTr();\n\t      var table = nextTr ? nextTr.parentNode : undefined;\n\t      if (nextTr && table) {\n\t        table.insertBefore(newTr, nextTr);\n\t      }\n\n\t      node.showChilds();\n\n\t      this.visibleChilds++;\n\t    }\n\n\t    if (updateDom !== false) {\n\t      this.updateDom({'updateIndexes': true});\n\t      node.updateDom({'recurse': true});\n\t    }\n\t  }\n\t};\n\n\n\t/**\n\t * Move a node from its current parent to this node\n\t * Only applicable when Node value is of type array or object\n\t * @param {Node} node\n\t * @param {Node} beforeNode\n\t */\n\tNode.prototype.moveBefore = function(node, beforeNode) {\n\t  if (this._hasChilds()) {\n\t    // create a temporary row, to prevent the scroll position from jumping\n\t    // when removing the node\n\t    var tbody = (this.dom.tr) ? this.dom.tr.parentNode : undefined;\n\t    if (tbody) {\n\t      var trTemp = document.createElement('tr');\n\t      trTemp.style.height = tbody.clientHeight + 'px';\n\t      tbody.appendChild(trTemp);\n\t    }\n\n\t    if (node.parent) {\n\t      node.parent.removeChild(node);\n\t    }\n\n\t    if (beforeNode instanceof AppendNode || !beforeNode) {\n\t      // the this.childs.length + 1 is to reckon with the node that we're about to add\n\t      if (this.childs.length + 1 > this.visibleChilds) {\n\t        var lastVisibleNode = this.childs[this.visibleChilds - 1];\n\t        this.insertBefore(node, lastVisibleNode);\n\t      }\n\t      else {\n\t        this.appendChild(node);\n\t      }\n\t    }\n\t    else {\n\t      this.insertBefore(node, beforeNode);\n\t    }\n\n\t    if (tbody) {\n\t      tbody.removeChild(trTemp);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Insert a new child before a given node\n\t * Only applicable when Node value is of type array or object\n\t * @param {Node} node\n\t * @param {Node} beforeNode\n\t */\n\tNode.prototype.insertBefore = function(node, beforeNode) {\n\t  if (this._hasChilds()) {\n\t    this.visibleChilds++;\n\n\t    // initialize field value if needed\n\t    if (this.type === 'object' && node.field == undefined) {\n\t      node.setField('');\n\t    }\n\n\t    if (beforeNode === this.append) {\n\t      // append to the child nodes\n\n\t      // adjust the link to the parent\n\t      node.setParent(this);\n\t      node.fieldEditable = (this.type == 'object');\n\t      this.childs.push(node);\n\t    }\n\t    else {\n\t      // insert before a child node\n\t      var index = this.childs.indexOf(beforeNode);\n\t      if (index == -1) {\n\t        throw new Error('Node not found');\n\t      }\n\n\t      // adjust the link to the parent\n\t      node.setParent(this);\n\t      node.fieldEditable = (this.type == 'object');\n\t      this.childs.splice(index, 0, node);\n\t    }\n\n\t    if (this.expanded) {\n\t      // insert into the DOM\n\t      var newTr = node.getDom();\n\t      var nextTr = beforeNode.getDom();\n\t      var table = nextTr ? nextTr.parentNode : undefined;\n\t      if (nextTr && table) {\n\t        table.insertBefore(newTr, nextTr);\n\t      }\n\n\t      node.showChilds();\n\t      this.showChilds();\n\t    }\n\n\t    this.updateDom({'updateIndexes': true});\n\t    node.updateDom({'recurse': true});\n\t  }\n\t};\n\n\t/**\n\t * Insert a new child before a given node\n\t * Only applicable when Node value is of type array or object\n\t * @param {Node} node\n\t * @param {Node} afterNode\n\t */\n\tNode.prototype.insertAfter = function(node, afterNode) {\n\t  if (this._hasChilds()) {\n\t    var index = this.childs.indexOf(afterNode);\n\t    var beforeNode = this.childs[index + 1];\n\t    if (beforeNode) {\n\t      this.insertBefore(node, beforeNode);\n\t    }\n\t    else {\n\t      this.appendChild(node);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Search in this node\n\t * Searches are case insensitive.\n\t * @param {String} text\n\t * @param {Node[]} [results] Array where search results will be added\n\t *                           used to count and limit the results whilst iterating\n\t * @return {Node[]} results  Array with nodes containing the search text\n\t */\n\tNode.prototype.search = function(text, results) {\n\t  if (!Array.isArray(results)) {\n\t    results = [];\n\t  }\n\t  var index;\n\t  var search = text ? text.toLowerCase() : undefined;\n\n\t  // delete old search data\n\t  delete this.searchField;\n\t  delete this.searchValue;\n\n\t  // search in field\n\t  if (this.field !== undefined && results.length <= this.MAX_SEARCH_RESULTS) {\n\t    var field = String(this.field).toLowerCase();\n\t    index = field.indexOf(search);\n\t    if (index !== -1) {\n\t      this.searchField = true;\n\t      results.push({\n\t        'node': this,\n\t        'elem': 'field'\n\t      });\n\t    }\n\n\t    // update dom\n\t    this._updateDomField();\n\t  }\n\n\t  // search in value\n\t  if (this._hasChilds()) {\n\t    // array, object\n\n\t    // search the nodes childs\n\t    if (this.childs) {\n\t      this.childs.forEach(function (child) {\n\t        child.search(text, results);\n\t      });\n\t    }\n\t  }\n\t  else {\n\t    // string, auto\n\t    if (this.value !== undefined  && results.length <= this.MAX_SEARCH_RESULTS) {\n\t      var value = String(this.value).toLowerCase();\n\t      index = value.indexOf(search);\n\t      if (index !== -1) {\n\t        this.searchValue = true;\n\t        results.push({\n\t          'node': this,\n\t          'elem': 'value'\n\t        });\n\t      }\n\n\t      // update dom\n\t      this._updateDomValue();\n\t    }\n\t  }\n\n\t  return results;\n\t};\n\n\t/**\n\t * Move the scroll position such that this node is in the visible area.\n\t * The node will not get the focus\n\t * @param {function(boolean)} [callback]\n\t */\n\tNode.prototype.scrollTo = function(callback) {\n\t  this.expandPathToNode();\n\n\t  if (this.dom.tr && this.dom.tr.parentNode) {\n\t    this.editor.scrollTo(this.dom.tr.offsetTop, callback);\n\t  }\n\t};\n\n\t/**\n\t * if the node is not visible, expand its parents\n\t */\n\tNode.prototype.expandPathToNode = function () {\n\t  var node = this;\n\t  var recurse = false;\n\t  while (node && node.parent) {\n\t    // expand visible childs of the parent if needed\n\t    var index = node.parent.type === 'array'\n\t        ? node.index\n\t        : node.parent.childs.indexOf(node);\n\t    while (node.parent.visibleChilds < index + 1) {\n\t      node.parent.visibleChilds += Node.prototype.MAX_VISIBLE_CHILDS;\n\t    }\n\n\t    // expand the parent itself\n\t    node.parent.expand(recurse);\n\t    node = node.parent;\n\t  }\n\t};\n\n\n\t// stores the element name currently having the focus\n\tNode.focusElement = undefined;\n\n\t/**\n\t * Set focus to this node\n\t * @param {String} [elementName]  The field name of the element to get the\n\t *                                focus available values: 'drag', 'menu',\n\t *                                'expand', 'field', 'value' (default)\n\t */\n\tNode.prototype.focus = function(elementName) {\n\t  Node.focusElement = elementName;\n\n\t  if (this.dom.tr && this.dom.tr.parentNode) {\n\t    var dom = this.dom;\n\n\t    switch (elementName) {\n\t      case 'drag':\n\t        if (dom.drag) {\n\t          dom.drag.focus();\n\t        }\n\t        else {\n\t          dom.menu.focus();\n\t        }\n\t        break;\n\n\t      case 'menu':\n\t        dom.menu.focus();\n\t        break;\n\n\t      case 'expand':\n\t        if (this._hasChilds()) {\n\t          dom.expand.focus();\n\t        }\n\t        else if (dom.field && this.fieldEditable) {\n\t          dom.field.focus();\n\t          util.selectContentEditable(dom.field);\n\t        }\n\t        else if (dom.value && !this._hasChilds()) {\n\t          dom.value.focus();\n\t          util.selectContentEditable(dom.value);\n\t        }\n\t        else {\n\t          dom.menu.focus();\n\t        }\n\t        break;\n\n\t      case 'field':\n\t        if (dom.field && this.fieldEditable) {\n\t          dom.field.focus();\n\t          util.selectContentEditable(dom.field);\n\t        }\n\t        else if (dom.value && !this._hasChilds()) {\n\t          dom.value.focus();\n\t          util.selectContentEditable(dom.value);\n\t        }\n\t        else if (this._hasChilds()) {\n\t          dom.expand.focus();\n\t        }\n\t        else {\n\t          dom.menu.focus();\n\t        }\n\t        break;\n\n\t      case 'value':\n\t      default:\n\t        if (dom.select) {\n\t          // enum select box\n\t          dom.select.focus();\n\t        }\n\t        else if (dom.value && !this._hasChilds()) {\n\t          dom.value.focus();\n\t          util.selectContentEditable(dom.value);\n\t        }\n\t        else if (dom.field && this.fieldEditable) {\n\t          dom.field.focus();\n\t          util.selectContentEditable(dom.field);\n\t        }\n\t        else if (this._hasChilds()) {\n\t          dom.expand.focus();\n\t        }\n\t        else {\n\t          dom.menu.focus();\n\t        }\n\t        break;\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Select all text in an editable div after a delay of 0 ms\n\t * @param {Element} editableDiv\n\t */\n\tNode.select = function(editableDiv) {\n\t  setTimeout(function () {\n\t    util.selectContentEditable(editableDiv);\n\t  }, 0);\n\t};\n\n\t/**\n\t * Update the values from the DOM field and value of this node\n\t */\n\tNode.prototype.blur = function() {\n\t  // retrieve the actual field and value from the DOM.\n\t  this._getDomValue(false);\n\t  this._getDomField(false);\n\t};\n\n\t/**\n\t * Check if given node is a child. The method will check recursively to find\n\t * this node.\n\t * @param {Node} node\n\t * @return {boolean} containsNode\n\t */\n\tNode.prototype.containsNode = function(node) {\n\t  if (this == node) {\n\t    return true;\n\t  }\n\n\t  var childs = this.childs;\n\t  if (childs) {\n\t    // TODO: use the js5 Array.some() here?\n\t    for (var i = 0, iMax = childs.length; i < iMax; i++) {\n\t      if (childs[i].containsNode(node)) {\n\t        return true;\n\t      }\n\t    }\n\t  }\n\n\t  return false;\n\t};\n\n\t/**\n\t * Remove a child from the node.\n\t * Only applicable when Node value is of type array or object\n\t * @param {Node} node   The child node to be removed;\n\t * @param {boolean} [updateDom]  If true (default), the DOM of the parent\n\t *                               node will be updated (like child count)\n\t * @return {Node | undefined} node  The removed node on success,\n\t *                                             else undefined\n\t */\n\tNode.prototype.removeChild = function(node, updateDom) {\n\t  if (this.childs) {\n\t    var index = this.childs.indexOf(node);\n\n\t    if (index !== -1) {\n\t      if (index < this.visibleChilds && this.expanded) {\n\t        this.visibleChilds--;\n\t      }\n\n\t      node.hide();\n\n\t      // delete old search results\n\t      delete node.searchField;\n\t      delete node.searchValue;\n\n\t      var removedNode = this.childs.splice(index, 1)[0];\n\t      removedNode.parent = null;\n\n\t      if (updateDom !== false) {\n\t        this.updateDom({'updateIndexes': true});\n\t      }\n\n\t      return removedNode;\n\t    }\n\t  }\n\n\t  return undefined;\n\t};\n\n\t/**\n\t * Remove a child node node from this node\n\t * This method is equal to Node.removeChild, except that _remove fire an\n\t * onChange event.\n\t * @param {Node} node\n\t * @private\n\t */\n\tNode.prototype._remove = function (node) {\n\t  this.removeChild(node);\n\t};\n\n\t/**\n\t * Change the type of the value of this Node\n\t * @param {String} newType\n\t */\n\tNode.prototype.changeType = function (newType) {\n\t  var oldType = this.type;\n\n\t  if (oldType == newType) {\n\t    // type is not changed\n\t    return;\n\t  }\n\n\t  if ((newType == 'string' || newType == 'auto') &&\n\t      (oldType == 'string' || oldType == 'auto')) {\n\t    // this is an easy change\n\t    this.type = newType;\n\t  }\n\t  else {\n\t    // change from array to object, or from string/auto to object/array\n\t    var domAnchor = this._detachFromDom();\n\n\t    // delete the old DOM\n\t    this.clearDom();\n\n\t    // adjust the field and the value\n\t    this.type = newType;\n\n\t    // adjust childs\n\t    if (newType == 'object') {\n\t      if (!this.childs) {\n\t        this.childs = [];\n\t      }\n\n\t      this.childs.forEach(function (child, index) {\n\t        child.clearDom();\n\t        delete child.index;\n\t        child.fieldEditable = true;\n\t        if (child.field == undefined) {\n\t          child.field = '';\n\t        }\n\t      });\n\n\t      if (oldType == 'string' || oldType == 'auto') {\n\t        this.expanded = true;\n\t      }\n\t    }\n\t    else if (newType == 'array') {\n\t      if (!this.childs) {\n\t        this.childs = [];\n\t      }\n\n\t      this.childs.forEach(function (child, index) {\n\t        child.clearDom();\n\t        child.fieldEditable = false;\n\t        child.index = index;\n\t      });\n\n\t      if (oldType == 'string' || oldType == 'auto') {\n\t        this.expanded = true;\n\t      }\n\t    }\n\t    else {\n\t      this.expanded = false;\n\t    }\n\n\t    this._attachToDom(domAnchor);\n\t  }\n\n\t  if (newType == 'auto' || newType == 'string') {\n\t    // cast value to the correct type\n\t    if (newType == 'string') {\n\t      this.value = String(this.value);\n\t    }\n\t    else {\n\t      this.value = this._stringCast(String(this.value));\n\t    }\n\n\t    this.focus();\n\t  }\n\n\t  this.updateDom({'updateIndexes': true});\n\t};\n\n\t/**\n\t * Test whether the JSON contents of this node are deep equal to provided JSON object.\n\t * @param {*} json\n\t */\n\tNode.prototype.deepEqual = function (json) {\n\t  var i;\n\n\t  if (this.type === 'array') {\n\t    if (!Array.isArray(json)) {\n\t      return false;\n\t    }\n\n\t    if (this.childs.length !== json.length) {\n\t      return false;\n\t    }\n\n\t    for (i = 0; i < this.childs.length; i++) {\n\t      if (!this.childs[i].deepEqual(json[i])) {\n\t        return false;\n\t      }\n\t    }\n\t  }\n\t  else if (this.type === 'object') {\n\t    if (typeof json !== 'object') {\n\t      return false;\n\t    }\n\n\t    // TODO: for better efficiency, we could create a property `isDuplicate` on all of the childs\n\t    // and keep that up to date. This should make deepEqual about 20% faster.\n\t    var props = {};\n\t    var propCount = 0;\n\t    for (i = 0; i < this.childs.length; i++) {\n\t      var child = this.childs[i];\n\t      if (!props[child.field]) {\n\t        // We can have childs with duplicate field names.\n\t        // We take the first, and ignore the others.\n\t        props[child.field] = true;\n\t        propCount++;\n\n\t        if (!(child.field in json)) {\n\t          return false;\n\t        }\n\n\t        if (!child.deepEqual(json[child.field])) {\n\t          return false;\n\t        }\n\t      }\n\t    }\n\n\t    if (propCount !== Object.keys(json).length) {\n\t      return false;\n\t    }\n\t  }\n\t  else {\n\t    if (this.value !== json) {\n\t      return false;\n\t    }\n\t  }\n\n\t  return true;\n\t};\n\n\t/**\n\t * Retrieve value from DOM\n\t * @param {boolean} [silent]  If true (default), no errors will be thrown in\n\t *                            case of invalid data\n\t * @private\n\t */\n\tNode.prototype._getDomValue = function(silent) {\n\t  if (this.dom.value && this.type != 'array' && this.type != 'object') {\n\t    this.valueInnerText = util.getInnerText(this.dom.value);\n\t  }\n\n\t  if (this.valueInnerText != undefined) {\n\t    try {\n\t      // retrieve the value\n\t      var value;\n\t      if (this.type == 'string') {\n\t        value = this._unescapeHTML(this.valueInnerText);\n\t      }\n\t      else {\n\t        var str = this._unescapeHTML(this.valueInnerText);\n\t        value = this._stringCast(str);\n\t      }\n\t      if (value !== this.value) {\n\t        this.value = value;\n\t        this._debouncedOnChangeValue();\n\t      }\n\t    }\n\t    catch (err) {\n\t      this.value = undefined;\n\t      // TODO: sent an action with the new, invalid value?\n\t      if (silent !== true) {\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Handle a changed value\n\t * @private\n\t */\n\tNode.prototype._onChangeValue = function () {\n\t  // get current selection, then override the range such that we can select\n\t  // the added/removed text on undo/redo\n\t  var oldSelection = this.editor.getDomSelection();\n\t  if (oldSelection.range) {\n\t    var undoDiff = util.textDiff(String(this.value), String(this.previousValue));\n\t    oldSelection.range.startOffset = undoDiff.start;\n\t    oldSelection.range.endOffset = undoDiff.end;\n\t  }\n\t  var newSelection = this.editor.getDomSelection();\n\t  if (newSelection.range) {\n\t    var redoDiff = util.textDiff(String(this.previousValue), String(this.value));\n\t    newSelection.range.startOffset = redoDiff.start;\n\t    newSelection.range.endOffset = redoDiff.end;\n\t  }\n\n\t  this.editor._onAction('editValue', {\n\t    path: this.getInternalPath(),\n\t    oldValue: this.previousValue,\n\t    newValue: this.value,\n\t    oldSelection: oldSelection,\n\t    newSelection: newSelection\n\t  });\n\n\t  this.previousValue = this.value;\n\t};\n\n\t/**\n\t * Handle a changed field\n\t * @private\n\t */\n\tNode.prototype._onChangeField = function () {\n\t  // get current selection, then override the range such that we can select\n\t  // the added/removed text on undo/redo\n\t  var oldSelection = this.editor.getDomSelection();\n\t  var previous = this.previousField || '';\n\t  if (oldSelection.range) {\n\t    var undoDiff = util.textDiff(this.field, previous);\n\t    oldSelection.range.startOffset = undoDiff.start;\n\t    oldSelection.range.endOffset = undoDiff.end;\n\t  }\n\t  var newSelection = this.editor.getDomSelection();\n\t  if (newSelection.range) {\n\t    var redoDiff = util.textDiff(previous, this.field);\n\t    newSelection.range.startOffset = redoDiff.start;\n\t    newSelection.range.endOffset = redoDiff.end;\n\t  }\n\n\t  this.editor._onAction('editField', {\n\t    parentPath: this.parent.getInternalPath(),\n\t    index: this.getIndex(),\n\t    oldValue: this.previousField,\n\t    newValue: this.field,\n\t    oldSelection: oldSelection,\n\t    newSelection: newSelection\n\t  });\n\n\t  this.previousField = this.field;\n\t};\n\n\t/**\n\t * Update dom value:\n\t * - the text color of the value, depending on the type of the value\n\t * - the height of the field, depending on the width\n\t * - background color in case it is empty\n\t * @private\n\t */\n\tNode.prototype._updateDomValue = function () {\n\t  var domValue = this.dom.value;\n\t  if (domValue) {\n\t    var classNames = ['jsoneditor-value'];\n\n\t    // set text color depending on value type\n\t    var value = this.value;\n\t    var type = (this.type == 'auto') ? util.type(value) : this.type;\n\t    var isUrl = type == 'string' && util.isUrl(value);\n\t    classNames.push('jsoneditor-' + type);\n\t    if (isUrl) {\n\t      classNames.push('jsoneditor-url');\n\t    }\n\n\t    // visual styling when empty\n\t    var isEmpty = (String(this.value) == '' && this.type != 'array' && this.type != 'object');\n\t    if (isEmpty) {\n\t      classNames.push('jsoneditor-empty');\n\t    }\n\n\t    // highlight when there is a search result\n\t    if (this.searchValueActive) {\n\t      classNames.push('jsoneditor-highlight-active');\n\t    }\n\t    if (this.searchValue) {\n\t      classNames.push('jsoneditor-highlight');\n\t    }\n\n\t    domValue.className = classNames.join(' ');\n\n\t    // update title\n\t    if (type == 'array' || type == 'object') {\n\t      var count = this.childs ? this.childs.length : 0;\n\t      domValue.title = this.type + ' containing ' + count + ' items';\n\t    }\n\t    else if (isUrl && this.editable.value) {\n\t      domValue.title = translate('openUrl');\n\t    }\n\t    else {\n\t      domValue.title = '';\n\t    }\n\n\t    // show checkbox when the value is a boolean\n\t    if (type === 'boolean' && this.editable.value) {\n\t      if (!this.dom.checkbox) {\n\t        this.dom.checkbox = document.createElement('input');\n\t        this.dom.checkbox.type = 'checkbox';\n\t        this.dom.tdCheckbox = document.createElement('td');\n\t        this.dom.tdCheckbox.className = 'jsoneditor-tree';\n\t        this.dom.tdCheckbox.appendChild(this.dom.checkbox);\n\n\t        this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox, this.dom.tdValue);\n\t      }\n\n\t      this.dom.checkbox.checked = this.value;\n\t    }\n\t    else {\n\t      // cleanup checkbox when displayed\n\t      if (this.dom.tdCheckbox) {\n\t        this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox);\n\t        delete this.dom.tdCheckbox;\n\t        delete this.dom.checkbox;\n\t      }\n\t    }\n\n\t    // create select box when this node has an enum object\n\t    if (this.enum && this.editable.value) {\n\t      if (!this.dom.select) {\n\t        this.dom.select = document.createElement('select');\n\t        this.id = this.field + \"_\" + new Date().getUTCMilliseconds();\n\t        this.dom.select.id = this.id;\n\t        this.dom.select.name = this.dom.select.id;\n\n\t        //Create the default empty option\n\t        this.dom.select.option = document.createElement('option');\n\t        this.dom.select.option.value = '';\n\t        this.dom.select.option.innerHTML = '--';\n\t        this.dom.select.appendChild(this.dom.select.option);\n\n\t        //Iterate all enum values and add them as options\n\t        for(var i = 0; i < this.enum.length; i++) {\n\t          this.dom.select.option = document.createElement('option');\n\t          this.dom.select.option.value = this.enum[i];\n\t          this.dom.select.option.innerHTML = this.enum[i];\n\t          if(this.dom.select.option.value == this.value){\n\t            this.dom.select.option.selected = true;\n\t          }\n\t          this.dom.select.appendChild(this.dom.select.option);\n\t        }\n\n\t        this.dom.tdSelect = document.createElement('td');\n\t        this.dom.tdSelect.className = 'jsoneditor-tree';\n\t        this.dom.tdSelect.appendChild(this.dom.select);\n\t        this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect, this.dom.tdValue);\n\t      }\n\n\t      // If the enum is inside a composite type display\n\t      // both the simple input and the dropdown field\n\t      if(this.schema && (\n\t          !this.schema.hasOwnProperty(\"oneOf\") &&\n\t          !this.schema.hasOwnProperty(\"anyOf\") &&\n\t          !this.schema.hasOwnProperty(\"allOf\"))\n\t      ) {\n\t        this.valueFieldHTML = this.dom.tdValue.innerHTML;\n\t        this.dom.tdValue.style.visibility = 'hidden';\n\t        this.dom.tdValue.innerHTML = '';\n\t      } else {\n\t        delete this.valueFieldHTML;\n\t      }\n\t    }\n\t    else {\n\t      // cleanup select box when displayed\n\t      if (this.dom.tdSelect) {\n\t        this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect);\n\t        delete this.dom.tdSelect;\n\t        delete this.dom.select;\n\t        this.dom.tdValue.innerHTML = this.valueFieldHTML;\n\t        this.dom.tdValue.style.visibility = '';\n\t        delete this.valueFieldHTML;\n\t      }\n\t    }\n\n\t    // show color picker when value is a color\n\t    if (this.editable.value &&\n\t        this.editor.options.colorPicker &&\n\t        typeof value === 'string' &&\n\t        util.isValidColor(value)) {\n\n\t      if (!this.dom.color) {\n\t        this.dom.color = document.createElement('div');\n\t        this.dom.color.className = 'jsoneditor-color';\n\n\t        this.dom.tdColor = document.createElement('td');\n\t        this.dom.tdColor.className = 'jsoneditor-tree';\n\t        this.dom.tdColor.appendChild(this.dom.color);\n\n\t        this.dom.tdValue.parentNode.insertBefore(this.dom.tdColor, this.dom.tdValue);\n\n\t        // this is a bit hacky, overriding the text color like this. find a nicer solution\n\t        this.dom.value.style.color = '#1A1A1A';\n\t      }\n\n\t      // update the color background\n\t      this.dom.color.style.backgroundColor = value;\n\t    }\n\t    else {\n\t      // cleanup color picker when displayed\n\t      this._deleteDomColor();\n\t    }\n\n\t    // show date tag when value is a timestamp in milliseconds\n\t    if (this.editor.options.timestampTag &&\n\t        typeof value === 'number' &&\n\t        value > YEAR_2000 &&\n\t        !isNaN(new Date(value).valueOf())) {\n\n\t      if (!this.dom.date) {\n\t        this.dom.date = document.createElement('div');\n\t        this.dom.date.className = 'jsoneditor-date'\n\t        this.dom.value.parentNode.appendChild(this.dom.date);\n\t      }\n\n\t      this.dom.date.innerHTML = new Date(value).toISOString();\n\t      this.dom.date.title = new Date(value).toString();\n\t    }\n\t    else {\n\t      // cleanup date tag\n\t      if (this.dom.date) {\n\t        this.dom.date.parentNode.removeChild(this.dom.date);\n\t        delete this.dom.date;\n\t      }\n\t    }\n\n\t    // strip formatting from the contents of the editable div\n\t    util.stripFormatting(domValue);\n\t  }\n\t};\n\n\tNode.prototype._deleteDomColor = function () {\n\t  if (this.dom.color) {\n\t    this.dom.tdColor.parentNode.removeChild(this.dom.tdColor);\n\t    delete this.dom.tdColor;\n\t    delete this.dom.color;\n\n\t    this.dom.value.style.color = '';\n\t  }\n\t}\n\n\t/**\n\t * Update dom field:\n\t * - the text color of the field, depending on the text\n\t * - the height of the field, depending on the width\n\t * - background color in case it is empty\n\t * @private\n\t */\n\tNode.prototype._updateDomField = function () {\n\t  var domField = this.dom.field;\n\t  if (domField) {\n\t    // make backgound color lightgray when empty\n\t    var isEmpty = (String(this.field) == '' && this.parent.type != 'array');\n\t    if (isEmpty) {\n\t      util.addClassName(domField, 'jsoneditor-empty');\n\t    }\n\t    else {\n\t      util.removeClassName(domField, 'jsoneditor-empty');\n\t    }\n\n\t    // highlight when there is a search result\n\t    if (this.searchFieldActive) {\n\t      util.addClassName(domField, 'jsoneditor-highlight-active');\n\t    }\n\t    else {\n\t      util.removeClassName(domField, 'jsoneditor-highlight-active');\n\t    }\n\t    if (this.searchField) {\n\t      util.addClassName(domField, 'jsoneditor-highlight');\n\t    }\n\t    else {\n\t      util.removeClassName(domField, 'jsoneditor-highlight');\n\t    }\n\n\t    // strip formatting from the contents of the editable div\n\t    util.stripFormatting(domField);\n\t  }\n\t};\n\n\t/**\n\t * Retrieve field from DOM\n\t * @param {boolean} [silent]  If true (default), no errors will be thrown in\n\t *                            case of invalid data\n\t * @private\n\t */\n\tNode.prototype._getDomField = function(silent) {\n\t  if (this.dom.field && this.fieldEditable) {\n\t    this.fieldInnerText = util.getInnerText(this.dom.field);\n\t  }\n\n\t  if (this.fieldInnerText != undefined) {\n\t    try {\n\t      var field = this._unescapeHTML(this.fieldInnerText);\n\n\t      if (field !== this.field) {\n\t        this.field = field;\n\t        this._debouncedOnChangeField();\n\t      }\n\t    }\n\t    catch (err) {\n\t      this.field = undefined;\n\t      // TODO: sent an action here, with the new, invalid value?\n\t      if (silent !== true) {\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Validate this node and all it's childs\n\t * @return {Array.<{node: Node, error: {message: string}}>} Returns a list with duplicates\n\t */\n\tNode.prototype.validate = function () {\n\t  var errors = [];\n\n\t  // find duplicate keys\n\t  if (this.type === 'object') {\n\t    var keys = {};\n\t    var duplicateKeys = [];\n\t    for (var i = 0; i < this.childs.length; i++) {\n\t      var child = this.childs[i];\n\t      if (keys.hasOwnProperty(child.field)) {\n\t        duplicateKeys.push(child.field);\n\t      }\n\t      keys[child.field] = true;\n\t    }\n\n\t    if (duplicateKeys.length > 0) {\n\t      errors = this.childs\n\t          .filter(function (node) {\n\t            return duplicateKeys.indexOf(node.field) !== -1;\n\t          })\n\t          .map(function (node) {\n\t            return {\n\t              node: node,\n\t              error: {\n\t                message: translate('duplicateKey') + ' \"' + node.field + '\"'\n\t              }\n\t            }\n\t          });\n\t    }\n\t  }\n\n\t  // recurse over the childs\n\t  if (this.childs) {\n\t    for (var i = 0; i < this.childs.length; i++) {\n\t      var e = this.childs[i].validate();\n\t      if (e.length > 0) {\n\t        errors = errors.concat(e);\n\t      }\n\t    }\n\t  }\n\n\t  return errors;\n\t};\n\n\t/**\n\t * Clear the dom of the node\n\t */\n\tNode.prototype.clearDom = function() {\n\t  // TODO: hide the node first?\n\t  //this.hide();\n\t  // TODO: recursively clear dom?\n\n\t  this.dom = {};\n\t};\n\n\t/**\n\t * Get the HTML DOM TR element of the node.\n\t * The dom will be generated when not yet created\n\t * @return {Element} tr    HTML DOM TR Element\n\t */\n\tNode.prototype.getDom = function() {\n\t  var dom = this.dom;\n\t  if (dom.tr) {\n\t    return dom.tr;\n\t  }\n\n\t  this._updateEditability();\n\n\t  // create row\n\t  dom.tr = document.createElement('tr');\n\t  dom.tr.node = this;\n\n\t  if (this.editor.options.mode === 'tree') { // note: we take here the global setting\n\t    var tdDrag = document.createElement('td');\n\t    if (this.editable.field) {\n\t      // create draggable area\n\t      if (this.parent) {\n\t        var domDrag = document.createElement('button');\n\t        domDrag.type = 'button';\n\t        dom.drag = domDrag;\n\t        domDrag.className = 'jsoneditor-button jsoneditor-dragarea';\n\t        domDrag.title = translate('drag');\n\t        tdDrag.appendChild(domDrag);\n\t      }\n\t    }\n\t    dom.tr.appendChild(tdDrag);\n\n\t    // create context menu\n\t    var tdMenu = document.createElement('td');\n\t    var menu = document.createElement('button');\n\t    menu.type = 'button';\n\t    dom.menu = menu;\n\t    menu.className = 'jsoneditor-button jsoneditor-contextmenu';\n\t    menu.title = translate('actionsMenu');\n\t    tdMenu.appendChild(dom.menu);\n\t    dom.tr.appendChild(tdMenu);\n\t  }\n\n\t  // create tree and field\n\t  var tdField = document.createElement('td');\n\t  dom.tr.appendChild(tdField);\n\t  dom.tree = this._createDomTree();\n\t  tdField.appendChild(dom.tree);\n\n\t  this.updateDom({'updateIndexes': true});\n\n\t  return dom.tr;\n\t};\n\n\t/**\n\t * Test whether a Node is rendered and visible\n\t * @returns {boolean}\n\t */\n\tNode.prototype.isVisible = function () {\n\t  return this.dom && this.dom.tr && this.dom.tr.parentNode || false\n\t};\n\n\t/**\n\t * DragStart event, fired on mousedown on the dragarea at the left side of a Node\n\t * @param {Node[] | Node} nodes\n\t * @param {Event} event\n\t */\n\tNode.onDragStart = function (nodes, event) {\n\t  if (!Array.isArray(nodes)) {\n\t    return Node.onDragStart([nodes], event);\n\t  }\n\t  if (nodes.length === 0) {\n\t    return;\n\t  }\n\n\t  var firstNode = nodes[0];\n\t  var lastNode = nodes[nodes.length - 1];\n\t  var parent = firstNode.parent;\n\t  var draggedNode = Node.getNodeFromTarget(event.target);\n\t  var editor = firstNode.editor;\n\n\t  // in case of multiple selected nodes, offsetY prevents the selection from\n\t  // jumping when you start dragging one of the lower down nodes in the selection\n\t  var offsetY = util.getAbsoluteTop(draggedNode.dom.tr) - util.getAbsoluteTop(firstNode.dom.tr);\n\n\t  if (!editor.mousemove) {\n\t    editor.mousemove = util.addEventListener(window, 'mousemove', function (event) {\n\t      Node.onDrag(nodes, event);\n\t    });\n\t  }\n\n\t  if (!editor.mouseup) {\n\t    editor.mouseup = util.addEventListener(window, 'mouseup',function (event ) {\n\t      Node.onDragEnd(nodes, event);\n\t    });\n\t  }\n\n\t  editor.highlighter.lock();\n\t  editor.drag = {\n\t    oldCursor: document.body.style.cursor,\n\t    oldSelection: editor.getDomSelection(),\n\t    oldPaths: nodes.map(getInternalPath),\n\t    oldParent: parent,\n\t    oldNextNode: parent.childs[lastNode.getIndex() + 1] || parent.append,\n\t    oldParentPathRedo: parent.getInternalPath(),\n\t    oldIndexRedo: firstNode.getIndex(),\n\t    mouseX: event.pageX,\n\t    offsetY: offsetY,\n\t    level: firstNode.getLevel()\n\t  };\n\t  document.body.style.cursor = 'move';\n\n\t  event.preventDefault();\n\t};\n\n\t/**\n\t * Drag event, fired when moving the mouse while dragging a Node\n\t * @param {Node[] | Node} nodes\n\t * @param {Event} event\n\t */\n\tNode.onDrag = function (nodes, event) {\n\t  if (!Array.isArray(nodes)) {\n\t    return Node.onDrag([nodes], event);\n\t  }\n\t  if (nodes.length === 0) {\n\t    return;\n\t  }\n\n\t  // TODO: this method has grown too large. Split it in a number of methods\n\t  var editor = nodes[0].editor;\n\t  var mouseY = event.pageY - editor.drag.offsetY;\n\t  var mouseX = event.pageX;\n\t  var trThis, trPrev, trNext, trFirst, trLast, trRoot;\n\t  var nodePrev, nodeNext;\n\t  var topThis, topPrev, topFirst, heightThis, bottomNext, heightNext;\n\t  var moved = false;\n\n\t  // TODO: add an ESC option, which resets to the original position\n\n\t  // move up/down\n\t  var firstNode = nodes[0];\n\t  trThis = firstNode.dom.tr;\n\t  topThis = util.getAbsoluteTop(trThis);\n\t  heightThis = trThis.offsetHeight;\n\t  if (mouseY < topThis) {\n\t    // move up\n\t    trPrev = trThis;\n\t    do {\n\t      trPrev = trPrev.previousSibling;\n\t      nodePrev = Node.getNodeFromTarget(trPrev);\n\t      topPrev = trPrev ? util.getAbsoluteTop(trPrev) : 0;\n\t    }\n\t    while (trPrev && mouseY < topPrev);\n\n\t    if (nodePrev && !nodePrev.parent) {\n\t      nodePrev = undefined;\n\t    }\n\n\t    if (!nodePrev) {\n\t      // move to the first node\n\t      trRoot = trThis.parentNode.firstChild;\n\t      trPrev = trRoot ? trRoot.nextSibling : undefined;\n\t      nodePrev = Node.getNodeFromTarget(trPrev);\n\t      if (nodePrev == firstNode) {\n\t        nodePrev = undefined;\n\t      }\n\t    }\n\n\t    if (nodePrev && nodePrev.isVisible()) {\n\t      // check if mouseY is really inside the found node\n\t      trPrev = nodePrev.dom.tr;\n\t      topPrev = trPrev ? util.getAbsoluteTop(trPrev) : 0;\n\t      if (mouseY > topPrev + heightThis) {\n\t        nodePrev = undefined;\n\t      }\n\t    }\n\n\t    if (nodePrev) {\n\t      nodes.forEach(function (node) {\n\t        nodePrev.parent.moveBefore(node, nodePrev);\n\t      });\n\t      moved = true;\n\t    }\n\t  }\n\t  else {\n\t    // move down\n\t    var lastNode = nodes[nodes.length - 1];\n\t    trLast = (lastNode.expanded && lastNode.append) ? lastNode.append.getDom() : lastNode.dom.tr;\n\t    trFirst = trLast ? trLast.nextSibling : undefined;\n\t    if (trFirst) {\n\t      topFirst = util.getAbsoluteTop(trFirst);\n\t      trNext = trFirst;\n\t      do {\n\t        nodeNext = Node.getNodeFromTarget(trNext);\n\t        if (trNext) {\n\t          bottomNext = trNext.nextSibling ?\n\t              util.getAbsoluteTop(trNext.nextSibling) : 0;\n\t          heightNext = trNext ? (bottomNext - topFirst) : 0;\n\n\t          if (nodeNext &&\n\t              nodeNext.parent.childs.length == nodes.length &&\n\t              nodeNext.parent.childs[nodes.length - 1] == lastNode) {\n\t            // We are about to remove the last child of this parent,\n\t            // which will make the parents appendNode visible.\n\t            topThis += 27;\n\t            // TODO: dangerous to suppose the height of the appendNode a constant of 27 px.\n\t          }\n\n\t          trNext = trNext.nextSibling;\n\t        }\n\t      }\n\t      while (trNext && mouseY > topThis + heightNext);\n\n\t      if (nodeNext && nodeNext.parent) {\n\t        // calculate the desired level\n\t        var diffX = (mouseX - editor.drag.mouseX);\n\t        var diffLevel = Math.round(diffX / 24 / 2);\n\t        var level = editor.drag.level + diffLevel; // desired level\n\t        var levelNext = nodeNext.getLevel();     // level to be\n\n\t        // find the best fitting level (move upwards over the append nodes)\n\t        trPrev = nodeNext.dom.tr && nodeNext.dom.tr.previousSibling;\n\t        while (levelNext < level && trPrev) {\n\t          nodePrev = Node.getNodeFromTarget(trPrev);\n\n\t          var isDraggedNode = nodes.some(function (node) {\n\t            return node === nodePrev || nodePrev.isDescendantOf(node);\n\t          });\n\n\t          if (isDraggedNode) {\n\t            // neglect the dragged nodes themselves and their childs\n\t          }\n\t          else if (nodePrev instanceof AppendNode) {\n\t            var childs = nodePrev.parent.childs;\n\t            if (childs.length != nodes.length || childs[nodes.length - 1] != lastNode) {\n\t              // non-visible append node of a list of childs\n\t              // consisting of not only this node (else the\n\t              // append node will change into a visible \"empty\"\n\t              // text when removing this node).\n\t              nodeNext = Node.getNodeFromTarget(trPrev);\n\t              levelNext = nodeNext.getLevel();\n\t            }\n\t            else {\n\t              break;\n\t            }\n\t          }\n\t          else {\n\t            break;\n\t          }\n\n\t          trPrev = trPrev.previousSibling;\n\t        }\n\n\t        if (nodeNext instanceof AppendNode && !nodeNext.isVisible() &&\n\t            nodeNext.parent.showMore.isVisible()) {\n\t          nodeNext = nodeNext._nextNode();\n\t        }\n\n\t        // move the node when its position is changed\n\t        if (nodeNext && nodeNext.dom.tr && trLast.nextSibling != nodeNext.dom.tr) {\n\t          nodes.forEach(function (node) {\n\t            nodeNext.parent.moveBefore(node, nodeNext);\n\t          });\n\t          moved = true;\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  if (moved) {\n\t    // update the dragging parameters when moved\n\t    editor.drag.mouseX = mouseX;\n\t    editor.drag.level = firstNode.getLevel();\n\t  }\n\n\t  // auto scroll when hovering around the top of the editor\n\t  editor.startAutoScroll(mouseY);\n\n\t  event.preventDefault();\n\t};\n\n\t/**\n\t * Drag event, fired on mouseup after having dragged a node\n\t * @param {Node[] | Node} nodes\n\t * @param {Event} event\n\t */\n\tNode.onDragEnd = function (nodes, event) {\n\t  if (!Array.isArray(nodes)) {\n\t    return Node.onDrag([nodes], event);\n\t  }\n\t  if (nodes.length === 0) {\n\t    return;\n\t  }\n\n\t  var firstNode = nodes[0];\n\t  var editor = firstNode.editor;\n\n\t  // set focus to the context menu button of the first node\n\t  if (nodes[0]) {\n\t    nodes[0].dom.menu.focus();\n\t  }\n\n\t  var oldParentPath = editor.drag.oldParent.getInternalPath();\n\t  var newParentPath = firstNode.parent.getInternalPath();\n\t  var sameParent = editor.drag.oldParent === firstNode.parent;\n\t  var oldIndex = editor.drag.oldNextNode.getIndex();\n\t  var newIndex = firstNode.getIndex();\n\t  var oldParentPathRedo = editor.drag.oldParentPathRedo;\n\n\t  var oldIndexRedo = editor.drag.oldIndexRedo;\n\t  var newIndexRedo = (sameParent && oldIndexRedo < newIndex)\n\t      ? (newIndex + nodes.length)\n\t      : newIndex;\n\n\t  if (!sameParent || oldIndexRedo !== newIndex) {\n\t    // only register this action if the node is actually moved to another place\n\t    editor._onAction('moveNodes', {\n\t      count: nodes.length,\n\t      fieldNames: nodes.map(getField),\n\n\t      oldParentPath: oldParentPath,\n\t      newParentPath: newParentPath,\n\t      oldIndex: oldIndex,\n\t      newIndex: newIndex,\n\n\t      oldIndexRedo: oldIndexRedo,\n\t      newIndexRedo: newIndexRedo,\n\t      oldParentPathRedo: oldParentPathRedo,\n\t      newParentPathRedo: null, // This is a hack, value will be filled in during undo\n\n\t      oldSelection: editor.drag.oldSelection,\n\t      newSelection: editor.getDomSelection()\n\t    });\n\t  }\n\n\t  document.body.style.cursor = editor.drag.oldCursor;\n\t  editor.highlighter.unlock();\n\t  nodes.forEach(function (node) {\n\t    node.updateDom();\n\n\t    if (event.target !== node.dom.drag && event.target !== node.dom.menu) {\n\t      editor.highlighter.unhighlight();\n\t    }\n\t  });\n\t  delete editor.drag;\n\n\t  if (editor.mousemove) {\n\t    util.removeEventListener(window, 'mousemove', editor.mousemove);\n\t    delete editor.mousemove;\n\t  }\n\t  if (editor.mouseup) {\n\t    util.removeEventListener(window, 'mouseup', editor.mouseup);\n\t    delete editor.mouseup;\n\t  }\n\n\t  // Stop any running auto scroll\n\t  editor.stopAutoScroll();\n\n\t  event.preventDefault();\n\t};\n\n\t/**\n\t * Test if this node is a sescendant of an other node\n\t * @param {Node} node\n\t * @return {boolean} isDescendant\n\t * @private\n\t */\n\tNode.prototype.isDescendantOf = function (node) {\n\t  var n = this.parent;\n\t  while (n) {\n\t    if (n == node) {\n\t      return true;\n\t    }\n\t    n = n.parent;\n\t  }\n\n\t  return false;\n\t};\n\n\t/**\n\t * Create an editable field\n\t * @return {Element} domField\n\t * @private\n\t */\n\tNode.prototype._createDomField = function () {\n\t  return document.createElement('div');\n\t};\n\n\t/**\n\t * Set highlighting for this node and all its childs.\n\t * Only applied to the currently visible (expanded childs)\n\t * @param {boolean} highlight\n\t */\n\tNode.prototype.setHighlight = function (highlight) {\n\t  if (this.dom.tr) {\n\t    if (highlight) {\n\t      util.addClassName(this.dom.tr, 'jsoneditor-highlight');\n\t    }\n\t    else {\n\t      util.removeClassName(this.dom.tr, 'jsoneditor-highlight');\n\t    }\n\n\t    if (this.append) {\n\t      this.append.setHighlight(highlight);\n\t    }\n\n\t    if (this.childs) {\n\t      this.childs.forEach(function (child) {\n\t        child.setHighlight(highlight);\n\t      });\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Select or deselect a node\n\t * @param {boolean} selected\n\t * @param {boolean} [isFirst]\n\t */\n\tNode.prototype.setSelected = function (selected, isFirst) {\n\t  this.selected = selected;\n\n\t  if (this.dom.tr) {\n\t    if (selected) {\n\t      util.addClassName(this.dom.tr, 'jsoneditor-selected');\n\t    }\n\t    else {\n\t      util.removeClassName(this.dom.tr, 'jsoneditor-selected');\n\t    }\n\n\t    if (isFirst) {\n\t      util.addClassName(this.dom.tr, 'jsoneditor-first');\n\t    }\n\t    else {\n\t      util.removeClassName(this.dom.tr, 'jsoneditor-first');\n\t    }\n\n\t    if (this.append) {\n\t      this.append.setSelected(selected);\n\t    }\n\n\t    if (this.showMore) {\n\t      this.showMore.setSelected(selected);\n\t    }\n\n\t    if (this.childs) {\n\t      this.childs.forEach(function (child) {\n\t        child.setSelected(selected);\n\t      });\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Update the value of the node. Only primitive types are allowed, no Object\n\t * or Array is allowed.\n\t * @param {String | Number | Boolean | null} value\n\t */\n\tNode.prototype.updateValue = function (value) {\n\t  this.value = value;\n\t  this.previousValue = value;\n\t  this.updateDom();\n\t};\n\n\t/**\n\t * Update the field of the node.\n\t * @param {String} field\n\t */\n\tNode.prototype.updateField = function (field) {\n\t  this.field = field;\n\t  this.previousField = field;\n\t  this.updateDom();\n\t};\n\n\t/**\n\t * Update the HTML DOM, optionally recursing through the childs\n\t * @param {Object} [options] Available parameters:\n\t *                          {boolean} [recurse]         If true, the\n\t *                          DOM of the childs will be updated recursively.\n\t *                          False by default.\n\t *                          {boolean} [updateIndexes]   If true, the childs\n\t *                          indexes of the node will be updated too. False by\n\t *                          default.\n\t */\n\tNode.prototype.updateDom = function (options) {\n\t  // update level indentation\n\t  var domTree = this.dom.tree;\n\t  if (domTree) {\n\t    domTree.style.marginLeft = this.getLevel() * 24 + 'px';\n\t  }\n\n\t  // apply field to DOM\n\t  var domField = this.dom.field;\n\t  if (domField) {\n\t    if (this.fieldEditable) {\n\t      // parent is an object\n\t      domField.contentEditable = this.editable.field;\n\t      domField.spellcheck = false;\n\t      domField.className = 'jsoneditor-field';\n\t    }\n\t    else {\n\t      // parent is an array this is the root node\n\t      domField.contentEditable = false;\n\t      domField.className = 'jsoneditor-readonly';\n\t    }\n\n\t    var fieldText;\n\t    if (this.index != undefined) {\n\t      fieldText = this.index;\n\t    }\n\t    else if (this.field != undefined) {\n\t      fieldText = this.field;\n\t    }\n\t    else if (this._hasChilds()) {\n\t      fieldText = this.type;\n\t    }\n\t    else {\n\t      fieldText = '';\n\t    }\n\t    domField.innerHTML = this._escapeHTML(fieldText);\n\n\t    this._updateSchema();\n\t  }\n\n\t  // apply value to DOM\n\t  var domValue = this.dom.value;\n\t  if (domValue) {\n\t    var count = this.childs ? this.childs.length : 0;\n\t    if (this.type == 'array') {\n\t      domValue.innerHTML = '[' + count + ']';\n\t      util.addClassName(this.dom.tr, 'jsoneditor-expandable');\n\t    }\n\t    else if (this.type == 'object') {\n\t      domValue.innerHTML = '{' + count + '}';\n\t      util.addClassName(this.dom.tr, 'jsoneditor-expandable');\n\t    }\n\t    else {\n\t      domValue.innerHTML = this._escapeHTML(this.value);\n\t      util.removeClassName(this.dom.tr, 'jsoneditor-expandable');\n\t    }\n\t  }\n\n\t  // update field and value\n\t  this._updateDomField();\n\t  this._updateDomValue();\n\n\t  // update childs indexes\n\t  if (options && options.updateIndexes === true) {\n\t    // updateIndexes is true or undefined\n\t    this._updateDomIndexes();\n\t  }\n\n\t  // update childs recursively\n\t  if (options && options.recurse === true) {\n\t    if (this.childs) {\n\t      this.childs.forEach(function (child) {\n\t        child.updateDom(options);\n\t      });\n\t    }\n\t  }\n\n\t  // update rendering of error\n\t  if (this.error) {\n\t    this.updateError()\n\t  }\n\n\t  // update row with append button\n\t  if (this.append) {\n\t    this.append.updateDom();\n\t  }\n\n\t  // update \"show more\" text at the bottom of large arrays\n\t  if (this.showMore) {\n\t    this.showMore.updateDom();\n\t  }\n\t};\n\n\t/**\n\t * Locate the JSON schema of the node and check for any enum type\n\t * @private\n\t */\n\tNode.prototype._updateSchema = function () {\n\t  //Locating the schema of the node and checking for any enum type\n\t  if(this.editor && this.editor.options) {\n\t    // find the part of the json schema matching this nodes path\n\t    this.schema = this.editor.options.schema \n\t        ? Node._findSchema(this.editor.options.schema, this.getPath())\n\t        : null;\n\t    if (this.schema) {\n\t      this.enum = Node._findEnum(this.schema);\n\t    }\n\t    else {\n\t      delete this.enum;\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * find an enum definition in a JSON schema, as property `enum` or inside\n\t * one of the schemas composites (`oneOf`, `anyOf`, `allOf`)\n\t * @param  {Object} schema\n\t * @return {Array | null} Returns the enum when found, null otherwise.\n\t * @private\n\t */\n\tNode._findEnum = function (schema) {\n\t  if (schema.enum) {\n\t    return schema.enum;\n\t  }\n\n\t  var composite = schema.oneOf || schema.anyOf || schema.allOf;\n\t  if (composite) {\n\t    var match = composite.filter(function (entry) {return entry.enum});\n\t    if (match.length > 0) {\n\t      return match[0].enum;\n\t    }\n\t  }\n\n\t  return null\n\t};\n\n\t/**\n\t * Return the part of a JSON schema matching given path.\n\t * @param {Object} schema\n\t * @param {Array.<string | number>} path\n\t * @return {Object | null}\n\t * @private\n\t */\n\tNode._findSchema = function (schema, path) {\n\t  var childSchema = schema;\n\t  var foundSchema = childSchema;\n\n\t  var allSchemas = schema.oneOf || schema.anyOf || schema.allOf;\n\t  if (!allSchemas) {\n\t    allSchemas = [schema];\n\t  }\n\n\t  for (var j = 0; j < allSchemas.length; j++) {\n\t    childSchema = allSchemas[j];\n\n\t    for (var i = 0; i < path.length && childSchema; i++) {\n\t      var key = path[i];\n\n\t      if (typeof key === 'string' && childSchema.patternProperties && i == path.length - 1) {\n\t        for (var prop in childSchema.patternProperties) {\n\t          foundSchema = Node._findSchema(childSchema.patternProperties[prop], path.slice(i, path.length));\n\t        }\n\t      }\n\t      else if (childSchema.items && childSchema.items.properties) {\n\t        childSchema = childSchema.items.properties[key];\n\t        if (childSchema) {\n\t          foundSchema = Node._findSchema(childSchema, path.slice(i, path.length));\n\t        }\n\t      }\n\t      else if (typeof key === 'string' && childSchema.properties) {\n\t        childSchema = childSchema.properties[key] || null;\n\t        if (childSchema) {\n\t          foundSchema = Node._findSchema(childSchema, path.slice(i, path.length));\n\t        }\n\t      }\n\t      else if (typeof key === 'number' && childSchema.items) {\n\t        childSchema = childSchema.items;\n\t        if (childSchema) {\n\t          foundSchema = Node._findSchema(childSchema, path.slice(i, path.length));\n\t        }\n\t      }\n\t    }\n\n\t  }\n\t  return foundSchema\n\t};\n\n\t/**\n\t * Update the DOM of the childs of a node: update indexes and undefined field\n\t * names.\n\t * Only applicable when structure is an array or object\n\t * @private\n\t */\n\tNode.prototype._updateDomIndexes = function () {\n\t  var domValue = this.dom.value;\n\t  var childs = this.childs;\n\t  if (domValue && childs) {\n\t    if (this.type == 'array') {\n\t      childs.forEach(function (child, index) {\n\t        child.index = index;\n\t        var childField = child.dom.field;\n\t        if (childField) {\n\t          childField.innerHTML = index;\n\t        }\n\t      });\n\t    }\n\t    else if (this.type == 'object') {\n\t      childs.forEach(function (child) {\n\t        if (child.index != undefined) {\n\t          delete child.index;\n\n\t          if (child.field == undefined) {\n\t            child.field = '';\n\t          }\n\t        }\n\t      });\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Create an editable value\n\t * @private\n\t */\n\tNode.prototype._createDomValue = function () {\n\t  var domValue;\n\n\t  if (this.type == 'array') {\n\t    domValue = document.createElement('div');\n\t    domValue.innerHTML = '[...]';\n\t  }\n\t  else if (this.type == 'object') {\n\t    domValue = document.createElement('div');\n\t    domValue.innerHTML = '{...}';\n\t  }\n\t  else {\n\t    if (!this.editable.value && util.isUrl(this.value)) {\n\t      // create a link in case of read-only editor and value containing an url\n\t      domValue = document.createElement('a');\n\t      domValue.href = this.value;\n\t      domValue.innerHTML = this._escapeHTML(this.value);\n\t    }\n\t    else {\n\t      // create an editable or read-only div\n\t      domValue = document.createElement('div');\n\t      domValue.contentEditable = this.editable.value;\n\t      domValue.spellcheck = false;\n\t      domValue.innerHTML = this._escapeHTML(this.value);\n\t    }\n\t  }\n\n\t  return domValue;\n\t};\n\n\t/**\n\t * Create an expand/collapse button\n\t * @return {Element} expand\n\t * @private\n\t */\n\tNode.prototype._createDomExpandButton = function () {\n\t  // create expand button\n\t  var expand = document.createElement('button');\n\t  expand.type = 'button';\n\t  if (this._hasChilds()) {\n\t    expand.className = this.expanded\n\t        ? 'jsoneditor-button jsoneditor-expanded'\n\t        : 'jsoneditor-button jsoneditor-collapsed';\n\t    expand.title = translate('expandTitle');\n\t  }\n\t  else {\n\t    expand.className = 'jsoneditor-button jsoneditor-invisible';\n\t    expand.title = '';\n\t  }\n\n\t  return expand;\n\t};\n\n\n\t/**\n\t * Create a DOM tree element, containing the expand/collapse button\n\t * @return {Element} domTree\n\t * @private\n\t */\n\tNode.prototype._createDomTree = function () {\n\t  var dom = this.dom;\n\t  var domTree = document.createElement('table');\n\t  var tbody = document.createElement('tbody');\n\t  domTree.style.borderCollapse = 'collapse'; // TODO: put in css\n\t  domTree.className = 'jsoneditor-values';\n\t  domTree.appendChild(tbody);\n\t  var tr = document.createElement('tr');\n\t  tbody.appendChild(tr);\n\n\t  // create expand button\n\t  var tdExpand = document.createElement('td');\n\t  tdExpand.className = 'jsoneditor-tree';\n\t  tr.appendChild(tdExpand);\n\t  dom.expand = this._createDomExpandButton();\n\t  tdExpand.appendChild(dom.expand);\n\t  dom.tdExpand = tdExpand;\n\n\t  // create the field\n\t  var tdField = document.createElement('td');\n\t  tdField.className = 'jsoneditor-tree';\n\t  tr.appendChild(tdField);\n\t  dom.field = this._createDomField();\n\t  tdField.appendChild(dom.field);\n\t  dom.tdField = tdField;\n\n\t  // create a separator\n\t  var tdSeparator = document.createElement('td');\n\t  tdSeparator.className = 'jsoneditor-tree';\n\t  tr.appendChild(tdSeparator);\n\t  if (this.type != 'object' && this.type != 'array') {\n\t    tdSeparator.appendChild(document.createTextNode(':'));\n\t    tdSeparator.className = 'jsoneditor-separator';\n\t  }\n\t  dom.tdSeparator = tdSeparator;\n\n\t  // create the value\n\t  var tdValue = document.createElement('td');\n\t  tdValue.className = 'jsoneditor-tree';\n\t  tr.appendChild(tdValue);\n\t  dom.value = this._createDomValue();\n\t  tdValue.appendChild(dom.value);\n\t  dom.tdValue = tdValue;\n\n\t  return domTree;\n\t};\n\n\t/**\n\t * Handle an event. The event is caught centrally by the editor\n\t * @param {Event} event\n\t */\n\tNode.prototype.onEvent = function (event) {\n\t  var type = event.type,\n\t      target = event.target || event.srcElement,\n\t      dom = this.dom,\n\t      node = this,\n\t      expandable = this._hasChilds();\n\n\n\t  if (typeof this.editor.options.onEvent === 'function') {\n\t    this._onEvent(event);\n\t  }\n\n\t  // check if mouse is on menu or on dragarea.\n\t  // If so, highlight current row and its childs\n\t  if (target == dom.drag || target == dom.menu) {\n\t    if (type == 'mouseover') {\n\t      this.editor.highlighter.highlight(this);\n\t    }\n\t    else if (type == 'mouseout') {\n\t      this.editor.highlighter.unhighlight();\n\t    }\n\t  }\n\n\t  // context menu events\n\t  if (type == 'click' && target == dom.menu) {\n\t    var highlighter = node.editor.highlighter;\n\t    highlighter.highlight(node);\n\t    highlighter.lock();\n\t    util.addClassName(dom.menu, 'jsoneditor-selected');\n\t    this.showContextMenu(dom.menu, function () {\n\t      util.removeClassName(dom.menu, 'jsoneditor-selected');\n\t      highlighter.unlock();\n\t      highlighter.unhighlight();\n\t    });\n\t  }\n\n\t  // expand events\n\t  if (type == 'click') {\n\t    if (target == dom.expand ||\n\t        ((node.editor.options.mode === 'view' || node.editor.options.mode === 'form') && target.nodeName === 'DIV')) {\n\t      if (expandable) {\n\t        var recurse = event.ctrlKey; // with ctrl-key, expand/collapse all\n\t        this._onExpand(recurse);\n\t      }\n\t    }\n\t  }\n\n\t  if (type === 'click' && (event.target === node.dom.tdColor || event.target === node.dom.color)) {\n\t    this._showColorPicker();\n\t  }\n\n\t  // swap the value of a boolean when the checkbox displayed left is clicked\n\t  if (type == 'change' && target == dom.checkbox) {\n\t    this.dom.value.innerHTML = !this.value;\n\t    this._getDomValue();\n\t  }\n\n\t  // update the value of the node based on the selected option\n\t  if (type == 'change' && target == dom.select) {\n\t    this.dom.value.innerHTML = dom.select.value;\n\t    this._getDomValue();\n\t    this._updateDomValue();\n\t  }\n\n\t  // value events\n\t  var domValue = dom.value;\n\t  if (target == domValue) {\n\t    //noinspection FallthroughInSwitchStatementJS\n\t    switch (type) {\n\t      case 'blur':\n\t      case 'change':\n\t        this._getDomValue(true);\n\t        this._updateDomValue();\n\t        if (this.value) {\n\t          domValue.innerHTML = this._escapeHTML(this.value);\n\t        }\n\t        break;\n\n\t      case 'input':\n\t        //this._debouncedGetDomValue(true); // TODO\n\t        this._getDomValue(true);\n\t        this._updateDomValue();\n\t        break;\n\n\t      case 'keydown':\n\t      case 'mousedown':\n\t          // TODO: cleanup\n\t        this.editor.selection = this.editor.getDomSelection();\n\t        break;\n\n\t      case 'click':\n\t        if (event.ctrlKey && this.editable.value) {\n\t          // if read-only, we use the regular click behavior of an anchor\n\t          if (util.isUrl(this.value)) {\n\t            event.preventDefault();\n\t            window.open(this.value, '_blank');\n\t          }\n\t        }\n\t        break;\n\n\t      case 'keyup':\n\t        //this._debouncedGetDomValue(true); // TODO\n\t        this._getDomValue(true);\n\t        this._updateDomValue();\n\t        break;\n\n\t      case 'cut':\n\t      case 'paste':\n\t        setTimeout(function () {\n\t          node._getDomValue(true);\n\t          node._updateDomValue();\n\t        }, 1);\n\t        break;\n\t    }\n\t  }\n\n\t  // field events\n\t  var domField = dom.field;\n\t  if (target == domField) {\n\t    switch (type) {\n\t      case 'blur':\n\t      case 'change':\n\t        this._getDomField(true);\n\t        this._updateDomField();\n\t        if (this.field) {\n\t          domField.innerHTML = this._escapeHTML(this.field);\n\t        }\n\t        break;\n\n\t      case 'input':\n\t        this._getDomField(true);\n\t        this._updateSchema();\n\t        this._updateDomField();\n\t        this._updateDomValue();\n\t        break;\n\n\t      case 'keydown':\n\t      case 'mousedown':\n\t        this.editor.selection = this.editor.getDomSelection();\n\t        break;\n\n\t      case 'keyup':\n\t        this._getDomField(true);\n\t        this._updateDomField();\n\t        break;\n\n\t      case 'cut':\n\t      case 'paste':\n\t        setTimeout(function () {\n\t          node._getDomField(true);\n\t          node._updateDomField();\n\t        }, 1);\n\t        break;\n\t    }\n\t  }\n\n\t  // focus\n\t  // when clicked in whitespace left or right from the field or value, set focus\n\t  var domTree = dom.tree;\n\t  if (domTree && target == domTree.parentNode && type == 'click' && !event.hasMoved) {\n\t    var left = (event.offsetX != undefined) ?\n\t        (event.offsetX < (this.getLevel() + 1) * 24) :\n\t        (event.pageX < util.getAbsoluteLeft(dom.tdSeparator));// for FF\n\t    if (left || expandable) {\n\t      // node is expandable when it is an object or array\n\t      if (domField) {\n\t        util.setEndOfContentEditable(domField);\n\t        domField.focus();\n\t      }\n\t    }\n\t    else {\n\t      if (domValue && !this.enum) {\n\t        util.setEndOfContentEditable(domValue);\n\t        domValue.focus();\n\t      }\n\t    }\n\t  }\n\t  if (((target == dom.tdExpand && !expandable) || target == dom.tdField || target == dom.tdSeparator) &&\n\t      (type == 'click' && !event.hasMoved)) {\n\t    if (domField) {\n\t      util.setEndOfContentEditable(domField);\n\t      domField.focus();\n\t    }\n\t  }\n\n\t  if (type == 'keydown') {\n\t    this.onKeyDown(event);\n\t  }\n\t};\n\n\t/**\n\t * Trigger external onEvent provided in options if node is a JSON field or\n\t * value.\n\t * Information provided depends on the element, value is only included if\n\t * event occurs in a JSON value:\n\t * {field: string, path: {string|number}[] [, value: string]}\n\t * @param {Event} event\n\t * @private\n\t */\n\tNode.prototype._onEvent = function (event) {\n\t  var element = event.target;\n\t  if (element === this.dom.field || element === this.dom.value) {\n\t    var info = {\n\t      field: this.getField(),\n\t      path: this.getPath()\n\t    };\n\t    // For leaf values, include value\n\t    if (!this._hasChilds() &&element === this.dom.value) {\n\t      info.value = this.getValue();  \n\t    }\n\t    this.editor.options.onEvent(info, event);\n\t  }\n\t};\n\n\t/**\n\t * Key down event handler\n\t * @param {Event} event\n\t */\n\tNode.prototype.onKeyDown = function (event) {\n\t  var keynum = event.which || event.keyCode;\n\t  var target = event.target || event.srcElement;\n\t  var ctrlKey = event.ctrlKey;\n\t  var shiftKey = event.shiftKey;\n\t  var altKey = event.altKey;\n\t  var handled = false;\n\t  var prevNode, nextNode, nextDom, nextDom2;\n\t  var editable = this.editor.options.mode === 'tree';\n\t  var oldSelection;\n\t  var oldNextNode;\n\t  var oldParent;\n\t  var oldIndexRedo;\n\t  var newIndexRedo;\n\t  var oldParentPathRedo;\n\t  var newParentPathRedo;\n\t  var nodes;\n\t  var multiselection;\n\t  var selectedNodes = this.editor.multiselection.nodes.length > 0\n\t      ? this.editor.multiselection.nodes\n\t      : [this];\n\t  var firstNode = selectedNodes[0];\n\t  var lastNode = selectedNodes[selectedNodes.length - 1];\n\n\t  // console.log(ctrlKey, keynum, event.charCode); // TODO: cleanup\n\t  if (keynum == 13) { // Enter\n\t    if (target == this.dom.value) {\n\t      if (!this.editable.value || event.ctrlKey) {\n\t        if (util.isUrl(this.value)) {\n\t          window.open(this.value, '_blank');\n\t          handled = true;\n\t        }\n\t      }\n\t    }\n\t    else if (target == this.dom.expand) {\n\t      var expandable = this._hasChilds();\n\t      if (expandable) {\n\t        var recurse = event.ctrlKey; // with ctrl-key, expand/collapse all\n\t        this._onExpand(recurse);\n\t        target.focus();\n\t        handled = true;\n\t      }\n\t    }\n\t  }\n\t  else if (keynum == 68) {  // D\n\t    if (ctrlKey && editable) {   // Ctrl+D\n\t      Node.onDuplicate(selectedNodes);\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 69) { // E\n\t    if (ctrlKey) {       // Ctrl+E and Ctrl+Shift+E\n\t      this._onExpand(shiftKey);  // recurse = shiftKey\n\t      target.focus(); // TODO: should restore focus in case of recursing expand (which takes DOM offline)\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 77 && editable) { // M\n\t    if (ctrlKey) { // Ctrl+M\n\t      this.showContextMenu(target);\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 46 && editable) { // Del\n\t    if (ctrlKey) {       // Ctrl+Del\n\t      Node.onRemove(selectedNodes);\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 45 && editable) { // Ins\n\t    if (ctrlKey && !shiftKey) {       // Ctrl+Ins\n\t      this._onInsertBefore();\n\t      handled = true;\n\t    }\n\t    else if (ctrlKey && shiftKey) {   // Ctrl+Shift+Ins\n\t      this._onInsertAfter();\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 35) { // End\n\t    if (altKey) { // Alt+End\n\t      // find the last node\n\t      var endNode = this._lastNode();\n\t      if (endNode) {\n\t        endNode.focus(Node.focusElement || this._getElementName(target));\n\t      }\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 36) { // Home\n\t    if (altKey) { // Alt+Home\n\t      // find the first node\n\t      var homeNode = this._firstNode();\n\t      if (homeNode) {\n\t        homeNode.focus(Node.focusElement || this._getElementName(target));\n\t      }\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 37) {        // Arrow Left\n\t    if (altKey && !shiftKey) {  // Alt + Arrow Left\n\t      // move to left element\n\t      var prevElement = this._previousElement(target);\n\t      if (prevElement) {\n\t        this.focus(this._getElementName(prevElement));\n\t      }\n\t      handled = true;\n\t    }\n\t    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow left\n\t      if (lastNode.expanded) {\n\t        var appendDom = lastNode.getAppendDom();\n\t        nextDom = appendDom ? appendDom.nextSibling : undefined;\n\t      }\n\t      else {\n\t        var dom = lastNode.getDom();\n\t        nextDom = dom.nextSibling;\n\t      }\n\t      if (nextDom) {\n\t        nextNode = Node.getNodeFromTarget(nextDom);\n\t        nextDom2 = nextDom.nextSibling;\n\t        nextNode2 = Node.getNodeFromTarget(nextDom2);\n\t        if (nextNode && nextNode instanceof AppendNode &&\n\t            !(lastNode.parent.childs.length == 1) &&\n\t            nextNode2 && nextNode2.parent) {\n\t          oldSelection = this.editor.getDomSelection();\n\t          oldParent = firstNode.parent;\n\t          oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n\t          oldIndexRedo = firstNode.getIndex();\n\t          newIndexRedo = nextNode2.getIndex();\n\t          oldParentPathRedo = oldParent.getInternalPath();\n\t          newParentPathRedo = nextNode2.parent.getInternalPath();\n\n\t          selectedNodes.forEach(function (node) {\n\t            nextNode2.parent.moveBefore(node, nextNode2);\n\t          });\n\t          this.focus(Node.focusElement || this._getElementName(target));\n\n\n\t          this.editor._onAction('moveNodes', {\n\t            count: selectedNodes.length,\n\t            fieldNames: selectedNodes.map(getField),\n\n\t            oldParentPath: oldParent.getInternalPath(),\n\t            newParentPath: firstNode.parent.getInternalPath(),\n\t            oldIndex: oldNextNode.getIndex(),\n\t            newIndex: firstNode.getIndex(),\n\n\t            oldIndexRedo: oldIndexRedo,\n\t            newIndexRedo: newIndexRedo,\n\t            oldParentPathRedo: oldParentPathRedo,\n\t            newParentPathRedo: newParentPathRedo,\n\n\t            oldSelection: oldSelection,\n\t            newSelection: this.editor.getDomSelection()\n\t          });\n\t        }\n\t      }\n\t    }\n\t  }\n\t  else if (keynum == 38) {        // Arrow Up\n\t    if (altKey && !shiftKey) {  // Alt + Arrow Up\n\t      // find the previous node\n\t      prevNode = this._previousNode();\n\t      if (prevNode) {\n\t        this.editor.deselect(true);\n\t        prevNode.focus(Node.focusElement || this._getElementName(target));\n\t      }\n\t      handled = true;\n\t    }\n\t    else if (!altKey && ctrlKey && shiftKey && editable) { // Ctrl + Shift + Arrow Up\n\t      // select multiple nodes\n\t      prevNode = this._previousNode();\n\t      if (prevNode) {\n\t        multiselection = this.editor.multiselection;\n\t        multiselection.start = multiselection.start || this;\n\t        multiselection.end = prevNode;\n\t        nodes = this.editor._findTopLevelNodes(multiselection.start, multiselection.end);\n\n\t        this.editor.select(nodes);\n\t        prevNode.focus('field'); // select field as we know this always exists\n\t      }\n\t      handled = true;\n\t    }\n\t    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Up\n\t      // find the previous node\n\t      prevNode = firstNode._previousNode();\n\t      if (prevNode && prevNode.parent) {\n\t        oldSelection = this.editor.getDomSelection();\n\t        oldParent = firstNode.parent;\n\t        oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n\t        oldIndexRedo = firstNode.getIndex();\n\t        newIndexRedo = prevNode.getIndex();\n\t        oldParentPathRedo = oldParent.getInternalPath();\n\t        newParentPathRedo = prevNode.parent.getInternalPath();\n\n\t        selectedNodes.forEach(function (node) {\n\t          prevNode.parent.moveBefore(node, prevNode);\n\t        });\n\t        this.focus(Node.focusElement || this._getElementName(target));\n\n\t        this.editor._onAction('moveNodes', {\n\t          count: selectedNodes.length,\n\t          fieldNames: selectedNodes.map(getField),\n\n\t          oldParentPath: oldParent.getInternalPath(),\n\t          newParentPath: firstNode.parent.getInternalPath(),\n\t          oldIndex: oldNextNode.getIndex(),\n\t          newIndex: firstNode.getIndex(),\n\n\t          oldIndexRedo: oldIndexRedo,\n\t          newIndexRedo: newIndexRedo,\n\t          oldParentPathRedo: oldParentPathRedo,\n\t          newParentPathRedo: newParentPathRedo,\n\n\t          oldSelection: oldSelection,\n\t          newSelection: this.editor.getDomSelection()\n\t        });\n\t      }\n\t      handled = true;\n\t    }\n\t  }\n\t  else if (keynum == 39) {        // Arrow Right\n\t    if (altKey && !shiftKey) {  // Alt + Arrow Right\n\t      // move to right element\n\t      var nextElement = this._nextElement(target);\n\t      if (nextElement) {\n\t        this.focus(this._getElementName(nextElement));\n\t      }\n\t      handled = true;\n\t    }\n\t    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Right\n\t      dom = firstNode.getDom();\n\t      var prevDom = dom.previousSibling;\n\t      if (prevDom) {\n\t        prevNode = Node.getNodeFromTarget(prevDom);\n\t        if (prevNode && prevNode.parent && !prevNode.isVisible()) {\n\t          oldSelection = this.editor.getDomSelection();\n\t          oldParent = firstNode.parent;\n\t          oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n\t          oldIndexRedo = firstNode.getIndex();\n\t          newIndexRedo = prevNode.getIndex();\n\t          oldParentPathRedo = oldParent.getInternalPath();\n\t          newParentPathRedo = prevNode.parent.getInternalPath();\n\n\t          selectedNodes.forEach(function (node) {\n\t            prevNode.parent.moveBefore(node, prevNode);\n\t          });\n\t          this.focus(Node.focusElement || this._getElementName(target));\n\n\t          this.editor._onAction('moveNodes', {\n\t            count: selectedNodes.length,\n\t            fieldNames: selectedNodes.map(getField),\n\n\t            oldParentPath: oldParent.getInternalPath(),\n\t            newParentPath: firstNode.parent.getInternalPath(),\n\t            oldIndex: oldNextNode.getIndex(),\n\t            newIndex: firstNode.getIndex(),\n\n\t            oldIndexRedo: oldIndexRedo,\n\t            newIndexRedo: newIndexRedo,\n\t            oldParentPathRedo: oldParentPathRedo,\n\t            newParentPathRedo: newParentPathRedo,\n\n\t            oldSelection: oldSelection,\n\t            newSelection: this.editor.getDomSelection()\n\t          });\n\t        }\n\t      }\n\t    }\n\t  }\n\t  else if (keynum == 40) {        // Arrow Down\n\t    if (altKey && !shiftKey) {  // Alt + Arrow Down\n\t      // find the next node\n\t      nextNode = this._nextNode();\n\t      if (nextNode) {\n\t        this.editor.deselect(true);\n\t        nextNode.focus(Node.focusElement || this._getElementName(target));\n\t      }\n\t      handled = true;\n\t    }\n\t    else if (!altKey && ctrlKey && shiftKey && editable) { // Ctrl + Shift + Arrow Down\n\t      // select multiple nodes\n\t      nextNode = this._nextNode();\n\t      if (nextNode) {\n\t        multiselection = this.editor.multiselection;\n\t        multiselection.start = multiselection.start || this;\n\t        multiselection.end = nextNode;\n\t        nodes = this.editor._findTopLevelNodes(multiselection.start, multiselection.end);\n\n\t        this.editor.select(nodes);\n\t        nextNode.focus('field'); // select field as we know this always exists\n\t      }\n\t      handled = true;\n\t    }\n\t    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Down\n\t      // find the 2nd next node and move before that one\n\t      if (lastNode.expanded) {\n\t        nextNode = lastNode.append ? lastNode.append._nextNode() : undefined;\n\t      }\n\t      else {\n\t        nextNode = lastNode._nextNode();\n\t      }\n\n\t      // when the next node is not visible, we've reached the \"showMore\" buttons\n\t      if (nextNode && !nextNode.isVisible()) {\n\t        nextNode = nextNode.parent.showMore;\n\t      }\n\n\t      if (nextNode && nextNode instanceof AppendNode) {\n\t        nextNode = lastNode;\n\t      }\n\n\t      var nextNode2 = nextNode && (nextNode._nextNode() || nextNode.parent.append);\n\t      if (nextNode2 && nextNode2.parent) {\n\t        oldSelection = this.editor.getDomSelection();\n\t        oldParent = firstNode.parent;\n\t        oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n\t        oldIndexRedo = firstNode.getIndex();\n\t        newIndexRedo = nextNode2.getIndex();\n\t        oldParentPathRedo = oldParent.getInternalPath();\n\t        newParentPathRedo = nextNode2.parent.getInternalPath();\n\n\t        selectedNodes.forEach(function (node) {\n\t          nextNode2.parent.moveBefore(node, nextNode2);\n\t        });\n\t        this.focus(Node.focusElement || this._getElementName(target));\n\n\t        this.editor._onAction('moveNodes', {\n\t          count: selectedNodes.length,\n\t          fieldNames: selectedNodes.map(getField),\n\t          oldParentPath: oldParent.getInternalPath(),\n\t          newParentPath: firstNode.parent.getInternalPath(),\n\t          oldParentPathRedo: oldParentPathRedo,\n\t          newParentPathRedo: newParentPathRedo,\n\t          oldIndexRedo: oldIndexRedo,\n\t          newIndexRedo: newIndexRedo,\n\t          oldIndex: oldNextNode.getIndex(),\n\t          newIndex: firstNode.getIndex(),\n\t          oldSelection: oldSelection,\n\t          newSelection: this.editor.getDomSelection()\n\t        });\n\t      }\n\t      handled = true;\n\t    }\n\t  }\n\n\t  if (handled) {\n\t    event.preventDefault();\n\t    event.stopPropagation();\n\t  }\n\t};\n\n\t/**\n\t * Handle the expand event, when clicked on the expand button\n\t * @param {boolean} recurse   If true, child nodes will be expanded too\n\t * @private\n\t */\n\tNode.prototype._onExpand = function (recurse) {\n\t  if (recurse) {\n\t    // Take the table offline\n\t    var table = this.dom.tr.parentNode; // TODO: not nice to access the main table like this\n\t    var frame = table.parentNode;\n\t    var scrollTop = frame.scrollTop;\n\t    frame.removeChild(table);\n\t  }\n\n\t  if (this.expanded) {\n\t    this.collapse(recurse);\n\t  }\n\t  else {\n\t    this.expand(recurse);\n\t  }\n\n\t  if (recurse) {\n\t    // Put the table online again\n\t    frame.appendChild(table);\n\t    frame.scrollTop = scrollTop;\n\t  }\n\t};\n\n\t/**\n\t * Open a color picker to select a new color\n\t * @private\n\t */\n\tNode.prototype._showColorPicker = function () {\n\t  if (typeof this.editor.options.onColorPicker === 'function' && this.dom.color) {\n\t    var node = this;\n\n\t    // force deleting current color picker (if any)\n\t    node._deleteDomColor();\n\t    node.updateDom();\n\n\t    var colorAnchor = createAbsoluteAnchor(this.dom.color, this.editor.frame);\n\n\t    this.editor.options.onColorPicker(colorAnchor, this.value, function onChange(value) {\n\t      if (typeof value === 'string' && value !== node.value) {\n\t        // force recreating the color block, to cleanup any attached color picker\n\t        node._deleteDomColor();\n\n\t        node.value = value;\n\t        node.updateDom();\n\t        node._debouncedOnChangeValue();\n\t      }\n\t    });\n\t  }\n\t}\n\n\t/**\n\t * Remove nodes\n\t * @param {Node[] | Node} nodes\n\t */\n\tNode.onRemove = function(nodes) {\n\t  if (!Array.isArray(nodes)) {\n\t    return Node.onRemove([nodes]);\n\t  }\n\n\t  if (nodes && nodes.length > 0) {\n\t    var firstNode = nodes[0];\n\t    var parent = firstNode.parent;\n\t    var editor = firstNode.editor;\n\t    var firstIndex = firstNode.getIndex();\n\t    editor.highlighter.unhighlight();\n\n\t    // adjust the focus\n\t    var oldSelection = editor.getDomSelection();\n\t    Node.blurNodes(nodes);\n\t    var newSelection = editor.getDomSelection();\n\n\t    // store the paths before removing them (needed for history)\n\t    var paths = nodes.map(getInternalPath);\n\n\t    // remove the nodes\n\t    nodes.forEach(function (node) {\n\t      node.parent._remove(node);\n\t    });\n\n\t    // store history action\n\t    editor._onAction('removeNodes', {\n\t      nodes: nodes,\n\t      paths: paths,\n\t      parentPath: parent.getInternalPath(),\n\t      index: firstIndex,\n\t      oldSelection: oldSelection,\n\t      newSelection: newSelection\n\t    });\n\t  }\n\t};\n\n\n\t/**\n\t * Duplicate nodes\n\t * duplicated nodes will be added right after the original nodes\n\t * @param {Node[] | Node} nodes\n\t */\n\tNode.onDuplicate = function(nodes) {\n\t  if (!Array.isArray(nodes)) {\n\t    return Node.onDuplicate([nodes]);\n\t  }\n\n\t  if (nodes && nodes.length > 0) {\n\t    var lastNode = nodes[nodes.length - 1];\n\t    var parent = lastNode.parent;\n\t    var editor = lastNode.editor;\n\n\t    editor.deselect(editor.multiselection.nodes);\n\n\t    // duplicate the nodes\n\t    var oldSelection = editor.getDomSelection();\n\t    var afterNode = lastNode;\n\t    var clones = nodes.map(function (node) {\n\t      var clone = node.clone();\n\t      parent.insertAfter(clone, afterNode);\n\t      afterNode = clone;\n\t      return clone;\n\t    });\n\n\t    // set selection to the duplicated nodes\n\t    if (nodes.length === 1) {\n\t      clones[0].focus();\n\t    }\n\t    else {\n\t      editor.select(clones);\n\t    }\n\t    var newSelection = editor.getDomSelection();\n\n\t    editor._onAction('duplicateNodes', {\n\t      paths: nodes.map(getInternalPath),\n\t      clonePaths: clones.map(getInternalPath),\n\t      afterPath: lastNode.getInternalPath(),\n\t      parentPath: parent.getInternalPath(),\n\t      oldSelection: oldSelection,\n\t      newSelection: newSelection\n\t    });\n\t  }\n\t};\n\n\t/**\n\t * Handle insert before event\n\t * @param {String} [field]\n\t * @param {*} [value]\n\t * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n\t * @private\n\t */\n\tNode.prototype._onInsertBefore = function (field, value, type) {\n\t  var oldSelection = this.editor.getDomSelection();\n\n\t  var newNode = new Node(this.editor, {\n\t    field: (field != undefined) ? field : '',\n\t    value: (value != undefined) ? value : '',\n\t    type: type\n\t  });\n\t  newNode.expand(true);\n\n\t  var beforePath = this.getInternalPath();\n\n\t  this.parent.insertBefore(newNode, this);\n\t  this.editor.highlighter.unhighlight();\n\t  newNode.focus('field');\n\t  var newSelection = this.editor.getDomSelection();\n\n\t  this.editor._onAction('insertBeforeNodes', {\n\t    nodes: [newNode],\n\t    paths: [newNode.getInternalPath()],\n\t    beforePath: beforePath,\n\t    parentPath: this.parent.getInternalPath(),\n\t    oldSelection: oldSelection,\n\t    newSelection: newSelection\n\t  });\n\t};\n\n\t/**\n\t * Handle insert after event\n\t * @param {String} [field]\n\t * @param {*} [value]\n\t * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n\t * @private\n\t */\n\tNode.prototype._onInsertAfter = function (field, value, type) {\n\t  var oldSelection = this.editor.getDomSelection();\n\n\t  var newNode = new Node(this.editor, {\n\t    field: (field != undefined) ? field : '',\n\t    value: (value != undefined) ? value : '',\n\t    type: type\n\t  });\n\t  newNode.expand(true);\n\t  this.parent.insertAfter(newNode, this);\n\t  this.editor.highlighter.unhighlight();\n\t  newNode.focus('field');\n\t  var newSelection = this.editor.getDomSelection();\n\n\t  this.editor._onAction('insertAfterNodes', {\n\t    nodes: [newNode],\n\t    paths: [newNode.getInternalPath()],\n\t    afterPath: this.getInternalPath(),\n\t    parentPath: this.parent.getInternalPath(),\n\t    oldSelection: oldSelection,\n\t    newSelection: newSelection\n\t  });\n\t};\n\n\t/**\n\t * Handle append event\n\t * @param {String} [field]\n\t * @param {*} [value]\n\t * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n\t * @private\n\t */\n\tNode.prototype._onAppend = function (field, value, type) {\n\t  var oldSelection = this.editor.getDomSelection();\n\n\t  var newNode = new Node(this.editor, {\n\t    field: (field != undefined) ? field : '',\n\t    value: (value != undefined) ? value : '',\n\t    type: type\n\t  });\n\t  newNode.expand(true);\n\t  this.parent.appendChild(newNode);\n\t  this.editor.highlighter.unhighlight();\n\t  newNode.focus('field');\n\t  var newSelection = this.editor.getDomSelection();\n\n\t  this.editor._onAction('appendNodes', {\n\t    nodes: [newNode],\n\t    paths: [newNode.getInternalPath()],\n\t    parentPath: this.parent.getInternalPath(),\n\t    oldSelection: oldSelection,\n\t    newSelection: newSelection\n\t  });\n\t};\n\n\t/**\n\t * Change the type of the node's value\n\t * @param {String} newType\n\t * @private\n\t */\n\tNode.prototype._onChangeType = function (newType) {\n\t  var oldType = this.type;\n\t  if (newType != oldType) {\n\t    var oldSelection = this.editor.getDomSelection();\n\t    this.changeType(newType);\n\t    var newSelection = this.editor.getDomSelection();\n\n\t    this.editor._onAction('changeType', {\n\t      path: this.getInternalPath(),\n\t      oldType: oldType,\n\t      newType: newType,\n\t      oldSelection: oldSelection,\n\t      newSelection: newSelection\n\t    });\n\t  }\n\t};\n\n\t/**\n\t * Sort the child's of the node. Only applicable when the node has type 'object'\n\t * or 'array'.\n\t * @param {String[]} path      Path of the child value to be compared\n\t * @param {String} direction   Sorting direction. Available values: \"asc\", \"desc\"\n\t * @private\n\t */\n\tNode.prototype.sort = function (path, direction) {\n\t  if (!this._hasChilds()) {\n\t    return;\n\t  }\n\n\t  this.hideChilds(); // sorting is faster when the childs are not attached to the dom\n\n\t  // copy the childs array (the old one will be kept for an undo action\n\t  var oldChilds = this.childs;\n\t  this.childs = this.childs.concat();\n\n\t  // sort the childs array\n\t  var order = (direction === 'desc') ? -1 : 1;\n\n\t  if (this.type === 'object') {\n\t    this.childs.sort(function (a, b) {\n\t      return order * naturalSort(a.field, b.field);\n\t    });\n\t  }\n\t  else { // this.type === 'array'\n\t    this.childs.sort(function (a, b) {\n\t      var nodeA = a.getNestedChild(path);\n\t      var nodeB = b.getNestedChild(path);\n\n\t      if (!nodeA) {\n\t        return order;\n\t      }\n\t      if (!nodeB) {\n\t        return -order;\n\t      }\n\n\t      var valueA = nodeA.value;\n\t      var valueB = nodeB.value;\n\n\t      if (typeof valueA !== 'string' && typeof valueB !== 'string') {\n\t        // both values are a number, boolean, or null -> use simple, fast sorting\n\t        return valueA > valueB ? order : valueA < valueB ? -order : 0;\n\t      }\n\n\t      return order * naturalSort(valueA, valueB);\n\t    });\n\t  }\n\n\t  // update the index numbering\n\t  this._updateDomIndexes();\n\n\t  this.editor._onAction('sort', {\n\t    path: this.getInternalPath(),\n\t    oldChilds: oldChilds,\n\t    newChilds: this.childs\n\t  });\n\n\t  this.showChilds();\n\t};\n\n\t/**\n\t * Replace the value of the node, keep it's state\n\t * @param {*} newValue\n\t */\n\tNode.prototype.update = function (newValue) {\n\t  var oldValue = this.getInternalValue();\n\n\t  this.setValue(newValue);\n\n\t  this.editor._onAction('transform', {\n\t    path: this.getInternalPath(),\n\t    oldValue: oldValue,\n\t    newValue: this.getInternalValue()\n\t  });\n\t};\n\n\t/**\n\t * Remove this node from the DOM\n\t * @returns {{table: Element, nextTr?: Element}}\n\t *            Returns the DOM elements that which be used to attach the node\n\t *            to the DOM again, see _attachToDom.\n\t * @private\n\t */\n\tNode.prototype._detachFromDom = function () {\n\t  var table = this.dom.tr ? this.dom.tr.parentNode : undefined;\n\t  var lastTr;\n\t  if (this.expanded) {\n\t    lastTr = this.getAppendDom();\n\t  }\n\t  else {\n\t    lastTr = this.getDom();\n\t  }\n\t  var nextTr = (lastTr && lastTr.parentNode) ? lastTr.nextSibling : undefined;\n\n\t  this.hide({ resetVisibleChilds: false });\n\n\t  return {\n\t    table: table,\n\t    nextTr: nextTr\n\t  }\n\t};\n\n\t/**\n\t * Attach this node to the DOM again\n\t * @param {{table: Element, nextTr?: Element}} domAnchor\n\t *            The DOM elements returned by _detachFromDom.\n\t * @private\n\t */\n\tNode.prototype._attachToDom = function (domAnchor) {\n\t  if (domAnchor.table) {\n\t    if (domAnchor.nextTr) {\n\t      domAnchor.table.insertBefore(this.getDom(), domAnchor.nextTr);\n\t    }\n\t    else {\n\t      domAnchor.table.appendChild(this.getDom());\n\t    }\n\t  }\n\n\t  if (this.expanded) {\n\t    this.showChilds();\n\t  }\n\t};\n\n\t/**\n\t * Transform the node given a JMESPath query.\n\t * @param {String} query    JMESPath query to apply\n\t * @private\n\t */\n\tNode.prototype.transform = function (query) {\n\t  if (!this._hasChilds()) {\n\t    return;\n\t  }\n\n\t  this.hideChilds(); // sorting is faster when the childs are not attached to the dom\n\n\t  try {\n\t    // apply the JMESPath query\n\t    var oldInternalValue = this.getInternalValue();\n\n\t    var oldValue = this.getValue();\n\t    var newValue = jmespath.search(oldValue, query);\n\t    this.setValue(newValue);\n\n\t    var newInternalValue = this.getInternalValue();\n\n\t    this.editor._onAction('transform', {\n\t      path: this.getInternalPath(),\n\t      oldValue: oldInternalValue,\n\t      newValue: newInternalValue\n\t    });\n\n\t    this.showChilds();\n\t  }\n\t  catch (err) {\n\t    this.showChilds();\n\n\t    this.editor._onError(err);\n\t  }\n\t};\n\n\t/**\n\t * Get a nested child given a path with properties\n\t * @param {String[]} path\n\t * @returns {Node}\n\t */\n\tNode.prototype.getNestedChild = function (path) {\n\t  var i = 0;\n\t  var child = this;\n\n\t  while (child && i < path.length) {\n\t    child = child.findChildByProperty(path[i]);\n\t    i++;\n\t  }\n\n\t  return child;\n\t};\n\n\t/**\n\t * Find a child by property name\n\t * @param {string} prop\n\t * @return {Node | undefined} Returns the child node when found, or undefined otherwise\n\t */\n\tNode.prototype.findChildByProperty = function(prop) {\n\t  if (this.type !== 'object') {\n\t    return undefined;\n\t  }\n\n\t  return this.childs.find(function (child) {\n\t    return child.field === prop;\n\t  });\n\t};\n\n\t/**\n\t * Get the child paths of this node\n\t * @param {boolean} [includeObjects=false] If true, object and array paths are returned as well\n\t * @return {string[]}\n\t */\n\tNode.prototype.getChildPaths = function (includeObjects) {\n\t  var pathsMap = {};\n\n\t  this._getChildPaths(pathsMap, '', includeObjects);\n\n\t  if (this.type === 'array') {\n\t    this.childs.forEach(function (child) {\n\t      child._getChildPaths(pathsMap, '', includeObjects);\n\t    });\n\t  }\n\n\t  return Object.keys(pathsMap).sort();\n\t};\n\n\t/**\n\t * Get the child paths of this node\n\t * @param {Object<String, boolean>} pathsMap\n\t * @param {boolean} [includeObjects=false]  If true, object and array paths are returned as well\n\t * @param {string} rootPath\n\t */\n\tNode.prototype._getChildPaths = function (pathsMap, rootPath, includeObjects) {\n\t  if (this.type === 'auto' || this.type === 'string' || includeObjects) {\n\t    pathsMap[rootPath || '.'] = true;\n\t  }\n\n\t  if (this.type === 'object') {\n\t    this.childs.forEach(function (child) {\n\t      child._getChildPaths(pathsMap, rootPath + '.' + child.field, includeObjects);\n\t    });\n\t  }\n\t};\n\n\t/**\n\t * Create a table row with an append button.\n\t * @return {HTMLElement | undefined} tr with the AppendNode contents\n\t */\n\tNode.prototype.getAppendDom = function () {\n\t  if (!this.append) {\n\t    this.append = new AppendNode(this.editor);\n\t    this.append.setParent(this);\n\t  }\n\t  return this.append.getDom();\n\t};\n\n\t/**\n\t * Create a table row with an showMore button and text\n\t * @return {HTMLElement | undefined} tr with the AppendNode contents\n\t */\n\tNode.prototype.getShowMoreDom = function () {\n\t  if (!this.showMore) {\n\t    this.showMore = new ShowMoreNode(this.editor, this);\n\t  }\n\t  return this.showMore.getDom();\n\t};\n\n\t/**\n\t * Find the node from an event target\n\t * @param {HTMLElement} target\n\t * @return {Node | undefined} node  or undefined when not found\n\t * @static\n\t */\n\tNode.getNodeFromTarget = function (target) {\n\t  while (target) {\n\t    if (target.node) {\n\t      return target.node;\n\t    }\n\t    target = target.parentNode;\n\t  }\n\n\t  return undefined;\n\t};\n\n\t/**\n\t * Test whether target is a child of the color DOM of a node\n\t * @param {HTMLElement} target\n\t * @returns {boolean}\n\t */\n\tNode.targetIsColorPicker = function (target) {\n\t  var node = Node.getNodeFromTarget(target);\n\n\t  if (node) {\n\t    var parent = target && target.parentNode;\n\t    while (parent) {\n\t      if (parent === node.dom.color) {\n\t        return true;\n\t      }\n\t      parent = parent.parentNode;\n\t    }\n\t  }\n\n\t  return false;\n\t}\n\n\t/**\n\t * Remove the focus of given nodes, and move the focus to the (a) node before,\n\t * (b) the node after, or (c) the parent node.\n\t * @param {Array.<Node> | Node} nodes\n\t */\n\tNode.blurNodes = function (nodes) {\n\t  if (!Array.isArray(nodes)) {\n\t    Node.blurNodes([nodes]);\n\t    return;\n\t  }\n\n\t  var firstNode = nodes[0];\n\t  var parent = firstNode.parent;\n\t  var firstIndex = firstNode.getIndex();\n\n\t  if (parent.childs[firstIndex + nodes.length]) {\n\t    parent.childs[firstIndex + nodes.length].focus();\n\t  }\n\t  else if (parent.childs[firstIndex - 1]) {\n\t    parent.childs[firstIndex - 1].focus();\n\t  }\n\t  else {\n\t    parent.focus();\n\t  }\n\t};\n\n\t/**\n\t * Get the next sibling of current node\n\t * @return {Node} nextSibling\n\t */\n\tNode.prototype.nextSibling = function () {\n\t  var index = this.parent.childs.indexOf(this);\n\t  return this.parent.childs[index + 1] || this.parent.append;\n\t};\n\n\t/**\n\t * Get the previously rendered node\n\t * @return {Node | null} previousNode\n\t */\n\tNode.prototype._previousNode = function () {\n\t  var prevNode = null;\n\t  var dom = this.getDom();\n\t  if (dom && dom.parentNode) {\n\t    // find the previous field\n\t    var prevDom = dom;\n\t    do {\n\t      prevDom = prevDom.previousSibling;\n\t      prevNode = Node.getNodeFromTarget(prevDom);\n\t    }\n\t    while (prevDom && prevNode && (prevNode instanceof AppendNode && !prevNode.isVisible()));\n\t  }\n\t  return prevNode;\n\t};\n\n\t/**\n\t * Get the next rendered node\n\t * @return {Node | null} nextNode\n\t * @private\n\t */\n\tNode.prototype._nextNode = function () {\n\t  var nextNode = null;\n\t  var dom = this.getDom();\n\t  if (dom && dom.parentNode) {\n\t    // find the previous field\n\t    var nextDom = dom;\n\t    do {\n\t      nextDom = nextDom.nextSibling;\n\t      nextNode = Node.getNodeFromTarget(nextDom);\n\t    }\n\t    while (nextDom && nextNode && (nextNode instanceof AppendNode && !nextNode.isVisible()));\n\t  }\n\n\t  return nextNode;\n\t};\n\n\t/**\n\t * Get the first rendered node\n\t * @return {Node | null} firstNode\n\t * @private\n\t */\n\tNode.prototype._firstNode = function () {\n\t  var firstNode = null;\n\t  var dom = this.getDom();\n\t  if (dom && dom.parentNode) {\n\t    var firstDom = dom.parentNode.firstChild;\n\t    firstNode = Node.getNodeFromTarget(firstDom);\n\t  }\n\n\t  return firstNode;\n\t};\n\n\t/**\n\t * Get the last rendered node\n\t * @return {Node | null} lastNode\n\t * @private\n\t */\n\tNode.prototype._lastNode = function () {\n\t  var lastNode = null;\n\t  var dom = this.getDom();\n\t  if (dom && dom.parentNode) {\n\t    var lastDom = dom.parentNode.lastChild;\n\t    lastNode =  Node.getNodeFromTarget(lastDom);\n\t    while (lastDom && lastNode && !lastNode.isVisible()) {\n\t      lastDom = lastDom.previousSibling;\n\t      lastNode =  Node.getNodeFromTarget(lastDom);\n\t    }\n\t  }\n\t  return lastNode;\n\t};\n\n\t/**\n\t * Get the next element which can have focus.\n\t * @param {Element} elem\n\t * @return {Element | null} nextElem\n\t * @private\n\t */\n\tNode.prototype._previousElement = function (elem) {\n\t  var dom = this.dom;\n\t  // noinspection FallthroughInSwitchStatementJS\n\t  switch (elem) {\n\t    case dom.value:\n\t      if (this.fieldEditable) {\n\t        return dom.field;\n\t      }\n\t    // intentional fall through\n\t    case dom.field:\n\t      if (this._hasChilds()) {\n\t        return dom.expand;\n\t      }\n\t    // intentional fall through\n\t    case dom.expand:\n\t      return dom.menu;\n\t    case dom.menu:\n\t      if (dom.drag) {\n\t        return dom.drag;\n\t      }\n\t    // intentional fall through\n\t    default:\n\t      return null;\n\t  }\n\t};\n\n\t/**\n\t * Get the next element which can have focus.\n\t * @param {Element} elem\n\t * @return {Element | null} nextElem\n\t * @private\n\t */\n\tNode.prototype._nextElement = function (elem) {\n\t  var dom = this.dom;\n\t  // noinspection FallthroughInSwitchStatementJS\n\t  switch (elem) {\n\t    case dom.drag:\n\t      return dom.menu;\n\t    case dom.menu:\n\t      if (this._hasChilds()) {\n\t        return dom.expand;\n\t      }\n\t    // intentional fall through\n\t    case dom.expand:\n\t      if (this.fieldEditable) {\n\t        return dom.field;\n\t      }\n\t    // intentional fall through\n\t    case dom.field:\n\t      if (!this._hasChilds()) {\n\t        return dom.value;\n\t      }\n\t    default:\n\t      return null;\n\t  }\n\t};\n\n\t/**\n\t * Get the dom name of given element. returns null if not found.\n\t * For example when element == dom.field, \"field\" is returned.\n\t * @param {Element} element\n\t * @return {String | null} elementName  Available elements with name: 'drag',\n\t *                                      'menu', 'expand', 'field', 'value'\n\t * @private\n\t */\n\tNode.prototype._getElementName = function (element) {\n\t  var dom = this.dom;\n\t  for (var name in dom) {\n\t    if (dom.hasOwnProperty(name)) {\n\t      if (dom[name] == element) {\n\t        return name;\n\t      }\n\t    }\n\t  }\n\t  return null;\n\t};\n\n\t/**\n\t * Test if this node has childs. This is the case when the node is an object\n\t * or array.\n\t * @return {boolean} hasChilds\n\t * @private\n\t */\n\tNode.prototype._hasChilds = function () {\n\t  return this.type == 'array' || this.type == 'object';\n\t};\n\n\t// titles with explanation for the different types\n\tNode.TYPE_TITLES = {\n\t  'auto': translate('autoType'),\n\t  'object': translate('objectType'),\n\t  'array': translate('arrayType'),\n\t  'string': translate('stringType')\n\t};\n\n\tNode.prototype.addTemplates = function (menu, append) {\n\t    var node = this;\n\t    var templates = node.editor.options.templates;\n\t    if (templates == null) return;\n\t    if (templates.length) {\n\t        // create a separator\n\t        menu.push({\n\t            'type': 'separator'\n\t        });\n\t    }\n\t    var appendData = function (name, data) {\n\t        node._onAppend(name, data);\n\t    };\n\t    var insertData = function (name, data) {\n\t        node._onInsertBefore(name, data);\n\t    };\n\t    templates.forEach(function (template) {\n\t        menu.push({\n\t            text: template.text,\n\t            className: (template.className || 'jsoneditor-type-object'),\n\t            title: template.title,\n\t            click: (append ? appendData.bind(this, template.field, template.value) : insertData.bind(this, template.field, template.value))\n\t        });\n\t    });\n\t};\n\n\t/**\n\t * Show a contextmenu for this node\n\t * @param {HTMLElement} anchor   Anchor element to attach the context menu to\n\t *                               as sibling.\n\t * @param {function} [onClose]   Callback method called when the context menu\n\t *                               is being closed.\n\t */\n\tNode.prototype.showContextMenu = function (anchor, onClose) {\n\t  var node = this;\n\t  var titles = Node.TYPE_TITLES;\n\t  var items = [];\n\n\t  if (this.editable.value) {\n\t    items.push({\n\t      text: translate('type'),\n\t      title: translate('typeTitle'),\n\t      className: 'jsoneditor-type-' + this.type,\n\t      submenu: [\n\t        {\n\t          text: translate('auto'),\n\t          className: 'jsoneditor-type-auto' +\n\t              (this.type == 'auto' ? ' jsoneditor-selected' : ''),\n\t          title: titles.auto,\n\t          click: function () {\n\t            node._onChangeType('auto');\n\t          }\n\t        },\n\t        {\n\t          text: translate('array'),\n\t          className: 'jsoneditor-type-array' +\n\t              (this.type == 'array' ? ' jsoneditor-selected' : ''),\n\t          title: titles.array,\n\t          click: function () {\n\t            node._onChangeType('array');\n\t          }\n\t        },\n\t        {\n\t          text: translate('object'),\n\t          className: 'jsoneditor-type-object' +\n\t              (this.type == 'object' ? ' jsoneditor-selected' : ''),\n\t          title: titles.object,\n\t          click: function () {\n\t            node._onChangeType('object');\n\t          }\n\t        },\n\t        {\n\t          text: translate('string'),\n\t          className: 'jsoneditor-type-string' +\n\t              (this.type == 'string' ? ' jsoneditor-selected' : ''),\n\t          title: titles.string,\n\t          click: function () {\n\t            node._onChangeType('string');\n\t          }\n\t        }\n\t      ]\n\t    });\n\t  }\n\n\t  if (this._hasChilds()) {\n\t    items.push({\n\t      text: translate('sort'),\n\t      title: translate('sortTitle', {type: this.type}),\n\t      className: 'jsoneditor-sort-asc',\n\t      click: function () {\n\t        var anchor = node.editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n\t        showSortModal(node, anchor)\n\t      }\n\t    });\n\n\t    items.push({\n\t      text: translate('transform'),\n\t      title: translate('transformTitle', {type: this.type}),\n\t      className: 'jsoneditor-transform',\n\t      click: function () {\n\t        var anchor = node.editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n\t        showTransformModal(node, anchor)\n\t      }\n\t    });\n\t  }\n\n\t  if (this.parent && this.parent._hasChilds()) {\n\t    if (items.length) {\n\t      // create a separator\n\t      items.push({\n\t        'type': 'separator'\n\t      });\n\t    }\n\n\t    // create append button (for last child node only)\n\t    var childs = node.parent.childs;\n\t    if (node == childs[childs.length - 1]) {\n\t        var appendSubmenu = [\n\t            {\n\t                text: translate('auto'),\n\t                className: 'jsoneditor-type-auto',\n\t                title: titles.auto,\n\t                click: function () {\n\t                    node._onAppend('', '', 'auto');\n\t                }\n\t            },\n\t            {\n\t                text: translate('array'),\n\t                className: 'jsoneditor-type-array',\n\t                title: titles.array,\n\t                click: function () {\n\t                    node._onAppend('', []);\n\t                }\n\t            },\n\t            {\n\t                text: translate('object'),\n\t                className: 'jsoneditor-type-object',\n\t                title: titles.object,\n\t                click: function () {\n\t                    node._onAppend('', {});\n\t                }\n\t            },\n\t            {\n\t                text: translate('string'),\n\t                className: 'jsoneditor-type-string',\n\t                title: titles.string,\n\t                click: function () {\n\t                    node._onAppend('', '', 'string');\n\t                }\n\t            }\n\t        ];\n\t        node.addTemplates(appendSubmenu, true);\n\t        items.push({\n\t            text: translate('appendText'),\n\t            title: translate('appendTitle'),\n\t            submenuTitle: translate('appendSubmenuTitle'),\n\t            className: 'jsoneditor-append',\n\t            click: function () {\n\t                node._onAppend('', '', 'auto');\n\t            },\n\t            submenu: appendSubmenu\n\t        });\n\t    }\n\n\n\n\t    // create insert button\n\t    var insertSubmenu = [\n\t        {\n\t            text: translate('auto'),\n\t            className: 'jsoneditor-type-auto',\n\t            title: titles.auto,\n\t            click: function () {\n\t                node._onInsertBefore('', '', 'auto');\n\t            }\n\t        },\n\t        {\n\t            text: translate('array'),\n\t            className: 'jsoneditor-type-array',\n\t            title: titles.array,\n\t            click: function () {\n\t                node._onInsertBefore('', []);\n\t            }\n\t        },\n\t        {\n\t            text: translate('object'),\n\t            className: 'jsoneditor-type-object',\n\t            title: titles.object,\n\t            click: function () {\n\t                node._onInsertBefore('', {});\n\t            }\n\t        },\n\t        {\n\t            text: translate('string'),\n\t            className: 'jsoneditor-type-string',\n\t            title: titles.string,\n\t            click: function () {\n\t                node._onInsertBefore('', '', 'string');\n\t            }\n\t        }\n\t    ];\n\t    node.addTemplates(insertSubmenu, false);\n\t    items.push({\n\t      text: translate('insert'),\n\t      title: translate('insertTitle'),\n\t      submenuTitle: translate('insertSub'),\n\t      className: 'jsoneditor-insert',\n\t      click: function () {\n\t        node._onInsertBefore('', '', 'auto');\n\t      },\n\t      submenu: insertSubmenu\n\t    });\n\n\t    if (this.editable.field) {\n\t      // create duplicate button\n\t      items.push({\n\t        text: translate('duplicateText'),\n\t        title: translate('duplicateField'),\n\t        className: 'jsoneditor-duplicate',\n\t        click: function () {\n\t          Node.onDuplicate(node);\n\t        }\n\t      });\n\n\t      // create remove button\n\t      items.push({\n\t        text: translate('removeText'),\n\t        title: translate('removeField'),\n\t        className: 'jsoneditor-remove',\n\t        click: function () {\n\t          Node.onRemove(node);\n\t        }\n\t      });\n\t    }\n\t  }\n\n\t  var menu = new ContextMenu(items, {close: onClose});\n\t  menu.show(anchor, this.editor.frame);\n\t};\n\n\t/**\n\t * get the type of a value\n\t * @param {*} value\n\t * @return {String} type   Can be 'object', 'array', 'string', 'auto'\n\t * @private\n\t */\n\tNode.prototype._getType = function(value) {\n\t  if (value instanceof Array) {\n\t    return 'array';\n\t  }\n\t  if (value instanceof Object) {\n\t    return 'object';\n\t  }\n\t  if (typeof(value) == 'string' && typeof(this._stringCast(value)) != 'string') {\n\t    return 'string';\n\t  }\n\n\t  return 'auto';\n\t};\n\n\t/**\n\t * cast contents of a string to the correct type. This can be a string,\n\t * a number, a boolean, etc\n\t * @param {String} str\n\t * @return {*} castedStr\n\t * @private\n\t */\n\tNode.prototype._stringCast = function(str) {\n\t  var lower = str.toLowerCase(),\n\t      num = Number(str),          // will nicely fail with '123ab'\n\t      numFloat = parseFloat(str); // will nicely fail with '  '\n\n\t  if (str == '') {\n\t    return '';\n\t  }\n\t  else if (lower == 'null') {\n\t    return null;\n\t  }\n\t  else if (lower == 'true') {\n\t    return true;\n\t  }\n\t  else if (lower == 'false') {\n\t    return false;\n\t  }\n\t  else if (!isNaN(num) && !isNaN(numFloat)) {\n\t    return num;\n\t  }\n\t  else {\n\t    return str;\n\t  }\n\t};\n\n\t/**\n\t * escape a text, such that it can be displayed safely in an HTML element\n\t * @param {String} text\n\t * @return {String} escapedText\n\t * @private\n\t */\n\tNode.prototype._escapeHTML = function (text) {\n\t  if (typeof text !== 'string') {\n\t    return String(text);\n\t  }\n\t  else {\n\t    var htmlEscaped = String(text)\n\t        .replace(/&/g, '&amp;')    // must be replaced first!\n\t        .replace(/</g, '&lt;')\n\t        .replace(/>/g, '&gt;')\n\t        .replace(/  /g, ' &nbsp;') // replace double space with an nbsp and space\n\t        .replace(/^ /, '&nbsp;')   // space at start\n\t        .replace(/ $/, '&nbsp;');  // space at end\n\n\t    var json = JSON.stringify(htmlEscaped);\n\t    var html = json.substring(1, json.length - 1);\n\t    if (this.editor.options.escapeUnicode === true) {\n\t      html = util.escapeUnicodeChars(html);\n\t    }\n\t    return html;\n\t  }\n\t};\n\n\t/**\n\t * unescape a string.\n\t * @param {String} escapedText\n\t * @return {String} text\n\t * @private\n\t */\n\tNode.prototype._unescapeHTML = function (escapedText) {\n\t  var json = '\"' + this._escapeJSON(escapedText) + '\"';\n\t  var htmlEscaped = util.parse(json);\n\n\t  return htmlEscaped\n\t      .replace(/&lt;/g, '<')\n\t      .replace(/&gt;/g, '>')\n\t      .replace(/&nbsp;|\\u00A0/g, ' ')\n\t      .replace(/&amp;/g, '&');   // must be replaced last\n\t};\n\n\t/**\n\t * escape a text to make it a valid JSON string. The method will:\n\t *   - replace unescaped double quotes with '\\\"'\n\t *   - replace unescaped backslash with '\\\\'\n\t *   - replace returns with '\\n'\n\t * @param {String} text\n\t * @return {String} escapedText\n\t * @private\n\t */\n\tNode.prototype._escapeJSON = function (text) {\n\t  // TODO: replace with some smart regex (only when a new solution is faster!)\n\t  var escaped = '';\n\t  var i = 0;\n\t  while (i < text.length) {\n\t    var c = text.charAt(i);\n\t    if (c == '\\n') {\n\t      escaped += '\\\\n';\n\t    }\n\t    else if (c == '\\\\') {\n\t      escaped += c;\n\t      i++;\n\n\t      c = text.charAt(i);\n\t      if (c === '' || '\"\\\\/bfnrtu'.indexOf(c) == -1) {\n\t        escaped += '\\\\';  // no valid escape character\n\t      }\n\t      escaped += c;\n\t    }\n\t    else if (c == '\"') {\n\t      escaped += '\\\\\"';\n\t    }\n\t    else {\n\t      escaped += c;\n\t    }\n\t    i++;\n\t  }\n\n\t  return escaped;\n\t};\n\n\t// helper function to get the internal path of a node\n\tfunction getInternalPath (node) {\n\t  return node.getInternalPath();\n\t}\n\n\t// helper function to get the field of a node\n\tfunction getField (node) {\n\t  return node.getField();\n\t}\n\n\t// TODO: find a nicer solution to resolve this circular dependency between Node and AppendNode\n\t//       idea: introduce properties .isAppendNode and .isNode and use that instead of instanceof AppendNode checks\n\tvar AppendNode = appendNodeFactory(Node);\n\tvar ShowMoreNode = showMoreNodeFactory(Node);\n\n\tmodule.exports = Node;\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t(function(exports) {\n\t  \"use strict\";\n\n\t  function isArray(obj) {\n\t    if (obj !== null) {\n\t      return Object.prototype.toString.call(obj) === \"[object Array]\";\n\t    } else {\n\t      return false;\n\t    }\n\t  }\n\n\t  function isObject(obj) {\n\t    if (obj !== null) {\n\t      return Object.prototype.toString.call(obj) === \"[object Object]\";\n\t    } else {\n\t      return false;\n\t    }\n\t  }\n\n\t  function strictDeepEqual(first, second) {\n\t    // Check the scalar case first.\n\t    if (first === second) {\n\t      return true;\n\t    }\n\n\t    // Check if they are the same type.\n\t    var firstType = Object.prototype.toString.call(first);\n\t    if (firstType !== Object.prototype.toString.call(second)) {\n\t      return false;\n\t    }\n\t    // We know that first and second have the same type so we can just check the\n\t    // first type from now on.\n\t    if (isArray(first) === true) {\n\t      // Short circuit if they're not the same length;\n\t      if (first.length !== second.length) {\n\t        return false;\n\t      }\n\t      for (var i = 0; i < first.length; i++) {\n\t        if (strictDeepEqual(first[i], second[i]) === false) {\n\t          return false;\n\t        }\n\t      }\n\t      return true;\n\t    }\n\t    if (isObject(first) === true) {\n\t      // An object is equal if it has the same key/value pairs.\n\t      var keysSeen = {};\n\t      for (var key in first) {\n\t        if (hasOwnProperty.call(first, key)) {\n\t          if (strictDeepEqual(first[key], second[key]) === false) {\n\t            return false;\n\t          }\n\t          keysSeen[key] = true;\n\t        }\n\t      }\n\t      // Now check that there aren't any keys in second that weren't\n\t      // in first.\n\t      for (var key2 in second) {\n\t        if (hasOwnProperty.call(second, key2)) {\n\t          if (keysSeen[key2] !== true) {\n\t            return false;\n\t          }\n\t        }\n\t      }\n\t      return true;\n\t    }\n\t    return false;\n\t  }\n\n\t  function isFalse(obj) {\n\t    // From the spec:\n\t    // A false value corresponds to the following values:\n\t    // Empty list\n\t    // Empty object\n\t    // Empty string\n\t    // False boolean\n\t    // null value\n\n\t    // First check the scalar values.\n\t    if (obj === \"\" || obj === false || obj === null) {\n\t        return true;\n\t    } else if (isArray(obj) && obj.length === 0) {\n\t        // Check for an empty array.\n\t        return true;\n\t    } else if (isObject(obj)) {\n\t        // Check for an empty object.\n\t        for (var key in obj) {\n\t            // If there are any keys, then\n\t            // the object is not empty so the object\n\t            // is not false.\n\t            if (obj.hasOwnProperty(key)) {\n\t              return false;\n\t            }\n\t        }\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n\t  }\n\n\t  function objValues(obj) {\n\t    var keys = Object.keys(obj);\n\t    var values = [];\n\t    for (var i = 0; i < keys.length; i++) {\n\t      values.push(obj[keys[i]]);\n\t    }\n\t    return values;\n\t  }\n\n\t  function merge(a, b) {\n\t      var merged = {};\n\t      for (var key in a) {\n\t          merged[key] = a[key];\n\t      }\n\t      for (var key2 in b) {\n\t          merged[key2] = b[key2];\n\t      }\n\t      return merged;\n\t  }\n\n\t  var trimLeft;\n\t  if (typeof String.prototype.trimLeft === \"function\") {\n\t    trimLeft = function(str) {\n\t      return str.trimLeft();\n\t    };\n\t  } else {\n\t    trimLeft = function(str) {\n\t      return str.match(/^\\s*(.*)/)[1];\n\t    };\n\t  }\n\n\t  // Type constants used to define functions.\n\t  var TYPE_NUMBER = 0;\n\t  var TYPE_ANY = 1;\n\t  var TYPE_STRING = 2;\n\t  var TYPE_ARRAY = 3;\n\t  var TYPE_OBJECT = 4;\n\t  var TYPE_BOOLEAN = 5;\n\t  var TYPE_EXPREF = 6;\n\t  var TYPE_NULL = 7;\n\t  var TYPE_ARRAY_NUMBER = 8;\n\t  var TYPE_ARRAY_STRING = 9;\n\n\t  var TOK_EOF = \"EOF\";\n\t  var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n\t  var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n\t  var TOK_RBRACKET = \"Rbracket\";\n\t  var TOK_RPAREN = \"Rparen\";\n\t  var TOK_COMMA = \"Comma\";\n\t  var TOK_COLON = \"Colon\";\n\t  var TOK_RBRACE = \"Rbrace\";\n\t  var TOK_NUMBER = \"Number\";\n\t  var TOK_CURRENT = \"Current\";\n\t  var TOK_EXPREF = \"Expref\";\n\t  var TOK_PIPE = \"Pipe\";\n\t  var TOK_OR = \"Or\";\n\t  var TOK_AND = \"And\";\n\t  var TOK_EQ = \"EQ\";\n\t  var TOK_GT = \"GT\";\n\t  var TOK_LT = \"LT\";\n\t  var TOK_GTE = \"GTE\";\n\t  var TOK_LTE = \"LTE\";\n\t  var TOK_NE = \"NE\";\n\t  var TOK_FLATTEN = \"Flatten\";\n\t  var TOK_STAR = \"Star\";\n\t  var TOK_FILTER = \"Filter\";\n\t  var TOK_DOT = \"Dot\";\n\t  var TOK_NOT = \"Not\";\n\t  var TOK_LBRACE = \"Lbrace\";\n\t  var TOK_LBRACKET = \"Lbracket\";\n\t  var TOK_LPAREN= \"Lparen\";\n\t  var TOK_LITERAL= \"Literal\";\n\n\t  // The \"&\", \"[\", \"<\", \">\" tokens\n\t  // are not in basicToken because\n\t  // there are two token variants\n\t  // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n\t  // below.\n\n\t  var basicTokens = {\n\t    \".\": TOK_DOT,\n\t    \"*\": TOK_STAR,\n\t    \",\": TOK_COMMA,\n\t    \":\": TOK_COLON,\n\t    \"{\": TOK_LBRACE,\n\t    \"}\": TOK_RBRACE,\n\t    \"]\": TOK_RBRACKET,\n\t    \"(\": TOK_LPAREN,\n\t    \")\": TOK_RPAREN,\n\t    \"@\": TOK_CURRENT\n\t  };\n\n\t  var operatorStartToken = {\n\t      \"<\": true,\n\t      \">\": true,\n\t      \"=\": true,\n\t      \"!\": true\n\t  };\n\n\t  var skipChars = {\n\t      \" \": true,\n\t      \"\\t\": true,\n\t      \"\\n\": true\n\t  };\n\n\n\t  function isAlpha(ch) {\n\t      return (ch >= \"a\" && ch <= \"z\") ||\n\t             (ch >= \"A\" && ch <= \"Z\") ||\n\t             ch === \"_\";\n\t  }\n\n\t  function isNum(ch) {\n\t      return (ch >= \"0\" && ch <= \"9\") ||\n\t             ch === \"-\";\n\t  }\n\t  function isAlphaNum(ch) {\n\t      return (ch >= \"a\" && ch <= \"z\") ||\n\t             (ch >= \"A\" && ch <= \"Z\") ||\n\t             (ch >= \"0\" && ch <= \"9\") ||\n\t             ch === \"_\";\n\t  }\n\n\t  function Lexer() {\n\t  }\n\t  Lexer.prototype = {\n\t      tokenize: function(stream) {\n\t          var tokens = [];\n\t          this._current = 0;\n\t          var start;\n\t          var identifier;\n\t          var token;\n\t          while (this._current < stream.length) {\n\t              if (isAlpha(stream[this._current])) {\n\t                  start = this._current;\n\t                  identifier = this._consumeUnquotedIdentifier(stream);\n\t                  tokens.push({type: TOK_UNQUOTEDIDENTIFIER,\n\t                               value: identifier,\n\t                               start: start});\n\t              } else if (basicTokens[stream[this._current]] !== undefined) {\n\t                  tokens.push({type: basicTokens[stream[this._current]],\n\t                              value: stream[this._current],\n\t                              start: this._current});\n\t                  this._current++;\n\t              } else if (isNum(stream[this._current])) {\n\t                  token = this._consumeNumber(stream);\n\t                  tokens.push(token);\n\t              } else if (stream[this._current] === \"[\") {\n\t                  // No need to increment this._current.  This happens\n\t                  // in _consumeLBracket\n\t                  token = this._consumeLBracket(stream);\n\t                  tokens.push(token);\n\t              } else if (stream[this._current] === \"\\\"\") {\n\t                  start = this._current;\n\t                  identifier = this._consumeQuotedIdentifier(stream);\n\t                  tokens.push({type: TOK_QUOTEDIDENTIFIER,\n\t                               value: identifier,\n\t                               start: start});\n\t              } else if (stream[this._current] === \"'\") {\n\t                  start = this._current;\n\t                  identifier = this._consumeRawStringLiteral(stream);\n\t                  tokens.push({type: TOK_LITERAL,\n\t                               value: identifier,\n\t                               start: start});\n\t              } else if (stream[this._current] === \"`\") {\n\t                  start = this._current;\n\t                  var literal = this._consumeLiteral(stream);\n\t                  tokens.push({type: TOK_LITERAL,\n\t                               value: literal,\n\t                               start: start});\n\t              } else if (operatorStartToken[stream[this._current]] !== undefined) {\n\t                  tokens.push(this._consumeOperator(stream));\n\t              } else if (skipChars[stream[this._current]] !== undefined) {\n\t                  // Ignore whitespace.\n\t                  this._current++;\n\t              } else if (stream[this._current] === \"&\") {\n\t                  start = this._current;\n\t                  this._current++;\n\t                  if (stream[this._current] === \"&\") {\n\t                      this._current++;\n\t                      tokens.push({type: TOK_AND, value: \"&&\", start: start});\n\t                  } else {\n\t                      tokens.push({type: TOK_EXPREF, value: \"&\", start: start});\n\t                  }\n\t              } else if (stream[this._current] === \"|\") {\n\t                  start = this._current;\n\t                  this._current++;\n\t                  if (stream[this._current] === \"|\") {\n\t                      this._current++;\n\t                      tokens.push({type: TOK_OR, value: \"||\", start: start});\n\t                  } else {\n\t                      tokens.push({type: TOK_PIPE, value: \"|\", start: start});\n\t                  }\n\t              } else {\n\t                  var error = new Error(\"Unknown character:\" + stream[this._current]);\n\t                  error.name = \"LexerError\";\n\t                  throw error;\n\t              }\n\t          }\n\t          return tokens;\n\t      },\n\n\t      _consumeUnquotedIdentifier: function(stream) {\n\t          var start = this._current;\n\t          this._current++;\n\t          while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n\t              this._current++;\n\t          }\n\t          return stream.slice(start, this._current);\n\t      },\n\n\t      _consumeQuotedIdentifier: function(stream) {\n\t          var start = this._current;\n\t          this._current++;\n\t          var maxLength = stream.length;\n\t          while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n\t              // You can escape a double quote and you can escape an escape.\n\t              var current = this._current;\n\t              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n\t                                               stream[current + 1] === \"\\\"\")) {\n\t                  current += 2;\n\t              } else {\n\t                  current++;\n\t              }\n\t              this._current = current;\n\t          }\n\t          this._current++;\n\t          return JSON.parse(stream.slice(start, this._current));\n\t      },\n\n\t      _consumeRawStringLiteral: function(stream) {\n\t          var start = this._current;\n\t          this._current++;\n\t          var maxLength = stream.length;\n\t          while (stream[this._current] !== \"'\" && this._current < maxLength) {\n\t              // You can escape a single quote and you can escape an escape.\n\t              var current = this._current;\n\t              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n\t                                               stream[current + 1] === \"'\")) {\n\t                  current += 2;\n\t              } else {\n\t                  current++;\n\t              }\n\t              this._current = current;\n\t          }\n\t          this._current++;\n\t          var literal = stream.slice(start + 1, this._current - 1);\n\t          return literal.replace(\"\\\\'\", \"'\");\n\t      },\n\n\t      _consumeNumber: function(stream) {\n\t          var start = this._current;\n\t          this._current++;\n\t          var maxLength = stream.length;\n\t          while (isNum(stream[this._current]) && this._current < maxLength) {\n\t              this._current++;\n\t          }\n\t          var value = parseInt(stream.slice(start, this._current));\n\t          return {type: TOK_NUMBER, value: value, start: start};\n\t      },\n\n\t      _consumeLBracket: function(stream) {\n\t          var start = this._current;\n\t          this._current++;\n\t          if (stream[this._current] === \"?\") {\n\t              this._current++;\n\t              return {type: TOK_FILTER, value: \"[?\", start: start};\n\t          } else if (stream[this._current] === \"]\") {\n\t              this._current++;\n\t              return {type: TOK_FLATTEN, value: \"[]\", start: start};\n\t          } else {\n\t              return {type: TOK_LBRACKET, value: \"[\", start: start};\n\t          }\n\t      },\n\n\t      _consumeOperator: function(stream) {\n\t          var start = this._current;\n\t          var startingChar = stream[start];\n\t          this._current++;\n\t          if (startingChar === \"!\") {\n\t              if (stream[this._current] === \"=\") {\n\t                  this._current++;\n\t                  return {type: TOK_NE, value: \"!=\", start: start};\n\t              } else {\n\t                return {type: TOK_NOT, value: \"!\", start: start};\n\t              }\n\t          } else if (startingChar === \"<\") {\n\t              if (stream[this._current] === \"=\") {\n\t                  this._current++;\n\t                  return {type: TOK_LTE, value: \"<=\", start: start};\n\t              } else {\n\t                  return {type: TOK_LT, value: \"<\", start: start};\n\t              }\n\t          } else if (startingChar === \">\") {\n\t              if (stream[this._current] === \"=\") {\n\t                  this._current++;\n\t                  return {type: TOK_GTE, value: \">=\", start: start};\n\t              } else {\n\t                  return {type: TOK_GT, value: \">\", start: start};\n\t              }\n\t          } else if (startingChar === \"=\") {\n\t              if (stream[this._current] === \"=\") {\n\t                  this._current++;\n\t                  return {type: TOK_EQ, value: \"==\", start: start};\n\t              }\n\t          }\n\t      },\n\n\t      _consumeLiteral: function(stream) {\n\t          this._current++;\n\t          var start = this._current;\n\t          var maxLength = stream.length;\n\t          var literal;\n\t          while(stream[this._current] !== \"`\" && this._current < maxLength) {\n\t              // You can escape a literal char or you can escape the escape.\n\t              var current = this._current;\n\t              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n\t                                               stream[current + 1] === \"`\")) {\n\t                  current += 2;\n\t              } else {\n\t                  current++;\n\t              }\n\t              this._current = current;\n\t          }\n\t          var literalString = trimLeft(stream.slice(start, this._current));\n\t          literalString = literalString.replace(\"\\\\`\", \"`\");\n\t          if (this._looksLikeJSON(literalString)) {\n\t              literal = JSON.parse(literalString);\n\t          } else {\n\t              // Try to JSON parse it as \"<literal>\"\n\t              literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n\t          }\n\t          // +1 gets us to the ending \"`\", +1 to move on to the next char.\n\t          this._current++;\n\t          return literal;\n\t      },\n\n\t      _looksLikeJSON: function(literalString) {\n\t          var startingChars = \"[{\\\"\";\n\t          var jsonLiterals = [\"true\", \"false\", \"null\"];\n\t          var numberLooking = \"-0123456789\";\n\n\t          if (literalString === \"\") {\n\t              return false;\n\t          } else if (startingChars.indexOf(literalString[0]) >= 0) {\n\t              return true;\n\t          } else if (jsonLiterals.indexOf(literalString) >= 0) {\n\t              return true;\n\t          } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n\t              try {\n\t                  JSON.parse(literalString);\n\t                  return true;\n\t              } catch (ex) {\n\t                  return false;\n\t              }\n\t          } else {\n\t              return false;\n\t          }\n\t      }\n\t  };\n\n\t      var bindingPower = {};\n\t      bindingPower[TOK_EOF] = 0;\n\t      bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n\t      bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n\t      bindingPower[TOK_RBRACKET] = 0;\n\t      bindingPower[TOK_RPAREN] = 0;\n\t      bindingPower[TOK_COMMA] = 0;\n\t      bindingPower[TOK_RBRACE] = 0;\n\t      bindingPower[TOK_NUMBER] = 0;\n\t      bindingPower[TOK_CURRENT] = 0;\n\t      bindingPower[TOK_EXPREF] = 0;\n\t      bindingPower[TOK_PIPE] = 1;\n\t      bindingPower[TOK_OR] = 2;\n\t      bindingPower[TOK_AND] = 3;\n\t      bindingPower[TOK_EQ] = 5;\n\t      bindingPower[TOK_GT] = 5;\n\t      bindingPower[TOK_LT] = 5;\n\t      bindingPower[TOK_GTE] = 5;\n\t      bindingPower[TOK_LTE] = 5;\n\t      bindingPower[TOK_NE] = 5;\n\t      bindingPower[TOK_FLATTEN] = 9;\n\t      bindingPower[TOK_STAR] = 20;\n\t      bindingPower[TOK_FILTER] = 21;\n\t      bindingPower[TOK_DOT] = 40;\n\t      bindingPower[TOK_NOT] = 45;\n\t      bindingPower[TOK_LBRACE] = 50;\n\t      bindingPower[TOK_LBRACKET] = 55;\n\t      bindingPower[TOK_LPAREN] = 60;\n\n\t  function Parser() {\n\t  }\n\n\t  Parser.prototype = {\n\t      parse: function(expression) {\n\t          this._loadTokens(expression);\n\t          this.index = 0;\n\t          var ast = this.expression(0);\n\t          if (this._lookahead(0) !== TOK_EOF) {\n\t              var t = this._lookaheadToken(0);\n\t              var error = new Error(\n\t                  \"Unexpected token type: \" + t.type + \", value: \" + t.value);\n\t              error.name = \"ParserError\";\n\t              throw error;\n\t          }\n\t          return ast;\n\t      },\n\n\t      _loadTokens: function(expression) {\n\t          var lexer = new Lexer();\n\t          var tokens = lexer.tokenize(expression);\n\t          tokens.push({type: TOK_EOF, value: \"\", start: expression.length});\n\t          this.tokens = tokens;\n\t      },\n\n\t      expression: function(rbp) {\n\t          var leftToken = this._lookaheadToken(0);\n\t          this._advance();\n\t          var left = this.nud(leftToken);\n\t          var currentToken = this._lookahead(0);\n\t          while (rbp < bindingPower[currentToken]) {\n\t              this._advance();\n\t              left = this.led(currentToken, left);\n\t              currentToken = this._lookahead(0);\n\t          }\n\t          return left;\n\t      },\n\n\t      _lookahead: function(number) {\n\t          return this.tokens[this.index + number].type;\n\t      },\n\n\t      _lookaheadToken: function(number) {\n\t          return this.tokens[this.index + number];\n\t      },\n\n\t      _advance: function() {\n\t          this.index++;\n\t      },\n\n\t      nud: function(token) {\n\t        var left;\n\t        var right;\n\t        var expression;\n\t        switch (token.type) {\n\t          case TOK_LITERAL:\n\t            return {type: \"Literal\", value: token.value};\n\t          case TOK_UNQUOTEDIDENTIFIER:\n\t            return {type: \"Field\", name: token.value};\n\t          case TOK_QUOTEDIDENTIFIER:\n\t            var node = {type: \"Field\", name: token.value};\n\t            if (this._lookahead(0) === TOK_LPAREN) {\n\t                throw new Error(\"Quoted identifier not allowed for function names.\");\n\t            } else {\n\t                return node;\n\t            }\n\t            break;\n\t          case TOK_NOT:\n\t            right = this.expression(bindingPower.Not);\n\t            return {type: \"NotExpression\", children: [right]};\n\t          case TOK_STAR:\n\t            left = {type: \"Identity\"};\n\t            right = null;\n\t            if (this._lookahead(0) === TOK_RBRACKET) {\n\t                // This can happen in a multiselect,\n\t                // [a, b, *]\n\t                right = {type: \"Identity\"};\n\t            } else {\n\t                right = this._parseProjectionRHS(bindingPower.Star);\n\t            }\n\t            return {type: \"ValueProjection\", children: [left, right]};\n\t          case TOK_FILTER:\n\t            return this.led(token.type, {type: \"Identity\"});\n\t          case TOK_LBRACE:\n\t            return this._parseMultiselectHash();\n\t          case TOK_FLATTEN:\n\t            left = {type: TOK_FLATTEN, children: [{type: \"Identity\"}]};\n\t            right = this._parseProjectionRHS(bindingPower.Flatten);\n\t            return {type: \"Projection\", children: [left, right]};\n\t          case TOK_LBRACKET:\n\t            if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n\t                right = this._parseIndexExpression();\n\t                return this._projectIfSlice({type: \"Identity\"}, right);\n\t            } else if (this._lookahead(0) === TOK_STAR &&\n\t                       this._lookahead(1) === TOK_RBRACKET) {\n\t                this._advance();\n\t                this._advance();\n\t                right = this._parseProjectionRHS(bindingPower.Star);\n\t                return {type: \"Projection\",\n\t                        children: [{type: \"Identity\"}, right]};\n\t            } else {\n\t                return this._parseMultiselectList();\n\t            }\n\t            break;\n\t          case TOK_CURRENT:\n\t            return {type: TOK_CURRENT};\n\t          case TOK_EXPREF:\n\t            expression = this.expression(bindingPower.Expref);\n\t            return {type: \"ExpressionReference\", children: [expression]};\n\t          case TOK_LPAREN:\n\t            var args = [];\n\t            while (this._lookahead(0) !== TOK_RPAREN) {\n\t              if (this._lookahead(0) === TOK_CURRENT) {\n\t                expression = {type: TOK_CURRENT};\n\t                this._advance();\n\t              } else {\n\t                expression = this.expression(0);\n\t              }\n\t              args.push(expression);\n\t            }\n\t            this._match(TOK_RPAREN);\n\t            return args[0];\n\t          default:\n\t            this._errorToken(token);\n\t        }\n\t      },\n\n\t      led: function(tokenName, left) {\n\t        var right;\n\t        switch(tokenName) {\n\t          case TOK_DOT:\n\t            var rbp = bindingPower.Dot;\n\t            if (this._lookahead(0) !== TOK_STAR) {\n\t                right = this._parseDotRHS(rbp);\n\t                return {type: \"Subexpression\", children: [left, right]};\n\t            } else {\n\t                // Creating a projection.\n\t                this._advance();\n\t                right = this._parseProjectionRHS(rbp);\n\t                return {type: \"ValueProjection\", children: [left, right]};\n\t            }\n\t            break;\n\t          case TOK_PIPE:\n\t            right = this.expression(bindingPower.Pipe);\n\t            return {type: TOK_PIPE, children: [left, right]};\n\t          case TOK_OR:\n\t            right = this.expression(bindingPower.Or);\n\t            return {type: \"OrExpression\", children: [left, right]};\n\t          case TOK_AND:\n\t            right = this.expression(bindingPower.And);\n\t            return {type: \"AndExpression\", children: [left, right]};\n\t          case TOK_LPAREN:\n\t            var name = left.name;\n\t            var args = [];\n\t            var expression, node;\n\t            while (this._lookahead(0) !== TOK_RPAREN) {\n\t              if (this._lookahead(0) === TOK_CURRENT) {\n\t                expression = {type: TOK_CURRENT};\n\t                this._advance();\n\t              } else {\n\t                expression = this.expression(0);\n\t              }\n\t              if (this._lookahead(0) === TOK_COMMA) {\n\t                this._match(TOK_COMMA);\n\t              }\n\t              args.push(expression);\n\t            }\n\t            this._match(TOK_RPAREN);\n\t            node = {type: \"Function\", name: name, children: args};\n\t            return node;\n\t          case TOK_FILTER:\n\t            var condition = this.expression(0);\n\t            this._match(TOK_RBRACKET);\n\t            if (this._lookahead(0) === TOK_FLATTEN) {\n\t              right = {type: \"Identity\"};\n\t            } else {\n\t              right = this._parseProjectionRHS(bindingPower.Filter);\n\t            }\n\t            return {type: \"FilterProjection\", children: [left, right, condition]};\n\t          case TOK_FLATTEN:\n\t            var leftNode = {type: TOK_FLATTEN, children: [left]};\n\t            var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n\t            return {type: \"Projection\", children: [leftNode, rightNode]};\n\t          case TOK_EQ:\n\t          case TOK_NE:\n\t          case TOK_GT:\n\t          case TOK_GTE:\n\t          case TOK_LT:\n\t          case TOK_LTE:\n\t            return this._parseComparator(left, tokenName);\n\t          case TOK_LBRACKET:\n\t            var token = this._lookaheadToken(0);\n\t            if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n\t                right = this._parseIndexExpression();\n\t                return this._projectIfSlice(left, right);\n\t            } else {\n\t                this._match(TOK_STAR);\n\t                this._match(TOK_RBRACKET);\n\t                right = this._parseProjectionRHS(bindingPower.Star);\n\t                return {type: \"Projection\", children: [left, right]};\n\t            }\n\t            break;\n\t          default:\n\t            this._errorToken(this._lookaheadToken(0));\n\t        }\n\t      },\n\n\t      _match: function(tokenType) {\n\t          if (this._lookahead(0) === tokenType) {\n\t              this._advance();\n\t          } else {\n\t              var t = this._lookaheadToken(0);\n\t              var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n\t              error.name = \"ParserError\";\n\t              throw error;\n\t          }\n\t      },\n\n\t      _errorToken: function(token) {\n\t          var error = new Error(\"Invalid token (\" +\n\t                                token.type + \"): \\\"\" +\n\t                                token.value + \"\\\"\");\n\t          error.name = \"ParserError\";\n\t          throw error;\n\t      },\n\n\n\t      _parseIndexExpression: function() {\n\t          if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n\t              return this._parseSliceExpression();\n\t          } else {\n\t              var node = {\n\t                  type: \"Index\",\n\t                  value: this._lookaheadToken(0).value};\n\t              this._advance();\n\t              this._match(TOK_RBRACKET);\n\t              return node;\n\t          }\n\t      },\n\n\t      _projectIfSlice: function(left, right) {\n\t          var indexExpr = {type: \"IndexExpression\", children: [left, right]};\n\t          if (right.type === \"Slice\") {\n\t              return {\n\t                  type: \"Projection\",\n\t                  children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n\t              };\n\t          } else {\n\t              return indexExpr;\n\t          }\n\t      },\n\n\t      _parseSliceExpression: function() {\n\t          // [start:end:step] where each part is optional, as well as the last\n\t          // colon.\n\t          var parts = [null, null, null];\n\t          var index = 0;\n\t          var currentToken = this._lookahead(0);\n\t          while (currentToken !== TOK_RBRACKET && index < 3) {\n\t              if (currentToken === TOK_COLON) {\n\t                  index++;\n\t                  this._advance();\n\t              } else if (currentToken === TOK_NUMBER) {\n\t                  parts[index] = this._lookaheadToken(0).value;\n\t                  this._advance();\n\t              } else {\n\t                  var t = this._lookahead(0);\n\t                  var error = new Error(\"Syntax error, unexpected token: \" +\n\t                                        t.value + \"(\" + t.type + \")\");\n\t                  error.name = \"Parsererror\";\n\t                  throw error;\n\t              }\n\t              currentToken = this._lookahead(0);\n\t          }\n\t          this._match(TOK_RBRACKET);\n\t          return {\n\t              type: \"Slice\",\n\t              children: parts\n\t          };\n\t      },\n\n\t      _parseComparator: function(left, comparator) {\n\t        var right = this.expression(bindingPower[comparator]);\n\t        return {type: \"Comparator\", name: comparator, children: [left, right]};\n\t      },\n\n\t      _parseDotRHS: function(rbp) {\n\t          var lookahead = this._lookahead(0);\n\t          var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n\t          if (exprTokens.indexOf(lookahead) >= 0) {\n\t              return this.expression(rbp);\n\t          } else if (lookahead === TOK_LBRACKET) {\n\t              this._match(TOK_LBRACKET);\n\t              return this._parseMultiselectList();\n\t          } else if (lookahead === TOK_LBRACE) {\n\t              this._match(TOK_LBRACE);\n\t              return this._parseMultiselectHash();\n\t          }\n\t      },\n\n\t      _parseProjectionRHS: function(rbp) {\n\t          var right;\n\t          if (bindingPower[this._lookahead(0)] < 10) {\n\t              right = {type: \"Identity\"};\n\t          } else if (this._lookahead(0) === TOK_LBRACKET) {\n\t              right = this.expression(rbp);\n\t          } else if (this._lookahead(0) === TOK_FILTER) {\n\t              right = this.expression(rbp);\n\t          } else if (this._lookahead(0) === TOK_DOT) {\n\t              this._match(TOK_DOT);\n\t              right = this._parseDotRHS(rbp);\n\t          } else {\n\t              var t = this._lookaheadToken(0);\n\t              var error = new Error(\"Sytanx error, unexpected token: \" +\n\t                                    t.value + \"(\" + t.type + \")\");\n\t              error.name = \"ParserError\";\n\t              throw error;\n\t          }\n\t          return right;\n\t      },\n\n\t      _parseMultiselectList: function() {\n\t          var expressions = [];\n\t          while (this._lookahead(0) !== TOK_RBRACKET) {\n\t              var expression = this.expression(0);\n\t              expressions.push(expression);\n\t              if (this._lookahead(0) === TOK_COMMA) {\n\t                  this._match(TOK_COMMA);\n\t                  if (this._lookahead(0) === TOK_RBRACKET) {\n\t                    throw new Error(\"Unexpected token Rbracket\");\n\t                  }\n\t              }\n\t          }\n\t          this._match(TOK_RBRACKET);\n\t          return {type: \"MultiSelectList\", children: expressions};\n\t      },\n\n\t      _parseMultiselectHash: function() {\n\t        var pairs = [];\n\t        var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n\t        var keyToken, keyName, value, node;\n\t        for (;;) {\n\t          keyToken = this._lookaheadToken(0);\n\t          if (identifierTypes.indexOf(keyToken.type) < 0) {\n\t            throw new Error(\"Expecting an identifier token, got: \" +\n\t                            keyToken.type);\n\t          }\n\t          keyName = keyToken.value;\n\t          this._advance();\n\t          this._match(TOK_COLON);\n\t          value = this.expression(0);\n\t          node = {type: \"KeyValuePair\", name: keyName, value: value};\n\t          pairs.push(node);\n\t          if (this._lookahead(0) === TOK_COMMA) {\n\t            this._match(TOK_COMMA);\n\t          } else if (this._lookahead(0) === TOK_RBRACE) {\n\t            this._match(TOK_RBRACE);\n\t            break;\n\t          }\n\t        }\n\t        return {type: \"MultiSelectHash\", children: pairs};\n\t      }\n\t  };\n\n\n\t  function TreeInterpreter(runtime) {\n\t    this.runtime = runtime;\n\t  }\n\n\t  TreeInterpreter.prototype = {\n\t      search: function(node, value) {\n\t          return this.visit(node, value);\n\t      },\n\n\t      visit: function(node, value) {\n\t          var matched, current, result, first, second, field, left, right, collected, i;\n\t          switch (node.type) {\n\t            case \"Field\":\n\t              if (value === null ) {\n\t                  return null;\n\t              } else if (isObject(value)) {\n\t                  field = value[node.name];\n\t                  if (field === undefined) {\n\t                      return null;\n\t                  } else {\n\t                      return field;\n\t                  }\n\t              } else {\n\t                return null;\n\t              }\n\t              break;\n\t            case \"Subexpression\":\n\t              result = this.visit(node.children[0], value);\n\t              for (i = 1; i < node.children.length; i++) {\n\t                  result = this.visit(node.children[1], result);\n\t                  if (result === null) {\n\t                      return null;\n\t                  }\n\t              }\n\t              return result;\n\t            case \"IndexExpression\":\n\t              left = this.visit(node.children[0], value);\n\t              right = this.visit(node.children[1], left);\n\t              return right;\n\t            case \"Index\":\n\t              if (!isArray(value)) {\n\t                return null;\n\t              }\n\t              var index = node.value;\n\t              if (index < 0) {\n\t                index = value.length + index;\n\t              }\n\t              result = value[index];\n\t              if (result === undefined) {\n\t                result = null;\n\t              }\n\t              return result;\n\t            case \"Slice\":\n\t              if (!isArray(value)) {\n\t                return null;\n\t              }\n\t              var sliceParams = node.children.slice(0);\n\t              var computed = this.computeSliceParams(value.length, sliceParams);\n\t              var start = computed[0];\n\t              var stop = computed[1];\n\t              var step = computed[2];\n\t              result = [];\n\t              if (step > 0) {\n\t                  for (i = start; i < stop; i += step) {\n\t                      result.push(value[i]);\n\t                  }\n\t              } else {\n\t                  for (i = start; i > stop; i += step) {\n\t                      result.push(value[i]);\n\t                  }\n\t              }\n\t              return result;\n\t            case \"Projection\":\n\t              // Evaluate left child.\n\t              var base = this.visit(node.children[0], value);\n\t              if (!isArray(base)) {\n\t                return null;\n\t              }\n\t              collected = [];\n\t              for (i = 0; i < base.length; i++) {\n\t                current = this.visit(node.children[1], base[i]);\n\t                if (current !== null) {\n\t                  collected.push(current);\n\t                }\n\t              }\n\t              return collected;\n\t            case \"ValueProjection\":\n\t              // Evaluate left child.\n\t              base = this.visit(node.children[0], value);\n\t              if (!isObject(base)) {\n\t                return null;\n\t              }\n\t              collected = [];\n\t              var values = objValues(base);\n\t              for (i = 0; i < values.length; i++) {\n\t                current = this.visit(node.children[1], values[i]);\n\t                if (current !== null) {\n\t                  collected.push(current);\n\t                }\n\t              }\n\t              return collected;\n\t            case \"FilterProjection\":\n\t              base = this.visit(node.children[0], value);\n\t              if (!isArray(base)) {\n\t                return null;\n\t              }\n\t              var filtered = [];\n\t              var finalResults = [];\n\t              for (i = 0; i < base.length; i++) {\n\t                matched = this.visit(node.children[2], base[i]);\n\t                if (!isFalse(matched)) {\n\t                  filtered.push(base[i]);\n\t                }\n\t              }\n\t              for (var j = 0; j < filtered.length; j++) {\n\t                current = this.visit(node.children[1], filtered[j]);\n\t                if (current !== null) {\n\t                  finalResults.push(current);\n\t                }\n\t              }\n\t              return finalResults;\n\t            case \"Comparator\":\n\t              first = this.visit(node.children[0], value);\n\t              second = this.visit(node.children[1], value);\n\t              switch(node.name) {\n\t                case TOK_EQ:\n\t                  result = strictDeepEqual(first, second);\n\t                  break;\n\t                case TOK_NE:\n\t                  result = !strictDeepEqual(first, second);\n\t                  break;\n\t                case TOK_GT:\n\t                  result = first > second;\n\t                  break;\n\t                case TOK_GTE:\n\t                  result = first >= second;\n\t                  break;\n\t                case TOK_LT:\n\t                  result = first < second;\n\t                  break;\n\t                case TOK_LTE:\n\t                  result = first <= second;\n\t                  break;\n\t                default:\n\t                  throw new Error(\"Unknown comparator: \" + node.name);\n\t              }\n\t              return result;\n\t            case TOK_FLATTEN:\n\t              var original = this.visit(node.children[0], value);\n\t              if (!isArray(original)) {\n\t                return null;\n\t              }\n\t              var merged = [];\n\t              for (i = 0; i < original.length; i++) {\n\t                current = original[i];\n\t                if (isArray(current)) {\n\t                  merged.push.apply(merged, current);\n\t                } else {\n\t                  merged.push(current);\n\t                }\n\t              }\n\t              return merged;\n\t            case \"Identity\":\n\t              return value;\n\t            case \"MultiSelectList\":\n\t              if (value === null) {\n\t                return null;\n\t              }\n\t              collected = [];\n\t              for (i = 0; i < node.children.length; i++) {\n\t                  collected.push(this.visit(node.children[i], value));\n\t              }\n\t              return collected;\n\t            case \"MultiSelectHash\":\n\t              if (value === null) {\n\t                return null;\n\t              }\n\t              collected = {};\n\t              var child;\n\t              for (i = 0; i < node.children.length; i++) {\n\t                child = node.children[i];\n\t                collected[child.name] = this.visit(child.value, value);\n\t              }\n\t              return collected;\n\t            case \"OrExpression\":\n\t              matched = this.visit(node.children[0], value);\n\t              if (isFalse(matched)) {\n\t                  matched = this.visit(node.children[1], value);\n\t              }\n\t              return matched;\n\t            case \"AndExpression\":\n\t              first = this.visit(node.children[0], value);\n\n\t              if (isFalse(first) === true) {\n\t                return first;\n\t              }\n\t              return this.visit(node.children[1], value);\n\t            case \"NotExpression\":\n\t              first = this.visit(node.children[0], value);\n\t              return isFalse(first);\n\t            case \"Literal\":\n\t              return node.value;\n\t            case TOK_PIPE:\n\t              left = this.visit(node.children[0], value);\n\t              return this.visit(node.children[1], left);\n\t            case TOK_CURRENT:\n\t              return value;\n\t            case \"Function\":\n\t              var resolvedArgs = [];\n\t              for (i = 0; i < node.children.length; i++) {\n\t                  resolvedArgs.push(this.visit(node.children[i], value));\n\t              }\n\t              return this.runtime.callFunction(node.name, resolvedArgs);\n\t            case \"ExpressionReference\":\n\t              var refNode = node.children[0];\n\t              // Tag the node with a specific attribute so the type\n\t              // checker verify the type.\n\t              refNode.jmespathType = TOK_EXPREF;\n\t              return refNode;\n\t            default:\n\t              throw new Error(\"Unknown node type: \" + node.type);\n\t          }\n\t      },\n\n\t      computeSliceParams: function(arrayLength, sliceParams) {\n\t        var start = sliceParams[0];\n\t        var stop = sliceParams[1];\n\t        var step = sliceParams[2];\n\t        var computed = [null, null, null];\n\t        if (step === null) {\n\t          step = 1;\n\t        } else if (step === 0) {\n\t          var error = new Error(\"Invalid slice, step cannot be 0\");\n\t          error.name = \"RuntimeError\";\n\t          throw error;\n\t        }\n\t        var stepValueNegative = step < 0 ? true : false;\n\n\t        if (start === null) {\n\t            start = stepValueNegative ? arrayLength - 1 : 0;\n\t        } else {\n\t            start = this.capSliceRange(arrayLength, start, step);\n\t        }\n\n\t        if (stop === null) {\n\t            stop = stepValueNegative ? -1 : arrayLength;\n\t        } else {\n\t            stop = this.capSliceRange(arrayLength, stop, step);\n\t        }\n\t        computed[0] = start;\n\t        computed[1] = stop;\n\t        computed[2] = step;\n\t        return computed;\n\t      },\n\n\t      capSliceRange: function(arrayLength, actualValue, step) {\n\t          if (actualValue < 0) {\n\t              actualValue += arrayLength;\n\t              if (actualValue < 0) {\n\t                  actualValue = step < 0 ? -1 : 0;\n\t              }\n\t          } else if (actualValue >= arrayLength) {\n\t              actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n\t          }\n\t          return actualValue;\n\t      }\n\n\t  };\n\n\t  function Runtime(interpreter) {\n\t    this._interpreter = interpreter;\n\t    this.functionTable = {\n\t        // name: [function, <signature>]\n\t        // The <signature> can be:\n\t        //\n\t        // {\n\t        //   args: [[type1, type2], [type1, type2]],\n\t        //   variadic: true|false\n\t        // }\n\t        //\n\t        // Each arg in the arg list is a list of valid types\n\t        // (if the function is overloaded and supports multiple\n\t        // types.  If the type is \"any\" then no type checking\n\t        // occurs on the argument.  Variadic is optional\n\t        // and if not provided is assumed to be false.\n\t        abs: {_func: this._functionAbs, _signature: [{types: [TYPE_NUMBER]}]},\n\t        avg: {_func: this._functionAvg, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n\t        ceil: {_func: this._functionCeil, _signature: [{types: [TYPE_NUMBER]}]},\n\t        contains: {\n\t            _func: this._functionContains,\n\t            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]},\n\t                        {types: [TYPE_ANY]}]},\n\t        \"ends_with\": {\n\t            _func: this._functionEndsWith,\n\t            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n\t        floor: {_func: this._functionFloor, _signature: [{types: [TYPE_NUMBER]}]},\n\t        length: {\n\t            _func: this._functionLength,\n\t            _signature: [{types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]}]},\n\t        map: {\n\t            _func: this._functionMap,\n\t            _signature: [{types: [TYPE_EXPREF]}, {types: [TYPE_ARRAY]}]},\n\t        max: {\n\t            _func: this._functionMax,\n\t            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n\t        \"merge\": {\n\t            _func: this._functionMerge,\n\t            _signature: [{types: [TYPE_OBJECT], variadic: true}]\n\t        },\n\t        \"max_by\": {\n\t          _func: this._functionMaxBy,\n\t          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n\t        },\n\t        sum: {_func: this._functionSum, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n\t        \"starts_with\": {\n\t            _func: this._functionStartsWith,\n\t            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n\t        min: {\n\t            _func: this._functionMin,\n\t            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n\t        \"min_by\": {\n\t          _func: this._functionMinBy,\n\t          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n\t        },\n\t        type: {_func: this._functionType, _signature: [{types: [TYPE_ANY]}]},\n\t        keys: {_func: this._functionKeys, _signature: [{types: [TYPE_OBJECT]}]},\n\t        values: {_func: this._functionValues, _signature: [{types: [TYPE_OBJECT]}]},\n\t        sort: {_func: this._functionSort, _signature: [{types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]}]},\n\t        \"sort_by\": {\n\t          _func: this._functionSortBy,\n\t          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n\t        },\n\t        join: {\n\t            _func: this._functionJoin,\n\t            _signature: [\n\t                {types: [TYPE_STRING]},\n\t                {types: [TYPE_ARRAY_STRING]}\n\t            ]\n\t        },\n\t        reverse: {\n\t            _func: this._functionReverse,\n\t            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]}]},\n\t        \"to_array\": {_func: this._functionToArray, _signature: [{types: [TYPE_ANY]}]},\n\t        \"to_string\": {_func: this._functionToString, _signature: [{types: [TYPE_ANY]}]},\n\t        \"to_number\": {_func: this._functionToNumber, _signature: [{types: [TYPE_ANY]}]},\n\t        \"not_null\": {\n\t            _func: this._functionNotNull,\n\t            _signature: [{types: [TYPE_ANY], variadic: true}]\n\t        }\n\t    };\n\t  }\n\n\t  Runtime.prototype = {\n\t    callFunction: function(name, resolvedArgs) {\n\t      var functionEntry = this.functionTable[name];\n\t      if (functionEntry === undefined) {\n\t          throw new Error(\"Unknown function: \" + name + \"()\");\n\t      }\n\t      this._validateArgs(name, resolvedArgs, functionEntry._signature);\n\t      return functionEntry._func.call(this, resolvedArgs);\n\t    },\n\n\t    _validateArgs: function(name, args, signature) {\n\t        // Validating the args requires validating\n\t        // the correct arity and the correct type of each arg.\n\t        // If the last argument is declared as variadic, then we need\n\t        // a minimum number of args to be required.  Otherwise it has to\n\t        // be an exact amount.\n\t        var pluralized;\n\t        if (signature[signature.length - 1].variadic) {\n\t            if (args.length < signature.length) {\n\t                pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n\t                throw new Error(\"ArgumentError: \" + name + \"() \" +\n\t                                \"takes at least\" + signature.length + pluralized +\n\t                                \" but received \" + args.length);\n\t            }\n\t        } else if (args.length !== signature.length) {\n\t            pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n\t            throw new Error(\"ArgumentError: \" + name + \"() \" +\n\t                            \"takes \" + signature.length + pluralized +\n\t                            \" but received \" + args.length);\n\t        }\n\t        var currentSpec;\n\t        var actualType;\n\t        var typeMatched;\n\t        for (var i = 0; i < signature.length; i++) {\n\t            typeMatched = false;\n\t            currentSpec = signature[i].types;\n\t            actualType = this._getTypeName(args[i]);\n\t            for (var j = 0; j < currentSpec.length; j++) {\n\t                if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n\t                    typeMatched = true;\n\t                    break;\n\t                }\n\t            }\n\t            if (!typeMatched) {\n\t                throw new Error(\"TypeError: \" + name + \"() \" +\n\t                                \"expected argument \" + (i + 1) +\n\t                                \" to be type \" + currentSpec +\n\t                                \" but received type \" + actualType +\n\t                                \" instead.\");\n\t            }\n\t        }\n\t    },\n\n\t    _typeMatches: function(actual, expected, argValue) {\n\t        if (expected === TYPE_ANY) {\n\t            return true;\n\t        }\n\t        if (expected === TYPE_ARRAY_STRING ||\n\t            expected === TYPE_ARRAY_NUMBER ||\n\t            expected === TYPE_ARRAY) {\n\t            // The expected type can either just be array,\n\t            // or it can require a specific subtype (array of numbers).\n\t            //\n\t            // The simplest case is if \"array\" with no subtype is specified.\n\t            if (expected === TYPE_ARRAY) {\n\t                return actual === TYPE_ARRAY;\n\t            } else if (actual === TYPE_ARRAY) {\n\t                // Otherwise we need to check subtypes.\n\t                // I think this has potential to be improved.\n\t                var subtype;\n\t                if (expected === TYPE_ARRAY_NUMBER) {\n\t                  subtype = TYPE_NUMBER;\n\t                } else if (expected === TYPE_ARRAY_STRING) {\n\t                  subtype = TYPE_STRING;\n\t                }\n\t                for (var i = 0; i < argValue.length; i++) {\n\t                    if (!this._typeMatches(\n\t                            this._getTypeName(argValue[i]), subtype,\n\t                                             argValue[i])) {\n\t                        return false;\n\t                    }\n\t                }\n\t                return true;\n\t            }\n\t        } else {\n\t            return actual === expected;\n\t        }\n\t    },\n\t    _getTypeName: function(obj) {\n\t        switch (Object.prototype.toString.call(obj)) {\n\t            case \"[object String]\":\n\t              return TYPE_STRING;\n\t            case \"[object Number]\":\n\t              return TYPE_NUMBER;\n\t            case \"[object Array]\":\n\t              return TYPE_ARRAY;\n\t            case \"[object Boolean]\":\n\t              return TYPE_BOOLEAN;\n\t            case \"[object Null]\":\n\t              return TYPE_NULL;\n\t            case \"[object Object]\":\n\t              // Check if it's an expref.  If it has, it's been\n\t              // tagged with a jmespathType attr of 'Expref';\n\t              if (obj.jmespathType === TOK_EXPREF) {\n\t                return TYPE_EXPREF;\n\t              } else {\n\t                return TYPE_OBJECT;\n\t              }\n\t        }\n\t    },\n\n\t    _functionStartsWith: function(resolvedArgs) {\n\t        return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n\t    },\n\n\t    _functionEndsWith: function(resolvedArgs) {\n\t        var searchStr = resolvedArgs[0];\n\t        var suffix = resolvedArgs[1];\n\t        return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n\t    },\n\n\t    _functionReverse: function(resolvedArgs) {\n\t        var typeName = this._getTypeName(resolvedArgs[0]);\n\t        if (typeName === TYPE_STRING) {\n\t          var originalStr = resolvedArgs[0];\n\t          var reversedStr = \"\";\n\t          for (var i = originalStr.length - 1; i >= 0; i--) {\n\t              reversedStr += originalStr[i];\n\t          }\n\t          return reversedStr;\n\t        } else {\n\t          var reversedArray = resolvedArgs[0].slice(0);\n\t          reversedArray.reverse();\n\t          return reversedArray;\n\t        }\n\t    },\n\n\t    _functionAbs: function(resolvedArgs) {\n\t      return Math.abs(resolvedArgs[0]);\n\t    },\n\n\t    _functionCeil: function(resolvedArgs) {\n\t        return Math.ceil(resolvedArgs[0]);\n\t    },\n\n\t    _functionAvg: function(resolvedArgs) {\n\t        var sum = 0;\n\t        var inputArray = resolvedArgs[0];\n\t        for (var i = 0; i < inputArray.length; i++) {\n\t            sum += inputArray[i];\n\t        }\n\t        return sum / inputArray.length;\n\t    },\n\n\t    _functionContains: function(resolvedArgs) {\n\t        return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n\t    },\n\n\t    _functionFloor: function(resolvedArgs) {\n\t        return Math.floor(resolvedArgs[0]);\n\t    },\n\n\t    _functionLength: function(resolvedArgs) {\n\t       if (!isObject(resolvedArgs[0])) {\n\t         return resolvedArgs[0].length;\n\t       } else {\n\t         // As far as I can tell, there's no way to get the length\n\t         // of an object without O(n) iteration through the object.\n\t         return Object.keys(resolvedArgs[0]).length;\n\t       }\n\t    },\n\n\t    _functionMap: function(resolvedArgs) {\n\t      var mapped = [];\n\t      var interpreter = this._interpreter;\n\t      var exprefNode = resolvedArgs[0];\n\t      var elements = resolvedArgs[1];\n\t      for (var i = 0; i < elements.length; i++) {\n\t          mapped.push(interpreter.visit(exprefNode, elements[i]));\n\t      }\n\t      return mapped;\n\t    },\n\n\t    _functionMerge: function(resolvedArgs) {\n\t      var merged = {};\n\t      for (var i = 0; i < resolvedArgs.length; i++) {\n\t        var current = resolvedArgs[i];\n\t        for (var key in current) {\n\t          merged[key] = current[key];\n\t        }\n\t      }\n\t      return merged;\n\t    },\n\n\t    _functionMax: function(resolvedArgs) {\n\t      if (resolvedArgs[0].length > 0) {\n\t        var typeName = this._getTypeName(resolvedArgs[0][0]);\n\t        if (typeName === TYPE_NUMBER) {\n\t          return Math.max.apply(Math, resolvedArgs[0]);\n\t        } else {\n\t          var elements = resolvedArgs[0];\n\t          var maxElement = elements[0];\n\t          for (var i = 1; i < elements.length; i++) {\n\t              if (maxElement.localeCompare(elements[i]) < 0) {\n\t                  maxElement = elements[i];\n\t              }\n\t          }\n\t          return maxElement;\n\t        }\n\t      } else {\n\t          return null;\n\t      }\n\t    },\n\n\t    _functionMin: function(resolvedArgs) {\n\t      if (resolvedArgs[0].length > 0) {\n\t        var typeName = this._getTypeName(resolvedArgs[0][0]);\n\t        if (typeName === TYPE_NUMBER) {\n\t          return Math.min.apply(Math, resolvedArgs[0]);\n\t        } else {\n\t          var elements = resolvedArgs[0];\n\t          var minElement = elements[0];\n\t          for (var i = 1; i < elements.length; i++) {\n\t              if (elements[i].localeCompare(minElement) < 0) {\n\t                  minElement = elements[i];\n\t              }\n\t          }\n\t          return minElement;\n\t        }\n\t      } else {\n\t        return null;\n\t      }\n\t    },\n\n\t    _functionSum: function(resolvedArgs) {\n\t      var sum = 0;\n\t      var listToSum = resolvedArgs[0];\n\t      for (var i = 0; i < listToSum.length; i++) {\n\t        sum += listToSum[i];\n\t      }\n\t      return sum;\n\t    },\n\n\t    _functionType: function(resolvedArgs) {\n\t        switch (this._getTypeName(resolvedArgs[0])) {\n\t          case TYPE_NUMBER:\n\t            return \"number\";\n\t          case TYPE_STRING:\n\t            return \"string\";\n\t          case TYPE_ARRAY:\n\t            return \"array\";\n\t          case TYPE_OBJECT:\n\t            return \"object\";\n\t          case TYPE_BOOLEAN:\n\t            return \"boolean\";\n\t          case TYPE_EXPREF:\n\t            return \"expref\";\n\t          case TYPE_NULL:\n\t            return \"null\";\n\t        }\n\t    },\n\n\t    _functionKeys: function(resolvedArgs) {\n\t        return Object.keys(resolvedArgs[0]);\n\t    },\n\n\t    _functionValues: function(resolvedArgs) {\n\t        var obj = resolvedArgs[0];\n\t        var keys = Object.keys(obj);\n\t        var values = [];\n\t        for (var i = 0; i < keys.length; i++) {\n\t            values.push(obj[keys[i]]);\n\t        }\n\t        return values;\n\t    },\n\n\t    _functionJoin: function(resolvedArgs) {\n\t        var joinChar = resolvedArgs[0];\n\t        var listJoin = resolvedArgs[1];\n\t        return listJoin.join(joinChar);\n\t    },\n\n\t    _functionToArray: function(resolvedArgs) {\n\t        if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n\t            return resolvedArgs[0];\n\t        } else {\n\t            return [resolvedArgs[0]];\n\t        }\n\t    },\n\n\t    _functionToString: function(resolvedArgs) {\n\t        if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n\t            return resolvedArgs[0];\n\t        } else {\n\t            return JSON.stringify(resolvedArgs[0]);\n\t        }\n\t    },\n\n\t    _functionToNumber: function(resolvedArgs) {\n\t        var typeName = this._getTypeName(resolvedArgs[0]);\n\t        var convertedValue;\n\t        if (typeName === TYPE_NUMBER) {\n\t            return resolvedArgs[0];\n\t        } else if (typeName === TYPE_STRING) {\n\t            convertedValue = +resolvedArgs[0];\n\t            if (!isNaN(convertedValue)) {\n\t                return convertedValue;\n\t            }\n\t        }\n\t        return null;\n\t    },\n\n\t    _functionNotNull: function(resolvedArgs) {\n\t        for (var i = 0; i < resolvedArgs.length; i++) {\n\t            if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n\t                return resolvedArgs[i];\n\t            }\n\t        }\n\t        return null;\n\t    },\n\n\t    _functionSort: function(resolvedArgs) {\n\t        var sortedArray = resolvedArgs[0].slice(0);\n\t        sortedArray.sort();\n\t        return sortedArray;\n\t    },\n\n\t    _functionSortBy: function(resolvedArgs) {\n\t        var sortedArray = resolvedArgs[0].slice(0);\n\t        if (sortedArray.length === 0) {\n\t            return sortedArray;\n\t        }\n\t        var interpreter = this._interpreter;\n\t        var exprefNode = resolvedArgs[1];\n\t        var requiredType = this._getTypeName(\n\t            interpreter.visit(exprefNode, sortedArray[0]));\n\t        if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n\t            throw new Error(\"TypeError\");\n\t        }\n\t        var that = this;\n\t        // In order to get a stable sort out of an unstable\n\t        // sort algorithm, we decorate/sort/undecorate (DSU)\n\t        // by creating a new list of [index, element] pairs.\n\t        // In the cmp function, if the evaluated elements are\n\t        // equal, then the index will be used as the tiebreaker.\n\t        // After the decorated list has been sorted, it will be\n\t        // undecorated to extract the original elements.\n\t        var decorated = [];\n\t        for (var i = 0; i < sortedArray.length; i++) {\n\t          decorated.push([i, sortedArray[i]]);\n\t        }\n\t        decorated.sort(function(a, b) {\n\t          var exprA = interpreter.visit(exprefNode, a[1]);\n\t          var exprB = interpreter.visit(exprefNode, b[1]);\n\t          if (that._getTypeName(exprA) !== requiredType) {\n\t              throw new Error(\n\t                  \"TypeError: expected \" + requiredType + \", received \" +\n\t                  that._getTypeName(exprA));\n\t          } else if (that._getTypeName(exprB) !== requiredType) {\n\t              throw new Error(\n\t                  \"TypeError: expected \" + requiredType + \", received \" +\n\t                  that._getTypeName(exprB));\n\t          }\n\t          if (exprA > exprB) {\n\t            return 1;\n\t          } else if (exprA < exprB) {\n\t            return -1;\n\t          } else {\n\t            // If they're equal compare the items by their\n\t            // order to maintain relative order of equal keys\n\t            // (i.e. to get a stable sort).\n\t            return a[0] - b[0];\n\t          }\n\t        });\n\t        // Undecorate: extract out the original list elements.\n\t        for (var j = 0; j < decorated.length; j++) {\n\t          sortedArray[j] = decorated[j][1];\n\t        }\n\t        return sortedArray;\n\t    },\n\n\t    _functionMaxBy: function(resolvedArgs) {\n\t      var exprefNode = resolvedArgs[1];\n\t      var resolvedArray = resolvedArgs[0];\n\t      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n\t      var maxNumber = -Infinity;\n\t      var maxRecord;\n\t      var current;\n\t      for (var i = 0; i < resolvedArray.length; i++) {\n\t        current = keyFunction(resolvedArray[i]);\n\t        if (current > maxNumber) {\n\t          maxNumber = current;\n\t          maxRecord = resolvedArray[i];\n\t        }\n\t      }\n\t      return maxRecord;\n\t    },\n\n\t    _functionMinBy: function(resolvedArgs) {\n\t      var exprefNode = resolvedArgs[1];\n\t      var resolvedArray = resolvedArgs[0];\n\t      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n\t      var minNumber = Infinity;\n\t      var minRecord;\n\t      var current;\n\t      for (var i = 0; i < resolvedArray.length; i++) {\n\t        current = keyFunction(resolvedArray[i]);\n\t        if (current < minNumber) {\n\t          minNumber = current;\n\t          minRecord = resolvedArray[i];\n\t        }\n\t      }\n\t      return minRecord;\n\t    },\n\n\t    createKeyFunction: function(exprefNode, allowedTypes) {\n\t      var that = this;\n\t      var interpreter = this._interpreter;\n\t      var keyFunc = function(x) {\n\t        var current = interpreter.visit(exprefNode, x);\n\t        if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n\t          var msg = \"TypeError: expected one of \" + allowedTypes +\n\t                    \", received \" + that._getTypeName(current);\n\t          throw new Error(msg);\n\t        }\n\t        return current;\n\t      };\n\t      return keyFunc;\n\t    }\n\n\t  };\n\n\t  function compile(stream) {\n\t    var parser = new Parser();\n\t    var ast = parser.parse(stream);\n\t    return ast;\n\t  }\n\n\t  function tokenize(stream) {\n\t      var lexer = new Lexer();\n\t      return lexer.tokenize(stream);\n\t  }\n\n\t  function search(data, expression) {\n\t      var parser = new Parser();\n\t      // This needs to be improved.  Both the interpreter and runtime depend on\n\t      // each other.  The runtime needs the interpreter to support exprefs.\n\t      // There's likely a clean way to avoid the cyclic dependency.\n\t      var runtime = new Runtime();\n\t      var interpreter = new TreeInterpreter(runtime);\n\t      runtime._interpreter = interpreter;\n\t      var node = parser.parse(expression);\n\t      return interpreter.search(node, data);\n\t  }\n\n\t  exports.tokenize = tokenize;\n\t  exports.compile = compile;\n\t  exports.search = search;\n\t  exports.strictDeepEqual = strictDeepEqual;\n\t})( false ? this.jmespath = {} : exports);\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t/*\r\n\t * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license\r\n\t * Author: Jim Palmer (based on chunking idea from Dave Koelle)\r\n\t */\r\n\t/*jshint unused:false */\r\n\tmodule.exports = function naturalSort (a, b) {\r\n\t\t\"use strict\";\r\n\t\tvar re = /(^([+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?$|^0x[0-9a-f]+$|\\d+)/gi,\r\n\t\t\tsre = /(^[ ]*|[ ]*$)/g,\r\n\t\t\tdre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,\r\n\t\t\thre = /^0x[0-9a-f]+$/i,\r\n\t\t\tore = /^0/,\r\n\t\t\ti = function(s) { return naturalSort.insensitive && ('' + s).toLowerCase() || '' + s; },\r\n\t\t\t// convert all to strings strip whitespace\r\n\t\t\tx = i(a).replace(sre, '') || '',\r\n\t\t\ty = i(b).replace(sre, '') || '',\r\n\t\t\t// chunk/tokenize\r\n\t\t\txN = x.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\r\n\t\t\tyN = y.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\r\n\t\t\t// numeric, hex or date detection\r\n\t\t\txD = parseInt(x.match(hre), 16) || (xN.length !== 1 && x.match(dre) && Date.parse(x)),\r\n\t\t\tyD = parseInt(y.match(hre), 16) || xD && y.match(dre) && Date.parse(y) || null,\r\n\t\t\toFxNcL, oFyNcL;\r\n\t\t// first try and sort Hex codes or Dates\r\n\t\tif (yD) {\r\n\t\t\tif ( xD < yD ) { return -1; }\r\n\t\t\telse if ( xD > yD ) { return 1; }\r\n\t\t}\r\n\t\t// natural sorting through split numeric strings and default strings\r\n\t\tfor(var cLoc=0, numS=Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {\r\n\t\t\t// find floats not starting with '0', string or 0 if not defined (Clint Priest)\r\n\t\t\toFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc]) || xN[cLoc] || 0;\r\n\t\t\toFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc]) || yN[cLoc] || 0;\r\n\t\t\t// handle numeric vs string comparison - number < string - (Kyle Adams)\r\n\t\t\tif (isNaN(oFxNcL) !== isNaN(oFyNcL)) { return (isNaN(oFxNcL)) ? 1 : -1; }\r\n\t\t\t// rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'\r\n\t\t\telse if (typeof oFxNcL !== typeof oFyNcL) {\r\n\t\t\t\toFxNcL += '';\r\n\t\t\t\toFyNcL += '';\r\n\t\t\t}\r\n\t\t\tif (oFxNcL < oFyNcL) { return -1; }\r\n\t\t\tif (oFxNcL > oFyNcL) { return 1; }\r\n\t\t}\r\n\t\treturn 0;\r\n\t};\r\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar util = __webpack_require__(12);\n\tvar ContextMenu = __webpack_require__(10);\n\tvar translate = __webpack_require__(15).translate;\n\n\t/**\n\t * A factory function to create an AppendNode, which depends on a Node\n\t * @param {Node} Node\n\t */\n\tfunction appendNodeFactory(Node) {\n\t  /**\n\t   * @constructor AppendNode\n\t   * @extends Node\n\t   * @param {TreeEditor} editor\n\t   * Create a new AppendNode. This is a special node which is created at the\n\t   * end of the list with childs for an object or array\n\t   */\n\t  function AppendNode (editor) {\n\t    /** @type {TreeEditor} */\n\t    this.editor = editor;\n\t    this.dom = {};\n\t  }\n\n\t  AppendNode.prototype = new Node();\n\n\t  /**\n\t   * Return a table row with an append button.\n\t   * @return {Element} dom   TR element\n\t   */\n\t  AppendNode.prototype.getDom = function () {\n\t    // TODO: implement a new solution for the append node\n\t    var dom = this.dom;\n\n\t    if (dom.tr) {\n\t      return dom.tr;\n\t    }\n\n\t    this._updateEditability();\n\n\t    // a row for the append button\n\t    var trAppend = document.createElement('tr');\n\t    trAppend.className = 'jsoneditor-append';\n\t    trAppend.node = this;\n\t    dom.tr = trAppend;\n\n\t    // TODO: consistent naming\n\n\t    if (this.editor.options.mode === 'tree') {\n\t      // a cell for the dragarea column\n\t      dom.tdDrag = document.createElement('td');\n\n\t      // create context menu\n\t      var tdMenu = document.createElement('td');\n\t      dom.tdMenu = tdMenu;\n\t      var menu = document.createElement('button');\n\t      menu.type = 'button';\n\t      menu.className = 'jsoneditor-button jsoneditor-contextmenu';\n\t      menu.title = 'Click to open the actions menu (Ctrl+M)';\n\t      dom.menu = menu;\n\t      tdMenu.appendChild(dom.menu);\n\t    }\n\n\t    // a cell for the contents (showing text 'empty')\n\t    var tdAppend = document.createElement('td');\n\t    var domText = document.createElement('div');\n\t    domText.innerHTML = '(' + translate('empty') + ')';\n\t    domText.className = 'jsoneditor-readonly';\n\t    tdAppend.appendChild(domText);\n\t    dom.td = tdAppend;\n\t    dom.text = domText;\n\n\t    this.updateDom();\n\n\t    return trAppend;\n\t  };\n\n\t  /**\n\t   * Append node doesn't have a path\n\t   * @returns {null}\n\t   */\n\t  AppendNode.prototype.getPath = function() {\n\t    return null;\n\t  };\n\n\t  /**\n\t   * Append node doesn't have an index\n\t   * @returns {null}\n\t   */\n\t  AppendNode.prototype.getIndex = function() {\n\t    return null;\n\t  };\n\n\t  /**\n\t   * Update the HTML dom of the Node\n\t   */\n\t  AppendNode.prototype.updateDom = function(options) {\n\t    var dom = this.dom;\n\t    var tdAppend = dom.td;\n\t    if (tdAppend) {\n\t      tdAppend.style.paddingLeft = (this.getLevel() * 24 + 26) + 'px';\n\t      // TODO: not so nice hard coded offset\n\t    }\n\n\t    var domText = dom.text;\n\t    if (domText) {\n\t      domText.innerHTML = '(' + translate('empty') + ' ' + this.parent.type + ')';\n\t    }\n\n\t    // attach or detach the contents of the append node:\n\t    // hide when the parent has childs, show when the parent has no childs\n\t    var trAppend = dom.tr;\n\t    if (!this.isVisible()) {\n\t      if (dom.tr.firstChild) {\n\t        if (dom.tdDrag) {\n\t          trAppend.removeChild(dom.tdDrag);\n\t        }\n\t        if (dom.tdMenu) {\n\t          trAppend.removeChild(dom.tdMenu);\n\t        }\n\t        trAppend.removeChild(tdAppend);\n\t      }\n\t    }\n\t    else {\n\t      if (!dom.tr.firstChild) {\n\t        if (dom.tdDrag) {\n\t          trAppend.appendChild(dom.tdDrag);\n\t        }\n\t        if (dom.tdMenu) {\n\t          trAppend.appendChild(dom.tdMenu);\n\t        }\n\t        trAppend.appendChild(tdAppend);\n\t      }\n\t    }\n\t  };\n\n\t  /**\n\t   * Check whether the AppendNode is currently visible.\n\t   * the AppendNode is visible when its parent has no childs (i.e. is empty).\n\t   * @return {boolean} isVisible\n\t   */\n\t  AppendNode.prototype.isVisible = function () {\n\t    return (this.parent.childs.length == 0);\n\t  };\n\n\t  /**\n\t   * Show a contextmenu for this node\n\t   * @param {HTMLElement} anchor   The element to attach the menu to.\n\t   * @param {function} [onClose]   Callback method called when the context menu\n\t   *                               is being closed.\n\t   */\n\t  AppendNode.prototype.showContextMenu = function (anchor, onClose) {\n\t    var node = this;\n\t    var titles = Node.TYPE_TITLES;\n\t    var appendSubmenu = [\n\t        {\n\t            text: translate('auto'),\n\t            className: 'jsoneditor-type-auto',\n\t            title: titles.auto,\n\t            click: function () {\n\t                node._onAppend('', '', 'auto');\n\t            }\n\t        },\n\t        {\n\t            text: translate('array'),\n\t            className: 'jsoneditor-type-array',\n\t            title: titles.array,\n\t            click: function () {\n\t                node._onAppend('', []);\n\t            }\n\t        },\n\t        {\n\t            text: translate('object'),\n\t            className: 'jsoneditor-type-object',\n\t            title: titles.object,\n\t            click: function () {\n\t                node._onAppend('', {});\n\t            }\n\t        },\n\t        {\n\t            text: translate('string'),\n\t            className: 'jsoneditor-type-string',\n\t            title: titles.string,\n\t            click: function () {\n\t                node._onAppend('', '', 'string');\n\t            }\n\t        }\n\t    ];\n\t    node.addTemplates(appendSubmenu, true);\n\t    var items = [\n\t      // create append button\n\t      {\n\t        'text': translate('appendText'),\n\t        'title': translate('appendTitleAuto'),\n\t        'submenuTitle': translate('appendSubmenuTitle'),\n\t        'className': 'jsoneditor-insert',\n\t        'click': function () {\n\t          node._onAppend('', '', 'auto');\n\t        },\n\t        'submenu': appendSubmenu\n\t      }\n\t    ];\n\n\t    var menu = new ContextMenu(items, {close: onClose});\n\t    menu.show(anchor, this.editor.content);\n\t  };\n\n\t  /**\n\t   * Handle an event. The event is caught centrally by the editor\n\t   * @param {Event} event\n\t   */\n\t  AppendNode.prototype.onEvent = function (event) {\n\t    var type = event.type;\n\t    var target = event.target || event.srcElement;\n\t    var dom = this.dom;\n\n\t    // highlight the append nodes parent\n\t    var menu = dom.menu;\n\t    if (target == menu) {\n\t      if (type == 'mouseover') {\n\t        this.editor.highlighter.highlight(this.parent);\n\t      }\n\t      else if (type == 'mouseout') {\n\t        this.editor.highlighter.unhighlight();\n\t      }\n\t    }\n\n\t    // context menu events\n\t    if (type == 'click' && target == dom.menu) {\n\t      var highlighter = this.editor.highlighter;\n\t      highlighter.highlight(this.parent);\n\t      highlighter.lock();\n\t      util.addClassName(dom.menu, 'jsoneditor-selected');\n\t      this.showContextMenu(dom.menu, function () {\n\t        util.removeClassName(dom.menu, 'jsoneditor-selected');\n\t        highlighter.unlock();\n\t        highlighter.unhighlight();\n\t      });\n\t    }\n\n\t    if (type == 'keydown') {\n\t      this.onKeyDown(event);\n\t    }\n\t  };\n\n\t  return AppendNode;\n\t}\n\n\tmodule.exports = appendNodeFactory;\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar translate = __webpack_require__(15).translate;\n\n\t/**\n\t * A factory function to create an ShowMoreNode, which depends on a Node\n\t * @param {function} Node\n\t */\n\tfunction showMoreNodeFactory(Node) {\n\t  /**\n\t   * @constructor ShowMoreNode\n\t   * @extends Node\n\t   * @param {TreeEditor} editor\n\t   * @param {Node} parent\n\t   * Create a new ShowMoreNode. This is a special node which is created\n\t   * for arrays or objects having more than 100 items\n\t   */\n\t  function ShowMoreNode (editor, parent) {\n\t    /** @type {TreeEditor} */\n\t    this.editor = editor;\n\t    this.parent = parent;\n\t    this.dom = {};\n\t  }\n\n\t  ShowMoreNode.prototype = new Node();\n\n\t  /**\n\t   * Return a table row with an append button.\n\t   * @return {Element} dom   TR element\n\t   */\n\t  ShowMoreNode.prototype.getDom = function () {\n\t    if (this.dom.tr) {\n\t      return this.dom.tr;\n\t    }\n\n\t    this._updateEditability();\n\n\t    // display \"show more\"\n\t    if (!this.dom.tr) {\n\t      var me = this;\n\t      var parent = this.parent;\n\t      var showMoreButton = document.createElement('a');\n\t      showMoreButton.appendChild(document.createTextNode(translate('showMore')));\n\t      showMoreButton.href = '#';\n\t      showMoreButton.onclick = function (event) {\n\t        // TODO: use callback instead of accessing a method of the parent\n\t        parent.visibleChilds = Math.floor(parent.visibleChilds / parent.MAX_VISIBLE_CHILDS + 1) *\n\t            parent.MAX_VISIBLE_CHILDS;\n\t        me.updateDom();\n\t        parent.showChilds();\n\n\t        event.preventDefault();\n\t        return false;\n\t      };\n\n\t      var showAllButton = document.createElement('a');\n\t      showAllButton.appendChild(document.createTextNode(translate('showAll')));\n\t      showAllButton.href = '#';\n\t      showAllButton.onclick = function (event) {\n\t        // TODO: use callback instead of accessing a method of the parent\n\t        parent.visibleChilds = Infinity;\n\t        me.updateDom();\n\t        parent.showChilds();\n\n\t        event.preventDefault();\n\t        return false;\n\t      };\n\n\t      var moreContents = document.createElement('div');\n\t      var moreText = document.createTextNode(this._getShowMoreText());\n\t      moreContents.className = 'jsoneditor-show-more';\n\t      moreContents.appendChild(moreText);\n\t      moreContents.appendChild(showMoreButton);\n\t      moreContents.appendChild(document.createTextNode('. '));\n\t      moreContents.appendChild(showAllButton);\n\t      moreContents.appendChild(document.createTextNode('. '));\n\n\t      var tdContents = document.createElement('td');\n\t      tdContents.appendChild(moreContents);\n\n\t      var moreTr = document.createElement('tr');\n\t      moreTr.appendChild(document.createElement('td'));\n\t      moreTr.appendChild(document.createElement('td'));\n\t      moreTr.appendChild(tdContents);\n\t      moreTr.className = 'jsoneditor-show-more';\n\t      this.dom.tr = moreTr;\n\t      this.dom.moreContents = moreContents;\n\t      this.dom.moreText = moreText;\n\t    }\n\n\t    this.updateDom();\n\n\t    return this.dom.tr;\n\t  };\n\n\t  /**\n\t   * Update the HTML dom of the Node\n\t   */\n\t  ShowMoreNode.prototype.updateDom = function(options) {\n\t    if (this.isVisible()) {\n\t      // attach to the right child node (the first non-visible child)\n\t      this.dom.tr.node = this.parent.childs[this.parent.visibleChilds];\n\n\t      if (!this.dom.tr.parentNode) {\n\t        var nextTr = this.parent._getNextTr();\n\t        if (nextTr) {\n\t          nextTr.parentNode.insertBefore(this.dom.tr, nextTr);\n\t        }\n\t      }\n\n\t      // update the counts in the text\n\t      this.dom.moreText.nodeValue = this._getShowMoreText();\n\n\t      // update left margin\n\t      this.dom.moreContents.style.marginLeft = (this.getLevel() + 1) * 24 + 'px';\n\t    }\n\t    else {\n\t      if (this.dom.tr && this.dom.tr.parentNode) {\n\t        this.dom.tr.parentNode.removeChild(this.dom.tr);\n\t      }\n\t    }\n\t  };\n\n\t  ShowMoreNode.prototype._getShowMoreText = function() {\n\t    return translate('showMoreStatus', {\n\t      visibleChilds: this.parent.visibleChilds,\n\t      totalChilds: this.parent.childs.length\n\t    }) + ' ';\n\t  };\n\n\t  /**\n\t   * Check whether the ShowMoreNode is currently visible.\n\t   * the ShowMoreNode is visible when it's parent has more childs than\n\t   * the current visibleChilds\n\t   * @return {boolean} isVisible\n\t   */\n\t  ShowMoreNode.prototype.isVisible = function () {\n\t    return this.parent.expanded && this.parent.childs.length > this.parent.visibleChilds;\n\t  };\n\n\t  /**\n\t   * Handle an event. The event is caught centrally by the editor\n\t   * @param {Event} event\n\t   */\n\t  ShowMoreNode.prototype.onEvent = function (event) {\n\t    var type = event.type;\n\t    if (type === 'keydown') {\n\t      this.onKeyDown(event);\n\t    }\n\t  };\n\n\t  return ShowMoreNode;\n\t}\n\n\tmodule.exports = showMoreNodeFactory;\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar picoModal = __webpack_require__(23);\n\tvar translate = __webpack_require__(15).translate;\n\n\t/**\n\t * Show advanced sorting modal\n\t * @param {Node} node the node to be sorted\n\t * @param {HTMLElement} container   The container where to center\n\t *                                  the modal and create an overlay\n\t */\n\tfunction showSortModal (node, container) {\n\t  var content = '<div class=\"pico-modal-contents\">' +\n\t      '<div class=\"pico-modal-header\">' + translate('sort') + '</div>' +\n\t      '<form>' +\n\t      '<table>' +\n\t      '<tbody>' +\n\t      '<tr>' +\n\t      '  <td>' + translate('sortFieldLabel') + ' </td>' +\n\t      '  <td class=\"jsoneditor-modal-input\">' +\n\t      '  <div class=\"jsoneditor-select-wrapper\">' +\n\t      '    <select id=\"field\" title=\"' + translate('sortFieldTitle') + '\">' +\n\t      '    </select>' +\n\t      '  </div>' +\n\t      '  </td>' +\n\t      '</tr>' +\n\t      '<tr>' +\n\t      '  <td>' + translate('sortDirectionLabel') + ' </td>' +\n\t      '  <td class=\"jsoneditor-modal-input\">' +\n\t      '  <div id=\"direction\" class=\"jsoneditor-button-group\">' +\n\t      '<input type=\"button\" ' +\n\t      'value=\"' + translate('sortAscending') + '\" ' +\n\t      'title=\"'  + translate('sortAscendingTitle') + '\" ' +\n\t      'data-value=\"asc\" ' +\n\t      'class=\"jsoneditor-button-first jsoneditor-button-asc\"/>' +\n\t      '<input type=\"button\" ' +\n\t      'value=\"' + translate('sortDescending') + '\" ' +\n\t      'title=\"' + translate('sortDescendingTitle') + '\" ' +\n\t      'data-value=\"desc\" ' +\n\t      'class=\"jsoneditor-button-last jsoneditor-button-desc\"/>' +\n\t      '  </div>' +\n\t      '  </td>' +\n\t      '</tr>' +\n\t      '<tr>' +\n\t      '<td colspan=\"2\" class=\"jsoneditor-modal-input jsoneditor-modal-actions\">' +\n\t      '  <input type=\"submit\" id=\"ok\" value=\"' + translate('ok') + '\" />' +\n\t      '</td>' +\n\t      '</tr>' +\n\t      '</tbody>' +\n\t      '</table>' +\n\t      '</form>' +\n\t      '</div>';\n\n\t  picoModal({\n\t    parent: container,\n\t    content: content,\n\t    overlayClass: 'jsoneditor-modal-overlay',\n\t    modalClass: 'jsoneditor-modal jsoneditor-modal-sort'\n\t  })\n\t      .afterCreate(function (modal) {\n\t        var form = modal.modalElem().querySelector('form');\n\t        var ok = modal.modalElem().querySelector('#ok');\n\t        var field = modal.modalElem().querySelector('#field');\n\t        var direction = modal.modalElem().querySelector('#direction');\n\n\t        var paths = node.type === 'array'\n\t            ? node.getChildPaths()\n\t            : ['.'];\n\n\t        paths.forEach(function (path) {\n\t          var option = document.createElement('option');\n\t          option.text = path;\n\t          option.value = path;\n\t          field.appendChild(option);\n\t        });\n\n\t        function setDirection(value) {\n\t          direction.value = value;\n\t          direction.className = 'jsoneditor-button-group jsoneditor-button-group-value-' + direction.value;\n\t        }\n\n\t        field.value = node.sortedBy ? node.sortedBy.path : paths[0];\n\t        setDirection(node.sortedBy ? node.sortedBy.direction : 'asc');\n\n\t        direction.onclick = function (event) {\n\t          setDirection(event.target.getAttribute('data-value'));\n\t        };\n\n\t        ok.onclick = function (event) {\n\t          event.preventDefault();\n\t          event.stopPropagation();\n\n\t          modal.close();\n\n\t          var path = field.value;\n\t          var pathArray = (path === '.') ? [] : path.split('.').slice(1);\n\n\t          node.sortedBy = {\n\t            path: path,\n\t            direction: direction.value\n\t          };\n\n\t          node.sort(pathArray, direction.value)\n\t        };\n\n\t        if (form) { // form is not available when JSONEditor is created inside a form\n\t          form.onsubmit = ok.onclick;\n\t        }\n\t      })\n\t      .afterClose(function (modal) {\n\t        modal.destroy();\n\t      })\n\t      .show();\n\t}\n\n\tmodule.exports = showSortModal;\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n\t * Permission is hereby granted, free of charge, to any person obtaining a copy\n\t * of this software and associated documentation files (the \"Software\"), to deal\n\t * in the Software without restriction, including without limitation the rights\n\t * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t * copies of the Software, and to permit persons to whom the Software is\n\t * furnished to do so, subject to the following conditions:\n\t *\n\t * The above copyright notice and this permission notice shall be included in\n\t * all copies or substantial portions of the Software.\n\t *\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\t * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n\t * SOFTWARE.\n\t */\n\n\t(function (root, factory) {\n\t    \"use strict\";\n\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    }\n\t    else if (typeof module === 'object' && module.exports) {\n\t        module.exports = factory();\n\t    }\n\t    else {\n\t        root.picoModal = factory();\n\t    }\n\t}(this, function () {\n\n\t    /**\n\t     * A self-contained modal library\n\t     */\n\t    \"use strict\";\n\n\t    /** Returns whether a value is a dom node */\n\t    function isNode(value) {\n\t        if ( typeof Node === \"object\" ) {\n\t            return value instanceof Node;\n\t        }\n\t        else {\n\t            return value && typeof value === \"object\" && typeof value.nodeType === \"number\";\n\t        }\n\t    }\n\n\t    /** Returns whether a value is a string */\n\t    function isString(value) {\n\t        return typeof value === \"string\";\n\t    }\n\n\t    /**\n\t     * Generates observable objects that can be watched and triggered\n\t     */\n\t    function observable() {\n\t        var callbacks = [];\n\t        return {\n\t            watch: callbacks.push.bind(callbacks),\n\t            trigger: function(context, detail) {\n\n\t                var unprevented = true;\n\t                var event = {\n\t                    detail: detail,\n\t                    preventDefault: function preventDefault () {\n\t                        unprevented = false;\n\t                    }\n\t                };\n\n\t                for (var i = 0; i < callbacks.length; i++) {\n\t                    callbacks[i](context, event);\n\t                }\n\n\t                return unprevented;\n\t            }\n\t        };\n\t    }\n\n\n\t    /** Whether an element is hidden */\n\t    function isHidden ( elem ) {\n\t        // @see http://stackoverflow.com/questions/19669786\n\t        return window.getComputedStyle(elem).display === 'none';\n\t    }\n\n\n\t    /**\n\t     * A small interface for creating and managing a dom element\n\t     */\n\t    function Elem( elem ) {\n\t        this.elem = elem;\n\t    }\n\n\t    /** Creates a new div */\n\t    Elem.make = function ( parent, tag ) {\n\t        if ( typeof parent === \"string\" ) {\n\t            parent = document.querySelector(parent);\n\t        }\n\t        var elem = document.createElement(tag || 'div');\n\t        (parent || document.body).appendChild(elem);\n\t        return new Elem(elem);\n\t    };\n\n\t    Elem.prototype = {\n\n\t        /** Creates a child of this node */\n\t        child: function (tag) {\n\t            return Elem.make(this.elem, tag);\n\t        },\n\n\t        /** Applies a set of styles to an element */\n\t        stylize: function(styles) {\n\t            styles = styles || {};\n\n\t            if ( typeof styles.opacity !== \"undefined\" ) {\n\t                styles.filter = \"alpha(opacity=\" + (styles.opacity * 100) + \")\";\n\t            }\n\n\t            for (var prop in styles) {\n\t                if (styles.hasOwnProperty(prop)) {\n\t                    this.elem.style[prop] = styles[prop];\n\t                }\n\t            }\n\n\t            return this;\n\t        },\n\n\t        /** Adds a class name */\n\t        clazz: function (clazz) {\n\t            this.elem.className += \" \" + clazz;\n\t            return this;\n\t        },\n\n\t        /** Sets the HTML */\n\t        html: function (content) {\n\t            if ( isNode(content) ) {\n\t                this.elem.appendChild( content );\n\t            }\n\t            else {\n\t                this.elem.innerHTML = content;\n\t            }\n\t            return this;\n\t        },\n\n\t        /** Adds a click handler to this element */\n\t        onClick: function(callback) {\n\t            this.elem.addEventListener('click', callback);\n\t            return this;\n\t        },\n\n\t        /** Removes this element from the DOM */\n\t        destroy: function() {\n\t            this.elem.parentNode.removeChild(this.elem);\n\t        },\n\n\t        /** Hides this element */\n\t        hide: function() {\n\t            this.elem.style.display = \"none\";\n\t        },\n\n\t        /** Shows this element */\n\t        show: function() {\n\t            this.elem.style.display = \"block\";\n\t        },\n\n\t        /** Sets an attribute on this element */\n\t        attr: function ( name, value ) {\n\t            if (value !== undefined) {\n\t                this.elem.setAttribute(name, value);\n\t            }\n\t            return this;\n\t        },\n\n\t        /** Executes a callback on all the ancestors of an element */\n\t        anyAncestor: function ( predicate ) {\n\t            var elem = this.elem;\n\t            while ( elem ) {\n\t                if ( predicate( new Elem(elem) ) ) {\n\t                    return true;\n\t                }\n\t                else {\n\t                    elem = elem.parentNode;\n\t                }\n\t            }\n\t            return false;\n\t        },\n\n\t        /** Whether this element is visible */\n\t        isVisible: function () {\n\t            return !isHidden(this.elem);\n\t        }\n\t    };\n\n\n\t    /** Generates the grey-out effect */\n\t    function buildOverlay( getOption, close ) {\n\t        return Elem.make( getOption(\"parent\") )\n\t            .clazz(\"pico-overlay\")\n\t            .clazz( getOption(\"overlayClass\", \"\") )\n\t            .stylize({\n\t                display: \"none\",\n\t                position: \"fixed\",\n\t                top: \"0px\",\n\t                left: \"0px\",\n\t                height: \"100%\",\n\t                width: \"100%\",\n\t                zIndex: 10000\n\t            })\n\t            .stylize(getOption('overlayStyles', {\n\t                opacity: 0.5,\n\t                background: \"#000\"\n\t            }))\n\t            .onClick(function () {\n\t                if ( getOption('overlayClose', true) ) {\n\t                    close();\n\t                }\n\t            });\n\t    }\n\n\t    // An auto incrementing ID assigned to each modal\n\t    var autoinc = 1;\n\n\t    /** Builds the content of a modal */\n\t    function buildModal( getOption, close ) {\n\t        var width = getOption('width', 'auto');\n\t        if ( typeof width === \"number\" ) {\n\t            width = \"\" + width + \"px\";\n\t        }\n\n\t        var id = getOption(\"modalId\", \"pico-\" + autoinc++);\n\n\t        var elem = Elem.make( getOption(\"parent\") )\n\t            .clazz(\"pico-content\")\n\t            .clazz( getOption(\"modalClass\", \"\") )\n\t            .stylize({\n\t                display: 'none',\n\t                position: 'fixed',\n\t                zIndex: 10001,\n\t                left: \"50%\",\n\t                top: \"38.1966%\",\n\t                maxHeight: '90%',\n\t                boxSizing: 'border-box',\n\t                width: width,\n\t                '-ms-transform': 'translate(-50%,-38.1966%)',\n\t                '-moz-transform': 'translate(-50%,-38.1966%)',\n\t                '-webkit-transform': 'translate(-50%,-38.1966%)',\n\t                '-o-transform': 'translate(-50%,-38.1966%)',\n\t                transform: 'translate(-50%,-38.1966%)'\n\t            })\n\t            .stylize(getOption('modalStyles', {\n\t                overflow: 'auto',\n\t                backgroundColor: \"white\",\n\t                padding: \"20px\",\n\t                borderRadius: \"5px\"\n\t            }))\n\t            .html( getOption('content') )\n\t            .attr(\"id\", id)\n\t            .attr(\"role\", \"dialog\")\n\t            .attr(\"aria-labelledby\", getOption(\"ariaLabelledBy\"))\n\t            .attr(\"aria-describedby\", getOption(\"ariaDescribedBy\", id))\n\t            .onClick(function (event) {\n\t                var isCloseClick = new Elem(event.target).anyAncestor(function (elem) {\n\t                    return /\\bpico-close\\b/.test(elem.elem.className);\n\t                });\n\t                if ( isCloseClick ) {\n\t                    close();\n\t                }\n\t            });\n\n\t        return elem;\n\t    }\n\n\t    /** Builds the close button */\n\t    function buildClose ( elem, getOption ) {\n\t        if ( getOption('closeButton', true) ) {\n\t            return elem.child('button')\n\t                .html( getOption('closeHtml', \"&#xD7;\") )\n\t                .clazz(\"pico-close\")\n\t                .clazz( getOption(\"closeClass\", \"\") )\n\t                .stylize( getOption('closeStyles', {\n\t                    borderRadius: \"2px\",\n\t                    border: 0,\n\t                    padding: 0,\n\t                    cursor: \"pointer\",\n\t                    height: \"15px\",\n\t                    width: \"15px\",\n\t                    position: \"absolute\",\n\t                    top: \"5px\",\n\t                    right: \"5px\",\n\t                    fontSize: \"16px\",\n\t                    textAlign: \"center\",\n\t                    lineHeight: \"15px\",\n\t                    background: \"#CCC\"\n\t                }) )\n\t                .attr(\"aria-label\", getOption(\"close-label\", \"Close\"));\n\t        }\n\t    }\n\n\t    /** Builds a method that calls a method and returns an element */\n\t    function buildElemAccessor( builder ) {\n\t        return function () {\n\t            return builder().elem;\n\t        };\n\t    }\n\n\n\t    // An observable that is triggered whenever the escape key is pressed\n\t    var escapeKey = observable();\n\n\t    // An observable that is triggered when the user hits the tab key\n\t    var tabKey = observable();\n\n\t    /** A global event handler to detect the escape key being pressed */\n\t    document.documentElement.addEventListener('keydown', function onKeyPress (event) {\n\t        var keycode = event.which || event.keyCode;\n\n\t        // If this is the escape key\n\t        if ( keycode === 27 ) {\n\t            escapeKey.trigger();\n\t        }\n\n\t        // If this is the tab key\n\t        else if ( keycode === 9 ) {\n\t            tabKey.trigger(event);\n\t        }\n\t    });\n\n\n\t    /** Attaches focus management events */\n\t    function manageFocus ( iface, isEnabled ) {\n\n\t        /** Whether an element matches a selector */\n\t        function matches ( elem, selector ) {\n\t            var fn = elem.msMatchesSelector || elem.webkitMatchesSelector || elem.matches;\n\t            return fn.call(elem, selector);\n\t        }\n\n\t        /**\n\t         * Returns whether an element is focusable\n\t         * @see http://stackoverflow.com/questions/18261595\n\t         */\n\t        function canFocus( elem ) {\n\t            if (\n\t                isHidden(elem) ||\n\t                matches(elem, \":disabled\") ||\n\t                elem.hasAttribute(\"contenteditable\")\n\t            ) {\n\t                return false;\n\t            }\n\t            else {\n\t                return elem.hasAttribute(\"tabindex\") ||\n\t                    matches(elem, \"input,select,textarea,button,a[href],area[href],iframe\");\n\t            }\n\t        }\n\n\t        /** Returns the first descendant that can be focused */\n\t        function firstFocusable ( elem ) {\n\t            var items = elem.getElementsByTagName(\"*\");\n\t            for (var i = 0; i < items.length; i++) {\n\t                if ( canFocus(items[i]) ) {\n\t                    return items[i];\n\t                }\n\t            }\n\t        }\n\n\t        /** Returns the last descendant that can be focused */\n\t        function lastFocusable ( elem ) {\n\t            var items = elem.getElementsByTagName(\"*\");\n\t            for (var i = items.length; i--;) {\n\t                if ( canFocus(items[i]) ) {\n\t                    return items[i];\n\t                }\n\t            }\n\t        }\n\n\t        // The element focused before the modal opens\n\t        var focused;\n\n\t        // Records the currently focused element so state can be returned\n\t        // after the modal closes\n\t        iface.beforeShow(function getActiveFocus() {\n\t            focused = document.activeElement;\n\t        });\n\n\t        // Shift focus into the modal\n\t        iface.afterShow(function focusModal() {\n\t            if ( isEnabled() ) {\n\t                var focusable = firstFocusable(iface.modalElem());\n\t                if ( focusable ) {\n\t                    focusable.focus();\n\t                }\n\t            }\n\t        });\n\n\t        // Restore the previously focused element when the modal closes\n\t        iface.afterClose(function returnFocus() {\n\t            if ( isEnabled() && focused ) {\n\t                focused.focus();\n\t            }\n\t            focused = null;\n\t        });\n\n\t        // Capture tab key presses and loop them within the modal\n\t        tabKey.watch(function tabKeyPress (event) {\n\t            if ( isEnabled() && iface.isVisible() ) {\n\t                var first = firstFocusable(iface.modalElem());\n\t                var last = lastFocusable(iface.modalElem());\n\n\t                var from = event.shiftKey ? first : last;\n\t                if ( from === document.activeElement ) {\n\t                    (event.shiftKey ? last : first).focus();\n\t                    event.preventDefault();\n\t                }\n\t            }\n\t        });\n\t    }\n\n\t    /** Manages setting the 'overflow: hidden' on the body tag */\n\t    function manageBodyOverflow(iface, isEnabled) {\n\t        var origOverflow;\n\t        var body = new Elem(document.body);\n\n\t        iface.beforeShow(function () {\n\t            // Capture the current values so they can be restored\n\t            origOverflow = body.elem.style.overflow;\n\n\t            if (isEnabled()) {\n\t                body.stylize({ overflow: \"hidden\" });\n\t            }\n\t        });\n\n\t        iface.afterClose(function () {\n\t            body.stylize({ overflow: origOverflow });\n\t        });\n\t    }\n\n\t    /**\n\t     * Displays a modal\n\t     */\n\t    return function picoModal(options) {\n\n\t        if ( isString(options) || isNode(options) ) {\n\t            options = { content: options };\n\t        }\n\n\t        var afterCreateEvent = observable();\n\t        var beforeShowEvent = observable();\n\t        var afterShowEvent = observable();\n\t        var beforeCloseEvent = observable();\n\t        var afterCloseEvent = observable();\n\n\t        /**\n\t         * Returns a named option if it has been explicitly defined. Otherwise,\n\t         * it returns the given default value\n\t         */\n\t        function getOption ( opt, defaultValue ) {\n\t            var value = options[opt];\n\t            if ( typeof value === \"function\" ) {\n\t                value = value( defaultValue );\n\t            }\n\t            return value === undefined ? defaultValue : value;\n\t        }\n\n\n\t        // The various DOM elements that constitute the modal\n\t        var modalElem = build.bind(window, 'modal');\n\t        var shadowElem = build.bind(window, 'overlay');\n\t        var closeElem = build.bind(window, 'close');\n\n\t        // This will eventually contain the modal API returned to the user\n\t        var iface;\n\n\n\t        /** Hides this modal */\n\t        function forceClose (detail) {\n\t            shadowElem().hide();\n\t            modalElem().hide();\n\t            afterCloseEvent.trigger(iface, detail);\n\t        }\n\n\t        /** Gracefully hides this modal */\n\t        function close (detail) {\n\t            if ( beforeCloseEvent.trigger(iface, detail) ) {\n\t                forceClose(detail);\n\t            }\n\t        }\n\n\t        /** Wraps a method so it returns the modal interface */\n\t        function returnIface ( callback ) {\n\t            return function () {\n\t                callback.apply(this, arguments);\n\t                return iface;\n\t            };\n\t        }\n\n\n\t        // The constructed dom nodes\n\t        var built;\n\n\t        /** Builds a method that calls a method and returns an element */\n\t        function build (name, detail) {\n\t            if ( !built ) {\n\t                var modal = buildModal(getOption, close);\n\t                built = {\n\t                    modal: modal,\n\t                    overlay: buildOverlay(getOption, close),\n\t                    close: buildClose(modal, getOption)\n\t                };\n\t                afterCreateEvent.trigger(iface, detail);\n\t            }\n\t            return built[name];\n\t        }\n\n\t        iface = {\n\n\t            /** Returns the wrapping modal element */\n\t            modalElem: buildElemAccessor(modalElem),\n\n\t            /** Returns the close button element */\n\t            closeElem: buildElemAccessor(closeElem),\n\n\t            /** Returns the overlay element */\n\t            overlayElem: buildElemAccessor(shadowElem),\n\n\t            /** Builds the dom without showing the modal */\n\t            buildDom: returnIface(build.bind(null, null)),\n\n\t            /** Returns whether this modal is currently being shown */\n\t            isVisible: function () {\n\t                return !!(built && modalElem && modalElem().isVisible());\n\t            },\n\n\t            /** Shows this modal */\n\t            show: function (detail) {\n\t                if ( beforeShowEvent.trigger(iface, detail) ) {\n\t                    shadowElem().show();\n\t                    closeElem();\n\t                    modalElem().show();\n\t                    afterShowEvent.trigger(iface, detail);\n\t                }\n\t                return this;\n\t            },\n\n\t            /** Hides this modal */\n\t            close: returnIface(close),\n\n\t            /**\n\t             * Force closes this modal. This will not call beforeClose\n\t             * events and will just immediately hide the modal\n\t             */\n\t            forceClose: returnIface(forceClose),\n\n\t            /** Destroys this modal */\n\t            destroy: function () {\n\t                modalElem().destroy();\n\t                shadowElem().destroy();\n\t                shadowElem = modalElem = closeElem = undefined;\n\t            },\n\n\t            /**\n\t             * Updates the options for this modal. This will only let you\n\t             * change options that are re-evaluted regularly, such as\n\t             * `overlayClose`.\n\t             */\n\t            options: function ( opts ) {\n\t                Object.keys(opts).map(function (key) {\n\t                    options[key] = opts[key];\n\t                });\n\t            },\n\n\t            /** Executes after the DOM nodes are created */\n\t            afterCreate: returnIface(afterCreateEvent.watch),\n\n\t            /** Executes a callback before this modal is closed */\n\t            beforeShow: returnIface(beforeShowEvent.watch),\n\n\t            /** Executes a callback after this modal is shown */\n\t            afterShow: returnIface(afterShowEvent.watch),\n\n\t            /** Executes a callback before this modal is closed */\n\t            beforeClose: returnIface(beforeCloseEvent.watch),\n\n\t            /** Executes a callback after this modal is closed */\n\t            afterClose: returnIface(afterCloseEvent.watch)\n\t        };\n\n\t        manageFocus(iface, getOption.bind(null, \"focus\", true));\n\n\t        manageBodyOverflow(iface, getOption.bind(null, \"bodyOverflow\", true));\n\n\t        // If a user presses the 'escape' key, close the modal.\n\t        escapeKey.watch(function escapeKeyPress () {\n\t            if ( getOption(\"escCloses\", true) && iface.isVisible() ) {\n\t                iface.close();\n\t            }\n\t        });\n\n\t        return iface;\n\t    };\n\n\t}));\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar jmespath = __webpack_require__(18);\n\tvar picoModal = __webpack_require__(23);\n\tvar Selectr = __webpack_require__(25);\n\tvar translate = __webpack_require__(15).translate;\n\tvar debounce = __webpack_require__(12).debounce;\n\n\tvar MAX_PREVIEW_LINES = 100;\n\n\t/**\n\t * Show advanced filter and transform modal using JMESPath\n\t * @param {Node} node the node to be transformed\n\t * @param {HTMLElement} container   The container where to center\n\t *                                  the modal and create an overlay\n\t */\n\tfunction showTransformModal (node, container) {\n\t  var value = node.getValue();\n\n\t  var content = '<label class=\"pico-modal-contents\">' +\n\t      '<div class=\"pico-modal-header\">' + translate('transform') + '</div>' +\n\t      '<p>' +\n\t      'Enter a <a href=\"http://jmespath.org\" target=\"_blank\">JMESPath</a> query to filter, sort, or transform the JSON data.<br/>' +\n\t      'To learn JMESPath, go to <a href=\"http://jmespath.org/tutorial.html\" target=\"_blank\">the interactive tutorial</a>.' +\n\t      '</p>' +\n\t      '<table>' +\n\t      '<tbody>' +\n\t      '<tr>' +\n\t      '  <th>' + translate('transformWizardLabel') + ' </th>' +\n\t      '  <td>' +\n\t      '  <div id=\"wizard\" class=\"jsoneditor-jmespath-wizard\">' +\n\t      '  <div>' +\n\t      '    <div class=\"jsoneditor-jmespath-wizard-label\">' + translate('transformWizardFilter') + '</div>' +\n\t      '    <div class=\"jsoneditor-jmespath-filter\">' +\n\t      '      <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-field\" >' +\n\t      '        <select id=\"filterField\">' +\n\t      '        </select>' +\n\t      '      </div>' +\n\t      '      <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-relation\" >' +\n\t      '        <select id=\"filterRelation\">' +\n\t      '          <option value=\"==\">==</option>' +\n\t      '          <option value=\"!=\">!=</option>' +\n\t      '          <option value=\"<\">&lt;</option>' +\n\t      '          <option value=\"<=\">&lt;=</option>' +\n\t      '          <option value=\">\">&gt;</option>' +\n\t      '          <option value=\">=\">&gt;=</option>' +\n\t      '        </select>' +\n\t      '      </div>' +\n\t      '      <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-value\" >' +\n\t      '        <input placeholder=\"value...\" id=\"filterValue\" />' +\n\t      '      </div>' +\n\t      '    </div>' +\n\t      '  </div>' +\n\t      '  <div>' +\n\t      '    <div class=\"jsoneditor-jmespath-wizard-label\">' + translate('transformWizardSortBy') + '</div>' +\n\t      '    <div class=\"jsoneditor-jmespath-filter\">' +\n\t      '      <div class=\"jsoneditor-inline jsoneditor-jmespath-sort-field\">' +\n\t      '        <select id=\"sortField\">' +\n\t      '        </select>' +\n\t      '      </div>' +\n\t      '      <div class=\"jsoneditor-inline jsoneditor-jmespath-sort-order\" >' +\n\t      '        <select id=\"sortOrder\">' +\n\t      '          <option value=\"asc\">Ascending</option>' +\n\t      '          <option value=\"desc\">Descending</option>' +\n\t      '        </select>' +\n\t      '      </div>' +\n\t      '    </div>' +\n\t      '  </div>' +\n\t      '  <div id=\"selectFieldsPart\">' +\n\t      '    <div class=\"jsoneditor-jmespath-wizard-label\">' + translate('transformWizardSelectFields') + '</div>' +\n\t      '    <select class=\"jsoneditor-jmespath-select-fields\" id=\"selectFields\" multiple>' +\n\t      '    </select>' +\n\t      '  </div>' +\n\t      '  </div>' +\n\t      '  </td>' +\n\t      '</tr>' +\n\t      '<tr>' +\n\t      '  <th>' + translate('transformQueryLabel') + ' </th>' +\n\t      '  <td class=\"jsoneditor-modal-input\">' +\n\t      '    <textarea id=\"query\" ' +\n\t      '              rows=\"4\" ' +\n\t      '              autocomplete=\"off\" ' +\n\t      '              autocorrect=\"off\" ' +\n\t      '              autocapitalize=\"off\" ' +\n\t      '              spellcheck=\"false\"' +\n\t      '              title=\"' + translate('transformQueryTitle') + '\">[*]</textarea>' +\n\t      '  </td>' +\n\t      '</tr>' +\n\t      '<tr>' +\n\t      '  <th>' + translate('transformPreviewLabel') + ' </th>' +\n\t      '  <td class=\"jsoneditor-modal-input\">' +\n\t      '    <textarea id=\"preview\" ' +\n\t      '        class=\"jsoneditor-transform-preview\"' +\n\t      '        readonly> </textarea>' +\n\t      '  </td>' +\n\t      '</tr>' +\n\t      '<tr>' +\n\t      '<td colspan=\"2\" class=\"jsoneditor-modal-input jsoneditor-modal-actions\">' +\n\t      '  <input type=\"submit\" id=\"ok\" value=\"' + translate('ok') + '\" autofocus />' +\n\t      '</td>' +\n\t      '</tr>' +\n\t      '</tbody>' +\n\t      '</table>' +\n\t      '</div>';\n\n\t  picoModal({\n\t    parent: container,\n\t    content: content,\n\t    overlayClass: 'jsoneditor-modal-overlay',\n\t    modalClass: 'jsoneditor-modal jsoneditor-modal-transform',\n\t    focus: false\n\t  })\n\t      .afterCreate(function (modal) {\n\t        var elem = modal.modalElem();\n\n\t        var wizard = elem.querySelector('#wizard');\n\t        var ok = elem.querySelector('#ok');\n\t        var filterField = elem.querySelector('#filterField');\n\t        var filterRelation = elem.querySelector('#filterRelation');\n\t        var filterValue = elem.querySelector('#filterValue');\n\t        var sortField = elem.querySelector('#sortField');\n\t        var sortOrder = elem.querySelector('#sortOrder');\n\t        var selectFields = elem.querySelector('#selectFields');\n\t        var query = elem.querySelector('#query');\n\t        var preview = elem.querySelector('#preview');\n\n\t        if (!Array.isArray(value)) {\n\t          wizard.style.display = 'none';\n\t          wizard.parentNode.style.fontStyle = 'italic';\n\t          wizard.parentNode.appendChild(\n\t              document.createTextNode('(wizard not available for objects, only for arrays)')\n\t          );\n\t        }\n\n\t        var paths = node.getChildPaths();\n\t        paths.forEach(function (path) {\n\t          var formattedPath = preprocessPath(path);\n\t          var filterOption = document.createElement('option');\n\t          filterOption.text = formattedPath;\n\t          filterOption.value = formattedPath;\n\t          filterField.appendChild(filterOption);\n\n\t          var sortOption = document.createElement('option');\n\t          sortOption.text = formattedPath;\n\t          sortOption.value = formattedPath;\n\t          sortField.appendChild(sortOption);\n\t        });\n\n\t        var allPaths = node.getChildPaths(true).filter(function(path) {\n\t          return path !== '.';\n\t        });\n\n\t        if (allPaths.length > 0) {\n\t          allPaths.forEach(function (path) {\n\t            var formattedPath = preprocessPath(path);\n\t            var option = document.createElement('option');\n\t            option.text = formattedPath;\n\t            option.value = formattedPath;\n\t            selectFields.appendChild(option);\n\t          });\n\t        }\n\t        else {\n\t          elem.querySelector('#selectFieldsPart').style.display = 'none';\n\t        }\n\n\t        var selectrFilterField = new Selectr(filterField, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'field...' });\n\t        var selectrFilterRelation = new Selectr(filterRelation, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'compare...' });\n\t        var selectrSortField = new Selectr(sortField, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'field...' });\n\t        var selectrSortOrder = new Selectr(sortOrder, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'order...' });\n\t        var selectrSelectFields = new Selectr(selectFields, {multiple: true, clearable: true, defaultSelected: false});\n\n\t        selectrFilterField.on('selectr.change', generateQueryFromWizard);\n\t        selectrFilterRelation.on('selectr.change', generateQueryFromWizard);\n\t        filterValue.oninput = generateQueryFromWizard;\n\t        selectrSortField.on('selectr.change', generateQueryFromWizard);\n\t        selectrSortOrder.on('selectr.change', generateQueryFromWizard);\n\t        selectrSelectFields.on('selectr.change', generateQueryFromWizard);\n\n\t        elem.querySelector('.pico-modal-contents').onclick = function (event) {\n\t          // prevent the first clear button from getting focus when clicking anywhere in the modal\n\t          event.preventDefault();\n\t        };\n\n\t        query.value = Array.isArray(value) ? '[*]' : '@';\n\n\t        function preprocessPath(path) {\n\t          if (path[0] === '.') {\n\t            return (path === '.')\n\t                ? '@'\n\t                : path.slice(1);\n\t          }\n\t          else {\n\t            return path;\n\t          }\n\t        }\n\n\t        function generateQueryFromWizard () {\n\t          if (filterField.value && filterRelation.value && filterValue.value) {\n\t            var field1 = filterField.value;\n\t            // TODO: move _stringCast into a static util function\n\t            var value1 = JSON.stringify(node._stringCast(filterValue.value));\n\t            query.value = '[? ' +\n\t                field1 + ' ' +\n\t                filterRelation.value + ' ' +\n\t                '`' + value1 + '`' +\n\t                ']';\n\t          }\n\t          else {\n\t            query.value = '[*]';\n\t          }\n\n\t          if (sortField.value && sortOrder.value) {\n\t            var field2 = sortField.value;\n\t            if (sortOrder.value === 'desc') {\n\t              query.value += ' | reverse(sort_by(@, &' + field2 + '))';\n\t            }\n\t            else {\n\t              query.value += ' | sort_by(@, &' + field2 + ')';\n\t            }\n\t          }\n\n\t          if (selectFields.value) {\n\t            var values = [];\n\t            for (var i=0; i < selectFields.options.length; i++) {\n\t              if (selectFields.options[i].selected) {\n\t                var value = selectFields.options[i].value;\n\t                values.push(value);\n\t              }\n\t            }\n\n\t            if (query.value[query.value.length - 1] !== ']') {\n\t              query.value += ' | [*]';\n\t            }\n\n\t            if (values.length === 1) {\n\t              query.value += '.' + value;\n\t            }\n\t            else if (values.length > 1) {\n\t              query.value += '.{' +\n\t                  values.map(function (value) {\n\t                    var parts = value.split('.');\n\t                    var last = parts[parts.length - 1];\n\t                    return last + ': ' + value;\n\t                  }).join(', ') +\n\t                  '}';\n\t            }\n\t            else { // values.length === 0\n\t              // ignore\n\t            }\n\t          }\n\n\t          debouncedUpdatePreview();\n\t        }\n\n\t        function updatePreview() {\n\t          try {\n\t            var transformed = jmespath.search(value, query.value);\n\t            var lines =  JSON.stringify(transformed, null, 2).split('\\n');\n\n\t            if (lines.length > MAX_PREVIEW_LINES) {\n\t              lines = lines.slice(0, MAX_PREVIEW_LINES).concat(['...'])\n\t            }\n\n\n\t            preview.className = 'jsoneditor-transform-preview';\n\t            preview.value = lines.join('\\n');\n\t            ok.disabled = false;\n\t          }\n\t          catch (err) {\n\t            preview.className = 'jsoneditor-transform-preview jsoneditor-error';\n\t            preview.value = err.toString();\n\t            ok.disabled = true;\n\t          }\n\t        }\n\n\t        var debouncedUpdatePreview = debounce(updatePreview, 300);\n\n\t        query.oninput = debouncedUpdatePreview;\n\t        debouncedUpdatePreview();\n\n\t        ok.onclick = function (event) {\n\t          event.preventDefault();\n\t          event.stopPropagation();\n\n\t          modal.close();\n\n\t          node.transform(query.value)\n\t        };\n\n\t        setTimeout(function () {\n\t          query.select();\n\t          query.focus();\n\t          query.selectionStart = 3;\n\t          query.selectionEnd = 3;\n\t        });\n\t      })\n\t      .afterClose(function (modal) {\n\t        modal.destroy();\n\t      })\n\t      .show();\n\t}\n\n\tmodule.exports = showTransformModal;\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t/*!\n\t * Selectr 2.4.0\n\t * https://github.com/Mobius1/Selectr\n\t *\n\t * Released under the MIT license\n\t */\n\n\t'use strict';\n\n\t/**\n\t * Default configuration options\n\t * @type {Object}\n\t */\n\tvar defaultConfig = {\n\t  /**\n\t   * Emulates browser behaviour by selecting the first option by default\n\t   * @type {Boolean}\n\t   */\n\t  defaultSelected: true,\n\n\t  /**\n\t   * Sets the width of the container\n\t   * @type {String}\n\t   */\n\t  width: \"auto\",\n\n\t  /**\n\t   * Enables/ disables the container\n\t   * @type {Boolean}\n\t   */\n\t  disabled: false,\n\n\t  /**\n\t   * Enables / disables the search function\n\t   * @type {Boolean}\n\t   */\n\t  searchable: true,\n\n\t  /**\n\t   * Enable disable the clear button\n\t   * @type {Boolean}\n\t   */\n\t  clearable: false,\n\n\t  /**\n\t   * Sort the tags / multiselect options\n\t   * @type {Boolean}\n\t   */\n\t  sortSelected: false,\n\n\t  /**\n\t   * Allow deselecting of select-one options\n\t   * @type {Boolean}\n\t   */\n\t  allowDeselect: false,\n\n\t  /**\n\t   * Close the dropdown when scrolling (@AlexanderReiswich, #11)\n\t   * @type {Boolean}\n\t   */\n\t  closeOnScroll: false,\n\n\t  /**\n\t   * Allow the use of the native dropdown (@jonnyscholes, #14)\n\t   * @type {Boolean}\n\t   */\n\t  nativeDropdown: false,\n\n\t  /**\n\t   * Set the main placeholder\n\t   * @type {String}\n\t   */\n\t  placeholder: \"Select an option...\",\n\n\t  /**\n\t   * Allow the tagging feature\n\t   * @type {Boolean}\n\t   */\n\t  taggable: false,\n\n\t  /**\n\t   * Set the tag input placeholder (@labikmartin, #21, #22)\n\t   * @type {String}\n\t   */\n\t  tagPlaceholder: \"Enter a tag...\"\n\t};\n\n\t/**\n\t * Event Emitter\n\t */\n\tvar Events = function() {};\n\n\t/**\n\t * Event Prototype\n\t * @type {Object}\n\t */\n\tEvents.prototype = {\n\t  /**\n\t   * Add custom event listener\n\t   * @param  {String} event Event type\n\t   * @param  {Function} func   Callback\n\t   * @return {Void}\n\t   */\n\t  on: function(event, func) {\n\t    this._events = this._events || {};\n\t    this._events[event] = this._events[event] || [];\n\t    this._events[event].push(func);\n\t  },\n\n\t  /**\n\t   * Remove custom event listener\n\t   * @param  {String} event Event type\n\t   * @param  {Function} func   Callback\n\t   * @return {Void}\n\t   */\n\t  off: function(event, func) {\n\t    this._events = this._events || {};\n\t    if (event in this._events === false) return;\n\t    this._events[event].splice(this._events[event].indexOf(func), 1);\n\t  },\n\n\t  /**\n\t   * Fire a custom event\n\t   * @param  {String} event Event type\n\t   * @return {Void}\n\t   */\n\t  emit: function(event /* , args... */ ) {\n\t    this._events = this._events || {};\n\t    if (event in this._events === false) return;\n\t    for (var i = 0; i < this._events[event].length; i++) {\n\t      this._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Event mixin\n\t * @param  {Object} obj\n\t * @return {Object}\n\t */\n\tEvents.mixin = function(obj) {\n\t  var props = ['on', 'off', 'emit'];\n\t  for (var i = 0; i < props.length; i++) {\n\t    if (typeof obj === 'function') {\n\t      obj.prototype[props[i]] = Events.prototype[props[i]];\n\t    } else {\n\t      obj[props[i]] = Events.prototype[props[i]];\n\t    }\n\t  }\n\t  return obj;\n\t};\n\n\t/**\n\t * Helpers\n\t * @type {Object}\n\t */\n\tvar util = {\n\t  extend: function(src, props) {\n\t    props = props || {};\n\t    var p;\n\t    for (p in src) {\n\t      if (src.hasOwnProperty(p)) {\n\t        if (!props.hasOwnProperty(p)) {\n\t          props[p] = src[p];\n\t        }\n\t      }\n\t    }\n\t    return props;\n\t  },\n\t  each: function(a, b, c) {\n\t    if (\"[object Object]\" === Object.prototype.toString.call(a)) {\n\t      for (var d in a) {\n\t        if (Object.prototype.hasOwnProperty.call(a, d)) {\n\t          b.call(c, d, a[d], a);\n\t        }\n\t      }\n\t    } else {\n\t      for (var e = 0, f = a.length; e < f; e++) {\n\t        b.call(c, e, a[e], a);\n\t      }\n\t    }\n\t  },\n\t  createElement: function(e, a) {\n\t    var d = document,\n\t        el = d.createElement(e);\n\t    if (a && \"[object Object]\" === Object.prototype.toString.call(a)) {\n\t      var i;\n\t      for (i in a)\n\t        if (i in el) el[i] = a[i];\n\t        else if (\"html\" === i) el.innerHTML = a[i];\n\t        else if (\"text\" === i) {\n\t          var t = d.createTextNode(a[i]);\n\t          el.appendChild(t);\n\t        } else el.setAttribute(i, a[i]);\n\t    }\n\t    return el;\n\t  },\n\t  hasClass: function(a, b) {\n\t    if (a)\n\t      return a.classList ? a.classList.contains(b) : !!a.className && !!a.className.match(new RegExp(\"(\\\\s|^)\" + b + \"(\\\\s|$)\"));\n\t  },\n\t  addClass: function(a, b) {\n\t    if (!util.hasClass(a, b)) {\n\t      if (a.classList) {\n\t        a.classList.add(b);\n\t      } else {\n\t        a.className = a.className.trim() + \" \" + b;\n\t      }\n\t    }\n\t  },\n\t  removeClass: function(a, b) {\n\t    if (util.hasClass(a, b)) {\n\t      if (a.classList) {\n\t        a.classList.remove(b);\n\t      } else {\n\t        a.className = a.className.replace(new RegExp(\"(^|\\\\s)\" + b.split(\" \").join(\"|\") + \"(\\\\s|$)\", \"gi\"), \" \");\n\t      }\n\t    }\n\t  },\n\t  closest: function(el, fn) {\n\t    return el && el !== document.body && (fn(el) ? el : util.closest(el.parentNode, fn));\n\t  },\n\t  isInt: function(val) {\n\t    return typeof val === 'number' && isFinite(val) && Math.floor(val) === val;\n\t  },\n\t  debounce: function(a, b, c) {\n\t    var d;\n\t    return function() {\n\t      var e = this,\n\t          f = arguments,\n\t          g = function() {\n\t            d = null;\n\t            if (!c) a.apply(e, f);\n\t          },\n\t          h = c && !d;\n\t      clearTimeout(d);\n\t      d = setTimeout(g, b);\n\t      if (h) {\n\t        a.apply(e, f);\n\t      }\n\t    };\n\t  },\n\t  rect: function(el, abs) {\n\t    var w = window;\n\t    var r = el.getBoundingClientRect();\n\t    var x = abs ? w.pageXOffset : 0;\n\t    var y = abs ? w.pageYOffset : 0;\n\n\t    return {\n\t      bottom: r.bottom + y,\n\t      height: r.height,\n\t      left: r.left + x,\n\t      right: r.right + x,\n\t      top: r.top + y,\n\t      width: r.width\n\t    };\n\t  },\n\t  includes: function(a, b) {\n\t    return a.indexOf(b) > -1;\n\t  },\n\t  truncate: function(el) {\n\t    while (el.firstChild) {\n\t      el.removeChild(el.firstChild);\n\t    }\n\t  }\n\t};\n\n\n\tfunction isset(obj, prop) {\n\t  return obj.hasOwnProperty(prop) && (obj[prop] === true || obj[prop].length);\n\t}\n\n\t/**\n\t * Append an item to the list\n\t * @param  {Object} item\n\t * @param  {Object} custom\n\t * @return {Void}\n\t */\n\tfunction appendItem(item, parent, custom) {\n\t  if (item.parentNode) {\n\t    if (!item.parentNode.parentNode) {\n\t      parent.appendChild(item.parentNode);\n\t    }\n\t  } else {\n\t    parent.appendChild(item);\n\t  }\n\n\t  util.removeClass(item, \"excluded\");\n\t  if (!custom) {\n\t    item.innerHTML = item.textContent;\n\t  }\n\t}\n\n\t/**\n\t * Render the item list\n\t * @return {Void}\n\t */\n\tvar render = function() {\n\t  if (this.items.length) {\n\t    var f = document.createDocumentFragment();\n\n\t    if (this.config.pagination) {\n\t      var pages = this.pages.slice(0, this.pageIndex);\n\n\t      util.each(pages, function(i, items) {\n\t        util.each(items, function(j, item) {\n\t          appendItem(item, f, this.customOption);\n\t        }, this);\n\t      }, this);\n\t    } else {\n\t      util.each(this.items, function(i, item) {\n\t        appendItem(item, f, this.customOption);\n\t      }, this);\n\t    }\n\n\t    if (f.childElementCount) {\n\t      util.removeClass(this.items[this.navIndex], \"active\");\n\t      this.navIndex = f.querySelector(\".selectr-option\").idx;\n\t      util.addClass(this.items[this.navIndex], \"active\");\n\t    }\n\n\t    this.tree.appendChild(f);\n\t  }\n\t};\n\n\t/**\n\t * Dismiss / close the dropdown\n\t * @param  {obj} e\n\t * @return {void}\n\t */\n\tvar dismiss = function(e) {\n\t  var target = e.target;\n\t  if (!this.container.contains(target) && (this.opened || util.hasClass(this.container, \"notice\"))) {\n\t    this.close();\n\t  }\n\t};\n\n\t/**\n\t * Build a list item from the HTMLOptionElement\n\t * @param  {int} i      HTMLOptionElement index\n\t * @param  {HTMLOptionElement} option\n\t * @param  {bool} group  Has parent optgroup\n\t * @return {void}\n\t */\n\tvar createItem = function(option, data) {\n\t  data = data || option;\n\t  var content = this.customOption ? this.config.renderOption(data) : option.textContent;\n\t  var opt = util.createElement(\"li\", {\n\t    class: \"selectr-option\",\n\t    html: content,\n\t    role: \"treeitem\",\n\t    \"aria-selected\": false\n\t  });\n\n\t  opt.idx = option.idx;\n\n\t  this.items.push(opt);\n\n\t  if (option.defaultSelected) {\n\t    this.defaultSelected.push(option.idx);\n\t  }\n\n\t  if (option.disabled) {\n\t    opt.disabled = true;\n\t    util.addClass(opt, \"disabled\");\n\t  }\n\n\t  return opt;\n\t};\n\n\t/**\n\t * Build the container\n\t * @return {Void}\n\t */\n\tvar build = function() {\n\n\t  this.requiresPagination = this.config.pagination && this.config.pagination > 0;\n\n\t  // Set width\n\t  if (isset(this.config, \"width\")) {\n\t    if (util.isInt(this.config.width)) {\n\t      this.width = this.config.width + \"px\";\n\t    } else {\n\t      if (this.config.width === \"auto\") {\n\t        this.width = \"100%\";\n\t      } else if (util.includes(this.config.width, \"%\")) {\n\t        this.width = this.config.width;\n\t      }\n\t    }\n\t  }\n\n\t  this.container = util.createElement(\"div\", {\n\t    class: \"selectr-container\"\n\t  });\n\n\t  // Custom className\n\t  if (this.config.customClass) {\n\t    util.addClass(this.container, this.config.customClass);\n\t  }\n\n\t  // Mobile device\n\t  if (this.mobileDevice) {\n\t    util.addClass(this.container, \"selectr-mobile\");\n\t  } else {\n\t    util.addClass(this.container, \"selectr-desktop\");\n\t  }\n\n\t  // Hide the HTMLSelectElement and prevent focus\n\t  this.el.tabIndex = -1;\n\n\t  // Native dropdown\n\t  if (this.config.nativeDropdown || this.mobileDevice) {\n\t    util.addClass(this.el, \"selectr-visible\");\n\t  } else {\n\t    util.addClass(this.el, \"selectr-hidden\");\n\t  }\n\n\t  this.selected = util.createElement(\"div\", {\n\t    class: \"selectr-selected\",\n\t    disabled: this.disabled,\n\t    tabIndex: 1, // enable tabIndex (#9)\n\t    \"aria-expanded\": false\n\t  });\n\n\t  this.label = util.createElement(this.el.multiple ? \"ul\" : \"span\", {\n\t    class: \"selectr-label\"\n\t  });\n\n\t  var dropdown = util.createElement(\"div\", {\n\t    class: \"selectr-options-container\"\n\t  });\n\n\t  this.tree = util.createElement(\"ul\", {\n\t    class: \"selectr-options\",\n\t    role: \"tree\",\n\t    \"aria-hidden\": true,\n\t    \"aria-expanded\": false\n\t  });\n\n\t  this.notice = util.createElement(\"div\", {\n\t    class: \"selectr-notice\"\n\t  });\n\n\t  this.el.setAttribute(\"aria-hidden\", true);\n\n\t  if (this.disabled) {\n\t    this.el.disabled = true;\n\t  }\n\n\t  if (this.el.multiple) {\n\t    util.addClass(this.label, \"selectr-tags\");\n\t    util.addClass(this.container, \"multiple\");\n\n\t    // Collection of tags\n\t    this.tags = [];\n\n\t    // Collection of selected values\n\t    this.selectedValues = this.getSelectedProperties('value');\n\n\t    // Collection of selected indexes\n\t    this.selectedIndexes = this.getSelectedProperties('idx');\n\t  }\n\n\t  this.selected.appendChild(this.label);\n\n\t  if (this.config.clearable) {\n\t    this.selectClear = util.createElement(\"button\", {\n\t      class: \"selectr-clear\",\n\t      type: \"button\"\n\t    });\n\n\t    this.container.appendChild(this.selectClear);\n\n\t    util.addClass(this.container, \"clearable\");\n\t  }\n\n\t  if (this.config.taggable) {\n\t    var li = util.createElement('li', {\n\t      class: 'input-tag'\n\t    });\n\t    this.input = util.createElement(\"input\", {\n\t      class: \"selectr-tag-input\",\n\t      placeholder: this.config.tagPlaceholder,\n\t      tagIndex: 0,\n\t      autocomplete: \"off\",\n\t      autocorrect: \"off\",\n\t      autocapitalize: \"off\",\n\t      spellcheck: \"false\",\n\t      role: \"textbox\",\n\t      type: \"search\"\n\t    });\n\n\t    li.appendChild(this.input);\n\t    this.label.appendChild(li);\n\t    util.addClass(this.container, \"taggable\");\n\n\t    this.tagSeperators = [\",\"];\n\t    if (this.config.tagSeperators) {\n\t      this.tagSeperators = this.tagSeperators.concat(this.config.tagSeperators);\n\t    }\n\t  }\n\n\t  if (this.config.searchable) {\n\t    this.input = util.createElement(\"input\", {\n\t      class: \"selectr-input\",\n\t      tagIndex: -1,\n\t      autocomplete: \"off\",\n\t      autocorrect: \"off\",\n\t      autocapitalize: \"off\",\n\t      spellcheck: \"false\",\n\t      role: \"textbox\",\n\t      type: \"search\"\n\t    });\n\t    this.inputClear = util.createElement(\"button\", {\n\t      class: \"selectr-input-clear\",\n\t      type: \"button\"\n\t    });\n\t    this.inputContainer = util.createElement(\"div\", {\n\t      class: \"selectr-input-container\"\n\t    });\n\n\t    this.inputContainer.appendChild(this.input);\n\t    this.inputContainer.appendChild(this.inputClear);\n\t    dropdown.appendChild(this.inputContainer);\n\t  }\n\n\t  dropdown.appendChild(this.notice);\n\t  dropdown.appendChild(this.tree);\n\n\t  // List of items for the dropdown\n\t  this.items = [];\n\n\t  // Establish options\n\t  this.options = [];\n\n\t  // Check for options in the element\n\t  if (this.el.options.length) {\n\t    this.options = [].slice.call(this.el.options);\n\t  }\n\n\t  // Element may have optgroups so\n\t  // iterate element.children instead of element.options\n\t  var group = false,\n\t      j = 0;\n\t  if (this.el.children.length) {\n\t    util.each(this.el.children, function(i, element) {\n\t      if (element.nodeName === \"OPTGROUP\") {\n\n\t        group = util.createElement(\"ul\", {\n\t          class: \"selectr-optgroup\",\n\t          role: \"group\",\n\t          html: \"<li class='selectr-optgroup--label'>\" + element.label + \"</li>\"\n\t        });\n\n\t        util.each(element.children, function(x, el) {\n\t          el.idx = j;\n\t          group.appendChild(createItem.call(this, el, group));\n\t          j++;\n\t        }, this);\n\t      } else {\n\t        element.idx = j;\n\t        createItem.call(this, element);\n\t        j++;\n\t      }\n\t    }, this);\n\t  }\n\n\t  // Options defined by the data option\n\t  if (this.config.data && Array.isArray(this.config.data)) {\n\t    this.data = [];\n\t    var optgroup = false,\n\t        option;\n\n\t    group = false;\n\t    j = 0;\n\n\t    util.each(this.config.data, function(i, opt) {\n\t      // Check for group options\n\t      if (isset(opt, \"children\")) {\n\t        optgroup = util.createElement(\"optgroup\", {\n\t          label: opt.text\n\t        });\n\n\t        group = util.createElement(\"ul\", {\n\t          class: \"selectr-optgroup\",\n\t          role: \"group\",\n\t          html: \"<li class='selectr-optgroup--label'>\" + opt.text + \"</li>\"\n\t        });\n\n\t        util.each(opt.children, function(x, data) {\n\t          option = new Option(data.text, data.value, false, data.hasOwnProperty(\"selected\") && data.selected === true);\n\n\t          option.disabled = isset(data, \"disabled\");\n\n\t          this.options.push(option);\n\n\t          optgroup.appendChild(option);\n\n\t          option.idx = j;\n\n\t          group.appendChild(createItem.call(this, option, data));\n\n\t          this.data[j] = data;\n\n\t          j++;\n\t        }, this);\n\t      } else {\n\t        option = new Option(opt.text, opt.value, false, opt.hasOwnProperty(\"selected\") && opt.selected === true);\n\n\t        option.disabled = isset(opt, \"disabled\");\n\n\t        this.options.push(option);\n\n\t        option.idx = j;\n\n\t        createItem.call(this, option, opt);\n\n\t        this.data[j] = opt;\n\n\t        j++;\n\t      }\n\t    }, this);\n\t  }\n\n\t  this.setSelected(true);\n\n\t  var first;\n\t  this.navIndex = 0;\n\t  for (var i = 0; i < this.items.length; i++) {\n\t    first = this.items[i];\n\n\t    if (!util.hasClass(first, \"disabled\")) {\n\n\t      util.addClass(first, \"active\");\n\t      this.navIndex = i;\n\t      break;\n\t    }\n\t  }\n\n\t  // Check for pagination / infinite scroll\n\t  if (this.requiresPagination) {\n\t    this.pageIndex = 1;\n\n\t    // Create the pages\n\t    this.paginate();\n\t  }\n\n\t  this.container.appendChild(this.selected);\n\t  this.container.appendChild(dropdown);\n\n\t  this.placeEl = util.createElement(\"div\", {\n\t    class: \"selectr-placeholder\"\n\t  });\n\n\t  // Set the placeholder\n\t  this.setPlaceholder();\n\n\t  this.selected.appendChild(this.placeEl);\n\n\t  // Disable if required\n\t  if (this.disabled) {\n\t    this.disable();\n\t  }\n\n\t  this.el.parentNode.insertBefore(this.container, this.el);\n\t  this.container.appendChild(this.el);\n\t};\n\n\t/**\n\t * Navigate through the dropdown\n\t * @param  {obj} e\n\t * @return {void}\n\t */\n\tvar navigate = function(e) {\n\t  e = e || window.event;\n\n\t  // Filter out the keys we don\"t want\n\t  if (!this.items.length || !this.opened || !util.includes([13, 38, 40], e.which)) {\n\t    this.navigating = false;\n\t    return;\n\t  }\n\n\t  e.preventDefault();\n\n\t  if (e.which === 13) {\n\n\t    if (this.config.taggable && this.input.value.length > 0) {\n\t      return false;\n\t    }\n\n\t    return this.change(this.navIndex);\n\t  }\n\n\t  var direction, prevEl = this.items[this.navIndex];\n\n\t  switch (e.which) {\n\t    case 38:\n\t      direction = 0;\n\t      if (this.navIndex > 0) {\n\t        this.navIndex--;\n\t      }\n\t      break;\n\t    case 40:\n\t      direction = 1;\n\t      if (this.navIndex < this.items.length - 1) {\n\t        this.navIndex++;\n\t      }\n\t  }\n\n\t  this.navigating = true;\n\n\n\t  // Instead of wasting memory holding a copy of this.items\n\t  // with disabled / excluded options omitted, skip them instead\n\t  while (util.hasClass(this.items[this.navIndex], \"disabled\") || util.hasClass(this.items[this.navIndex], \"excluded\")) {\n\t    if (direction) {\n\t      this.navIndex++;\n\t    } else {\n\t      this.navIndex--;\n\t    }\n\n\t    if (this.searching) {\n\t      if (this.navIndex > this.tree.lastElementChild.idx) {\n\t        this.navIndex = this.tree.lastElementChild.idx;\n\t        break;\n\t      } else if (this.navIndex < this.tree.firstElementChild.idx) {\n\t        this.navIndex = this.tree.firstElementChild.idx;\n\t        break;\n\t      }\n\t    }\n\t  }\n\n\t  // Autoscroll the dropdown during navigation\n\t  var r = util.rect(this.items[this.navIndex]);\n\n\t  if (!direction) {\n\t    if (this.navIndex === 0) {\n\t      this.tree.scrollTop = 0;\n\t    } else if (r.top - this.optsRect.top < 0) {\n\t      this.tree.scrollTop = this.tree.scrollTop + (r.top - this.optsRect.top);\n\t    }\n\t  } else {\n\t    if (this.navIndex === 0) {\n\t      this.tree.scrollTop = 0;\n\t    } else if ((r.top + r.height) > (this.optsRect.top + this.optsRect.height)) {\n\t      this.tree.scrollTop = this.tree.scrollTop + ((r.top + r.height) - (this.optsRect.top + this.optsRect.height));\n\t    }\n\n\t    // Load another page if needed\n\t    if (this.navIndex === this.tree.childElementCount - 1 && this.requiresPagination) {\n\t      load.call(this);\n\t    }\n\t  }\n\n\t  if (prevEl) {\n\t    util.removeClass(prevEl, \"active\");\n\t  }\n\n\t  util.addClass(this.items[this.navIndex], \"active\");\n\t};\n\n\t/**\n\t * Add a tag\n\t * @param  {HTMLElement} item\n\t */\n\tvar addTag = function(item) {\n\t  var that = this,\n\t      r;\n\n\t  var docFrag = document.createDocumentFragment();\n\t  var option = this.options[item.idx];\n\t  var data = this.data ? this.data[item.idx] : option;\n\t  var content = this.customSelected ? this.config.renderSelection(data) : option.textContent;\n\n\t  var tag = util.createElement(\"li\", {\n\t    class: \"selectr-tag\",\n\t    html: content\n\t  });\n\t  var btn = util.createElement(\"button\", {\n\t    class: \"selectr-tag-remove\",\n\t    type: \"button\"\n\t  });\n\n\t  tag.appendChild(btn);\n\n\t  // Set property to check against later\n\t  tag.idx = item.idx;\n\t  tag.tag = option.value;\n\n\t  this.tags.push(tag);\n\n\t  if (this.config.sortSelected) {\n\n\t    var tags = this.tags.slice();\n\n\t    // Deal with values that contain numbers\n\t    r = function(val, arr) {\n\t      val.replace(/(\\d+)|(\\D+)/g, function(that, $1, $2) {\n\t        arr.push([$1 || Infinity, $2 || \"\"]);\n\t      });\n\t    };\n\n\t    tags.sort(function(a, b) {\n\t      var x = [],\n\t          y = [],\n\t          ac, bc;\n\t      if (that.config.sortSelected === true) {\n\t        ac = a.tag;\n\t        bc = b.tag;\n\t      } else if (that.config.sortSelected === 'text') {\n\t        ac = a.textContent;\n\t        bc = b.textContent;\n\t      }\n\n\t      r(ac, x);\n\t      r(bc, y);\n\n\t      while (x.length && y.length) {\n\t        var ax = x.shift();\n\t        var by = y.shift();\n\t        var nn = (ax[0] - by[0]) || ax[1].localeCompare(by[1]);\n\t        if (nn) return nn;\n\t      }\n\n\t      return x.length - y.length;\n\t    });\n\n\t    util.each(tags, function(i, tg) {\n\t      docFrag.appendChild(tg);\n\t    });\n\n\t    this.label.innerHTML = \"\";\n\n\t  } else {\n\t    docFrag.appendChild(tag);\n\t  }\n\n\t  if (this.config.taggable) {\n\t    this.label.insertBefore(docFrag, this.input.parentNode);\n\t  } else {\n\t    this.label.appendChild(docFrag);\n\t  }\n\t};\n\n\t/**\n\t * Remove a tag\n\t * @param  {HTMLElement} item\n\t * @return {void}\n\t */\n\tvar removeTag = function(item) {\n\t  var tag = false;\n\n\t  util.each(this.tags, function(i, t) {\n\t    if (t.idx === item.idx) {\n\t      tag = t;\n\t    }\n\t  }, this);\n\n\t  if (tag) {\n\t    this.label.removeChild(tag);\n\t    this.tags.splice(this.tags.indexOf(tag), 1);\n\t  }\n\t};\n\n\t/**\n\t * Load the next page of items\n\t * @return {void}\n\t */\n\tvar load = function() {\n\t  var tree = this.tree;\n\t  var scrollTop = tree.scrollTop;\n\t  var scrollHeight = tree.scrollHeight;\n\t  var offsetHeight = tree.offsetHeight;\n\t  var atBottom = scrollTop >= (scrollHeight - offsetHeight);\n\n\t  if ((atBottom && this.pageIndex < this.pages.length)) {\n\t    var f = document.createDocumentFragment();\n\n\t    util.each(this.pages[this.pageIndex], function(i, item) {\n\t      appendItem(item, f, this.customOption);\n\t    }, this);\n\n\t    tree.appendChild(f);\n\n\t    this.pageIndex++;\n\n\t    this.emit(\"selectr.paginate\", {\n\t      items: this.items.length,\n\t      total: this.data.length,\n\t      page: this.pageIndex,\n\t      pages: this.pages.length\n\t    });\n\t  }\n\t};\n\n\t/**\n\t * Clear a search\n\t * @return {void}\n\t */\n\tvar clearSearch = function() {\n\t  if (this.config.searchable || this.config.taggable) {\n\t    this.input.value = null;\n\t    this.searching = false;\n\t    if (this.config.searchable) {\n\t      util.removeClass(this.inputContainer, \"active\");\n\t    }\n\n\t    if (util.hasClass(this.container, \"notice\")) {\n\t      util.removeClass(this.container, \"notice\");\n\t      util.addClass(this.container, \"open\");\n\t      this.input.focus();\n\t    }\n\n\t    util.each(this.items, function(i, item) {\n\t      // Items that didn't match need the class\n\t      // removing to make them visible again\n\t      util.removeClass(item, \"excluded\");\n\t      // Remove the span element for underlining matched items\n\t      if (!this.customOption) {\n\t        item.innerHTML = item.textContent;\n\t      }\n\t    }, this);\n\t  }\n\t};\n\n\t/**\n\t * Query matching for searches\n\t * @param  {string} query\n\t * @param  {HTMLOptionElement} option\n\t * @return {bool}\n\t */\n\tvar match = function(query, option) {\n\t  var result = new RegExp(query, \"i\").exec(option.textContent);\n\t  if (result) {\n\t    return option.textContent.replace(result[0], \"<span class='selectr-match'>\" + result[0] + \"</span>\");\n\t  }\n\t  return false;\n\t};\n\n\t// Main Lib\n\tvar Selectr = function(el, config) {\n\n\t  config = config || {};\n\n\t  if (!el) {\n\t    throw new Error(\"You must supply either a HTMLSelectElement or a CSS3 selector string.\");\n\t  }\n\n\t  this.el = el;\n\n\t  // CSS3 selector string\n\t  if (typeof el === \"string\") {\n\t    this.el = document.querySelector(el);\n\t  }\n\n\t  if (this.el === null) {\n\t    throw new Error(\"The element you passed to Selectr can not be found.\");\n\t  }\n\n\t  if (this.el.nodeName.toLowerCase() !== \"select\") {\n\t    throw new Error(\"The element you passed to Selectr is not a HTMLSelectElement.\");\n\t  }\n\n\t  this.render(config);\n\t};\n\n\t/**\n\t * Render the instance\n\t * @param  {object} config\n\t * @return {void}\n\t */\n\tSelectr.prototype.render = function(config) {\n\n\t  if (this.rendered) return;\n\n\t  // Merge defaults with user set config\n\t  this.config = util.extend(defaultConfig, config);\n\n\t  // Store type\n\t  this.originalType = this.el.type;\n\n\t  // Store tabIndex\n\t  this.originalIndex = this.el.tabIndex;\n\n\t  // Store defaultSelected options for form reset\n\t  this.defaultSelected = [];\n\n\t  // Store the original option count\n\t  this.originalOptionCount = this.el.options.length;\n\n\t  if (this.config.multiple || this.config.taggable) {\n\t    this.el.multiple = true;\n\t  }\n\n\t  // Disabled?\n\t  this.disabled = isset(this.config, \"disabled\");\n\n\t  this.opened = false;\n\n\t  if (this.config.taggable) {\n\t    this.config.searchable = false;\n\t  }\n\n\t  this.navigating = false;\n\n\t  this.mobileDevice = false;\n\t  if (/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)) {\n\t    this.mobileDevice = true;\n\t  }\n\n\t  this.customOption = this.config.hasOwnProperty(\"renderOption\") && typeof this.config.renderOption === \"function\";\n\t  this.customSelected = this.config.hasOwnProperty(\"renderSelection\") && typeof this.config.renderSelection === \"function\";\n\n\t  // Enable event emitter\n\t  Events.mixin(this);\n\n\t  build.call(this);\n\n\t  this.bindEvents();\n\n\t  this.update();\n\n\t  this.optsRect = util.rect(this.tree);\n\n\t  this.rendered = true;\n\n\t  // Fixes macOS Safari bug #28\n\t  if (!this.el.multiple) {\n\t    this.el.selectedIndex = this.selectedIndex;\n\t  }\n\n\t  var that = this;\n\t  setTimeout(function() {\n\t    that.emit(\"selectr.init\");\n\t  }, 20);\n\t};\n\n\tSelectr.prototype.getSelected = function () {\n\t  var selected = this.el.querySelectorAll('option:checked');\n\t  return selected;\n\t};\n\n\tSelectr.prototype.getSelectedProperties = function (prop) {\n\t  var selected = this.getSelected();\n\t  var values = [].slice.call(selected)\n\t      .map(function(option) { return option[prop]; })\n\t      .filter(function(i) { return i!==null && i!==undefined; });\n\t  return values;\n\t};\n\n\t/**\n\t * Attach the required event listeners\n\t */\n\tSelectr.prototype.bindEvents = function() {\n\n\t  var that = this;\n\n\t  this.events = {};\n\n\t  this.events.dismiss = dismiss.bind(this);\n\t  this.events.navigate = navigate.bind(this);\n\t  this.events.reset = this.reset.bind(this);\n\n\t  if (this.config.nativeDropdown || this.mobileDevice) {\n\n\t    this.container.addEventListener(\"touchstart\", function(e) {\n\t      if (e.changedTouches[0].target === that.el) {\n\t        that.toggle();\n\t      }\n\t    });\n\n\t    if (this.config.nativeDropdown || this.mobileDevice) {\n\t      this.container.addEventListener(\"click\", function(e) {\n\t        e.preventDefault();  // Jos: Added to prevent emitting clear directly after select\n\t        e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n\n\t        if (e.target === that.el) {\n\t          that.toggle();\n\t        }\n\t      });\n\t    }\n\n\t    var getChangedOptions = function(last, current) {\n\t      var added=[], removed=last.slice(0);\n\t      var idx;\n\t      for (var i=0; i<current.length; i++) {\n\t        idx = removed.indexOf(current[i]);\n\t        if (idx > -1)\n\t          removed.splice(idx, 1);\n\t        else\n\t          added.push(current[i]);\n\t      }\n\t      return [added, removed];\n\t    };\n\n\t    // Listen for the change on the native select\n\t    // and update accordingly\n\t    this.el.addEventListener(\"change\", function(e) {\n\t      if (that.el.multiple) {\n\t        var indexes = that.getSelectedProperties('idx');\n\t        var changes = getChangedOptions(that.selectedIndexes, indexes);\n\n\t        util.each(changes[0], function(i, idx) {\n\t          that.select(idx);\n\t        }, that);\n\n\t        util.each(changes[1], function(i, idx) {\n\t          that.deselect(idx);\n\t        }, that);\n\n\t      } else {\n\t        if (that.el.selectedIndex > -1) {\n\t          that.select(that.el.selectedIndex);\n\t        }\n\t      }\n\t    });\n\n\t  }\n\n\t  // Open the dropdown with Enter key if focused\n\t  if (this.config.nativeDropdown) {\n\t    this.container.addEventListener(\"keydown\", function(e) {\n\t      if (e.key === \"Enter\" && that.selected === document.activeElement) {\n\t        // Show the native\n\t        that.toggle();\n\n\t        // Focus on the native multiselect\n\t        setTimeout(function() {\n\t          that.el.focus();\n\t        }, 200);\n\t      }\n\t    });\n\t  }\n\n\t  // Non-native dropdown\n\t  this.selected.addEventListener(\"click\", function(e) {\n\n\t    if (!that.disabled) {\n\t      that.toggle();\n\t    }\n\n\t    e.preventDefault();\n\t    e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n\t  });\n\n\t  // Remove tag\n\t  this.label.addEventListener(\"click\", function(e) {\n\t    if (util.hasClass(e.target, \"selectr-tag-remove\")) {\n\t      that.deselect(e.target.parentNode.idx);\n\t    }\n\t  });\n\n\t  // Clear input\n\t  if (this.selectClear) {\n\t    this.selectClear.addEventListener(\"click\", this.clear.bind(this));\n\t  }\n\n\t  // Prevent text selection\n\t  this.tree.addEventListener(\"mousedown\", function(e) {\n\t    e.preventDefault();\n\t  });\n\n\t  // Select / deselect items\n\t  this.tree.addEventListener(\"click\", function(e) {\n\t    e.preventDefault();  // Jos: Added to prevent emitting clear directly after select\n\t    e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n\n\t    var item = util.closest(e.target, function(el) {\n\t      return el && util.hasClass(el, \"selectr-option\");\n\t    });\n\n\t    if (item) {\n\t      if (!util.hasClass(item, \"disabled\")) {\n\t        if (util.hasClass(item, \"selected\")) {\n\t          if (that.el.multiple || !that.el.multiple && that.config.allowDeselect) {\n\t            that.deselect(item.idx);\n\t          }\n\t        } else {\n\t          that.select(item.idx);\n\t        }\n\n\t        if (that.opened && !that.el.multiple) {\n\t          that.close();\n\t        }\n\t      }\n\t    }\n\t  });\n\n\t  // Mouseover list items\n\t  this.tree.addEventListener(\"mouseover\", function(e) {\n\t    if (util.hasClass(e.target, \"selectr-option\")) {\n\t      if (!util.hasClass(e.target, \"disabled\")) {\n\t        util.removeClass(that.items[that.navIndex], \"active\");\n\n\t        util.addClass(e.target, \"active\");\n\n\t        that.navIndex = [].slice.call(that.items).indexOf(e.target);\n\t      }\n\t    }\n\t  });\n\n\t  // Searchable\n\t  if (this.config.searchable) {\n\t    // Show / hide the search input clear button\n\n\t    this.input.addEventListener(\"focus\", function(e) {\n\t      that.searching = true;\n\t    });\n\n\t    this.input.addEventListener(\"blur\", function(e) {\n\t      that.searching = false;\n\t    });\n\n\t    this.input.addEventListener(\"keyup\", function(e) {\n\t      that.search();\n\n\t      if (!that.config.taggable) {\n\t        // Show / hide the search input clear button\n\t        if (this.value.length) {\n\t          util.addClass(this.parentNode, \"active\");\n\t        } else {\n\t          util.removeClass(this.parentNode, \"active\");\n\t        }\n\t      }\n\t    });\n\n\t    // Clear the search input\n\t    this.inputClear.addEventListener(\"click\", function(e) {\n\t      that.input.value = null;\n\t      clearSearch.call(that);\n\n\t      if (!that.tree.childElementCount) {\n\t        render.call(that);\n\t      }\n\t    });\n\t  }\n\n\t  if (this.config.taggable) {\n\t    this.input.addEventListener(\"keyup\", function(e) {\n\n\t      that.search();\n\n\t      if (that.config.taggable && this.value.length) {\n\t        var val = this.value.trim();\n\n\t        if (e.which === 13 || util.includes(that.tagSeperators, e.key)) {\n\n\t          util.each(that.tagSeperators, function(i, k) {\n\t            val = val.replace(k, '');\n\t          });\n\n\t          var option = that.add({\n\t            value: val,\n\t            text: val,\n\t            selected: true\n\t          }, true);\n\n\t          if (!option) {\n\t            this.value = '';\n\t            that.setMessage('That tag is already in use.');\n\t          } else {\n\t            that.close();\n\t            clearSearch.call(that);\n\t          }\n\t        }\n\t      }\n\t    });\n\t  }\n\n\t  this.update = util.debounce(function() {\n\t    // Optionally close dropdown on scroll / resize (#11)\n\t    if (that.opened && that.config.closeOnScroll) {\n\t      that.close();\n\t    }\n\t    if (that.width) {\n\t      that.container.style.width = that.width;\n\t    }\n\t    that.invert();\n\t  }, 50);\n\n\t  if (this.requiresPagination) {\n\t    this.paginateItems = util.debounce(function() {\n\t      load.call(this);\n\t    }, 50);\n\n\t    this.tree.addEventListener(\"scroll\", this.paginateItems.bind(this));\n\t  }\n\n\t  // Dismiss when clicking outside the container\n\t  document.addEventListener(\"click\", this.events.dismiss);\n\t  window.addEventListener(\"keydown\", this.events.navigate);\n\n\t  window.addEventListener(\"resize\", this.update);\n\t  window.addEventListener(\"scroll\", this.update);\n\n\t  // Listen for form.reset() (@ambrooks, #13)\n\t  if (this.el.form) {\n\t    this.el.form.addEventListener(\"reset\", this.events.reset);\n\t  }\n\t};\n\n\t/**\n\t * Check for selected options\n\t * @param {bool} reset\n\t */\n\tSelectr.prototype.setSelected = function(reset) {\n\n\t  // Select first option as with a native select-one element - #21, #24\n\t  if (!this.config.data && !this.el.multiple && this.el.options.length) {\n\t    // Browser has selected the first option by default\n\t    if (this.el.selectedIndex === 0) {\n\t      if (!this.el.options[0].defaultSelected && !this.config.defaultSelected) {\n\t        this.el.selectedIndex = -1;\n\t      }\n\t    }\n\n\t    this.selectedIndex = this.el.selectedIndex;\n\n\t    if (this.selectedIndex > -1) {\n\t      this.select(this.selectedIndex);\n\t    }\n\t  }\n\n\t  // If we're changing a select-one to select-multiple via the config\n\t  // and there are no selected options, the first option will be selected by the browser\n\t  // Let's prevent that here.\n\t  if (this.config.multiple && this.originalType === \"select-one\" && !this.config.data) {\n\t    if (this.el.options[0].selected && !this.el.options[0].defaultSelected) {\n\t      this.el.options[0].selected = false;\n\t    }\n\t  }\n\n\t  util.each(this.options, function(i, option) {\n\t    if (option.selected && option.defaultSelected) {\n\t      this.select(option.idx);\n\t    }\n\t  }, this);\n\n\t  if (this.config.selectedValue) {\n\t    this.setValue(this.config.selectedValue);\n\t  }\n\n\t  if (this.config.data) {\n\n\n\t    if (!this.el.multiple && this.config.defaultSelected && this.el.selectedIndex < 0) {\n\t      this.select(0);\n\t    }\n\n\t    var j = 0;\n\t    util.each(this.config.data, function(i, opt) {\n\t      // Check for group options\n\t      if (isset(opt, \"children\")) {\n\t        util.each(opt.children, function(x, item) {\n\t          if (item.hasOwnProperty(\"selected\") && item.selected === true) {\n\t            this.select(j);\n\t          }\n\t          j++;\n\t        }, this);\n\t      } else {\n\t        if (opt.hasOwnProperty(\"selected\") && opt.selected === true) {\n\t          this.select(j);\n\t        }\n\t        j++;\n\t      }\n\t    }, this);\n\t  }\n\t};\n\n\t/**\n\t * Destroy the instance\n\t * @return {void}\n\t */\n\tSelectr.prototype.destroy = function() {\n\n\t  if (!this.rendered) return;\n\n\t  this.emit(\"selectr.destroy\");\n\n\t  // Revert to select-single if programtically set to multiple\n\t  if (this.originalType === 'select-one') {\n\t    this.el.multiple = false;\n\t  }\n\n\t  if (this.config.data) {\n\t    this.el.innerHTML = \"\";\n\t  }\n\n\t  // Remove the className from select element\n\t  util.removeClass(this.el, 'selectr-hidden');\n\n\t  // Remove reset listener from parent form\n\t  if (this.el.form) {\n\t    util.off(this.el.form, \"reset\", this.events.reset);\n\t  }\n\n\t  // Remove event listeners attached to doc and win\n\t  util.off(document, \"click\", this.events.dismiss);\n\t  util.off(document, \"keydown\", this.events.navigate);\n\t  util.off(window, \"resize\", this.update);\n\t  util.off(window, \"scroll\", this.update);\n\n\t  // Replace the container with the original select element\n\t  this.container.parentNode.replaceChild(this.el, this.container);\n\n\t  this.rendered = false;\n\t};\n\n\t/**\n\t * Change an options state\n\t * @param  {Number} index\n\t * @return {void}\n\t */\n\tSelectr.prototype.change = function(index) {\n\t  var item = this.items[index],\n\t      option = this.options[index];\n\n\t  if (option.disabled) {\n\t    return;\n\t  }\n\n\t  if (option.selected && util.hasClass(item, \"selected\")) {\n\t    this.deselect(index);\n\t  } else {\n\t    this.select(index);\n\t  }\n\n\t  if (this.opened && !this.el.multiple) {\n\t    this.close();\n\t  }\n\t};\n\n\t/**\n\t * Select an option\n\t * @param  {Number} index\n\t * @return {void}\n\t */\n\tSelectr.prototype.select = function(index) {\n\n\t  var item = this.items[index],\n\t      options = [].slice.call(this.el.options),\n\t      option = this.options[index];\n\n\t  if (this.el.multiple) {\n\t    if (util.includes(this.selectedIndexes, index)) {\n\t      return false;\n\t    }\n\n\t    if (this.config.maxSelections && this.tags.length === this.config.maxSelections) {\n\t      this.setMessage(\"A maximum of \" + this.config.maxSelections + \" items can be selected.\", true);\n\t      return false;\n\t    }\n\n\t    this.selectedValues.push(option.value);\n\t    this.selectedIndexes.push(index);\n\n\t    addTag.call(this, item);\n\t  } else {\n\t    var data = this.data ? this.data[index] : option;\n\t    this.label.innerHTML = this.customSelected ? this.config.renderSelection(data) : option.textContent;\n\n\t    this.selectedValue = option.value;\n\t    this.selectedIndex = index;\n\n\t    util.each(this.options, function(i, o) {\n\t      var opt = this.items[i];\n\n\t      if (i !== index) {\n\t        if (opt) {\n\t          util.removeClass(opt, \"selected\");\n\t        }\n\t        o.selected = false;\n\t        o.removeAttribute(\"selected\");\n\t      }\n\t    }, this);\n\t  }\n\n\t  if (!util.includes(options, option)) {\n\t    this.el.add(option);\n\t  }\n\n\t  item.setAttribute(\"aria-selected\", true);\n\n\t  util.addClass(item, \"selected\");\n\t  util.addClass(this.container, \"has-selected\");\n\n\t  option.selected = true;\n\t  option.setAttribute(\"selected\", \"\");\n\n\t  this.emit(\"selectr.change\", option);\n\n\t  this.emit(\"selectr.select\", option);\n\t};\n\n\t/**\n\t * Deselect an option\n\t * @param  {Number} index\n\t * @return {void}\n\t */\n\tSelectr.prototype.deselect = function(index, force) {\n\t  var item = this.items[index],\n\t      option = this.options[index];\n\n\t  if (this.el.multiple) {\n\t    var selIndex = this.selectedIndexes.indexOf(index);\n\t    this.selectedIndexes.splice(selIndex, 1);\n\n\t    var valIndex = this.selectedValues.indexOf(option.value);\n\t    this.selectedValues.splice(valIndex, 1);\n\n\t    removeTag.call(this, item);\n\n\t    if (!this.tags.length) {\n\t      util.removeClass(this.container, \"has-selected\");\n\t    }\n\t  } else {\n\n\t    if (!force && !this.config.clearable && !this.config.allowDeselect) {\n\t      return false;\n\t    }\n\n\t    this.label.innerHTML = \"\";\n\t    this.selectedValue = null;\n\n\t    this.el.selectedIndex = this.selectedIndex = -1;\n\n\t    util.removeClass(this.container, \"has-selected\");\n\t  }\n\n\n\t  this.items[index].setAttribute(\"aria-selected\", false);\n\n\t  util.removeClass(this.items[index], \"selected\");\n\n\t  option.selected = false;\n\n\t  option.removeAttribute(\"selected\");\n\n\t  this.emit(\"selectr.change\", null);\n\n\t  this.emit(\"selectr.deselect\", option);\n\t};\n\n\t/**\n\t * Programmatically set selected values\n\t * @param {String|Array} value - A string or an array of strings\n\t */\n\tSelectr.prototype.setValue = function(value) {\n\t  var isArray = Array.isArray(value);\n\n\t  if (!isArray) {\n\t    value = value.toString().trim();\n\t  }\n\n\t  // Can't pass array to select-one\n\t  if (!this.el.multiple && isArray) {\n\t    return false;\n\t  }\n\n\t  util.each(this.options, function(i, option) {\n\t    if (isArray && util.includes(value.toString(), option.value) || option.value === value) {\n\t      this.change(option.idx);\n\t    }\n\t  }, this);\n\t};\n\n\t/**\n\t * Set the selected value(s)\n\t * @param  {bool} toObject Return only the raw values or an object\n\t * @param  {bool} toJson   Return the object as a JSON string\n\t * @return {mixed}         Array or String\n\t */\n\tSelectr.prototype.getValue = function(toObject, toJson) {\n\t  var value;\n\n\t  if (this.el.multiple) {\n\t    if (toObject) {\n\t      if (this.selectedIndexes.length) {\n\t        value = {};\n\t        value.values = [];\n\t        util.each(this.selectedIndexes, function(i, index) {\n\t          var option = this.options[index];\n\t          value.values[i] = {\n\t            value: option.value,\n\t            text: option.textContent\n\t          };\n\t        }, this);\n\t      }\n\t    } else {\n\t      value = this.selectedValues.slice();\n\t    }\n\t  } else {\n\t    if (toObject) {\n\t      var option = this.options[this.selectedIndex];\n\t      value = {\n\t        value: option.value,\n\t        text: option.textContent\n\t      };\n\t    } else {\n\t      value = this.selectedValue;\n\t    }\n\t  }\n\n\t  if (toObject && toJson) {\n\t    value = JSON.stringify(value);\n\t  }\n\n\t  return value;\n\t};\n\n\t/**\n\t * Add a new option or options\n\t * @param {object} data\n\t */\n\tSelectr.prototype.add = function(data, checkDuplicate) {\n\t  if (data) {\n\n\t    this.data = this.data || [];\n\t    this.items = this.items || [];\n\t    this.options = this.options || [];\n\n\t    if (Array.isArray(data)) {\n\t      // We have an array on items\n\t      util.each(data, function(i, obj) {\n\t        this.add(obj, checkDuplicate);\n\t      }, this);\n\t    }\n\t    // User passed a single object to the method\n\t    // or Selectr passed an object from an array\n\t    else if (\"[object Object]\" === Object.prototype.toString.call(data)) {\n\n\t      if (checkDuplicate) {\n\t        var dupe = false;\n\n\t        util.each(this.options, function(i, option) {\n\t          if (option.value.toLowerCase() === data.value.toLowerCase()) {\n\t            dupe = true;\n\t          }\n\t        });\n\n\t        if (dupe) {\n\t          return false;\n\t        }\n\t      }\n\n\t      var option = util.createElement('option', data);\n\n\t      this.data.push(data);\n\n\t      // Add the new option to the list\n\t      this.options.push(option);\n\n\t      // Add the index for later use\n\t      option.idx = this.options.length > 0 ? this.options.length - 1 : 0;\n\n\t      // Create a new item\n\t      createItem.call(this, option);\n\n\t      // Select the item if required\n\t      if (data.selected) {\n\t        this.select(option.idx);\n\t      }\n\n\t      return option;\n\t    }\n\n\t    // We may have had an empty select so update\n\t    // the placeholder to reflect the changes.\n\t    this.setPlaceholder();\n\n\t    // Recount the pages\n\t    if (this.config.pagination) {\n\t      this.paginate();\n\t    }\n\n\t    return true;\n\t  }\n\t};\n\n\t/**\n\t * Remove an option or options\n\t * @param  {Mixed} o Array, integer (index) or string (value)\n\t * @return {Void}\n\t */\n\tSelectr.prototype.remove = function(o) {\n\t  var options = [];\n\t  if (Array.isArray(o)) {\n\t    util.each(o, function(i, opt) {\n\t      if (util.isInt(opt)) {\n\t        options.push(this.getOptionByIndex(opt));\n\t      } else if (typeof o === \"string\") {\n\t        options.push(this.getOptionByValue(opt));\n\t      }\n\t    }, this);\n\n\t  } else if (util.isInt(o)) {\n\t    options.push(this.getOptionByIndex(o));\n\t  } else if (typeof o === \"string\") {\n\t    options.push(this.getOptionByValue(o));\n\t  }\n\n\t  if (options.length) {\n\t    var index;\n\t    util.each(options, function(i, option) {\n\t      index = option.idx;\n\n\t      // Remove the HTMLOptionElement\n\t      this.el.remove(option);\n\n\t      // Remove the reference from the option array\n\t      this.options.splice(index, 1);\n\n\t      // If the item has a parentNode (group element) it needs to be removed\n\t      // otherwise the render function will still append it to the dropdown\n\t      var parentNode = this.items[index].parentNode;\n\n\t      if (parentNode) {\n\t        parentNode.removeChild(this.items[index]);\n\t      }\n\n\t      // Remove reference from the items array\n\t      this.items.splice(index, 1);\n\n\t      // Reset the indexes\n\t      util.each(this.options, function(i, opt) {\n\t        opt.idx = i;\n\t        this.items[i].idx = i;\n\t      }, this);\n\t    }, this);\n\n\t    // We may have had an empty select now so update\n\t    // the placeholder to reflect the changes.\n\t    this.setPlaceholder();\n\n\t    // Recount the pages\n\t    if (this.config.pagination) {\n\t      this.paginate();\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Remove all options\n\t */\n\tSelectr.prototype.removeAll = function() {\n\n\t  // Clear any selected options\n\t  this.clear(true);\n\n\t  // Remove the HTMLOptionElements\n\t  util.each(this.el.options, function(i, option) {\n\t    this.el.remove(option);\n\t  }, this);\n\n\t  // Empty the dropdown\n\t  util.truncate(this.tree);\n\n\t  // Reset variables\n\t  this.items = [];\n\t  this.options = [];\n\t  this.data = [];\n\n\t  this.navIndex = 0;\n\n\t  if (this.requiresPagination) {\n\t    this.requiresPagination = false;\n\n\t    this.pageIndex = 1;\n\t    this.pages = [];\n\t  }\n\n\t  // Update the placeholder\n\t  this.setPlaceholder();\n\t};\n\n\t/**\n\t * Perform a search\n\t * @param  {string} query The query string\n\t */\n\tSelectr.prototype.search = function(string) {\n\n\t  if (this.navigating) return;\n\n\t  string = string || this.input.value;\n\n\t  var f = document.createDocumentFragment();\n\n\t  // Remove message\n\t  this.removeMessage();\n\n\t  // Clear the dropdown\n\t  util.truncate(this.tree);\n\n\t  if (string.length > 1) {\n\t    // Check the options for the matching string\n\t    util.each(this.options, function(i, option) {\n\t      var item = this.items[option.idx];\n\t      var includes = util.includes(option.textContent.toLowerCase(), string.toLowerCase());\n\n\t      if (includes && !option.disabled) {\n\n\t        appendItem(item, f, this.customOption);\n\n\t        util.removeClass(item, \"excluded\");\n\n\t        // Underline the matching results\n\t        if (!this.customOption) {\n\t          item.innerHTML = match(string, option);\n\t        }\n\t      } else {\n\t        util.addClass(item, \"excluded\");\n\t      }\n\t    }, this);\n\n\n\t    if (!f.childElementCount) {\n\t      if (!this.config.taggable) {\n\t        this.setMessage(\"no results.\");\n\t      }\n\t    } else {\n\t      // Highlight top result (@binary-koan #26)\n\t      var prevEl = this.items[this.navIndex];\n\t      var firstEl = f.firstElementChild;\n\n\t      util.removeClass(prevEl, \"active\");\n\n\t      this.navIndex = firstEl.idx;\n\n\t      util.addClass(firstEl, \"active\");\n\t    }\n\n\t  } else {\n\t    render.call(this);\n\t  }\n\n\t  this.tree.appendChild(f);\n\t};\n\n\t/**\n\t * Toggle the dropdown\n\t * @return {void}\n\t */\n\tSelectr.prototype.toggle = function() {\n\t  if (!this.disabled) {\n\t    if (this.opened) {\n\t      this.close();\n\t    } else {\n\t      this.open();\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Open the dropdown\n\t * @return {void}\n\t */\n\tSelectr.prototype.open = function() {\n\n\t  var that = this;\n\n\t  if (!this.options.length) {\n\t    return false;\n\t  }\n\n\t  if (!this.opened) {\n\t    this.emit(\"selectr.open\");\n\t  }\n\n\t  this.opened = true;\n\n\t  if (this.mobileDevice || this.config.nativeDropdown) {\n\t    util.addClass(this.container, \"native-open\");\n\n\t    if (this.config.data) {\n\t      // Dump the options into the select\n\t      // otherwise the native dropdown will be empty\n\t      util.each(this.options, function(i, option) {\n\t        this.el.add(option);\n\t      }, this);\n\t    }\n\n\t    return;\n\t  }\n\n\t  util.addClass(this.container, \"open\");\n\n\t  render.call(this);\n\n\t  this.invert();\n\n\t  this.tree.scrollTop = 0;\n\n\t  util.removeClass(this.container, \"notice\");\n\n\t  this.selected.setAttribute(\"aria-expanded\", true);\n\n\t  this.tree.setAttribute(\"aria-hidden\", false);\n\t  this.tree.setAttribute(\"aria-expanded\", true);\n\n\t  if (this.config.searchable && !this.config.taggable) {\n\t    setTimeout(function() {\n\t      that.input.focus();\n\t      // Allow tab focus\n\t      that.input.tabIndex = 0;\n\t    }, 10);\n\t  }\n\t};\n\n\t/**\n\t * Close the dropdown\n\t * @return {void}\n\t */\n\tSelectr.prototype.close = function() {\n\n\t  if (this.opened) {\n\t    this.emit(\"selectr.close\");\n\t  }\n\n\t  this.opened = false;\n\n\t  if (this.mobileDevice || this.config.nativeDropdown) {\n\t    util.removeClass(this.container, \"native-open\");\n\t    return;\n\t  }\n\n\t  var notice = util.hasClass(this.container, \"notice\");\n\n\t  if (this.config.searchable && !notice) {\n\t    this.input.blur();\n\t    // Disable tab focus\n\t    this.input.tabIndex = -1;\n\t    this.searching = false;\n\t  }\n\n\t  if (notice) {\n\t    util.removeClass(this.container, \"notice\");\n\t    this.notice.textContent = \"\";\n\t  }\n\n\t  util.removeClass(this.container, \"open\");\n\t  util.removeClass(this.container, \"native-open\");\n\n\t  this.selected.setAttribute(\"aria-expanded\", false);\n\n\t  this.tree.setAttribute(\"aria-hidden\", true);\n\t  this.tree.setAttribute(\"aria-expanded\", false);\n\n\t  util.truncate(this.tree);\n\t  clearSearch.call(this);\n\t};\n\n\n\t/**\n\t * Enable the element\n\t * @return {void}\n\t */\n\tSelectr.prototype.enable = function() {\n\t  this.disabled = false;\n\t  this.el.disabled = false;\n\n\t  this.selected.tabIndex = this.originalIndex;\n\n\t  if (this.el.multiple) {\n\t    util.each(this.tags, function(i, t) {\n\t      t.lastElementChild.tabIndex = 0;\n\t    });\n\t  }\n\n\t  util.removeClass(this.container, \"selectr-disabled\");\n\t};\n\n\t/**\n\t * Disable the element\n\t * @param  {boolean} container Disable the container only (allow value submit with form)\n\t * @return {void}\n\t */\n\tSelectr.prototype.disable = function(container) {\n\t  if (!container) {\n\t    this.el.disabled = true;\n\t  }\n\n\t  this.selected.tabIndex = -1;\n\n\t  if (this.el.multiple) {\n\t    util.each(this.tags, function(i, t) {\n\t      t.lastElementChild.tabIndex = -1;\n\t    });\n\t  }\n\n\t  this.disabled = true;\n\t  util.addClass(this.container, \"selectr-disabled\");\n\t};\n\n\n\t/**\n\t * Reset to initial state\n\t * @return {void}\n\t */\n\tSelectr.prototype.reset = function() {\n\t  if (!this.disabled) {\n\t    this.clear();\n\n\t    this.setSelected(true);\n\n\t    util.each(this.defaultSelected, function(i, idx) {\n\t      this.select(idx);\n\t    }, this);\n\n\t    this.emit(\"selectr.reset\");\n\t  }\n\t};\n\n\t/**\n\t * Clear all selections\n\t * @return {void}\n\t */\n\tSelectr.prototype.clear = function(force) {\n\n\t  if (this.el.multiple) {\n\t    // Loop over the selectedIndexes so we don't have to loop over all the options\n\t    // which can be costly if there are a lot of them\n\n\t    if (this.selectedIndexes.length) {\n\t      // Copy the array or we'll get an error\n\t      var indexes = this.selectedIndexes.slice();\n\n\t      util.each(indexes, function(i, idx) {\n\t        this.deselect(idx);\n\t      }, this);\n\t    }\n\t  } else {\n\t    if (this.selectedIndex > -1) {\n\t      this.deselect(this.selectedIndex, force);\n\t    }\n\t  }\n\n\t  this.emit(\"selectr.clear\");\n\t};\n\n\t/**\n\t * Return serialised data\n\t * @param  {boolean} toJson\n\t * @return {mixed} Returns either an object or JSON string\n\t */\n\tSelectr.prototype.serialise = function(toJson) {\n\t  var data = [];\n\t  util.each(this.options, function(i, option) {\n\t    var obj = {\n\t      value: option.value,\n\t      text: option.textContent\n\t    };\n\n\t    if (option.selected) {\n\t      obj.selected = true;\n\t    }\n\t    if (option.disabled) {\n\t      obj.disabled = true;\n\t    }\n\t    data[i] = obj;\n\t  });\n\n\t  return toJson ? JSON.stringify(data) : data;\n\t};\n\n\t/**\n\t * Localised version of serialise() method\n\t */\n\tSelectr.prototype.serialize = function(toJson) {\n\t  return this.serialise(toJson);\n\t};\n\n\t/**\n\t * Sets the placeholder\n\t * @param {String} placeholder\n\t */\n\tSelectr.prototype.setPlaceholder = function(placeholder) {\n\t  // Set the placeholder\n\t  placeholder = placeholder || this.config.placeholder || this.el.getAttribute(\"placeholder\");\n\n\t  if (!this.options.length) {\n\t    placeholder = \"No options available\";\n\t  }\n\n\t  this.placeEl.innerHTML = placeholder;\n\t};\n\n\t/**\n\t * Paginate the option list\n\t * @return {Array}\n\t */\n\tSelectr.prototype.paginate = function() {\n\t  if (this.items.length) {\n\t    var that = this;\n\n\t    this.pages = this.items.map(function(v, i) {\n\t      return i % that.config.pagination === 0 ? that.items.slice(i, i + that.config.pagination) : null;\n\t    }).filter(function(pages) {\n\t      return pages;\n\t    });\n\n\t    return this.pages;\n\t  }\n\t};\n\n\t/**\n\t * Display a message\n\t * @param  {String} message The message\n\t */\n\tSelectr.prototype.setMessage = function(message, close) {\n\t  if (close) {\n\t    this.close();\n\t  }\n\t  util.addClass(this.container, \"notice\");\n\t  this.notice.textContent = message;\n\t};\n\n\t/**\n\t * Dismiss the current message\n\t */\n\tSelectr.prototype.removeMessage = function() {\n\t  util.removeClass(this.container, \"notice\");\n\t  this.notice.innerHTML = \"\";\n\t};\n\n\t/**\n\t * Keep the dropdown within the window\n\t * @return {void}\n\t */\n\tSelectr.prototype.invert = function() {\n\t  var rt = util.rect(this.selected),\n\t      oh = this.tree.parentNode.offsetHeight,\n\t      wh = window.innerHeight,\n\t      doInvert = rt.top + rt.height + oh > wh;\n\n\t  if (doInvert) {\n\t    util.addClass(this.container, \"inverted\");\n\t    this.isInverted = true;\n\t  } else {\n\t    util.removeClass(this.container, \"inverted\");\n\t    this.isInverted = false;\n\t  }\n\n\t  this.optsRect = util.rect(this.tree);\n\t};\n\n\t/**\n\t * Get an option via it's index\n\t * @param  {Integer} index The index of the HTMLOptionElement required\n\t * @return {HTMLOptionElement}\n\t */\n\tSelectr.prototype.getOptionByIndex = function(index) {\n\t  return this.options[index];\n\t};\n\n\t/**\n\t * Get an option via it's value\n\t * @param  {String} value The value of the HTMLOptionElement required\n\t * @return {HTMLOptionElement}\n\t */\n\tSelectr.prototype.getOptionByValue = function(value) {\n\t  var option = false;\n\n\t  for (var i = 0, l = this.options.length; i < l; i++) {\n\t    if (this.options[i].value.trim() === value.toString().trim()) {\n\t      option = this.options[i];\n\t      break;\n\t    }\n\t  }\n\n\t  return option;\n\t};\n\n\tmodule.exports = Selectr;\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar ContextMenu = __webpack_require__(10);\n\n\t/**\n\t * Create a select box to be used in the editor menu's, which allows to switch mode\n\t * @param {HTMLElement} container\n\t * @param {String[]} modes  Available modes: 'code', 'form', 'text', 'tree', 'view'\n\t * @param {String} current  Available modes: 'code', 'form', 'text', 'tree', 'view'\n\t * @param {function(mode: string)} onSwitch  Callback invoked on switch\n\t * @constructor\n\t */\n\tfunction ModeSwitcher(container, modes, current, onSwitch) {\n\t  // available modes\n\t  var availableModes = {\n\t    code: {\n\t      'text': 'Code',\n\t      'title': 'Switch to code highlighter',\n\t      'click': function () {\n\t        onSwitch('code')\n\t      }\n\t    },\n\t    form: {\n\t      'text': 'Form',\n\t      'title': 'Switch to form editor',\n\t      'click': function () {\n\t        onSwitch('form');\n\t      }\n\t    },\n\t    text: {\n\t      'text': 'Text',\n\t      'title': 'Switch to plain text editor',\n\t      'click': function () {\n\t        onSwitch('text');\n\t      }\n\t    },\n\t    tree: {\n\t      'text': 'Tree',\n\t      'title': 'Switch to tree editor',\n\t      'click': function () {\n\t        onSwitch('tree');\n\t      }\n\t    },\n\t    view: {\n\t      'text': 'View',\n\t      'title': 'Switch to tree view',\n\t      'click': function () {\n\t        onSwitch('view');\n\t      }\n\t    }\n\t  };\n\n\t  // list the selected modes\n\t  var items = [];\n\t  for (var i = 0; i < modes.length; i++) {\n\t    var mode = modes[i];\n\t    var item = availableModes[mode];\n\t    if (!item) {\n\t      throw new Error('Unknown mode \"' + mode + '\"');\n\t    }\n\n\t    item.className = 'jsoneditor-type-modes' + ((current == mode) ? ' jsoneditor-selected' : '');\n\t    items.push(item);\n\t  }\n\n\t  // retrieve the title of current mode\n\t  var currentMode = availableModes[current];\n\t  if (!currentMode) {\n\t    throw new Error('Unknown mode \"' + current + '\"');\n\t  }\n\t  var currentTitle = currentMode.text;\n\n\t  // create the html element\n\t  var box = document.createElement('button');\n\t  box.type = 'button';\n\t  box.className = 'jsoneditor-modes jsoneditor-separator';\n\t  box.innerHTML = currentTitle + ' &#x25BE;';\n\t  box.title = 'Switch editor mode';\n\t  box.onclick = function () {\n\t    var menu = new ContextMenu(items);\n\t    menu.show(box, container);\n\t  };\n\n\t  var frame = document.createElement('div');\n\t  frame.className = 'jsoneditor-modes';\n\t  frame.style.position = 'relative';\n\t  frame.appendChild(box);\n\n\t  container.appendChild(frame);\n\n\t  this.dom = {\n\t    container: container,\n\t    box: box,\n\t    frame: frame\n\t  };\n\t}\n\n\t/**\n\t * Set focus to switcher\n\t */\n\tModeSwitcher.prototype.focus = function () {\n\t  this.dom.box.focus();\n\t};\n\n\t/**\n\t * Destroy the ModeSwitcher, remove from DOM\n\t */\n\tModeSwitcher.prototype.destroy = function () {\n\t  if (this.dom && this.dom.frame && this.dom.frame.parentNode) {\n\t    this.dom.frame.parentNode.removeChild(this.dom.frame);\n\t  }\n\t  this.dom = null;\n\t};\n\n\tmodule.exports = ModeSwitcher;\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tfunction completely(config) {\n\t    config = config || {};\n\t    config.confirmKeys = config.confirmKeys || [39, 35, 9] // right, end, tab \n\t    config.caseSensitive = config.caseSensitive || false    // autocomplete case sensitive\n\n\t    var fontSize = '';\n\t    var fontFamily = '';    \n\n\t    var wrapper = document.createElement('div');\n\t    wrapper.style.position = 'relative';\n\t    wrapper.style.outline = '0';\n\t    wrapper.style.border = '0';\n\t    wrapper.style.margin = '0';\n\t    wrapper.style.padding = '0';\n\n\t    var dropDown = document.createElement('div');\n\t    dropDown.className = 'autocomplete dropdown';\n\t    dropDown.style.position = 'absolute';\n\t    dropDown.style.visibility = 'hidden';\n\n\t    var spacer;\n\t    var leftSide; // <-- it will contain the leftSide part of the textfield (the bit that was already autocompleted)\n\t    var createDropDownController = function (elem, rs) {\n\t        var rows = [];\n\t        var ix = 0;\n\t        var oldIndex = -1;\n\n\t        var onMouseOver = function () { this.style.outline = '1px solid #ddd'; }\n\t        var onMouseOut = function () { this.style.outline = '0'; }\n\t        var onMouseDown = function () { p.hide(); p.onmouseselection(this.__hint, p.rs); }\n\n\t        var p = {\n\t            rs: rs,\n\t            hide: function () {\n\t                elem.style.visibility = 'hidden';\n\t                //rs.hideDropDown();\n\t            },\n\t            refresh: function (token, array) {\n\t                elem.style.visibility = 'hidden';\n\t                ix = 0;\n\t                elem.innerHTML = '';\n\t                var vph = (window.innerHeight || document.documentElement.clientHeight);\n\t                var rect = elem.parentNode.getBoundingClientRect();\n\t                var distanceToTop = rect.top - 6;                        // heuristic give 6px \n\t                var distanceToBottom = vph - rect.bottom - 6;  // distance from the browser border.\n\n\t                rows = [];\n\t                for (var i = 0; i < array.length; i++) {\n\n\t                    if (  (config.caseSensitive && array[i].indexOf(token) !== 0)\n\t                        ||(!config.caseSensitive && array[i].toLowerCase().indexOf(token.toLowerCase()) !== 0)) { continue; }\n\n\t                    var divRow = document.createElement('div');\n\t                    divRow.className = 'item';\n\t                    //divRow.style.color = config.color;\n\t                    divRow.onmouseover = onMouseOver;\n\t                    divRow.onmouseout = onMouseOut;\n\t                    divRow.onmousedown = onMouseDown;\n\t                    divRow.__hint = array[i];\n\t                    divRow.innerHTML = array[i].substring(0, token.length) + '<b>' + array[i].substring(token.length) + '</b>';\n\t                    rows.push(divRow);\n\t                    elem.appendChild(divRow);\n\t                }\n\t                if (rows.length === 0) {\n\t                    return; // nothing to show.\n\t                }\n\t                if (rows.length === 1 && (   (token.toLowerCase() === rows[0].__hint.toLowerCase() && !config.caseSensitive) \n\t                                           ||(token === rows[0].__hint && config.caseSensitive))){\n\t                    return; // do not show the dropDown if it has only one element which matches what we have just displayed.\n\t                }\n\n\t                if (rows.length < 2) return;\n\t                p.highlight(0);\n\n\t                if (distanceToTop > distanceToBottom * 3) {        // Heuristic (only when the distance to the to top is 4 times more than distance to the bottom\n\t                    elem.style.maxHeight = distanceToTop + 'px';  // we display the dropDown on the top of the input text\n\t                    elem.style.top = '';\n\t                    elem.style.bottom = '100%';\n\t                } else {\n\t                    elem.style.top = '100%';\n\t                    elem.style.bottom = '';\n\t                    elem.style.maxHeight = distanceToBottom + 'px';\n\t                }\n\t                elem.style.visibility = 'visible';\n\t            },\n\t            highlight: function (index) {\n\t                if (oldIndex != -1 && rows[oldIndex]) {\n\t                    rows[oldIndex].className = \"item\";\n\t                }\n\t                rows[index].className = \"item hover\"; \n\t                oldIndex = index;\n\t            },\n\t            move: function (step) { // moves the selection either up or down (unless it's not possible) step is either +1 or -1.\n\t                if (elem.style.visibility === 'hidden') return ''; // nothing to move if there is no dropDown. (this happens if the user hits escape and then down or up)\n\t                if (ix + step === -1 || ix + step === rows.length) return rows[ix].__hint; // NO CIRCULAR SCROLLING. \n\t                ix += step;\n\t                p.highlight(ix);\n\t                return rows[ix].__hint;//txtShadow.value = uRows[uIndex].__hint ;\n\t            },\n\t            onmouseselection: function () { } // it will be overwritten. \n\t        };\n\t        return p;\n\t    }\n\n\t    function setEndOfContenteditable(contentEditableElement) {\n\t        var range, selection;\n\t        if (document.createRange)//Firefox, Chrome, Opera, Safari, IE 9+\n\t        {\n\t            range = document.createRange();//Create a range (a range is a like the selection but invisible)\n\t            range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range\n\t            range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n\t            selection = window.getSelection();//get the selection object (allows you to change selection)\n\t            selection.removeAllRanges();//remove any selections already made\n\t            selection.addRange(range);//make the range you have just created the visible selection\n\t        }\n\t        else if (document.selection)//IE 8 and lower\n\t        {\n\t            range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)\n\t            range.moveToElementText(contentEditableElement);//Select the entire contents of the element with the range\n\t            range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n\t            range.select();//Select the range (make it the visible selection\n\t        }\n\t    }\n\n\t    function calculateWidthForText(text) {\n\t        if (spacer === undefined) { // on first call only.\n\t            spacer = document.createElement('span');\n\t            spacer.style.visibility = 'hidden';\n\t            spacer.style.position = 'fixed';\n\t            spacer.style.outline = '0';\n\t            spacer.style.margin = '0';\n\t            spacer.style.padding = '0';\n\t            spacer.style.border = '0';\n\t            spacer.style.left = '0';\n\t            spacer.style.whiteSpace = 'pre';\n\t            spacer.style.fontSize = fontSize;\n\t            spacer.style.fontFamily = fontFamily;\n\t            spacer.style.fontWeight = 'normal';\n\t            document.body.appendChild(spacer);\n\t        }\n\n\t        // Used to encode an HTML string into a plain text.\n\t        // taken from http://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding\n\t        spacer.innerHTML = String(text).replace(/&/g, '&amp;')\n\t            .replace(/\"/g, '&quot;')\n\t            .replace(/'/g, '&#39;')\n\t            .replace(/</g, '&lt;')\n\t            .replace(/>/g, '&gt;');\n\t        return spacer.getBoundingClientRect().right;\n\t    }\n\n\t    var rs = {\n\t        onArrowDown: function () { }, // defaults to no action.\n\t        onArrowUp: function () { },   // defaults to no action.\n\t        onEnter: function () { },     // defaults to no action.\n\t        onTab: function () { },       // defaults to no action.\n\t        startFrom: 0,\n\t        options: [],\n\t        element: null,\n\t        elementHint: null,\n\t        elementStyle: null,\n\t        wrapper: wrapper,      // Only to allow  easy access to the HTML elements to the final user (possibly for minor customizations)\n\t        show: function (element, startPos, options) {\n\t            this.startFrom = startPos;\n\t            this.wrapper.remove();\n\t            if (this.elementHint) {\n\t                this.elementHint.remove();\n\t                this.elementHint = null;\n\t            }\n\t            \n\t            if (fontSize == '') {\n\t                fontSize = window.getComputedStyle(element).getPropertyValue('font-size');\n\t            }\n\t            if (fontFamily == '') {\n\t                fontFamily = window.getComputedStyle(element).getPropertyValue('font-family');\n\t            }\n\t            \n\t            var w = element.getBoundingClientRect().right - element.getBoundingClientRect().left;\n\t            dropDown.style.marginLeft = '0';\n\t            dropDown.style.marginTop = element.getBoundingClientRect().height + 'px';\n\t            this.options = options;\n\n\t            if (this.element != element) {\n\t                this.element = element;\n\t                this.elementStyle = {\n\t                    zIndex: this.element.style.zIndex,\n\t                    position: this.element.style.position,\n\t                    backgroundColor: this.element.style.backgroundColor,\n\t                    borderColor: this.element.style.borderColor\n\t                }\n\t            }\n\n\t            this.element.style.zIndex = 3;\n\t            this.element.style.position = 'relative';\n\t            this.element.style.backgroundColor = 'transparent';\n\t            this.element.style.borderColor = 'transparent';\n\n\t            this.elementHint = element.cloneNode();\n\t            this.elementHint.className = 'autocomplete hint';\n\t            this.elementHint.style.zIndex = 2;\n\t            this.elementHint.style.position = 'absolute';\n\t            this.elementHint.onfocus = function () { this.element.focus(); }.bind(this);\n\n\n\n\t            if (this.element.addEventListener) {\n\t                this.element.removeEventListener(\"keydown\", keyDownHandler);\n\t                this.element.addEventListener(\"keydown\", keyDownHandler, false);\n\t                this.element.removeEventListener(\"blur\", onBlurHandler);\n\t                this.element.addEventListener(\"blur\", onBlurHandler, false);                \n\t            } \n\n\t            wrapper.appendChild(this.elementHint);\n\t            wrapper.appendChild(dropDown);\n\t            element.parentElement.appendChild(wrapper);\n\n\n\t            this.repaint(element);\n\t        },\n\t        setText: function (text) {\n\t            this.element.innerText = text;\n\t        },\n\t        getText: function () {\n\t            return this.element.innerText;\n\t        },\n\t        hideDropDown: function () {\n\t            this.wrapper.remove();\n\t            if (this.elementHint) {\n\t                this.elementHint.remove();\n\t                this.elementHint = null;\n\t                dropDownController.hide();\n\t                this.element.style.zIndex = this.elementStyle.zIndex;\n\t                this.element.style.position = this.elementStyle.position;\n\t                this.element.style.backgroundColor = this.elementStyle.backgroundColor;\n\t                this.element.style.borderColor = this.elementStyle.borderColor;\n\t            }\n\t            \n\t        },\n\t        repaint: function (element) {\n\t            var text = element.innerText;\n\t            text = text.replace('\\n', '');\n\n\t            var startFrom = this.startFrom;\n\t            var options = this.options;\n\t            var optionsLength = this.options.length;\n\n\t            // breaking text in leftSide and token.\n\t            \n\t            var token = text.substring(this.startFrom);\n\t            leftSide = text.substring(0, this.startFrom);\n\t            \n\t            for (var i = 0; i < optionsLength; i++) {\n\t                var opt = this.options[i];\n\t                if (   (!config.caseSensitive && opt.toLowerCase().indexOf(token.toLowerCase()) === 0)\n\t                    || (config.caseSensitive && opt.indexOf(token) === 0)) {   // <-- how about upperCase vs. lowercase\n\t                    this.elementHint.innerText = leftSide + token + opt.substring(token.length);\n\t                    this.elementHint.realInnerText = leftSide + opt;\n\t                    break;\n\t                }\n\t            }\n\t            // moving the dropDown and refreshing it.\n\t            dropDown.style.left = calculateWidthForText(leftSide) + 'px';\n\t            dropDownController.refresh(token, this.options);\n\t            this.elementHint.style.width = calculateWidthForText(this.elementHint.innerText) + 10 + 'px'\n\t            var wasDropDownHidden = (dropDown.style.visibility == 'hidden');\n\t            if (!wasDropDownHidden)\n\t                this.elementHint.style.width = calculateWidthForText(this.elementHint.innerText) + dropDown.clientWidth + 'px';\n\t        }\n\t    };\n\n\t    var dropDownController = createDropDownController(dropDown, rs);\n\n\t    var keyDownHandler = function (e) {\n\t        //console.log(\"Keydown:\" + e.keyCode);\n\t        e = e || window.event;\n\t        var keyCode = e.keyCode;\n\n\t        if (this.elementHint == null) return;\n\n\t        if (keyCode == 33) { return; } // page up (do nothing)\n\t        if (keyCode == 34) { return; } // page down (do nothing);\n\n\t        if (keyCode == 27) { //escape\n\t            rs.hideDropDown();\n\t            rs.element.focus();\n\t            e.preventDefault();\n\t            e.stopPropagation();\n\t            return;\n\t        }\n\n\t        var text = this.element.innerText;\n\t        text = text.replace('\\n', '');\n\t        var startFrom = this.startFrom;\n\n\t        if (config.confirmKeys.indexOf(keyCode) >= 0) { //  (autocomplete triggered)\n\t            if (keyCode == 9) {                 \n\t                if (this.elementHint.innerText.length == 0) {\n\t                    rs.onTab(); \n\t                }\n\t            }\n\t            if (this.elementHint.innerText.length > 0) { // if there is a hint               \n\t                if (this.element.innerText != this.elementHint.realInnerText) {\n\t                    this.element.innerText = this.elementHint.realInnerText;\n\t                    rs.hideDropDown();\n\t                    setEndOfContenteditable(this.element);\n\t                    if (keyCode == 9) {                \n\t                        rs.element.focus();\n\t                        e.preventDefault();\n\t                        e.stopPropagation();\n\t                    }\n\t                }                \n\t            }\n\t            return;\n\t        }\n\n\t        if (keyCode == 13) {       // enter  (autocomplete triggered)\n\t            if (this.elementHint.innerText.length == 0) { // if there is a hint\n\t                rs.onEnter();\n\t            } else {\n\t                var wasDropDownHidden = (dropDown.style.visibility == 'hidden');\n\t                dropDownController.hide();\n\n\t                if (wasDropDownHidden) {\n\t                    rs.hideDropDown();\n\t                    rs.element.focus();\n\t                    rs.onEnter();\n\t                    return;\n\t                }\n\n\t                this.element.innerText = this.elementHint.realInnerText;\n\t                rs.hideDropDown();\n\t                setEndOfContenteditable(this.element);\n\t                e.preventDefault();\n\t                e.stopPropagation();\n\t            }\n\t            return;\n\t        }\n\n\t        if (keyCode == 40) {     // down\n\t            var token = text.substring(this.startFrom);\n\t            var m = dropDownController.move(+1);\n\t            if (m == '') { rs.onArrowDown(); }\n\t            this.elementHint.innerText = leftSide + token + m.substring(token.length);\n\t            this.elementHint.realInnerText = leftSide + m;\n\t            e.preventDefault();\n\t            e.stopPropagation();\n\t            return;\n\t        }\n\n\t        if (keyCode == 38) {    // up\n\t            var token = text.substring(this.startFrom);\n\t            var m = dropDownController.move(-1);\n\t            if (m == '') { rs.onArrowUp(); }\n\t            this.elementHint.innerText = leftSide + token + m.substring(token.length);\n\t            this.elementHint.realInnerText = leftSide + m;\n\t            e.preventDefault();\n\t            e.stopPropagation();\n\t            return;\n\t        }\n\n\t    }.bind(rs);\n\n\t    var onBlurHandler = function (e) {\n\t        rs.hideDropDown();\n\t        //console.log(\"Lost focus.\");\n\t    }.bind(rs);\n\n\t    dropDownController.onmouseselection = function (text, rs) {\n\t        rs.element.innerText = rs.elementHint.innerText = leftSide + text;        \n\t        rs.hideDropDown();   \n\t        window.setTimeout(function () {\n\t            rs.element.focus();\n\t            setEndOfContenteditable(rs.element);  \n\t        }, 1);              \n\t    };\n\n\t    return rs;\n\t}\n\n\tmodule.exports = completely;\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar ace = __webpack_require__(1);\n\tvar ModeSwitcher = __webpack_require__(26);\n\tvar util = __webpack_require__(12);\n\n\t// create a mixin with the functions for text mode\n\tvar textmode = {};\n\n\tvar DEFAULT_THEME = 'ace/theme/jsoneditor';\n\n\t/**\n\t * Create a text editor\n\t * @param {Element} container\n\t * @param {Object} [options]   Object with options. available options:\n\t *                             {String} mode             Available values:\n\t *                                                       \"text\" (default)\n\t *                                                       or \"code\".\n\t *                             {Number} indentation      Number of indentation\n\t *                                                       spaces. 2 by default.\n\t *                             {function} onChange       Callback method triggered on change.\n\t *                                                       Does not pass the changed contents.\n\t *                             {function} onChangeText   Callback method, triggered\n\t *                                                       in modes on change of contents,\n\t *                                                       passing the changed contents\n\t *                                                       as stringified JSON.\n\t *                             {function} onModeChange   Callback method\n\t *                                                       triggered after setMode\n\t *                             {function} onEditable     Determine if textarea is readOnly\n\t *                                                       readOnly defaults true\n\t *                             {Object} ace              A custom instance of\n\t *                                                       Ace editor.\n\t *                             {boolean} escapeUnicode   If true, unicode\n\t *                                                       characters are escaped.\n\t *                                                       false by default.\n\t *                             {function} onTextSelectionChange Callback method, \n\t *                                                              triggered on text selection change\n\t * @private\n\t */\n\ttextmode.create = function (container, options) {\n\t  // read options\n\t  options = options || {};\n\t  \n\t  if(typeof options.statusBar === 'undefined') {\n\t    options.statusBar = true;\n\t  }\n\n\t  this.options = options;\n\n\t  // indentation\n\t  if (options.indentation) {\n\t    this.indentation = Number(options.indentation);\n\t  }\n\t  else {\n\t    this.indentation = 2; // number of spaces\n\t  }\n\n\t  // grab ace from options if provided\n\t  var _ace = options.ace ? options.ace : ace;\n\t  // TODO: make the option options.ace deprecated, it's not needed anymore (see #309)\n\n\t  // determine mode\n\t  this.mode = (options.mode == 'code') ? 'code' : 'text';\n\t  if (this.mode == 'code') {\n\t    // verify whether Ace editor is available and supported\n\t    if (typeof _ace === 'undefined') {\n\t      this.mode = 'text';\n\t      console.warn('Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.');\n\t    }\n\t  }\n\n\t  // determine theme\n\t  this.theme = options.theme || DEFAULT_THEME;\n\t  if (this.theme === DEFAULT_THEME && _ace) {\n\t    try {\n\t      __webpack_require__(29);\n\t    }\n\t    catch (err) {\n\t      console.error(err);\n\t    }\n\t  }\n\n\t  if (options.onTextSelectionChange) {\n\t    this.onTextSelectionChange(options.onTextSelectionChange);\n\t  }\n\n\t  var me = this;\n\t  this.container = container;\n\t  this.dom = {};\n\t  this.aceEditor = undefined;  // ace code editor\n\t  this.textarea = undefined;  // plain text editor (fallback when Ace is not available)\n\t  this.validateSchema = null;\n\t  this.validationSequence = 0;\n\t  this.annotations = [];\n\n\t  // create a debounced validate function\n\t  this._debouncedValidate = util.debounce(this.validate.bind(this), this.DEBOUNCE_INTERVAL);\n\n\t  this.width = container.clientWidth;\n\t  this.height = container.clientHeight;\n\n\t  this.frame = document.createElement('div');\n\t  this.frame.className = 'jsoneditor jsoneditor-mode-' + this.options.mode;\n\t  this.frame.onclick = function (event) {\n\t    // prevent default submit action when the editor is located inside a form\n\t    event.preventDefault();\n\t  };\n\t  this.frame.onkeydown = function (event) {\n\t    me._onKeyDown(event);\n\t  };\n\t  \n\t  // create menu\n\t  this.menu = document.createElement('div');\n\t  this.menu.className = 'jsoneditor-menu';\n\t  this.frame.appendChild(this.menu);\n\n\t  // create format button\n\t  var buttonFormat = document.createElement('button');\n\t  buttonFormat.type = 'button';\n\t  buttonFormat.className = 'jsoneditor-format';\n\t  buttonFormat.title = 'Format JSON data, with proper indentation and line feeds (Ctrl+\\\\)';\n\t  this.menu.appendChild(buttonFormat);\n\t  buttonFormat.onclick = function () {\n\t    try {\n\t      me.format();\n\t      me._onChange();\n\t    }\n\t    catch (err) {\n\t      me._onError(err);\n\t    }\n\t  };\n\n\t  // create compact button\n\t  var buttonCompact = document.createElement('button');\n\t  buttonCompact.type = 'button';\n\t  buttonCompact.className = 'jsoneditor-compact';\n\t  buttonCompact.title = 'Compact JSON data, remove all whitespaces (Ctrl+Shift+\\\\)';\n\t  this.menu.appendChild(buttonCompact);\n\t  buttonCompact.onclick = function () {\n\t    try {\n\t      me.compact();\n\t      me._onChange();\n\t    }\n\t    catch (err) {\n\t      me._onError(err);\n\t    }\n\t  };\n\n\t  // create repair button\n\t  var buttonRepair = document.createElement('button');\n\t  buttonRepair.type = 'button';\n\t  buttonRepair.className = 'jsoneditor-repair';\n\t  buttonRepair.title = 'Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.';\n\t  this.menu.appendChild(buttonRepair);\n\t  buttonRepair.onclick = function () {\n\t    try {\n\t      me.repair();\n\t      me._onChange();\n\t    }\n\t    catch (err) {\n\t      me._onError(err);\n\t    }\n\t  };\n\n\t  // create mode box\n\t  if (this.options && this.options.modes && this.options.modes.length) {\n\t    this.modeSwitcher = new ModeSwitcher(this.menu, this.options.modes, this.options.mode, function onSwitch(mode) {\n\t      // switch mode and restore focus\n\t      me.setMode(mode);\n\t      me.modeSwitcher.focus();\n\t    });\n\t  }\n\n\t  var emptyNode = {};\n\t  var isReadOnly = (this.options.onEditable\n\t  && typeof(this.options.onEditable === 'function')\n\t  && !this.options.onEditable(emptyNode));\n\n\t  this.content = document.createElement('div');\n\t  this.content.className = 'jsoneditor-outer';\n\t  this.frame.appendChild(this.content);\n\n\t  this.container.appendChild(this.frame);\n\n\t  if (this.mode == 'code') {\n\t    this.editorDom = document.createElement('div');\n\t    this.editorDom.style.height = '100%'; // TODO: move to css\n\t    this.editorDom.style.width = '100%'; // TODO: move to css\n\t    this.content.appendChild(this.editorDom);\n\n\t    var aceEditor = _ace.edit(this.editorDom);\n\t    var aceSession = aceEditor.getSession();\n\t    aceEditor.$blockScrolling = Infinity;\n\t    aceEditor.setTheme(this.theme);\n\t    aceEditor.setOptions({ readOnly: isReadOnly });\n\t    aceEditor.setShowPrintMargin(false);\n\t    aceEditor.setFontSize(13);\n\t    aceSession.setMode('ace/mode/json');\n\t    aceSession.setTabSize(this.indentation);\n\t    aceSession.setUseSoftTabs(true);\n\t    aceSession.setUseWrapMode(true);\n\t    \n\t    // replace ace setAnnotations with custom function that also covers jsoneditor annotations\n\t    var originalSetAnnotations = aceSession.setAnnotations;\n\t    aceSession.setAnnotations = function (annotations) {\n\t      originalSetAnnotations.call(this, annotations && annotations.length ? annotations : me.annotations);\n\t    };\n\t    \n\t    aceEditor.commands.bindKey('Ctrl-L', null);    // disable Ctrl+L (is used by the browser to select the address bar)\n\t    aceEditor.commands.bindKey('Command-L', null); // disable Ctrl+L (is used by the browser to select the address bar)\n\t    this.aceEditor = aceEditor;\n\n\t    // TODO: deprecated since v5.0.0. Cleanup backward compatibility some day\n\t    if (!this.hasOwnProperty('editor')) {\n\t      Object.defineProperty(this, 'editor', {\n\t        get: function () {\n\t          console.warn('Property \"editor\" has been renamed to \"aceEditor\".');\n\t          return me.aceEditor;\n\t        },\n\t        set: function (aceEditor) {\n\t          console.warn('Property \"editor\" has been renamed to \"aceEditor\".');\n\t          me.aceEditor = aceEditor;\n\t        }\n\t      });\n\t    }\n\n\t    var poweredBy = document.createElement('a');\n\t    poweredBy.appendChild(document.createTextNode('powered by ace'));\n\t    poweredBy.href = 'http://ace.ajax.org';\n\t    poweredBy.target = '_blank';\n\t    poweredBy.className = 'jsoneditor-poweredBy';\n\t    poweredBy.onclick = function () {\n\t      // TODO: this anchor falls below the margin of the content,\n\t      // therefore the normal a.href does not work. We use a click event\n\t      // for now, but this should be fixed.\n\t      window.open(poweredBy.href, poweredBy.target);\n\t    };\n\t    this.menu.appendChild(poweredBy);\n\n\t    // register onchange event\n\t    aceEditor.on('change', this._onChange.bind(this));\n\t    aceEditor.on('changeSelection', this._onSelect.bind(this));\n\t  }\n\t  else {\n\t    // load a plain text textarea\n\t    var textarea = document.createElement('textarea');\n\t    textarea.className = 'jsoneditor-text';\n\t    textarea.spellcheck = false;\n\t    this.content.appendChild(textarea);\n\t    this.textarea = textarea;\n\t    this.textarea.readOnly = isReadOnly;\n\n\t    // register onchange event\n\t    if (this.textarea.oninput === null) {\n\t      this.textarea.oninput = this._onChange.bind(this);\n\t    }\n\t    else {\n\t      // oninput is undefined. For IE8-\n\t      this.textarea.onchange = this._onChange.bind(this);\n\t    }\n\n\t    textarea.onselect = this._onSelect.bind(this);\n\t    textarea.onmousedown = this._onMouseDown.bind(this);\n\t    textarea.onblur = this._onBlur.bind(this);\n\t  }\n\n\t  var validationErrorsContainer = document.createElement('div');\n\t  validationErrorsContainer.className = 'jsoneditor-validation-errors-container';\n\t  this.dom.validationErrorsContainer = validationErrorsContainer;\n\t  this.frame.appendChild(validationErrorsContainer);\n\n\t  var additinalErrorsIndication = document.createElement('div');\n\t  additinalErrorsIndication.style.display = 'none';\n\t  additinalErrorsIndication.className = \"jsoneditor-additional-errors fadein\";\n\t  additinalErrorsIndication.innerHTML = \"Scroll for more &#9663;\";\n\t  this.dom.additinalErrorsIndication = additinalErrorsIndication;\n\t  validationErrorsContainer.appendChild(additinalErrorsIndication);\n\n\t  if (options.statusBar) {\n\t    util.addClassName(this.content, 'has-status-bar');\n\n\t    this.curserInfoElements = {};\n\t    var statusBar = document.createElement('div');\n\t    this.dom.statusBar = statusBar;\n\t    statusBar.className = 'jsoneditor-statusbar';\n\t    this.frame.appendChild(statusBar);\n\n\t    var lnLabel = document.createElement('span');\n\t    lnLabel.className = 'jsoneditor-curserinfo-label';\n\t    lnLabel.innerText = 'Ln:';\n\n\t    var lnVal = document.createElement('span');\n\t    lnVal.className = 'jsoneditor-curserinfo-val';\n\t    lnVal.innerText = '1';\n\n\t    statusBar.appendChild(lnLabel);\n\t    statusBar.appendChild(lnVal);\n\n\t    var colLabel = document.createElement('span');\n\t    colLabel.className = 'jsoneditor-curserinfo-label';\n\t    colLabel.innerText = 'Col:';\n\n\t    var colVal = document.createElement('span');\n\t    colVal.className = 'jsoneditor-curserinfo-val';\n\t    colVal.innerText = '1';\n\n\t    statusBar.appendChild(colLabel);\n\t    statusBar.appendChild(colVal);\n\n\t    this.curserInfoElements.colVal = colVal;\n\t    this.curserInfoElements.lnVal = lnVal;\n\n\t    var countLabel = document.createElement('span');\n\t    countLabel.className = 'jsoneditor-curserinfo-label';\n\t    countLabel.innerText = 'characters selected';\n\t    countLabel.style.display = 'none';\n\n\t    var countVal = document.createElement('span');\n\t    countVal.className = 'jsoneditor-curserinfo-count';\n\t    countVal.innerText = '0';\n\t    countVal.style.display = 'none';\n\n\t    this.curserInfoElements.countLabel = countLabel;\n\t    this.curserInfoElements.countVal = countVal;\n\n\t    statusBar.appendChild(countVal);\n\t    statusBar.appendChild(countLabel);\n\n\t    var validationErrorIcon = document.createElement('span');\n\t    validationErrorIcon.className = 'jsoneditor-validation-error-icon';\n\t    validationErrorIcon.style.display = 'none';\n\n\t    var validationErrorCount = document.createElement('span');\n\t    validationErrorCount.className = 'jsoneditor-validation-error-count';    \n\t    validationErrorCount.style.display = 'none';\n\n\t    this.validationErrorIndication = {\n\t      validationErrorIcon: validationErrorIcon,\n\t      validationErrorCount: validationErrorCount\n\t    };\n\n\t    statusBar.appendChild(validationErrorCount);\n\t    statusBar.appendChild(validationErrorIcon);\n\n\t    this.parseErrorIndication = document.createElement('span');\n\t    this.parseErrorIndication.className = 'jsoneditor-parse-error-icon';    \n\t    this.parseErrorIndication.style.display = 'none';\n\t    statusBar.appendChild(this.parseErrorIndication);\n\t  }\n\n\t  this.setSchema(this.options.schema, this.options.schemaRefs);  \n\t};\n\n\t/**\n\t * Handle a change:\n\t * - Validate JSON schema\n\t * - Send a callback to the onChange listener if provided\n\t * @private\n\t */\n\ttextmode._onChange = function () {\n\t  if (this.onChangeDisabled) {\n\t    return;\n\t  }\n\n\t  // validate JSON schema (if configured)\n\t  this._debouncedValidate();\n\n\t  // trigger the onChange callback\n\t  if (this.options.onChange) {\n\t    try {\n\t      this.options.onChange();\n\t    }\n\t    catch (err) {\n\t      console.error('Error in onChange callback: ', err);\n\t    }\n\t  }\n\n\t  // trigger the onChangeText callback\n\t  if (this.options.onChangeText) {\n\t    try {\n\t      this.options.onChangeText(this.getText());\n\t    }\n\t    catch (err) {\n\t      console.error('Error in onChangeText callback: ', err);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Handle text selection\n\t * Calculates the cursor position and selection range and updates menu\n\t * @private\n\t */\n\ttextmode._onSelect = function () {\n\t  this._updateCursorInfo();\n\t  this._emitSelectionChange();\n\t};\n\n\t/**\n\t * Event handler for keydown. Handles shortcut keys\n\t * @param {Event} event\n\t * @private\n\t */\n\ttextmode._onKeyDown = function (event) {\n\t  var keynum = event.which || event.keyCode;\n\t  var handled = false;\n\n\t  if (keynum == 220 && event.ctrlKey) {\n\t    if (event.shiftKey) { // Ctrl+Shift+\\\n\t      this.compact();\n\t      this._onChange();\n\t    }\n\t    else { // Ctrl+\\\n\t      this.format();\n\t      this._onChange();\n\t    }\n\t    handled = true;\n\t  }\n\n\t  if (handled) {\n\t    event.preventDefault();\n\t    event.stopPropagation();\n\t  }\n\n\t  this._updateCursorInfo();\n\t  this._emitSelectionChange();\n\t};\n\n\t/**\n\t * Event handler for mousedown.\n\t * @param {Event} event\n\t * @private\n\t */\n\ttextmode._onMouseDown = function (event) {\n\t  this._updateCursorInfo();\n\t  this._emitSelectionChange();\n\t};\n\n\t/**\n\t * Event handler for blur.\n\t * @param {Event} event\n\t * @private\n\t */\n\ttextmode._onBlur = function (event) {\n\t  var me = this;\n\t  // this allows to avoid blur when clicking inner elements (like the errors panel)\n\t  // just make sure to set the isFocused to true on the inner element onclick callback\n\t  setTimeout(function(){\n\t    if (!me.isFocused) {\n\t      me._updateCursorInfo();\n\t      me._emitSelectionChange();\n\t    }\n\t    me.isFocused = false;\n\t  });\n\t};\n\n\t/**\n\t * Update the cursor info and the status bar, if presented\n\t */\n\ttextmode._updateCursorInfo = function () {\n\t  var me = this;\n\t  var line, col, count;\n\n\t  if (this.textarea) {\n\t    setTimeout(function() { //this to verify we get the most updated textarea cursor selection\n\t      var selectionRange = util.getInputSelection(me.textarea);\n\t      \n\t      if (selectionRange.startIndex !== selectionRange.endIndex) {\n\t        count = selectionRange.endIndex - selectionRange.startIndex;\n\t      }\n\t      \n\t      if (count && me.cursorInfo && me.cursorInfo.line === selectionRange.end.row && me.cursorInfo.column === selectionRange.end.column) {\n\t        line = selectionRange.start.row;\n\t        col = selectionRange.start.column;\n\t      } else {\n\t        line = selectionRange.end.row;\n\t        col = selectionRange.end.column;\n\t      }\n\t      \n\t      me.cursorInfo = {\n\t        line: line,\n\t        column: col,\n\t        count: count\n\t      }\n\n\t      if(me.options.statusBar) {\n\t        updateDisplay();\n\t      }\n\t    },0);\n\t    \n\t  } else if (this.aceEditor && this.curserInfoElements) {\n\t    var curserPos = this.aceEditor.getCursorPosition();\n\t    var selectedText = this.aceEditor.getSelectedText();\n\n\t    line = curserPos.row + 1;\n\t    col = curserPos.column + 1;\n\t    count = selectedText.length;\n\n\t    me.cursorInfo = {\n\t      line: line,\n\t      column: col,\n\t      count: count\n\t    }\n\n\t    if(this.options.statusBar) {\n\t      updateDisplay();\n\t    }\n\t  }\n\n\t  function updateDisplay() {\n\n\t    if (me.curserInfoElements.countVal.innerText !== count) {\n\t      me.curserInfoElements.countVal.innerText = count;\n\t      me.curserInfoElements.countVal.style.display = count ? 'inline' : 'none';\n\t      me.curserInfoElements.countLabel.style.display = count ? 'inline' : 'none';\n\t    }\n\t    me.curserInfoElements.lnVal.innerText = line;\n\t    me.curserInfoElements.colVal.innerText = col;\n\t  }\n\t};\n\n\t/**\n\t * emits selection change callback, if given\n\t * @private\n\t */\n\ttextmode._emitSelectionChange = function () {\n\t  if(this._selectionChangedHandler) {\n\t    var currentSelection = this.getTextSelection();\n\t    this._selectionChangedHandler(currentSelection.start, currentSelection.end, currentSelection.text);\n\t  }\n\t}\n\n\ttextmode._refreshAnnotations = function () {\n\t  this.aceEditor && this.aceEditor.getSession().setAnnotations();  \n\t}\n\n\t/**\n\t * Destroy the editor. Clean up DOM, event listeners, and web workers.\n\t */\n\ttextmode.destroy = function () {\n\t  // remove old ace editor\n\t  if (this.aceEditor) {\n\t    this.aceEditor.destroy();\n\t    this.aceEditor = null;\n\t  }\n\n\t  if (this.frame && this.container && this.frame.parentNode == this.container) {\n\t    this.container.removeChild(this.frame);\n\t  }\n\n\t  if (this.modeSwitcher) {\n\t    this.modeSwitcher.destroy();\n\t    this.modeSwitcher = null;\n\t  }\n\n\t  this.textarea = null;\n\t  \n\t  this._debouncedValidate = null;\n\t};\n\n\t/**\n\t * Compact the code in the text editor\n\t */\n\ttextmode.compact = function () {\n\t  var json = this.get();\n\t  var text = JSON.stringify(json);\n\t  this.setText(text);\n\t};\n\n\t/**\n\t * Format the code in the text editor\n\t */\n\ttextmode.format = function () {\n\t  var json = this.get();\n\t  var text = JSON.stringify(json, null, this.indentation);\n\t  this.setText(text);\n\t};\n\n\t/**\n\t * Repair the code in the text editor\n\t */\n\ttextmode.repair = function () {\n\t  var text = this.getText();\n\t  var sanitizedText = util.sanitize(text);\n\t  this.setText(sanitizedText);\n\t};\n\n\t/**\n\t * Set focus to the formatter\n\t */\n\ttextmode.focus = function () {\n\t  if (this.textarea) {\n\t    this.textarea.focus();\n\t  }\n\t  if (this.aceEditor) {\n\t    this.aceEditor.focus();\n\t  }\n\t};\n\n\t/**\n\t * Resize the formatter\n\t */\n\ttextmode.resize = function () {\n\t  if (this.aceEditor) {\n\t    var force = false;\n\t    this.aceEditor.resize(force);\n\t  }\n\t};\n\n\t/**\n\t * Set json data in the formatter\n\t * @param {*} json\n\t */\n\ttextmode.set = function(json) {\n\t  this.setText(JSON.stringify(json, null, this.indentation));\n\t};\n\n\t/**\n\t * Update data. Same as calling `set` in text/code mode.\n\t * @param {*} json\n\t */\n\ttextmode.update = function(json) {\n\t  this.updateText(JSON.stringify(json, null, this.indentation));\n\t};\n\n\t/**\n\t * Get json data from the formatter\n\t * @return {*} json\n\t */\n\ttextmode.get = function() {\n\t  var text = this.getText();\n\t  var json;\n\n\t  try {\n\t    json = util.parse(text); // this can throw an error\n\t  }\n\t  catch (err) {\n\t    // try to sanitize json, replace JavaScript notation with JSON notation\n\t    text = util.sanitize(text);\n\n\t    // try to parse again\n\t    json = util.parse(text); // this can throw an error\n\t  }\n\n\t  return json;\n\t};\n\n\t/**\n\t * Get the text contents of the editor\n\t * @return {String} jsonText\n\t */\n\ttextmode.getText = function() {\n\t  if (this.textarea) {\n\t    return this.textarea.value;\n\t  }\n\t  if (this.aceEditor) {\n\t    return this.aceEditor.getValue();\n\t  }\n\t  return '';\n\t};\n\n\t/**\n\t * Set the text contents of the editor\n\t * @param {String} jsonText\n\t */\n\ttextmode.setText = function(jsonText) {\n\t  var text;\n\n\t  if (this.options.escapeUnicode === true) {\n\t    text = util.escapeUnicodeChars(jsonText);\n\t  }\n\t  else {\n\t    text = jsonText;\n\t  }\n\n\t  if (this.textarea) {\n\t    this.textarea.value = text;\n\t  }\n\t  if (this.aceEditor) {\n\t    // prevent emitting onChange events while setting new text\n\t    this.onChangeDisabled = true;\n\n\t    this.aceEditor.setValue(text, -1);\n\n\t    this.onChangeDisabled = false;\n\t  }\n\t  // validate JSON schema\n\t  this._debouncedValidate();\n\t};\n\n\t/**\n\t * Update the text contents\n\t * @param {string} jsonText\n\t */\n\ttextmode.updateText = function(jsonText) {\n\t  // don't update if there are no changes\n\t  if (this.getText() === jsonText) {\n\t    return;\n\t  }\n\n\t  this.onChangeDisabled = true; // don't fire an onChange event\n\t  this.setText(jsonText);\n\t  this.onChangeDisabled = false;\n\t};\n\n\t/**\n\t * Validate current JSON object against the configured JSON schema\n\t * Throws an exception when no JSON schema is configured\n\t */\n\ttextmode.validate = function () {\n\t  var doValidate = false;\n\t  var schemaErrors = [];\n\t  var parseErrors = [];\n\t  var json;\n\t  try {\n\t    json = this.get(); // this can fail when there is no valid json\n\t    this.parseErrorIndication.style.display = 'none';\n\t    doValidate = true;\n\t  }\n\t  catch (err) {\n\t    if (this.getText()) {\n\t      this.parseErrorIndication.style.display = 'block';\n\t      // try to extract the line number from the jsonlint error message\n\t      var match = /\\w*line\\s*(\\d+)\\w*/g.exec(err.message);\n\t      var line;\n\t      if (match) {\n\t        line = +match[1];\n\t      }\n\t      this.parseErrorIndication.title = !isNaN(line) ? ('parse error on line ' + line) : 'parse error - check that the json is valid';\n\t      parseErrors.push({\n\t        type: 'error',\n\t        message: err.message.replace(/\\n/g, '<br>'),\n\t        line: line\n\t      });\n\t    }\n\t  }\n\n\t  // only validate the JSON when parsing the JSON succeeded\n\t  if (doValidate) {\n\t    // execute JSON schema validation (ajv)\n\t    if (this.validateSchema) {\n\t      var valid = this.validateSchema(json);\n\t      if (!valid) {\n\t        schemaErrors = this.validateSchema.errors.map(function (error) {\n\t          error.type = \"validation\";\n\t          return util.improveSchemaError(error);\n\t        });\n\t      }\n\t    }\n\n\t    // execute custom validation and after than merge and render all errors\n\t    this.validationSequence++;\n\t    var me = this;\n\t    var seq = this.validationSequence;\n\t    this._validateCustom(json)\n\t        .then(function (customValidationErrors) {\n\t          // only apply when there was no other validation started whilst resolving async results\n\t          if (seq === me.validationSequence) {\n\t            var errors = schemaErrors.concat(parseErrors || []).concat(customValidationErrors || []);\n\t            me._renderErrors(errors);\n\t          }\n\t        })\n\t        .catch(function (err) {\n\t          console.error(err);\n\t        });\n\t  }\n\t  else {\n\t    this._renderErrors(parseErrors || []);\n\t  }\n\t};\n\n\t/**\n\t * Execute custom validation if configured.\n\t *\n\t * Returns a promise resolving with the custom errors (or nothing).\n\t */\n\ttextmode._validateCustom = function (json) {\n\t  if (this.options.onValidate) {\n\t    try {\n\t      var customValidateResults = this.options.onValidate(json);\n\n\t      var resultPromise = util.isPromise(customValidateResults)\n\t          ? customValidateResults\n\t          : Promise.resolve(customValidateResults);\n\n\t      return resultPromise.then(function (customValidationPathErrors) {\n\t        if (Array.isArray(customValidationPathErrors)) {\n\t          return customValidationPathErrors\n\t              .filter(function (error) {\n\t                var valid = util.isValidValidationError(error);\n\n\t                if (!valid) {\n\t                  console.warn('Ignoring a custom validation error with invalid structure. ' +\n\t                      'Expected structure: {path: [...], message: \"...\"}. ' +\n\t                      'Actual error:', error);\n\t                }\n\n\t                return valid;\n\t              })\n\t              .map(function (error) {\n\t                // change data structure into the structure matching the JSON schema errors\n\t                return {\n\t                  dataPath: util.stringifyPath(error.path),\n\t                  message: error.message\n\t                }\n\t              });\n\t        }\n\t        else {\n\t          return null;\n\t        }\n\t      });\n\t    }\n\t    catch (err) {\n\t      return Promise.reject(err);\n\t    }\n\t  }\n\n\t  return Promise.resolve(null);\n\t};\n\n\ttextmode._renderErrors = function(errors) {\n\t  // clear all current errors\n\t  var me = this;\n\t  var validationErrorsCount = 0;\n\n\t  if (this.dom.validationErrors) {\n\t    this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors);\n\t    this.dom.validationErrors = null;\n\t    this.dom.additinalErrorsIndication.style.display = 'none';\n\n\t    this.content.style.marginBottom = '';\n\t    this.content.style.paddingBottom = '';\n\t  }\n\n\t  var jsonText = this.getText();\n\t  var errorPaths = [];\n\t  errors.reduce(function(acc, curr) {\n\t    if(acc.indexOf(curr.dataPath) === -1) {\n\t      acc.push(curr.dataPath);\n\t    }\n\t    return acc;\n\t  }, errorPaths);\n\t  var errorLocations = util.getPositionForPath(jsonText, errorPaths);\n\n\t  // render the new errors\n\t  if (errors.length > 0) {\n\t    if (this.aceEditor) {\n\t      this.annotations = errorLocations.map(function (errLoc) {\n\t        var validationErrors = errors.filter(function(err){ return err.dataPath === errLoc.path; });\n\t        var message = validationErrors.map(function(err) { return err.message }).join('\\n');\n\t        if (message) {\n\t          return {\n\t            row: errLoc.line,\n\t            column: errLoc.column,\n\t            text: 'Schema validation error' + (validationErrors.length !== 1 ? 's' : '') + ': \\n' + message,\n\t            type: 'warning',\n\t            source: 'jsoneditor',\n\t          }\n\t        }\n\n\t        return {};\n\t      });\n\t      this._refreshAnnotations();\n\n\t    } else {\n\t      var validationErrors = document.createElement('div');\n\t      validationErrors.innerHTML = '<table class=\"jsoneditor-text-errors\"><tbody></tbody></table>';\n\t      var tbody = validationErrors.getElementsByTagName('tbody')[0];\n\n\t      errors.forEach(function (error) {\n\t        var message;\n\t        if (typeof error === 'string') {\n\t          message = '<td colspan=\"2\"><pre>' + error + '</pre></td>';\n\t        }\n\t        else {\n\t          message = \n\t              '<td>' + (error.dataPath || '') + '</td>' +\n\t              '<td>' + error.message + '</td>';\n\t        }\n\n\t        var line;\n\n\t        if (!isNaN(error.line)) {\n\t          line = error.line;\n\t        } else if (error.dataPath) {\n\t          var errLoc = errorLocations.find(function(loc) { return loc.path === error.dataPath; });\n\t          if (errLoc) {\n\t            line = errLoc.line + 1;\n\t          }\n\t        }\n\n\t        var trEl = document.createElement('tr');\n\t        trEl.className = !isNaN(line) ? 'jump-to-line' : '';\n\t        if (error.type === 'error') {\n\t          trEl.className += ' parse-error';\n\t        } else {\n\t          trEl.className += ' validation-error';\n\t          ++validationErrorsCount;\n\t        }\n\t        \n\t        trEl.innerHTML =  ('<td><button class=\"jsoneditor-schema-error\"></button></td><td style=\"white-space:nowrap;\">'+ (!isNaN(line) ? ('Ln ' + line) : '') +'</td>' + message);\n\t        trEl.onclick = function() {\n\t          me.isFocused = true;\n\t          if (!isNaN(line)) {\n\t            me.setTextSelection({row: line, column: 1}, {row: line, column: 1000});\n\t          }\n\t        };\n\n\t        tbody.appendChild(trEl);\n\t      });\n\n\t      this.dom.validationErrors = validationErrors;\n\t      this.dom.validationErrorsContainer.appendChild(validationErrors);\n\t      this.dom.additinalErrorsIndication.title = errors.length + \" errors total\";\n\n\t      if (this.dom.validationErrorsContainer.clientHeight < this.dom.validationErrorsContainer.scrollHeight) {\n\t        this.dom.additinalErrorsIndication.style.display = 'block';\n\t        this.dom.validationErrorsContainer.onscroll = function () {\n\t          me.dom.additinalErrorsIndication.style.display = \n\t            (me.dom.validationErrorsContainer.clientHeight > 0 && me.dom.validationErrorsContainer.scrollTop === 0) ? 'block' : 'none';\n\t        }\n\t      } else {\n\t        this.dom.validationErrorsContainer.onscroll = undefined;\n\t      }\n\n\t      var height = this.dom.validationErrorsContainer.clientHeight + (this.dom.statusBar ? this.dom.statusBar.clientHeight : 0);\n\t      this.content.style.marginBottom = (-height) + 'px';\n\t      this.content.style.paddingBottom = height + 'px';\n\t    }\n\t  } else {\n\t    if (this.aceEditor) {\n\t      this.annotations = [];\n\t      this._refreshAnnotations();\n\t    }\n\t  }\n\n\t  if (this.options.statusBar) {\n\t    validationErrorsCount = validationErrorsCount || this.annotations.length;\n\t    var showIndication = !!validationErrorsCount;\n\t    this.validationErrorIndication.validationErrorIcon.style.display = showIndication ? 'inline' : 'none';\n\t    this.validationErrorIndication.validationErrorCount.style.display = showIndication ? 'inline' : 'none';\n\t    if (showIndication) {\n\t      this.validationErrorIndication.validationErrorCount.innerText = validationErrorsCount;\n\t      this.validationErrorIndication.validationErrorIcon.title = validationErrorsCount + ' schema validation error(s) found';\n\t    }\n\t  }\n\n\t  // update the height of the ace editor\n\t  if (this.aceEditor) {\n\t    var force = false;\n\t    this.aceEditor.resize(force);\n\t  }\n\t};\n\n\t/**\n\t * Get the selection details\n\t * @returns {{start:{row:Number, column:Number},end:{row:Number, column:Number},text:String}}\n\t */\n\ttextmode.getTextSelection = function () {\n\t  var selection = {};\n\t  if (this.textarea) {\n\t    var selectionRange = util.getInputSelection(this.textarea);\n\n\t    if (this.cursorInfo && this.cursorInfo.line === selectionRange.end.row && this.cursorInfo.column === selectionRange.end.column) {\n\t      //selection direction is bottom => up\n\t      selection.start = selectionRange.end;\n\t      selection.end = selectionRange.start;\n\t    } else {\n\t      selection = selectionRange;\n\t    }\n\n\t    return {\n\t      start: selection.start,\n\t      end: selection.end,\n\t      text: this.textarea.value.substring(selectionRange.startIndex, selectionRange.endIndex)\n\t    }\n\t  }\n\n\t  if (this.aceEditor) {\n\t    var aceSelection = this.aceEditor.getSelection();\n\t    var selectedText = this.aceEditor.getSelectedText();\n\t    var range = aceSelection.getRange();\n\t    var lead = aceSelection.getSelectionLead();\n\n\t    if (lead.row === range.end.row && lead.column === range.end.column) {\n\t      selection = range;\n\t    } else {\n\t      //selection direction is bottom => up\n\t      selection.start = range.end;\n\t      selection.end = range.start;\n\t    }\n\t    \n\t    return {\n\t      start: {\n\t        row: selection.start.row + 1,\n\t        column: selection.start.column + 1\n\t      },\n\t      end: {\n\t        row: selection.end.row + 1,\n\t        column: selection.end.column + 1\n\t      },\n\t      text: selectedText\n\t    };\n\t  }\n\t};\n\n\t/**\n\t * Callback registraion for selection change\n\t * @param {selectionCallback} callback\n\t * \n\t * @callback selectionCallback\n\t * @param {{row:Number, column:Number}} startPos selection start position\n\t * @param {{row:Number, column:Number}} endPos selected end position\n\t * @param {String} text selected text\n\t */\n\ttextmode.onTextSelectionChange = function (callback) {\n\t  if (typeof callback === 'function') {\n\t    this._selectionChangedHandler = util.debounce(callback, this.DEBOUNCE_INTERVAL);\n\t  }\n\t};\n\n\t/**\n\t * Set selection on editor's text\n\t * @param {{row:Number, column:Number}} startPos selection start position\n\t * @param {{row:Number, column:Number}} endPos selected end position\n\t */\n\ttextmode.setTextSelection = function (startPos, endPos) {\n\n\t  if (!startPos || !endPos) return;\n\n\t  if (this.textarea) {\n\t    var startIndex = util.getIndexForPosition(this.textarea, startPos.row, startPos.column);\n\t    var endIndex = util.getIndexForPosition(this.textarea, endPos.row, endPos.column);\n\t    if (startIndex > -1 && endIndex  > -1) {\n\t      if (this.textarea.setSelectionRange) {\n\t        this.textarea.focus();\n\t        this.textarea.setSelectionRange(startIndex, endIndex);\n\t      } else if (this.textarea.createTextRange) { // IE < 9\n\t        var range = this.textarea.createTextRange();\n\t        range.collapse(true);\n\t        range.moveEnd('character', endIndex);\n\t        range.moveStart('character', startIndex);\n\t        range.select();\n\t      }\n\t      var rows = (this.textarea.value.match(/\\n/g) || []).length + 1;\n\t      var lineHeight =  this.textarea.scrollHeight / rows;\n\t      var selectionScrollPos = (startPos.row * lineHeight);\n\t      this.textarea.scrollTop = selectionScrollPos > this.textarea.clientHeight ? (selectionScrollPos - (this.textarea.clientHeight / 2)) : 0;\n\t    }\n\t  } else if (this.aceEditor) {\n\t    var range = {\n\t      start:{\n\t        row: startPos.row - 1,\n\t        column: startPos.column - 1\n\t      },\n\t      end:{\n\t        row: endPos.row - 1,\n\t        column: endPos.column - 1\n\t      }\n\t    };\n\t    this.aceEditor.selection.setRange(range);\n\t  }\n\t};\n\n\tfunction load () {\n\t  try {\n\t    this.format()\n\t  }\n\t  catch (err) {\n\t    // in case of an error, just move on, failing formatting is not a big deal\n\t  }\n\t}\n\n\t// define modes\n\tmodule.exports = [\n\t  {\n\t    mode: 'text',\n\t    mixin: textmode,\n\t    data: 'text',\n\t    load: load\n\t  },\n\t  {\n\t    mode: 'code',\n\t    mixin: textmode,\n\t    data: 'text',\n\t    load: load\n\t  }\n\t];\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\t/* ***** BEGIN LICENSE BLOCK *****\n\t * Distributed under the BSD license:\n\t *\n\t * Copyright (c) 2010, Ajax.org B.V.\n\t * All rights reserved.\n\t * \n\t * Redistribution and use in source and binary forms, with or without\n\t * modification, are permitted provided that the following conditions are met:\n\t *     * Redistributions of source code must retain the above copyright\n\t *       notice, this list of conditions and the following disclaimer.\n\t *     * Redistributions in binary form must reproduce the above copyright\n\t *       notice, this list of conditions and the following disclaimer in the\n\t *       documentation and/or other materials provided with the distribution.\n\t *     * Neither the name of Ajax.org B.V. nor the\n\t *       names of its contributors may be used to endorse or promote products\n\t *       derived from this software without specific prior written permission.\n\t * \n\t * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n\t * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n\t * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n\t * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n\t * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n\t * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n\t * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n\t * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n\t * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t *\n\t * ***** END LICENSE BLOCK ***** */\n\n\tace.define('ace/theme/jsoneditor', ['require', 'exports', 'module', 'ace/lib/dom'], function(acequire, exports, module) {\n\n\texports.isDark = false;\n\texports.cssClass = \"ace-jsoneditor\";\n\texports.cssText = \".ace-jsoneditor .ace_gutter {\\\n\tbackground: #ebebeb;\\\n\tcolor: #333\\\n\t}\\\n\t\\\n\t.ace-jsoneditor.ace_editor {\\\n\tfont-family: \\\"dejavu sans mono\\\", \\\"droid sans mono\\\", consolas, monaco, \\\"lucida console\\\", \\\"courier new\\\", courier, monospace, sans-serif;\\\n\tline-height: 1.3;\\\n\tbackground-color: #fff;\\\n\t}\\\n\t.ace-jsoneditor .ace_print-margin {\\\n\twidth: 1px;\\\n\tbackground: #e8e8e8\\\n\t}\\\n\t.ace-jsoneditor .ace_scroller {\\\n\tbackground-color: #FFFFFF\\\n\t}\\\n\t.ace-jsoneditor .ace_text-layer {\\\n\tcolor: gray\\\n\t}\\\n\t.ace-jsoneditor .ace_variable {\\\n\tcolor: #1a1a1a\\\n\t}\\\n\t.ace-jsoneditor .ace_cursor {\\\n\tborder-left: 2px solid #000000\\\n\t}\\\n\t.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\\\n\tborder-left: 0px;\\\n\tborder-bottom: 1px solid #000000\\\n\t}\\\n\t.ace-jsoneditor .ace_marker-layer .ace_selection {\\\n\tbackground: lightgray\\\n\t}\\\n\t.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\\\n\tbox-shadow: 0 0 3px 0px #FFFFFF;\\\n\tborder-radius: 2px\\\n\t}\\\n\t.ace-jsoneditor .ace_marker-layer .ace_step {\\\n\tbackground: rgb(255, 255, 0)\\\n\t}\\\n\t.ace-jsoneditor .ace_marker-layer .ace_bracket {\\\n\tmargin: -1px 0 0 -1px;\\\n\tborder: 1px solid #BFBFBF\\\n\t}\\\n\t.ace-jsoneditor .ace_marker-layer .ace_active-line {\\\n\tbackground: #FFFBD1\\\n\t}\\\n\t.ace-jsoneditor .ace_gutter-active-line {\\\n\tbackground-color : #dcdcdc\\\n\t}\\\n\t.ace-jsoneditor .ace_marker-layer .ace_selected-word {\\\n\tborder: 1px solid lightgray\\\n\t}\\\n\t.ace-jsoneditor .ace_invisible {\\\n\tcolor: #BFBFBF\\\n\t}\\\n\t.ace-jsoneditor .ace_keyword,\\\n\t.ace-jsoneditor .ace_meta,\\\n\t.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\\\n\tcolor: #AF956F\\\n\t}\\\n\t.ace-jsoneditor .ace_keyword.ace_operator {\\\n\tcolor: #484848\\\n\t}\\\n\t.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\\\n\tcolor: #96DC5F\\\n\t}\\\n\t.ace-jsoneditor .ace_constant.ace_language {\\\n\tcolor: darkorange\\\n\t}\\\n\t.ace-jsoneditor .ace_constant.ace_numeric {\\\n\tcolor: red\\\n\t}\\\n\t.ace-jsoneditor .ace_constant.ace_character.ace_entity {\\\n\tcolor: #BF78CC\\\n\t}\\\n\t.ace-jsoneditor .ace_invalid {\\\n\tcolor: #FFFFFF;\\\n\tbackground-color: #FF002A;\\\n\t}\\\n\t.ace-jsoneditor .ace_fold {\\\n\tbackground-color: #AF956F;\\\n\tborder-color: #000000\\\n\t}\\\n\t.ace-jsoneditor .ace_storage,\\\n\t.ace-jsoneditor .ace_support.ace_class,\\\n\t.ace-jsoneditor .ace_support.ace_function,\\\n\t.ace-jsoneditor .ace_support.ace_other,\\\n\t.ace-jsoneditor .ace_support.ace_type {\\\n\tcolor: #C52727\\\n\t}\\\n\t.ace-jsoneditor .ace_string {\\\n\tcolor: green\\\n\t}\\\n\t.ace-jsoneditor .ace_comment {\\\n\tcolor: #BCC8BA\\\n\t}\\\n\t.ace-jsoneditor .ace_entity.ace_name.ace_tag,\\\n\t.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\\\n\tcolor: #606060\\\n\t}\\\n\t.ace-jsoneditor .ace_markup.ace_underline {\\\n\ttext-decoration: underline\\\n\t}\\\n\t.ace-jsoneditor .ace_indent-guide {\\\n\tbackground: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y\\\n\t}\";\n\n\tvar dom = acequire(\"../lib/dom\");\n\tdom.importCssString(exports.cssText, exports.cssClass);\n\t});\n\n\n/***/ }\n/******/ ])\n});\n;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport JSONEditor from 'jsoneditor/dist/jsoneditor-minimalist';\nimport 'jsoneditor/dist/jsoneditor.css';\nimport './fixAce.css';\n\n/**\n * @typedef {{\n * tree: string,\n * view: string,\n * form: string,\n * code: string,\n * text: string,\n * allValues: Array<string>\n * }} TJsonEditorModes\n */\nconst modes = {\n    tree: 'tree',\n    view: 'view',\n    form: 'form',\n    code: 'code',\n    text: 'text'\n};\n\nconst values = Object.values(modes);\n\nmodes.allValues = values;\n\n/**\n * @type {object}\n * @property {object} [value]\n * @property {string} [mode='tree'] - Set the editor mode.\n * @property {string} [name=undefined] - Initial field name for the root node\n * @property {object} [schema] - Validate the JSON object against a JSON schema.\n * @property {object} [schemaRefs] - Schemas that are referenced using\n * the $ref property\n * @property {Function} [onChange] - Set a callback function\n * triggered when the contents of the JSONEditor change.\n * Called without parameters. Will only be triggered on changes made by the user.\n * Return new json.\n * @property {Function} [onError] - Set a callback function triggered when an error occurs.\n * Invoked with the error as first argument.\n * The callback is only invoked for errors triggered by a users action,\n * like switching from code mode to tree mode or clicking\n * the Format button whilst the editor doesn't contain valid JSON.\n * @property {Function} [onModeChange] - Set a callback function\n * triggered right after the mode is changed by the user.\n * @property {object} [ace] - Provide a version of the Ace editor.\n * Only applicable when mode is code\n * @property {object} [ajv] - Provide a instance of ajv,\n * the library used for JSON schema validation.\n * @property {string} [theme] - Set the Ace editor theme,\n * uses included 'ace/theme/jsoneditor' by default.\n * @property {boolean} [history=false] - Enables history,\n * adds a button Undo and Redo to the menu of the JSONEditor. Only applicable when\n * mode is 'tree' or 'form'\n * @property {boolean} [navigationBar=true] - Adds navigation bar to the menu\n * the navigation bar visualize the current position on the\n * tree structure as well as allows breadcrumbs navigation.\n * @property {boolean} [statusBar=true] - Adds status bar to the buttom of the editor\n * the status bar shows the cursor position and a count of the selected characters.\n * Only applicable when mode is 'code' or 'text'.\n * @property {boolean} [search=true] - Enables a search box in\n * the upper right corner of the JSONEditor.\n * @property {Array<string>} [allowedModes] - Create a box in the editor menu where\n * the user can switch between the specified modes.\n * @property {string} [tag='div'] - Html element to render\n * @property {object} [htmlElementProps] - html element custom props\n * @property {Function} [innerRef] - callback to get html element reference\n */\nexport default class Editor extends Component {\n    static propTypes = {\n        //  jsoneditor props\n        value: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n        mode: PropTypes.oneOf(values),\n        name: PropTypes.string,\n        schema: PropTypes.object,\n        schemaRefs: PropTypes.object,\n\n        onChange: PropTypes.func,\n        onError: PropTypes.func,\n        onModeChange: PropTypes.func,\n\n        ace: PropTypes.object,\n        ajv: PropTypes.object,\n        theme: PropTypes.string,\n        history: PropTypes.bool,\n        navigationBar: PropTypes.bool,\n        statusBar: PropTypes.bool,\n        search: PropTypes.bool,\n        allowedModes: PropTypes.arrayOf(PropTypes.oneOf(values)),\n\n        //  custom props\n        tag: PropTypes.string,\n        htmlElementProps: PropTypes.object,\n        innerRef: PropTypes.func,\n    };\n\n    static defaultProps = {\n        tag: 'div',\n        mode: modes.tree,\n        history: false,\n        search: true,\n        navigationBar: true,\n        statusBar: true,\n    };\n\n    /**\n     * @type TJsonEditorModes\n     */\n    static modes = modes;\n\n    constructor(props) {\n        super(props);\n\n        this.htmlElementRef = null;\n        this.jsonEditor = null;\n\n        this.handleChange = this.handleChange.bind(this);\n        this.setRef = this.setRef.bind(this);\n        this.collapseAll = this.collapseAll.bind(this);\n        this.expandAll = this.expandAll.bind(this);\n        this.focus = this.focus.bind(this);\n    }\n\n    componentDidMount() {\n        const {\n            allowedModes,\n            innerRef,\n            htmlElementProps,\n            tag,\n            onChange,\n            ...rest\n        } = this.props;\n\n        this.createEditor({\n            ...rest,\n            modes: allowedModes\n        });\n    }\n\n    componentWillReceiveProps({\n        allowedModes,\n        schema,\n        name,\n        theme,\n        schemaRefs,\n        innerRef,\n        htmlElementProps,\n        tag,\n        onChange,\n        ...rest\n    }) {\n        if (this.jsonEditor) {\n            if (theme !== this.props.theme) {\n                this.createEditor({\n                    ...rest,\n                    theme,\n                    modes: allowedModes\n                });\n            } else {\n                if (schema !== this.props.schema\n                    || schemaRefs !== this.props.schemaRefs\n                ) {\n                    this.jsonEditor.setSchema(schema, schemaRefs);\n                }\n\n                if (name !== this.jsonEditor.getName()) {\n                    this.jsonEditor.setName(name);\n                }\n            }\n        }\n    }\n\n    shouldComponentUpdate({ htmlElementProps }) {\n        return htmlElementProps !== this.props.htmlElementProps;\n    }\n\n    componentWillUnmount() {\n        if (this.jsonEditor) {\n            this.jsonEditor.destroy();\n            this.jsonEditor = null;\n        }\n    }\n\n    setRef(element) {\n        this.htmlElementRef = element;\n        if (this.props.innerRef) {\n            this.props.innerRef(element);\n        }\n    }\n\n    createEditor({ value, ...rest }) {\n        if (this.jsonEditor) {\n            this.jsonEditor.destroy();\n        }\n\n        this.jsonEditor = new JSONEditor(this.htmlElementRef, {\n            onChange: this.handleChange,\n            ...rest\n        });\n\n        this.jsonEditor.set(value);\n    }\n\n    handleChange() {\n        if (this.props.onChange) {\n            try {\n                const text = this.jsonEditor.getText();\n                if (text === '') {\n                    this.props.onChange(null);\n                }\n\n                const currentJson = this.jsonEditor.get();\n                if (this.props.value !== currentJson) {\n                    this.props.onChange(currentJson);\n                }\n            } catch (err) {\n                this.err = err;\n            }\n        }\n    }\n\n    collapseAll() {\n        if (this.jsonEditor) {\n            this.jsonEditor.collapseAll();\n        }\n    }\n\n    expandAll() {\n        if (this.jsonEditor) {\n            this.jsonEditor.expandAll();\n        }\n    }\n\n    focus() {\n        if (this.jsonEditor) {\n            this.jsonEditor.focus();\n        }\n    }\n\n    render() {\n        const {\n            htmlElementProps,\n            tag\n        } = this.props;\n\n        return React.createElement(\n            tag,\n            {\n                ...htmlElementProps,\n                ref: this.setRef\n            }\n        );\n    }\n}\n"],"names":["module","modules","installedModules","__webpack_require__","moduleId","exports","id","loaded","call","m","c","p","Ajv","e","Error","code","err","ace","VanillaPicker","treemode","textmode","util","JSONEditor","container","options","json","this","ieVersion","getInternetExplorerVersion","error","console","warn","onError","change","onChange","editable","onEditable","onChangeJSON","mode","modes","indexOf","Object","keys","forEach","option","VALID_OPTIONS","arguments","length","_create","prototype","DEBOUNCE_INTERVAL","setMode","destroy","set","get","setText","jsonText","parse","getText","JSON","stringify","setName","name","getName","create","data","extend","oldMode","config","asText","clear","mixin","load","onModeChange","_onError","getMode","setSchema","schema","schemaRefs","ajv","allErrors","verbose","ref","removeSchema","addSchema","validateSchema","compile","validate","refresh","registerMode","i","prop","isArray","reserved","window","define","acequire","oop","TextHighlightRules","JsonHighlightRules","$rules","start","token","regex","next","string","defaultToken","comment","inherits","Range","MatchingBraceOutdent","checkOutdent","line","input","test","autoOutdent","doc","row","match","getLine","column","openBracePos","findMatchingBracket","indent","$getIndent","replace","BaseFoldMode","FoldMode","commentRegex","foldingStartMarker","RegExp","source","foldingStopMarker","end","singleLineBlockCommentRe","tripleStarBlockCommentRe","startRegionRe","_getFoldWidgetBase","getFoldWidget","session","foldStyle","fw","getFoldWidgetRange","forceMultiline","getCommentRegionBlock","index","openingBracketBlock","range","getCommentFoldRange","isMultiLine","getSectionRange","closingBracketBlock","startIndent","search","startRow","startColumn","endRow","maxRow","getLength","subRange","re","depth","exec","TextMode","Mode","HighlightRules","CstyleBehaviour","CStyleFoldMode","WorkerClient","$outdent","$behaviour","foldingRules","getNextLineIndent","state","tab","createWorker","worker","attachToDocument","getDocument","on","setAnnotations","clearAnnotations","$id","src","dom","lang","event","HashHandler","keyUtil","importCssString","SearchBox","editor","showReplaceForm","div","createElement","innerHTML","element","firstChild","setSession","bind","$init","setEditor","searchBox","renderer","scroller","appendChild","searchRange","$syncOptions","$initElements","sb","querySelector","replaceBox","searchOption","replaceOption","regExpOption","caseSensitiveOption","wholeWordOption","searchInput","replaceInput","searchCounter","_this","addListener","setTimeout","activeInput","focus","stopPropagation","action","target","srcElement","getAttribute","$searchBarKb","commands","addCommandKeyListener","hashId","keyCode","keyString","keyCodeToString","command","findKeyCommand","stopEvent","$onChange","delayedCall","find","schedule","value","highlight","$closeSearchBarKb","bindKey","hide","bindKeys","Ctrl-f|Command-f","isReplace","style","display","checked","Ctrl-H|Command-Option-F","Ctrl-G|Command-G","findNext","Ctrl-Shift-G|Command-Shift-G","findPrev","esc","Return","Shift-Return","Alt-Return","replaceAll","findAll","Tab","addCommands","win","mac","setSearchRange","getSelectionRange","searchRangeMarker","addMarker","removeMarker","preventScroll","setCssClass","textContent","$search","$options","updateBackMarkers","skipCurrent","backwards","noMatch","wrap","regExp","caseSensitive","wholeWord","_emit","updateCounter","all","before","getTextRange","getValue","offset","positionToIndex","selection","anchor","last","lastIndex","MAX_COUNT","getReadOnly","replaceAndFindNext","active","off","keyBinding","removeKeyboardHandler","show","select","addKeyboardHandler","isFocused","el","document","activeElement","Search","Picker","Highlighter","History","ContextMenu","TreePath","Node","ModeSwitcher","autocomplete","showSortModal","showTransformModal","translate","setLanguages","setLanguage","DEFAULT_MODAL_ANCHOR","body","highlighter","undefined","multiselection","nodes","validationSequence","errorNodes","node","focusTarget","_setOptions","history","_createFrame","_createTable","frame","parentNode","removeChild","_debouncedValidate","modeSwitcher","navigationBar","onSelectionChange","colorPicker","onColorPicker","parent","color","popup","onDone","hex","rgba","substr","timestampTag","onEvent","hasOwnProperty","debounce","languages","language","Function","content","table","field","_setRoot","expand","update","deepEqual","getSelection","onChangeDisabled","isEmpty","forceSearch","startNode","findNodeByPath","path","endNode","setSelection","getNodeFromTarget","blur","sanitizedJsonText","sanitize","updateText","updateField","scrollableContent","menu","treePath","reset","tbody","getDom","text","results","expandAll","collapseAll","collapse","_onAction","params","add","_onChange","onChangeText","root","duplicateErrors","schemaErrors","errors","map","improveSchemaError","findNode","dataPath","filter","entry","me","seq","_validateCustom","then","customValidationErrors","concat","_renderValidationErrors","catch","setError","parentPairs","reduce","findParents","some","pair","child","message","type","onValidate","customValidateResults","isPromise","Promise","resolve","customValidationPathErrors","Array","valid","isValidValidationError","reject","updateDom","recurse","startAutoScroll","mouseY","top","getAbsoluteTop","height","clientHeight","bottom","autoScrollStep","scrollTop","scrollHeight","autoScrollTimer","setInterval","stopAutoScroll","clearTimeout","setDomSelection","paths","findNodeByInternalPath","domName","assign","setSelectionOffset","getDomSelection","getSelectionOffset","nodeName","getInternalPath","scrollTo","callback","animateTimeout","animateCallback","finalScrollTop","Math","min","max","animate","diff","abs","className","_onEvent","onclick","preventDefault","oninput","onchange","onkeydown","onkeyup","oncut","onpaste","onmousedown","onmouseup","onmouseover","onmouseout","addEventListener","onfocusin","onfocusout","title","sort","modalAnchor","transform","undo","_onUndo","redo","_onRedo","disabled","canUndo","canRedo","navBar","onSectionSelected","_onTreePathSectionSelected","onContextMenuItemSelected","_onTreePathMenuItemSelected","targetIsColorPicker","_onKeyDown","_startDragDistance","_updateDragDistance","_updateTreePath","getNodePath","selected","showContextMenu","hasMoved","deselect","onDragStart","drag","_onMultiSelectStart","pathNodes","removeClassName","pathObjs","pathObj","children","childs","childNode","push","setPath","addClassName","expandTo","selectionObj","obj","dragDistanceEvent","initialTarget","initialPageX","pageX","initialPageY","pageY","dragDistance","diffX","diffY","sqrt","mousemove","_onMultiSelect","mouseup","_onMultiSelectEnd","_findTopLevelNodes","firstNode","direction","isDescendantOf","removeEventListener","clearStartAndEnd","selectionChanged","setSelected","_selectionChangedHandler","slice","first","expandPathToNode","startPath","endPath","startChild","endChild","startIndex","endIndex","keynum","which","altKey","ctrlKey","metaKey","shiftKey","handled","selectContentEditable","previous","key","jsonElementType","hnode","innerText","result","getOptions","getPath","hideDropDown","startFrom","col","contentOuter","colgroupContent","width","onClose","items","click","onDuplicate","onRemove","close","selection1","selection2","serialize","_getNodeInstancesByRange","getIndex","current","nextSibling","getNodesByRange","serializableNodes","locked","setHighlight","_cancelUnhighlight","unhighlight","unhighlightTimer","lock","unlock","actions","editField","parentPath","oldValue","newValue","editValue","updateValue","changeType","oldType","newType","appendNodes","insertBeforeNodes","beforeNode","beforePath","insertBefore","insertAfterNodes","afterNode","afterPath","insertAfter","removeNodes","append","duplicateNodes","clonePaths","clone","moveNodes","oldParentNode","oldParentPath","newParentNode","newParentPath","oldBeforeNode","oldIndex","newIndex","count","fieldNames","moveBefore","newParentPathRedo","oldParentPathRedo","newBeforeNode","newIndexRedo","oldIndexRedo","hideChilds","oldChilds","updateIndexes","showChilds","newChilds","setInternalValue","timestamp","Date","splice","oldSelection","newSelection","timeout","delay","lastText","tr","td","divInput","tableInput","tbodySearch","refreshSearch","_onDelayedSearch","_onSearch","_onKeyUp","searchNext","searchPrevious","resultIndex","_setActiveResult","activeResult","prevNode","elem","searchFieldActive","searchValueActive","_clearDelay","MAX_SEARCH_RESULTS","Infinity","activeResultIndex","resultCount","createAbsoluteAnchor","eventListeners","list","focusButton","li","overflow","createMenuItems","domItems","item","separator","domItem","button","submenu","divIcon","buttonSubmenu","divText","createTextNode","buttonExpand","submenuTitle","divExpand","_onExpandItem","domSubItems","subItems","ul","maxHeight","_getVisibleButtons","buttons","expandedItem","subItem","visibleMenu","showBelow","anchorRect","getBoundingClientRect","parentRect","frameRect","absoluteAnchor","topGap","anchorHeight","offsetHeight","left","alreadyVisible","padding","childsHeight","childNodes","targetIndex","prevButton","nextButton","onDestroy","getRootNode","fn","position","boxSizing","destroyIfOutside","isChildOf","mousedown","mousewheel","jsonlint","jsonMap","jsonString","jsString","chars","controlChars","\b","\f","\n","\r","\t","curr","charAt","lastNonWhitespace","pp","skipBlockComment","skipComment","parseString","endQuote","parseKey","regexp","join","escapeUnicodeChars","charCodeAt","toString","a","b","object","Number","String","Boolean","isUrlRegex","isUrl","getAbsoluteLeft","pageXOffset","scrollLeft","pageYOffset","classes","split","stripFormatting","divElement","iMax","removeAttribute","attributes","j","attribute","specified","setEndOfContentEditable","contentEditableElement","createRange","selectNodeContents","removeAllRanges","addRange","sel","getRangeAt","rangeCount","startContainer","endContainer","startOffset","endOffset","setStart","setEnd","getInnerText","buffer","flush","nodeValue","hasChildNodes","prevChild","prevName","_ieVersion","rv","navigator","appName","ua","userAgent","parseFloat","$1","isFirefox","listener","useCapture","attachEvent","f","detachEvent","parsePath","jsonPath","remainder","SyntaxError","substring","stringifyPath","keyword","enums","more","additionalProperty","validationError","insideRect","margin","_margin","right","func","wait","immediate","context","args","callNow","apply","textDiff","oldText","newText","len","oldEnd","newEnd","getInputSelection","normalizedValue","textInputRange","endRange","selectionStart","selectionEnd","parentElement","createTextRange","moveToBookmark","getBookmark","compareEndPoints","moveStart","moveEnd","_positionForIndex","textTillIndex","lastIndexOf","getIndexForPosition","rows","columnCount","getPositionForPath","jsmap","pathArr","pointerName","pointer","pointers","getColorCSS","ele","toLowerCase","isValidColor","Element","polyfill","defineProperty","configurable","enumerable","writable","CharacterData","DocumentType","startsWith","searchString","parser","trace","yy","symbols_","JSONString","STRING","JSONNumber","NUMBER","JSONNullLiteral","NULL","JSONBooleanLiteral","TRUE","FALSE","JSONText","JSONValue","EOF","JSONObject","JSONArray","{","}","JSONMemberList","JSONMember",":",",","[","]","JSONElementList","$accept","$end","terminals_","2","4","6","8","10","11","14","17","18","21","22","23","24","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","3","5","7","9","12","13","15","16","1","19","20","25","defaultActions","parseError","str","hash","self","stack","vstack","lstack","recovering","lexer","setInput","yylloc","yyloc","lex","symbol","preErrorSymbol","r","expected","n","yyval","errStr","showPosition","loc","first_line","last_line","first_column","last_column","_input","_more","_less","done","matched","conditionStack","ch","unput","less","pastInput","past","upcomingInput","pre","tempMatch","lines","rules","_currentRules","flex","begin","condition","popState","pop","conditions","topState","pushState","yy_","$avoiding_name_collisions","YY_START","INITIAL","inclusive","escapedChars","t","\"","/","\\","pos","_parse","ptr","topLevel","whitespace","char","getChar","read","arr","backChar","itemPtr","wasUnexpectedToken","parseArray","getLoc","propPtr","escapeJsonPointer","mapLoc","parseObject","unexpectedToken","numStr","getDigits","parseNumber","loop","getCharCode","checkUnexpectedEnd","fromCharCode","digits","_","validType","wsPos","wsColumn","wsLine","floor","repeat","_stringify","_data","lvl","out","quoted","toJSON","stringifyArray","stringifyObject","itemLvl","propLvl","VALID_TYPES","ESC_QUOTE","ESC_B","ESC_F","ESC_N","ESC_R","ESC_T","ESC_0","ESC_1","_lang","_locales","_defs","en","array","auto","appendText","appendTitle","appendSubmenuTitle","appendTitleAuto","ascending","ascendingTitle","actionsMenu","descending","descendingTitle","duplicateKey","duplicateText","duplicateTitle","duplicateField","empty","expandTitle","insert","insertTitle","insertSub","ok","removeText","removeTitle","removeField","selectNode","showAll","showMore","showMoreStatus","sortTitle","sortTitleShort","sortFieldLabel","sortDirectionLabel","sortFieldTitle","sortAscending","sortAscendingTitle","sortDescending","sortDescendingTitle","transformTitle","transformTitleShort","transformQueryTitle","transformWizardLabel","transformWizardFilter","transformWizardSortBy","transformWizardSelectFields","transformQueryLabel","transformPreviewLabel","typeTitle","openUrl","validationCannotMove","autoType","objectType","arrayType","stringType","pt-BR","userLang","userLanguage","l","langFound","idx","sepEl","pathEl","selectionCallback","contextMenuCallback","leftRectPos","offsetWidth","jmespath","naturalSort","appendNodeFactory","showMoreNodeFactory","expanded","setField","fieldEditable","setValue","internalValue","_debouncedOnChangeValue","_onChangeValue","_debouncedOnChangeField","_onChangeField","getField","visibleChilds","MAX_VISIBLE_CHILDS","_updateEditability","unshift","internalPath","shift","parents","errorChild","updateError","tdError","tdValue","popover","onfocus","directions","contentRect","popoverRect","setParent","previousField","_getDomField","childValue","previousChilds","_getType","childField","findChildByProperty","sortObjectKeys","recreateDom","previousValue","domAnchor","_detachFromDom","clearDom","_attachToDom","_getDomValue","getInternalValue","getLevel","fieldInnerText","valueInnerText","cloneChilds","childClone","getAppendDom","nextTr","_getNextTr","getShowMoreDom","resetVisibleChilds","currentNode","visible","_hasChilds","newTr","trTemp","AppendNode","searchField","searchValue","_updateDomField","_updateDomValue","offsetTop","focusElement","elementName","editableDiv","containsNode","removedNode","_remove","_stringCast","props","propCount","silent","_unescapeHTML","undoDiff","redoDiff","domValue","classNames","checkbox","tdCheckbox","enum","getUTCMilliseconds","tdSelect","valueFieldHTML","visibility","tdColor","backgroundColor","_deleteDomColor","isNaN","valueOf","date","toISOString","domField","duplicateKeys","tdDrag","domDrag","tdMenu","tdField","tree","_createDomTree","isVisible","lastNode","draggedNode","offsetY","onDrag","onDragEnd","oldCursor","cursor","oldPaths","oldParent","oldNextNode","mouseX","level","trThis","trPrev","trNext","trFirst","trLast","trRoot","nodePrev","nodeNext","topThis","topPrev","topFirst","heightThis","bottomNext","heightNext","moved","previousSibling","round","levelNext","_nextNode","sameParent","_createDomField","isFirst","domTree","marginLeft","fieldText","contentEditable","spellcheck","_escapeHTML","_updateSchema","_updateDomIndexes","_findSchema","_findEnum","composite","oneOf","anyOf","allOf","childSchema","foundSchema","allSchemas","patternProperties","properties","_createDomValue","href","_createDomExpandButton","borderCollapse","tdExpand","tdSeparator","expandable","_onExpand","_showColorPicker","open","offsetX","onKeyDown","info","nextNode","nextDom","selectedNodes","_onInsertBefore","_onInsertAfter","_lastNode","_getElementName","homeNode","_firstNode","prevElement","_previousElement","appendDom","nextNode2","_previousNode","nextElement","_nextElement","prevDom","colorAnchor","firstIndex","blurNodes","clones","newNode","_onAppend","_onChangeType","order","nodeA","getNestedChild","nodeB","valueA","valueB","lastTr","query","oldInternalValue","newInternalValue","getChildPaths","includeObjects","pathsMap","_getChildPaths","rootPath","ShowMoreNode","lastDom","lastChild","TYPE_TITLES","addTemplates","templates","template","titles","appendSubmenu","insertSubmenu","lower","num","numFloat","htmlEscaped","html","escapeUnicode","escapedText","_escapeJSON","escaped","isObject","strictDeepEqual","second","keysSeen","key2","isFalse","trimLeft","TYPE_NUMBER","TYPE_ANY","TYPE_STRING","TYPE_ARRAY","TYPE_OBJECT","TYPE_EXPREF","TYPE_ARRAY_NUMBER","TYPE_ARRAY_STRING","TOK_UNQUOTEDIDENTIFIER","TOK_QUOTEDIDENTIFIER","TOK_RBRACKET","TOK_RPAREN","TOK_COMMA","TOK_COLON","TOK_RBRACE","TOK_NUMBER","TOK_CURRENT","TOK_EXPREF","TOK_PIPE","TOK_GTE","TOK_LTE","TOK_FLATTEN","TOK_STAR","TOK_FILTER","TOK_DOT","TOK_LBRACE","TOK_LBRACKET","TOK_LPAREN","TOK_LITERAL","basicTokens",".","*","(",")","@","operatorStartToken","<",">","=","!","skipChars"," ","isNum","Lexer","tokenize","stream","identifier","tokens","_current","_consumeUnquotedIdentifier","_consumeNumber","_consumeLBracket","_consumeQuotedIdentifier","_consumeRawStringLiteral","literal","_consumeLiteral","_consumeOperator","maxLength","parseInt","startingChar","literalString","_looksLikeJSON","ex","bindingPower","Parser","TreeInterpreter","runtime","Runtime","interpreter","_interpreter","functionTable","_func","_functionAbs","_signature","types","avg","_functionAvg","ceil","_functionCeil","contains","_functionContains","ends_with","_functionEndsWith","_functionFloor","_functionLength","_functionMap","_functionMax","merge","_functionMerge","variadic","max_by","_functionMaxBy","sum","_functionSum","starts_with","_functionStartsWith","_functionMin","min_by","_functionMinBy","_functionType","_functionKeys","values","_functionValues","_functionSort","sort_by","_functionSortBy","_functionJoin","reverse","_functionReverse","to_array","_functionToArray","to_string","_functionToString","to_number","_functionToNumber","not_null","_functionNotNull","expression","_loadTokens","ast","_lookahead","_lookaheadToken","rbp","leftToken","_advance","nud","currentToken","led","number","Not","_parseProjectionRHS","Star","_parseMultiselectHash","Flatten","_parseIndexExpression","_projectIfSlice","_parseMultiselectList","Expref","_match","_errorToken","tokenName","Dot","_parseDotRHS","Pipe","Or","And","Filter","_parseComparator","tokenType","_parseSliceExpression","indexExpr","parts","comparator","lookahead","expressions","keyToken","keyName","pairs","identifierTypes","visit","collected","sliceParams","computed","computeSliceParams","stop","step","base","objValues","filtered","finalResults","original","merged","resolvedArgs","callFunction","refNode","jmespathType","arrayLength","stepValueNegative","capSliceRange","actualValue","functionEntry","_validateArgs","signature","currentSpec","actualType","typeMatched","_getTypeName","_typeMatches","actual","argValue","subtype","searchStr","suffix","originalStr","reversedStr","reversedArray","inputArray","mapped","exprefNode","elements","maxElement","localeCompare","minElement","listToSum","convertedValue","typeName","sortedArray","requiredType","that","decorated","exprA","exprB","maxRecord","resolvedArray","keyFunction","createKeyFunction","maxNumber","minRecord","minNumber","allowedTypes","x","msg","oFxNcL","oFyNcL","sre","dre","hre","ore","s","insensitive","y","xN","yN","xD","yD","cLoc","numS","trAppend","tdAppend","domText","paddingLeft","showMoreButton","showAllButton","moreContents","moreText","_getShowMoreText","tdContents","moreTr","totalChilds","picoModal","overlayClass","modalClass","afterCreate","modal","form","modalElem","setDirection","sortedBy","pathArray","onsubmit","afterClose","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","isNode","nodeType","observable","callbacks","watch","trigger","detail","unprevented","isHidden","getComputedStyle","Elem","make","tag","stylize","styles","opacity","clazz","onClick","attr","setAttribute","anyAncestor","predicate","autoinc","buildElemAccessor","builder","escapeKey","tabKey","documentElement","keycode","afterCreateEvent","beforeShowEvent","afterShowEvent","beforeCloseEvent","afterCloseEvent","getOption","opt","defaultValue","iface","built","isEnabled","origOverflow","build","shadowElem","closeElem","forceClose","returnIface","zIndex","-ms-transform","-moz-transform","-webkit-transform","-o-transform","borderRadius","isCloseClick","buildModal","overlay","background","border","fontSize","textAlign","lineHeight","buildClose","matches","selector","msMatchesSelector","webkitMatchesSelector","canFocus","hasAttribute","firstFocusable","getElementsByTagName","focused","beforeShow","afterShow","focusable","lastFocusable","from","manageFocus","overlayElem","buildDom","opts","beforeClose","Selectr","wizard","filterField","filterRelation","filterValue","sortField","sortOrder","selectFields","preview","fontStyle","formattedPath","preprocessPath","filterOption","sortOption","allPaths","selectrFilterField","defaultSelected","clearable","allowDeselect","placeholder","selectrFilterRelation","selectrSortField","selectrSortOrder","selectrSelectFields","multiple","generateQueryFromWizard","field1","value1","field2","debouncedUpdatePreview","transformed","defaultConfig","searchable","sortSelected","closeOnScroll","nativeDropdown","taggable","tagPlaceholder","Events","_events","emit","each","d","hasClass","classList","addClass","trim","removeClass","remove","closest","isInt","val","isFinite","h","rect","w","includes","truncate","isset","appendItem","custom","render","createDocumentFragment","pagination","pages","pageIndex","customOption","childElementCount","navIndex","createItem","renderOption","class","role","aria-selected","total","page","clearSearch","searching","inputContainer","rendered","originalType","originalIndex","tabIndex","originalOptionCount","opened","navigating","mobileDevice","customSelected","renderSelection","requiresPagination","customClass","aria-expanded","label","dropdown","aria-hidden","notice","tags","selectedValues","getSelectedProperties","selectedIndexes","selectClear","tagIndex","autocorrect","autocapitalize","tagSeperators","inputClear","group","optgroup","Option","paginate","placeEl","setPlaceholder","disable","bindEvents","optsRect","selectedIndex","getSelected","querySelectorAll","events","dismiss","navigate","prevEl","lastElementChild","firstElementChild","changedTouches","toggle","indexes","changes","added","removed","getChangedOptions","k","setMessage","invert","paginateItems","selectedValue","replaceChild","maxSelections","docFrag","btn","$2","ac","bc","ax","by","nn","tg","o","force","selIndex","valIndex","toObject","toJson","checkDuplicate","dupe","getOptionByIndex","getOptionByValue","removeAll","removeMessage","firstEl","enable","serialise","v","rt","wh","innerHeight","isInverted","onSwitch","availableModes","view","currentMode","currentTitle","box","confirmKeys","fontFamily","wrapper","outline","spacer","leftSide","dropDown","setEndOfContenteditable","moveToElementText","calculateWidthForText","whiteSpace","fontWeight","ix","onMouseOver","onMouseOut","onMouseDown","rs","onArrowDown","onArrowUp","onEnter","onTab","elementHint","elementStyle","startPos","getPropertyValue","marginTop","borderColor","cloneNode","keyDownHandler","onBlurHandler","repaint","dropDownController","optionsLength","realInnerText","clientWidth","onmouseselection","__hint","vph","distanceToTop","distanceToBottom","divRow","move","wasDropDownHidden","DEFAULT_THEME","format","statusBar","indentation","_ace","theme","onTextSelectionChange","aceEditor","textarea","annotations","buttonFormat","buttonCompact","compact","buttonRepair","repair","isReadOnly","editorDom","edit","aceSession","getSession","$blockScrolling","setTheme","setOptions","readOnly","setShowPrintMargin","setFontSize","setTabSize","setUseSoftTabs","setUseWrapMode","originalSetAnnotations","poweredBy","_onSelect","onselect","_onMouseDown","onblur","_onBlur","validationErrorsContainer","additinalErrorsIndication","curserInfoElements","lnLabel","lnVal","colLabel","colVal","countLabel","countVal","validationErrorIcon","validationErrorCount","validationErrorIndication","parseErrorIndication","_updateCursorInfo","_emitSelectionChange","selectionRange","cursorInfo","updateDisplay","curserPos","getCursorPosition","selectedText","getSelectedText","currentSelection","getTextSelection","_refreshAnnotations","sanitizedText","resize","doValidate","parseErrors","_renderErrors","validationErrorsCount","validationErrors","marginBottom","paddingBottom","errorPaths","acc","errorLocations","errLoc","trEl","setTextSelection","onscroll","showIndication","aceSelection","getRange","lead","getSelectionLead","endPos","setSelectionRange","selectionScrollPos","setRange","isDark","cssClass","cssText","factory","allValues","Editor","_Component","htmlElementRef","jsonEditor","handleChange","setRef","componentDidMount","allowedModes","rest","createEditor","componentWillReceiveProps","shouldComponentUpdate","htmlElementProps","componentWillUnmount","innerRef","currentJson","React","Component","propTypes","PropTypes","oneOfType","bool","arrayOf","defaultProps"],"mappings":"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"}